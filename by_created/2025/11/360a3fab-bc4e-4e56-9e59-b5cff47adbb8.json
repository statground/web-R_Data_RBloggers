{
  "uuid": "360a3fab-bc4e-4e56-9e59-b5cff47adbb8",
  "created_at": "2025-11-22 19:58:42",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/05/rotation-with-modulo/",
    "crawled_at": "2025-11-22T10:49:32.419491",
    "external_links": [
      {
        "href": "https://jcarroll.com.au/2025/05/03/rotation-with-modulo/",
        "text": "rstats on Irregularly Scheduled Programming"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://mathstodon.xyz/@gregeganSF/114429919995214762",
        "text": "this toot from@gregeganSF"
      },
      {
        "href": "https://mathstodon.xyz/@gregeganSF/114429919995214762",
        "text": "Post by@gregeganSF@mathstodon.xyzView on Mastodon"
      },
      {
        "href": "https://github.com/jonocarroll/vec",
        "text": "{vec}"
      },
      {
        "href": "https://tryapl.org/?clear&q=rot%E2%86%90%7B(%C2%AF1%2B10*%E2%89%A2%E2%8D%95%E2%8D%B5)%7C%E2%8D%B5%C3%9710*%E2%8D%BA%7D%0A%20%20%20%20%20%203%20rot%2012345&run",
        "text": "Try it out yourself!"
      },
      {
        "href": "https://exercism.org/tracks/uiua/",
        "text": "Exercism track"
      },
      {
        "href": "https://uiua.org/pad?src=0_16_0-dev_2__MyAxMjM0NQrLnOKXv-KKmSgtMcuc4oG_MTDijIjigpnigoHigoAp4oq4w5fLnOKBvzEwCg==",
        "text": "Try it out yourself!"
      },
      {
        "href": "https://fosstodon.org/@jonocarroll",
        "text": "Mastodon"
      },
      {
        "href": "https://jcarroll.com.au/2025/05/03/rotation-with-modulo/",
        "text": "rstats on Irregularly Scheduled Programming"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Rotation with Modulo | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/jonathan-carroll/",
        "text": "Jonathan Carroll"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-392237 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Rotation with Modulo</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">May 2, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/jonathan-carroll/\">Jonathan Carroll</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://jcarroll.com.au/2025/05/03/rotation-with-modulo/\"> rstats on Irregularly Scheduled Programming</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47--><p>How well do you know your fundamental operators in different languages? ‘Easy’\nexamples help to fortify that knowledge, and comparing across languages makes\nfor some neat implementation detail discoveries.</p>\n<p>I saw <a href=\"https://mathstodon.xyz/@gregeganSF/114429919995214762\" rel=\"nofollow\" target=\"_blank\">this toot from <code>@gregeganSF</code></a> on Mastodon</p>\n<blockquote class=\"mastodon-embed\" data-embed-url=\"https://mathstodon.xyz/@gregeganSF/114429919995214762/embed\" style=\"background: #FCF8FF; border-radius: 8px; border: 1px solid #C9C4DA; margin: 0; max-width: 540px; min-width: 270px; overflow: hidden; padding: 0;\">\n<a href=\"https://mathstodon.xyz/@gregeganSF/114429919995214762\" rel=\"nofollow\" style=\"align-items: center; color: #1C1A25; display: flex; flex-direction: column; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', Roboto, sans-serif; font-size: 14px; justify-content: center; letter-spacing: 0.25px; line-height: 20px; padding: 24px; text-decoration: none;\" target=\"_blank\"> <svg height=\"32\" viewbox=\"0 0 79 75\" width=\"32\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><path d=\"M74.7135 16.6043C73.6199 8.54587 66.5351 2.19527 58.1366 0.964691C56.7196 0.756754 51.351 0 38.9148 0H38.822C26.3824 0 23.7135 0.756754 22.2966 0.964691C14.1319 2.16118 6.67571 7.86752 4.86669 16.0214C3.99657 20.0369 3.90371 24.4888 4.06535 28.5726C4.29578 34.4289 4.34049 40.275 4.877 46.1075C5.24791 49.9817 5.89495 53.8251 6.81328 57.6088C8.53288 64.5968 15.4938 70.4122 22.3138 72.7848C29.6155 75.259 37.468 75.6697 44.9919 73.971C45.8196 73.7801 46.6381 73.5586 47.4475 73.3063C49.2737 72.7302 51.4164 72.086 52.9915 70.9542C53.0131 70.9384 53.0308 70.9178 53.0433 70.8942C53.0558 70.8706 53.0628 70.8445 53.0637 70.8179V65.1661C53.0634 65.1412 53.0574 65.1167 53.0462 65.0944C53.035 65.0721 53.0189 65.0525 52.9992 65.0371C52.9794 65.0218 52.9564 65.011 52.9318 65.0056C52.9073 65.0002 52.8819 65.0003 52.8574 65.0059C48.0369 66.1472 43.0971 66.7193 38.141 66.7103C29.6118 66.7103 27.3178 62.6981 26.6609 61.0278C26.1329 59.5842 25.7976 58.0784 25.6636 56.5486C25.6622 56.5229 25.667 56.4973 25.6775 56.4738C25.688 56.4502 25.7039 56.4295 25.724 56.4132C25.7441 56.397 25.7678 56.3856 25.7931 56.3801C25.8185 56.3746 25.8448 56.3751 25.8699 56.3816C30.6101 57.5151 35.4693 58.0873 40.3455 58.086C41.5183 58.086 42.6876 58.086 43.8604 58.0553C48.7647 57.919 53.9339 57.6701 58.7591 56.7361C58.8794 56.7123 58.9998 56.6918 59.103 56.6611C66.7139 55.2124 73.9569 50.665 74.6929 39.1501C74.7204 38.6967 74.7892 34.4016 74.7892 33.9312C74.7926 32.3325 75.3085 22.5901 74.7135 16.6043ZM62.9996 45.3371H54.9966V25.9069C54.9966 21.8163 53.277 19.7302 49.7793 19.7302C45.9343 19.7302 44.0083 22.1981 44.0083 27.0727V37.7082H36.0534V27.0727C36.0534 22.1981 34.124 19.7302 30.279 19.7302C26.8019 19.7302 25.0651 21.8163 25.0617 25.9069V45.3371H17.0656V25.3172C17.0656 21.2266 18.1191 17.9769 20.2262 15.568C22.3998 13.1648 25.2509 11.9308 28.7898 11.9308C32.8859 11.9308 35.9812 13.492 38.0447 16.6111L40.036 19.9245L42.0308 16.6111C44.0943 13.492 47.1896 11.9308 51.2788 11.9308C54.8143 11.9308 57.6654 13.1648 59.8459 15.568C61.9529 17.9746 63.0065 21.2243 63.0065 25.3172L62.9996 45.3371Z\" fill=\"currentColor\"></path></svg>\n<div style=\"color: #787588; margin-top: 16px;\">\nPost by <span class=\"citation\">@gregeganSF</span><span class=\"citation\">@mathstodon.xyz</span>\n</div>\n<div style=\"font-weight: 500;\">\nView on Mastodon\n</div>\n</a>\n</blockquote>\n\n<p>which says</p>\n<blockquote>\n<p>To rotate a j-digit number n by k digits, if n≠10^j-1 there is a simple formula:</p>\n<p>rot(n,j,k) = (n*10^k) mod (10^j-1)</p>\n<p>e.g. 1234 * 100 mod 9999 = 3412</p>\n<p>Why? The mod subtracts (10^j-1) times the leftmost k digits of n*10^k, removing them from the left and adding them on the right.</p>\n</blockquote>\n<p>and my first thought was “ooh, that’s cool”, but my second thought was “I’m\ngoing to implement this in a bunch of languages!”. Sure, it’s a very small bit\nof math to implement without any particular sharp edges of iteration/recursion,\nbut that means I’ll be working with some basic functionality and I believe it’s\nvery important to have that locked in comfortably. Let’s see how it goes!</p>\n<p>I’m not aware of a “name” for this as such. Writing it out a little more styled</p>\n<p><span class=\"math display\">\\[\nrot(n, j, k) = (n\\times10^k)\\ \\%\\ (10^j-1)\n\\]</span></p>\n<p>it looks like I’ll just need a ‘power’ and a ‘modulo’. The <span class=\"math inline\">\\(j\\)</span> there is the\nnumber of digits in <span class=\"math inline\">\\(n\\)</span> and sure, we could count that ourselves and pass it as\nan argument, but even better might be to calculate it as well. That means\nfiguring out how many digits are in a number.</p>\n<p>As always, my go-to is R, so let’s start there.</p>\n<div class=\"section level2\" id=\"r\">\n<h2>R</h2>\n<p>In R the power operator is <code>^</code>. Also <code>**</code>, but that’s almost never used –\nthere’s even a note about that in the documentation</p>\n<blockquote>\n<p><code>**</code> is translated in the parser to <code>^</code>, but this was undocumented for many years.</p>\n</blockquote>\n<p>Modulo is <code>%%</code> which I can <em>never</em> remember because it’s similar to integer\ndivision which is <code>%/%</code>.</p>\n<p>To get the number of digits we can use the fact that <code>nchar()</code> will first convert\nits input into a character vector, so <code>12345</code> becomes <code>\"12345\"</code> and thus the\nnumber of characters of that is the number of digits. If that wasn’t the case\nI could still do</p>\n<pre>ceiling(log10(314159))\n## [1] 6</pre>\n<p>but the <code>nchar()</code> approach seems fine. Putting those pieces together into a\nfunction which takes the number and how many places to move it, I get</p>\n<pre>rot &lt;- function(n, k) {\n  (n*10^k) %% (10^nchar(n)-1)\n}\nrot(12345, 3)\n## [1] 45123</pre>\n<p>You can see that the values are ‘rotated’ cyclically by 3 places (to the left).</p>\n<p>R doesn’t have a built-in way to achieve this even for a vector of values\n(rotating ‘digits’ of an integer is a toy problem that is unlikely to actually\ncome up in real situations). One solution is my\n<a href=\"https://github.com/jonocarroll/vec\" rel=\"nofollow\" target=\"_blank\">{vec}</a> package which does implement a\nring-buffer sort of effect for vectors</p>\n<pre># remotes::install_github(\"jonocarroll/vec\")\nlibrary(vec)\nv &lt;- as_vec(1:5)\nrotate(v, 3)\n## [1] 4 5 1 2 3</pre>\n<p>Under the hood this uses modulo on the <em>indices</em></p>\n<pre>x &lt;- 1:5; n &lt;- 3\nx[(((n - 1 + seq_along(x)) %% length(x))) + 1]\n## [1] 4 5 1 2 3</pre>\n<p>One extra feature of this is it also takes negative values to shift the other way</p>\n<pre>rotate(v, -3)\n## [1] 3 4 5 1 2</pre>\n<p>whereas the <code>rot()</code> implementation above can’t.</p>\n</div>\n<div class=\"section level2\" id=\"julia\">\n<h2>Julia</h2>\n<p>As is almost always the case, the Julia functionality looks closer to what one\nmight “expect” from translating maths or stats; the power operator remains <code>^</code>,\nbut the modulo operator is a more familiar <code>%</code>. There is an actual <code>ndigits()</code>\nfunction to get the number of digits which, as far as I can tell from the source,\ndoesn’t first convert to character. The examples for that function do highlight\na failing of the R approach - if a value is negative then <code>as.character()</code> will\nproduce the wrong number of digits. In R:</p>\n<pre>as.character(-1234)\n## [1] \"-1234\"\nnchar(-1234)\n## [1] 5</pre>\n<p>while in Julia</p>\n<pre>ndigits(-1234)\n## 4</pre>\n<p>We’re not dealing with negatives here, but that’s certainly a gotcha.</p>\n<p>Implementing the Julia function can be done in a single line so no need for a\n<code>function</code> keyword</p>\n<pre>rot(n,k) = (n*10^k) % (10^ndigits(n)-1)\n## rot (generic function with 1 method)\nrot(12345, 3)\n## 45123</pre>\n<p>If we <em>were</em> working with vectors, Julia also has a built-in way to do the\ncyclic rotation, though it seems to shift in the opposite direction</p>\n<pre>x = [1, 2, 3, 4, 5]\n## 5-element Vector{Int64}:\n##  1\n##  2\n##  3\n##  4\n##  5\ncircshift(x, -3)\n## 5-element Vector{Int64}:\n##  4\n##  5\n##  1\n##  2\n##  3\ncircshift(x, 3)\n## 5-element Vector{Int64}:\n##  3\n##  4\n##  5\n##  1\n##  2</pre>\n<p>Here ends the Algol-language portion of the post, and I’ll move on to some\nlanguages where these operations are even more fundamental…</p>\n</div>\n<div class=\"section level2\" id=\"apl\">\n<h2>APL</h2>\n<p>When I see ‘straightforward’ math operations on numbers I now think APL because\nthat’s what it was originally built for and it works so very well; each math\noperation you could perform on an array of values has a ‘glyph’ representing it\nso should be a better ‘translation’ of the math on a blackboard directly to code.</p>\n<p>One thing R users will immediately recognise is the assignment glyph <code>←</code>; yes\nthat’s a single glyph, not R’s <code>&lt;-</code>, but it works the same as in R.</p>\n<p>You’re probably familiar with the multiplication glyph <code>×</code> and addition <code>+</code>.\nThe power/exponentiation glyph is <code>*</code>. Nothing too surprising there, I hope.</p>\n<p>Because <code>-</code> is the ‘subtract’ operation, there’s a distinct glyph for ‘negative’\n<code>¯</code> (a raised hyphen) so it isn’t confused with subtraction. Modulo takes some\nmore inspiration from math and is <code>|</code>. The only other potentially confusing\nglyphs are length <code>≢</code> and format <code>⍕</code> which, when combined, do something very\nsimilar to R’s “how many characters does this use?”. Again the ‘negative number’\nproblem is here, but we’re not worried about that in this case.</p>\n<p>Putting those pieces together requires knowing that APL evaluates right-to-left,\nwith the argument to the right of an operator in a “function” being denoted by\nomega (<code>⍵</code>) and the one to the left being alpha (<code>⍺</code>). The function I came up\nwith looks like this</p>\n<pre>    rot←{(¯1+10*≢⍕⍵)|⍵×10*⍺}</pre>\n<p>It’s entirely possible that it can be shortened or improved; I have a tendency\nto overlook where parentheses are really required and opportunities for\nsimplification. Nonetheless, if you read from right-to-left it spells out the\ncalculation we want. Applying it to some value means placing it between its two\narguments</p>\n<pre>    3 rot 12345\n45123</pre>\n<p><a href=\"https://tryapl.org/?clear&amp;q=rot%E2%86%90%7B(%C2%AF1%2B10*%E2%89%A2%E2%8D%95%E2%8D%B5)%7C%E2%8D%B5%C3%9710*%E2%8D%BA%7D%0A%20%20%20%20%20%203%20rot%2012345&amp;run\" rel=\"nofollow\" target=\"_blank\">Try it out yourself!</a></p>\n<p>Most of the difficulty I faced when building this was dealing with order-of-operations\nwhich need to be right-to-left. There are ways to ‘swap’ the order of arguments\nto a function (such as modulo) to make it read more similarly to the hand-written\nexpression, but I both couldn’t get that to produce the right answer and didn’t\nfeel it was necessary.</p>\n<p>In terms of working with vectors, that’s where APL shines. There is a rotate\nglyph <code>⌽</code> which when given just one argument reverses a vector, but with a second\nargument does exactly what we want; rotates by that many places</p>\n<pre>    x←1 2 3 4 5\n    3 ⌽ x\n4 5 1 2 3</pre>\n<p>If you don’t look too closely at the <em>type</em> of the data, we can use this to rotate\na string made of character digits by again using format <code>⍕</code> to make a vector of\ncharacters from the number</p>\n<pre>    3 ⌽ ⍕12345\n45123</pre>\n<p>(the whitespace here is purely for demonstration; <code>3⌽⍕12345</code> works just the same).</p>\n</div>\n<div class=\"section level1\" id=\"uiua\">\n<h1>Uiua</h1>\n<p>Uiua is a much newer language that has a lot of support for operating on data,\nbut it behaves differently to all of the above; it’s a stack-based language so\nyou work with data on a stack, not as variables. I’ve played around with it and\nreally enjoy working with it - there’s even an\n<a href=\"https://exercism.org/tracks/uiua/\" rel=\"nofollow\" target=\"_blank\">Exercism track</a> now - but in trying\nto write this solution I realised that I’d only ever worked with one ‘thing’ on\nthe stack, even if that was an entire vector of values. This problem invites us\nto work with a value to be rotated <em>and</em> how many places to rotate it; that\nmeant I learned a <em>lot</em> about figuring out which value from the stack I want.</p>\n<p>Entering operators into Uiua is greatly eased by having translation and\nauto-complete; you don’t have to figure out how to type <code>◿</code> you can start typing\n<code>mod</code> and as long as it’s a unique completion, Uiua will convert it to the\nappropriate glyph. Additionally, there are some formatting tricks such as taking\na double-underscore suffix to a function to make a combined glyph with a preset\nvalue; <code>log__10</code> translates to <code>ₙ₁₀</code>.</p>\n<p>The operators I need here are modulo <code>◿</code>, multiply <code>×</code>, power <code>ⁿ</code>, log10 <code>ₙ₁₀</code>,\nceiling <code>⌈</code>, and subtract <code>-</code>, with the additional dip <code>⊙</code> to use the second\nvalue on the stack, and backward <code>˜</code> to swap the arguments of modulo. I couldn’t\nimmediately think of a way to cleanly get the number of digits of a value (I did\nlater, which I’ll come back to) so I went the <code>log10</code> route and my solution is\n(again, right-to-left)</p>\n<pre>3 12345\n˜◿⊙(-1˜ⁿ10⌈ₙ₁₀)⊸×˜ⁿ10\n45123</pre>\n<p><a href=\"https://uiua.org/pad?src=0_16_0-dev_2__MyAxMjM0NQrLnOKXv-KKmSgtMcuc4oG_MTDijIjigpnigoHigoAp4oq4w5fLnOKBvzEwCg==\" rel=\"nofollow\" target=\"_blank\">Try it out yourself!</a></p>\n<p>Working with vectors is much cleaner here, too, and there’s a simple rotate <code>↻</code>\nthat does the same as APL</p>\n<pre>↻ 3 [1 2 3 4 5]\n[4 5 1 2 3]</pre>\n<p>Reading this, the vector is placed on the stack, then the value 3 is put on the\ntop of the stack, then rotate takes two values from the stack and performs that\noperation, leaving one value (the result) on the stack.</p>\n<p>Uiua also has a really cool feature of “undoing” an operation, where the inverse\ncan be calculated. If I wanted to turn a string into a number I would use parse\n<code>⋕</code> and I can do the opposite by prefixing it with un <code>°</code> to make “unparse”\nwhich converts a number to a string. Since a string is just a vector of\ncharacters (in this case digits) the rotate works naturally, albeit returning a\nstring</p>\n<pre>↻ 3 °⋕ 12345\n\"45123\"</pre>\n<p>Uiua goes one step further with an under <code>⍜</code> which takes some value, performs\nsome transformation, applies a function, then <em>undoes</em> that transformation. In my\ncase, I want to “unparse then re-parse” which seems like a great fit for this</p>\n<pre>⍜°⋕(↻ 3) 12345\n45123</pre>\n<p>and returns a number again, because under applies the back-transformation of parse.</p>\n<p>The unparse <code>°⋕</code> is recognised as a compound and is passed as the first argument\nto under, while I need the rotate and 3 to go together with parentheses. If I\nalways wanted to shift by 3 places I could use the double underscore to ‘attach’\nthe <code>3</code> to the rotate producing <code>rotate__3</code> <code>↻₃</code> but what I have above allows for\nchanging that number.</p>\n<p>Looking into it this way, it’s more obvious that I could get the number of digits\nwith <code>lengthunparse</code> as <code>⧻°⋕</code>, but exploring how to go the long way around was\nentirely worthwhile, and not necessarily longer with <code>ceilinglog__10</code> as <code>⌈ₙ₁₀</code>.</p>\n<hr/>\n<p>I knew I’d find lots of interesting things when I saw this and I was right - just\nspending the time going through the documentation of these ‘basic’ functions\nreminded me of things I’ve forgotten and some new things I don’t think I knew\nbefore.</p>\n<p>I’d love to hear what people think about these comparisons - are there points I’ve\noverlooked? Better ways to do it? Different functions in some other languages?\nConsiderations I’ve missed? As always, I can be found on\n<a href=\"https://fosstodon.org/@jonocarroll\" rel=\"nofollow\" target=\"_blank\">Mastodon</a> and the comment section below.</p>\n<br/>\n<details>\n<summary>\n<tt>devtools::session_info()</tt>\n</summary>\n<pre>## ─ Session info ───────────────────────────────────────────────────────────────\n##  setting  value\n##  version  R version 4.4.1 (2024-06-14)\n##  os       macOS 15.4.1\n##  system   aarch64, darwin20\n##  ui       X11\n##  language (EN)\n##  collate  en_US.UTF-8\n##  ctype    en_US.UTF-8\n##  tz       Australia/Adelaide\n##  date     2025-05-03\n##  pandoc   3.4 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/aarch64/ (via rmarkdown)\n## \n## ─ Packages ───────────────────────────────────────────────────────────────────\n##  package     * version    date (UTC) lib source\n##  blogdown      1.19       2024-02-01 [1] CRAN (R 4.4.0)\n##  bookdown      0.41       2024-10-16 [1] CRAN (R 4.4.1)\n##  bslib         0.8.0      2024-07-29 [1] CRAN (R 4.4.0)\n##  cachem        1.1.0      2024-05-16 [1] CRAN (R 4.4.0)\n##  cli           3.6.4      2025-02-13 [1] CRAN (R 4.4.1)\n##  devtools      2.4.5      2022-10-11 [1] CRAN (R 4.4.0)\n##  digest        0.6.37     2024-08-19 [1] CRAN (R 4.4.1)\n##  ellipsis      0.3.2      2021-04-29 [1] CRAN (R 4.4.0)\n##  evaluate      1.0.3      2025-01-10 [1] CRAN (R 4.4.1)\n##  fastmap       1.2.0      2024-05-15 [1] CRAN (R 4.4.0)\n##  fs            1.6.5      2024-10-30 [1] CRAN (R 4.4.1)\n##  glue          1.8.0      2024-09-30 [1] CRAN (R 4.4.1)\n##  htmltools     0.5.8.1    2024-04-04 [1] CRAN (R 4.4.0)\n##  htmlwidgets   1.6.4      2023-12-06 [1] CRAN (R 4.4.0)\n##  httpuv        1.6.15     2024-03-26 [1] CRAN (R 4.4.0)\n##  jquerylib     0.1.4      2021-04-26 [1] CRAN (R 4.4.0)\n##  jsonlite      2.0.0      2025-03-27 [1] CRAN (R 4.4.1)\n##  JuliaCall     0.17.6     2024-12-07 [1] CRAN (R 4.4.1)\n##  knitr         1.48       2024-07-07 [1] CRAN (R 4.4.0)\n##  later         1.4.1      2024-11-27 [1] CRAN (R 4.4.1)\n##  lifecycle     1.0.4      2023-11-07 [1] CRAN (R 4.4.0)\n##  magrittr      2.0.3      2022-03-30 [1] CRAN (R 4.4.0)\n##  memoise       2.0.1      2021-11-26 [1] CRAN (R 4.4.0)\n##  mime          0.12       2021-09-28 [1] CRAN (R 4.4.0)\n##  miniUI        0.1.1.1    2018-05-18 [1] CRAN (R 4.4.0)\n##  pkgbuild      1.4.7      2025-03-24 [1] CRAN (R 4.4.1)\n##  pkgload       1.4.0      2024-06-28 [1] CRAN (R 4.4.0)\n##  profvis       0.4.0      2024-09-20 [1] CRAN (R 4.4.1)\n##  promises      1.3.2      2024-11-28 [1] CRAN (R 4.4.1)\n##  purrr         1.0.4      2025-02-05 [1] CRAN (R 4.4.1)\n##  R6            2.6.1      2025-02-15 [1] CRAN (R 4.4.1)\n##  Rcpp          1.0.14     2025-01-12 [1] CRAN (R 4.4.1)\n##  remotes       2.5.0      2024-03-17 [1] CRAN (R 4.4.1)\n##  rlang         1.1.5      2025-01-17 [1] CRAN (R 4.4.1)\n##  rmarkdown     2.28       2024-08-17 [1] CRAN (R 4.4.0)\n##  rstudioapi    0.17.1     2024-10-22 [1] CRAN (R 4.4.1)\n##  sass          0.4.9      2024-03-15 [1] CRAN (R 4.4.0)\n##  sessioninfo   1.2.2      2021-12-06 [1] CRAN (R 4.4.0)\n##  shiny         1.9.1      2024-08-01 [1] CRAN (R 4.4.0)\n##  urlchecker    1.0.1      2021-11-30 [1] CRAN (R 4.4.0)\n##  usethis       3.1.0.9000 2025-03-31 [1] Github (r-lib/usethis@a653d6e)\n##  vctrs         0.6.5      2023-12-01 [1] CRAN (R 4.4.0)\n##  vec         * 0.1.0      2025-01-07 [1] Github (jonocarroll/vec@595b07e)\n##  xfun          0.51       2025-02-19 [1] CRAN (R 4.4.1)\n##  xtable        1.8-4      2019-04-21 [1] CRAN (R 4.4.0)\n##  yaml          2.3.10     2024-07-26 [1] CRAN (R 4.4.0)\n## \n##  [1] /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library\n## \n## ──────────────────────────────────────────────────────────────────────────────</pre>\n</details>\n<p><br/></p>\n</div>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://jcarroll.com.au/2025/05/03/rotation-with-modulo/\"> rstats on Irregularly Scheduled Programming</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Rotation with Modulo\nPosted on\nMay 2, 2025\nby\nJonathan Carroll\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nrstats on Irregularly Scheduled Programming\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nHow well do you know your fundamental operators in different languages? ‘Easy’\nexamples help to fortify that knowledge, and comparing across languages makes\nfor some neat implementation detail discoveries.\nI saw\nthis toot from\n@gregeganSF\non Mastodon\nPost by\n@gregeganSF\n@mathstodon.xyz\nView on Mastodon\nwhich says\nTo rotate a j-digit number n by k digits, if n≠10^j-1 there is a simple formula:\nrot(n,j,k) = (n*10^k) mod (10^j-1)\ne.g. 1234 * 100 mod 9999 = 3412\nWhy? The mod subtracts (10^j-1) times the leftmost k digits of n*10^k, removing them from the left and adding them on the right.\nand my first thought was “ooh, that’s cool”, but my second thought was “I’m\ngoing to implement this in a bunch of languages!”. Sure, it’s a very small bit\nof math to implement without any particular sharp edges of iteration/recursion,\nbut that means I’ll be working with some basic functionality and I believe it’s\nvery important to have that locked in comfortably. Let’s see how it goes!\nI’m not aware of a “name” for this as such. Writing it out a little more styled\n\\[\nrot(n, j, k) = (n\\times10^k)\\ \\%\\ (10^j-1)\n\\]\nit looks like I’ll just need a ‘power’ and a ‘modulo’. The\n\\(j\\)\nthere is the\nnumber of digits in\n\\(n\\)\nand sure, we could count that ourselves and pass it as\nan argument, but even better might be to calculate it as well. That means\nfiguring out how many digits are in a number.\nAs always, my go-to is R, so let’s start there.\nR\nIn R the power operator is\n^\n. Also\n**\n, but that’s almost never used –\nthere’s even a note about that in the documentation\n**\nis translated in the parser to\n^\n, but this was undocumented for many years.\nModulo is\n%%\nwhich I can\nnever\nremember because it’s similar to integer\ndivision which is\n%/%\n.\nTo get the number of digits we can use the fact that\nnchar()\nwill first convert\nits input into a character vector, so\n12345\nbecomes\n\"12345\"\nand thus the\nnumber of characters of that is the number of digits. If that wasn’t the case\nI could still do\nceiling(log10(314159))\n## [1] 6\nbut the\nnchar()\napproach seems fine. Putting those pieces together into a\nfunction which takes the number and how many places to move it, I get\nrot <- function(n, k) {\n  (n*10^k) %% (10^nchar(n)-1)\n}\nrot(12345, 3)\n## [1] 45123\nYou can see that the values are ‘rotated’ cyclically by 3 places (to the left).\nR doesn’t have a built-in way to achieve this even for a vector of values\n(rotating ‘digits’ of an integer is a toy problem that is unlikely to actually\ncome up in real situations). One solution is my\n{vec}\npackage which does implement a\nring-buffer sort of effect for vectors\n# remotes::install_github(\"jonocarroll/vec\")\nlibrary(vec)\nv <- as_vec(1:5)\nrotate(v, 3)\n## [1] 4 5 1 2 3\nUnder the hood this uses modulo on the\nindices\nx <- 1:5; n <- 3\nx[(((n - 1 + seq_along(x)) %% length(x))) + 1]\n## [1] 4 5 1 2 3\nOne extra feature of this is it also takes negative values to shift the other way\nrotate(v, -3)\n## [1] 3 4 5 1 2\nwhereas the\nrot()\nimplementation above can’t.\nJulia\nAs is almost always the case, the Julia functionality looks closer to what one\nmight “expect” from translating maths or stats; the power operator remains\n^\n,\nbut the modulo operator is a more familiar\n%\n. There is an actual\nndigits()\nfunction to get the number of digits which, as far as I can tell from the source,\ndoesn’t first convert to character. The examples for that function do highlight\na failing of the R approach - if a value is negative then\nas.character()\nwill\nproduce the wrong number of digits. In R:\nas.character(-1234)\n## [1] \"-1234\"\nnchar(-1234)\n## [1] 5\nwhile in Julia\nndigits(-1234)\n## 4\nWe’re not dealing with negatives here, but that’s certainly a gotcha.\nImplementing the Julia function can be done in a single line so no need for a\nfunction\nkeyword\nrot(n,k) = (n*10^k) % (10^ndigits(n)-1)\n## rot (generic function with 1 method)\nrot(12345, 3)\n## 45123\nIf we\nwere\nworking with vectors, Julia also has a built-in way to do the\ncyclic rotation, though it seems to shift in the opposite direction\nx = [1, 2, 3, 4, 5]\n## 5-element Vector{Int64}:\n##  1\n##  2\n##  3\n##  4\n##  5\ncircshift(x, -3)\n## 5-element Vector{Int64}:\n##  4\n##  5\n##  1\n##  2\n##  3\ncircshift(x, 3)\n## 5-element Vector{Int64}:\n##  3\n##  4\n##  5\n##  1\n##  2\nHere ends the Algol-language portion of the post, and I’ll move on to some\nlanguages where these operations are even more fundamental…\nAPL\nWhen I see ‘straightforward’ math operations on numbers I now think APL because\nthat’s what it was originally built for and it works so very well; each math\noperation you could perform on an array of values has a ‘glyph’ representing it\nso should be a better ‘translation’ of the math on a blackboard directly to code.\nOne thing R users will immediately recognise is the assignment glyph\n←\n; yes\nthat’s a single glyph, not R’s\n<-\n, but it works the same as in R.\nYou’re probably familiar with the multiplication glyph\n×\nand addition\n+\n.\nThe power/exponentiation glyph is\n*\n. Nothing too surprising there, I hope.\nBecause\n-\nis the ‘subtract’ operation, there’s a distinct glyph for ‘negative’\n¯\n(a raised hyphen) so it isn’t confused with subtraction. Modulo takes some\nmore inspiration from math and is\n|\n. The only other potentially confusing\nglyphs are length\n≢\nand format\n⍕\nwhich, when combined, do something very\nsimilar to R’s “how many characters does this use?”. Again the ‘negative number’\nproblem is here, but we’re not worried about that in this case.\nPutting those pieces together requires knowing that APL evaluates right-to-left,\nwith the argument to the right of an operator in a “function” being denoted by\nomega (\n⍵\n) and the one to the left being alpha (\n⍺\n). The function I came up\nwith looks like this\nrot←{(¯1+10*≢⍕⍵)|⍵×10*⍺}\nIt’s entirely possible that it can be shortened or improved; I have a tendency\nto overlook where parentheses are really required and opportunities for\nsimplification. Nonetheless, if you read from right-to-left it spells out the\ncalculation we want. Applying it to some value means placing it between its two\narguments\n3 rot 12345\n45123\nTry it out yourself!\nMost of the difficulty I faced when building this was dealing with order-of-operations\nwhich need to be right-to-left. There are ways to ‘swap’ the order of arguments\nto a function (such as modulo) to make it read more similarly to the hand-written\nexpression, but I both couldn’t get that to produce the right answer and didn’t\nfeel it was necessary.\nIn terms of working with vectors, that’s where APL shines. There is a rotate\nglyph\n⌽\nwhich when given just one argument reverses a vector, but with a second\nargument does exactly what we want; rotates by that many places\nx←1 2 3 4 5\n    3 ⌽ x\n4 5 1 2 3\nIf you don’t look too closely at the\ntype\nof the data, we can use this to rotate\na string made of character digits by again using format\n⍕\nto make a vector of\ncharacters from the number\n3 ⌽ ⍕12345\n45123\n(the whitespace here is purely for demonstration;\n3⌽⍕12345\nworks just the same).\nUiua\nUiua is a much newer language that has a lot of support for operating on data,\nbut it behaves differently to all of the above; it’s a stack-based language so\nyou work with data on a stack, not as variables. I’ve played around with it and\nreally enjoy working with it - there’s even an\nExercism track\nnow - but in trying\nto write this solution I realised that I’d only ever worked with one ‘thing’ on\nthe stack, even if that was an entire vector of values. This problem invites us\nto work with a value to be rotated\nand\nhow many places to rotate it; that\nmeant I learned a\nlot\nabout figuring out which value from the stack I want.\nEntering operators into Uiua is greatly eased by having translation and\nauto-complete; you don’t have to figure out how to type\n◿\nyou can start typing\nmod\nand as long as it’s a unique completion, Uiua will convert it to the\nappropriate glyph. Additionally, there are some formatting tricks such as taking\na double-underscore suffix to a function to make a combined glyph with a preset\nvalue;\nlog__10\ntranslates to\nₙ₁₀\n.\nThe operators I need here are modulo\n◿\n, multiply\n×\n, power\nⁿ\n, log10\nₙ₁₀\n,\nceiling\n⌈\n, and subtract\n-\n, with the additional dip\n⊙\nto use the second\nvalue on the stack, and backward\n˜\nto swap the arguments of modulo. I couldn’t\nimmediately think of a way to cleanly get the number of digits of a value (I did\nlater, which I’ll come back to) so I went the\nlog10\nroute and my solution is\n(again, right-to-left)\n3 12345\n˜◿⊙(-1˜ⁿ10⌈ₙ₁₀)⊸×˜ⁿ10\n45123\nTry it out yourself!\nWorking with vectors is much cleaner here, too, and there’s a simple rotate\n↻\nthat does the same as APL\n↻ 3 [1 2 3 4 5]\n[4 5 1 2 3]\nReading this, the vector is placed on the stack, then the value 3 is put on the\ntop of the stack, then rotate takes two values from the stack and performs that\noperation, leaving one value (the result) on the stack.\nUiua also has a really cool feature of “undoing” an operation, where the inverse\ncan be calculated. If I wanted to turn a string into a number I would use parse\n⋕\nand I can do the opposite by prefixing it with un\n°\nto make “unparse”\nwhich converts a number to a string. Since a string is just a vector of\ncharacters (in this case digits) the rotate works naturally, albeit returning a\nstring\n↻ 3 °⋕ 12345\n\"45123\"\nUiua goes one step further with an under\n⍜\nwhich takes some value, performs\nsome transformation, applies a function, then\nundoes\nthat transformation. In my\ncase, I want to “unparse then re-parse” which seems like a great fit for this\n⍜°⋕(↻ 3) 12345\n45123\nand returns a number again, because under applies the back-transformation of parse.\nThe unparse\n°⋕\nis recognised as a compound and is passed as the first argument\nto under, while I need the rotate and 3 to go together with parentheses. If I\nalways wanted to shift by 3 places I could use the double underscore to ‘attach’\nthe\n3\nto the rotate producing\nrotate__3\n↻₃\nbut what I have above allows for\nchanging that number.\nLooking into it this way, it’s more obvious that I could get the number of digits\nwith\nlengthunparse\nas\n⧻°⋕\n, but exploring how to go the long way around was\nentirely worthwhile, and not necessarily longer with\nceilinglog__10\nas\n⌈ₙ₁₀\n.\nI knew I’d find lots of interesting things when I saw this and I was right - just\nspending the time going through the documentation of these ‘basic’ functions\nreminded me of things I’ve forgotten and some new things I don’t think I knew\nbefore.\nI’d love to hear what people think about these comparisons - are there points I’ve\noverlooked? Better ways to do it? Different functions in some other languages?\nConsiderations I’ve missed? As always, I can be found on\nMastodon\nand the comment section below.\ndevtools::session_info()\n## ─ Session info ───────────────────────────────────────────────────────────────\n##  setting  value\n##  version  R version 4.4.1 (2024-06-14)\n##  os       macOS 15.4.1\n##  system   aarch64, darwin20\n##  ui       X11\n##  language (EN)\n##  collate  en_US.UTF-8\n##  ctype    en_US.UTF-8\n##  tz       Australia/Adelaide\n##  date     2025-05-03\n##  pandoc   3.4 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/aarch64/ (via rmarkdown)\n## \n## ─ Packages ───────────────────────────────────────────────────────────────────\n##  package     * version    date (UTC) lib source\n##  blogdown      1.19       2024-02-01 [1] CRAN (R 4.4.0)\n##  bookdown      0.41       2024-10-16 [1] CRAN (R 4.4.1)\n##  bslib         0.8.0      2024-07-29 [1] CRAN (R 4.4.0)\n##  cachem        1.1.0      2024-05-16 [1] CRAN (R 4.4.0)\n##  cli           3.6.4      2025-02-13 [1] CRAN (R 4.4.1)\n##  devtools      2.4.5      2022-10-11 [1] CRAN (R 4.4.0)\n##  digest        0.6.37     2024-08-19 [1] CRAN (R 4.4.1)\n##  ellipsis      0.3.2      2021-04-29 [1] CRAN (R 4.4.0)\n##  evaluate      1.0.3      2025-01-10 [1] CRAN (R 4.4.1)\n##  fastmap       1.2.0      2024-05-15 [1] CRAN (R 4.4.0)\n##  fs            1.6.5      2024-10-30 [1] CRAN (R 4.4.1)\n##  glue          1.8.0      2024-09-30 [1] CRAN (R 4.4.1)\n##  htmltools     0.5.8.1    2024-04-04 [1] CRAN (R 4.4.0)\n##  htmlwidgets   1.6.4      2023-12-06 [1] CRAN (R 4.4.0)\n##  httpuv        1.6.15     2024-03-26 [1] CRAN (R 4.4.0)\n##  jquerylib     0.1.4      2021-04-26 [1] CRAN (R 4.4.0)\n##  jsonlite      2.0.0      2025-03-27 [1] CRAN (R 4.4.1)\n##  JuliaCall     0.17.6     2024-12-07 [1] CRAN (R 4.4.1)\n##  knitr         1.48       2024-07-07 [1] CRAN (R 4.4.0)\n##  later         1.4.1      2024-11-27 [1] CRAN (R 4.4.1)\n##  lifecycle     1.0.4      2023-11-07 [1] CRAN (R 4.4.0)\n##  magrittr      2.0.3      2022-03-30 [1] CRAN (R 4.4.0)\n##  memoise       2.0.1      2021-11-26 [1] CRAN (R 4.4.0)\n##  mime          0.12       2021-09-28 [1] CRAN (R 4.4.0)\n##  miniUI        0.1.1.1    2018-05-18 [1] CRAN (R 4.4.0)\n##  pkgbuild      1.4.7      2025-03-24 [1] CRAN (R 4.4.1)\n##  pkgload       1.4.0      2024-06-28 [1] CRAN (R 4.4.0)\n##  profvis       0.4.0      2024-09-20 [1] CRAN (R 4.4.1)\n##  promises      1.3.2      2024-11-28 [1] CRAN (R 4.4.1)\n##  purrr         1.0.4      2025-02-05 [1] CRAN (R 4.4.1)\n##  R6            2.6.1      2025-02-15 [1] CRAN (R 4.4.1)\n##  Rcpp          1.0.14     2025-01-12 [1] CRAN (R 4.4.1)\n##  remotes       2.5.0      2024-03-17 [1] CRAN (R 4.4.1)\n##  rlang         1.1.5      2025-01-17 [1] CRAN (R 4.4.1)\n##  rmarkdown     2.28       2024-08-17 [1] CRAN (R 4.4.0)\n##  rstudioapi    0.17.1     2024-10-22 [1] CRAN (R 4.4.1)\n##  sass          0.4.9      2024-03-15 [1] CRAN (R 4.4.0)\n##  sessioninfo   1.2.2      2021-12-06 [1] CRAN (R 4.4.0)\n##  shiny         1.9.1      2024-08-01 [1] CRAN (R 4.4.0)\n##  urlchecker    1.0.1      2021-11-30 [1] CRAN (R 4.4.0)\n##  usethis       3.1.0.9000 2025-03-31 [1] Github (r-lib/usethis@a653d6e)\n##  vctrs         0.6.5      2023-12-01 [1] CRAN (R 4.4.0)\n##  vec         * 0.1.0      2025-01-07 [1] Github (jonocarroll/vec@595b07e)\n##  xfun          0.51       2025-02-19 [1] CRAN (R 4.4.1)\n##  xtable        1.8-4      2019-04-21 [1] CRAN (R 4.4.0)\n##  yaml          2.3.10     2024-07-26 [1] CRAN (R 4.4.0)\n## \n##  [1] /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library\n## \n## ──────────────────────────────────────────────────────────────────────────────\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nrstats on Irregularly Scheduled Programming\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "How well do you know your fundamental operators in different languages? ‘Easy’ examples help to fortify that knowledge, and comparing across languages makes for some neat implementation detail discoveries. I saw this toot from @gregeganSF on Mastodon ...",
    "meta_keywords": null,
    "og_description": "How well do you know your fundamental operators in different languages? ‘Easy’ examples help to fortify that knowledge, and comparing across languages makes for some neat implementation detail discoveries. I saw this toot from @gregeganSF on Mastodon ...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Rotation with Modulo | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 14,
    "sitemap_lastmod": null,
    "twitter_description": "How well do you know your fundamental operators in different languages? ‘Easy’ examples help to fortify that knowledge, and comparing across languages makes for some neat implementation detail discoveries. I saw this toot from @gregeganSF on Mastodon ...",
    "twitter_title": "Rotation with Modulo | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/05/rotation-with-modulo/",
    "word_count": 2791
  }
}