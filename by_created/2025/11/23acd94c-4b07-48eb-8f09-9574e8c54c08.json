{
  "uuid": "23acd94c-4b07-48eb-8f09-9574e8c54c08",
  "created_at": "2025-11-22 19:57:56",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/08/managing-remote-database-connections-from-quarto-documents/",
    "crawled_at": "2025-11-22T10:44:39.082962",
    "external_links": [
      {
        "href": "https://boyd.tarlinton.au/posts/remote_databases.html",
        "text": "Boyd Tarlinton"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://boyd.tarlinton.au/posts/remote_databases.html",
        "text": "Boyd Tarlinton"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Managing Remote Database Connections from Quarto Documents | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/boyd-tarlinton/",
        "text": "Boyd Tarlinton"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/cdn-cgi/l/email-protection",
        "text": "[email protected]"
      },
      {
        "href": "https://www.r-bloggers.com/cdn-cgi/l/email-protection",
        "text": "[email protected]"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-394661 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Managing Remote Database Connections from Quarto Documents</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">August 9, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/boyd-tarlinton/\">Boyd Tarlinton</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://boyd.tarlinton.au/posts/remote_databases.html\"> Boyd Tarlinton</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<p>R offers excellent facilities for working interactively with SQL databases on a remote server. It becomes more challenging to do so in a self-contained Quarto document, especially if you wish to be able to render it without running into errors. Fortunately, there are ways around these challenges.</p>\n<p>The first step is establishing an SSH connection with the remote server on which your database is running, allowing you to interact with the database as though it were running on your own device. In an interactive session you could use the following code to establish an SSH connection and open a tunnel. The <code>ssh_tunnel</code> function will run indefinitely, leaving you unable to execute other code, but you can open a second R session and communicate with the database in that second session.</p>\n<div class=\"cell\">\n<pre>```{r}\nsession &lt;- ssh::ssh_connect(\"<a class=\"__cf_email__\" data-cfemail=\"c6b3b5a3b4a8a7aba386b2a7b4a1a3b2b5a3b4b0a3b4e8a5a9ab\" href=\"/cdn-cgi/l/email-protection\">[email protected]</a>\")\nssh::ssh_tunnel(session, port = 3305, \n         target = \"localhost:3306\")\n```</pre>\n</div>\n<p>In the example above we map port 3306 on the remote server (the default port for MySQL) to port 3305 on our local machine. You will often want to use the same port on the local machine, but I find it is easier to keep track of examples where different values are used.</p>\n<p>In a Quarto document you will need to run the SSH tunnel in the background. This is made easy with the <code>callr</code> package. The example below will run the SSH tunnel in a separate background process.</p>\n<div class=\"cell\">\n<pre>```{r}\nrbg &lt;- callr::r_bg(\\() {\n  session &lt;- ssh::ssh_connect(\"<a class=\"__cf_email__\" data-cfemail=\"770204120519161a12370316051012030412050112055914181a\" href=\"/cdn-cgi/l/email-protection\">[email protected]</a>\")\n  ssh::ssh_tunnel(session, port = 3305, \n           target = \"localhost:3306\")\n})\n```</pre>\n</div>\n<p>You can now open a connection to the database as though it were running on your local machine on port 3305. Given that the SSH tunnel is opened in a separate process, I often find that if you attempt to connect to the database<br/>\ndirectly after opening the tunnel you will encounter an error. To prevent this, I use <code>Sys.sleep()</code> to add a delay and allow the SSH tunnel to finish connecting before establishing the connection to the database.</p>\n<p>It is easiest and safest to manage your database connections with a configuration file. Typically these are stored in a user directory, but I prefer to create them on a per-project basis.</p>\n<div class=\"code-with-filename\">\n<div class=\"code-with-filename-file\">\n<pre>.my.cnf</pre>\n</div>\n<pre>[groupname]\ndatabase=\"mydatabase\"\nhost=\"localhost\"\nport=\"3305\"\nuser=\"username\"\npassword=\"mypassword\"</pre>\n</div>\n<p>You can use the a conf file setup like above to connect to the database.</p>\n<div class=\"cell\">\n<pre>```{r}\ncon &lt;- DBI::dbConnect(RMySQL::MySQL(), \n                 group = \"groupname\", \n                 default.file = \".my.cnf\")\n```</pre>\n</div>\n<p>You can now access the database using <code>DBI</code> in R.</p>\n<p>If you are already an experienced SQL user, you can write SQL directly in Quarto using your established connection. The ability to switch between R, Python, and even Julia is marketed quite heavily by the Posit team, while this SQL functionality seems much more obscure.</p>\n<div class=\"cell\">\n<pre>```{sql}\n#| connection: \"con\"\nselect * from mytable;\n```</pre>\n</div>\n<p>You can even output of an SQL query to an R object, in this example named <code>df</code>, allowing you to seamlessly integrate SQL queries and R code.</p>\n<div class=\"cell\" data-output.var=\"df\">\n<pre>```{sql}\n#| connection: \"con\"\n#| output.var: \"df\"\nselect * from mytable;\n```</pre>\n</div>\n<p>You should now be set to query with confidence.</p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://boyd.tarlinton.au/posts/remote_databases.html\"> Boyd Tarlinton</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Managing Remote Database Connections from Quarto Documents\nPosted on\nAugust 9, 2025\nby\nBoyd Tarlinton\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nBoyd Tarlinton\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nR offers excellent facilities for working interactively with SQL databases on a remote server. It becomes more challenging to do so in a self-contained Quarto document, especially if you wish to be able to render it without running into errors. Fortunately, there are ways around these challenges.\nThe first step is establishing an SSH connection with the remote server on which your database is running, allowing you to interact with the database as though it were running on your own device. In an interactive session you could use the following code to establish an SSH connection and open a tunnel. The\nssh_tunnel\nfunction will run indefinitely, leaving you unable to execute other code, but you can open a second R session and communicate with the database in that second session.\n```{r}\nsession <- ssh::ssh_connect(\"\n[email protected]\n\")\nssh::ssh_tunnel(session, port = 3305, \n         target = \"localhost:3306\")\n```\nIn the example above we map port 3306 on the remote server (the default port for MySQL) to port 3305 on our local machine. You will often want to use the same port on the local machine, but I find it is easier to keep track of examples where different values are used.\nIn a Quarto document you will need to run the SSH tunnel in the background. This is made easy with the\ncallr\npackage. The example below will run the SSH tunnel in a separate background process.\n```{r}\nrbg <- callr::r_bg(\\() {\n  session <- ssh::ssh_connect(\"\n[email protected]\n\")\n  ssh::ssh_tunnel(session, port = 3305, \n           target = \"localhost:3306\")\n})\n```\nYou can now open a connection to the database as though it were running on your local machine on port 3305. Given that the SSH tunnel is opened in a separate process, I often find that if you attempt to connect to the database\ndirectly after opening the tunnel you will encounter an error. To prevent this, I use\nSys.sleep()\nto add a delay and allow the SSH tunnel to finish connecting before establishing the connection to the database.\nIt is easiest and safest to manage your database connections with a configuration file. Typically these are stored in a user directory, but I prefer to create them on a per-project basis.\n.my.cnf\n[groupname]\ndatabase=\"mydatabase\"\nhost=\"localhost\"\nport=\"3305\"\nuser=\"username\"\npassword=\"mypassword\"\nYou can use the a conf file setup like above to connect to the database.\n```{r}\ncon <- DBI::dbConnect(RMySQL::MySQL(), \n                 group = \"groupname\", \n                 default.file = \".my.cnf\")\n```\nYou can now access the database using\nDBI\nin R.\nIf you are already an experienced SQL user, you can write SQL directly in Quarto using your established connection. The ability to switch between R, Python, and even Julia is marketed quite heavily by the Posit team, while this SQL functionality seems much more obscure.\n```{sql}\n#| connection: \"con\"\nselect * from mytable;\n```\nYou can even output of an SQL query to an R object, in this example named\ndf\n, allowing you to seamlessly integrate SQL queries and R code.\n```{sql}\n#| connection: \"con\"\n#| output.var: \"df\"\nselect * from mytable;\n```\nYou should now be set to query with confidence.\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nBoyd Tarlinton\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "R offers excellent facilities for working interactively with SQL databases on a remote server. It becomes more challenging to do so in a self-contained Quarto document, especially if you wish to be able to render it without running into errors. F...",
    "meta_keywords": null,
    "og_description": "R offers excellent facilities for working interactively with SQL databases on a remote server. It becomes more challenging to do so in a self-contained Quarto document, especially if you wish to be able to render it without running into errors. F...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Managing Remote Database Connections from Quarto Documents | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 3.3,
    "sitemap_lastmod": null,
    "twitter_description": "R offers excellent facilities for working interactively with SQL databases on a remote server. It becomes more challenging to do so in a self-contained Quarto document, especially if you wish to be able to render it without running into errors. F...",
    "twitter_title": "Managing Remote Database Connections from Quarto Documents | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/08/managing-remote-database-connections-from-quarto-documents/",
    "word_count": 651
  }
}