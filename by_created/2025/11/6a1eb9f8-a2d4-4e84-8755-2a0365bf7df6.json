{
  "uuid": "6a1eb9f8-a2d4-4e84-8755-2a0365bf7df6",
  "created_at": "2025-11-17 20:40:27",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2009/08/formatting-decimals-in-texts-with-r/",
    "crawled_at": "2025-11-17T10:27:14.639874",
    "external_links": [
      {
        "href": "http://yihui.name/en/2009/08/formatting-decimals-in-texts-with-r/",
        "text": "Keep on Fighting! » R Language"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "http://yihui.name/en/2009/08/formatting-decimals-in-texts-with-r/",
        "text": "Y"
      },
      {
        "href": "http://cos.name/bbs/read.php?tid=16247",
        "text": "Chinese COS forum"
      },
      {
        "href": "http://yihui.name/en/2009/06/simulation-of-burning-fire-in-r/",
        "text": "Simulation of Burning Fire in R"
      },
      {
        "href": "http://yihui.name/en/2007/09/r-language-definition-file-for-highlight/",
        "text": "R Language Definition File for “Highlight”"
      },
      {
        "href": "http://yihui.name/en/2009/08/formatting-decimals-in-texts-with-r/",
        "text": "Keep on Fighting! » R Language"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Formatting Decimals in Texts with R | R-bloggers",
    "images": [
      {
        "alt": "o:-)",
        "base64": null,
        "src": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/face-angel1.png?w=578"
      },
      {
        "alt": "o:-)",
        "base64": null,
        "src": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/face-angel1.png?w=578"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/yihui-xie/",
        "text": "Yihui Xie"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/tag/capital-of-statistics/",
        "text": "Capital of Statistics"
      },
      {
        "href": "https://www.r-bloggers.com/tag/formatc/",
        "text": "formatC()"
      },
      {
        "href": "https://www.r-bloggers.com/tag/gregexpr/",
        "text": "gregexpr()"
      },
      {
        "href": "https://www.r-bloggers.com/tag/r-programming/",
        "text": "R Programming"
      },
      {
        "href": "https://www.r-bloggers.com/tag/regular-expression/",
        "text": "Regular Expression"
      },
      {
        "href": "https://www.r-bloggers.com/tag/round/",
        "text": "round()"
      },
      {
        "href": "https://www.r-bloggers.com/tag/sapply/",
        "text": "sapply()"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-108 post type-post status-publish format-standard hentry category-r-bloggers tag-capital-of-statistics tag-formatc tag-gregexpr tag-r-programming tag-regular-expression tag-round tag-sapply\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Formatting Decimals in Texts with R</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">August 30, 2009</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/yihui-xie/\">Yihui Xie</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"http://yihui.name/en/2009/08/formatting-decimals-in-texts-with-r/\"> Keep on Fighting! » R Language</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0--><p><a href=\"http://yihui.name/en/2009/08/formatting-decimals-in-texts-with-r/\" rel=\"nofollow\" target=\"_blank\"><span class=\"dropcap-red\">Y</span></a>anping Chen raised a question in the <a href=\"http://cos.name/bbs/read.php?tid=16247\" rel=\"nofollow\" target=\"_blank\">Chinese COS forum</a> on the output of Eviews: how to (re)format the decimal coefficients in equations as text output? For example, we want to round the numbers in <code>CC = 16.5547557654 + 0.0173022117998*PP + 0.216234040485 * PP(-1) + 0.810182697599 * (WP + WG)</code> to the 3rd decimal places. This can be simply done by regular expressions, as decimals always begin with a “<code>.</code>”. The basic steps are:</p>\n<ol>\n<li>find out where are the decimals in the character string;</li>\n<li>format them;</li>\n<li>replace the original decimals with formatted values;</li>\n</ol>\n<p>Given a character vector, we can format the decimals with the code below:<span id=\"more-285\"></span></p>\n<pre># x: equations; FUN: formatting function; ...: passed to FUN\ncoefFormat = function(x, FUN, ...) {\n    sapply(x, function(s) {\n        dig = sapply(gregexpr(\"\\.[0-9]+\", s), function(m) {\n            sapply(seq(along = m), function(i) {\n                substr(s, m[i], m[i] + attr(m, \"match.length\")[i] - 1)\n            })\n        })\n        for (j in {\n            if (is.null(dim(dig)))\n                NULL\n            else 1:dim(dig)[1]\n        }) {\n            s = sub(dig[j, 1], substring(FUN(as.numeric(dig[j, 1]), ...),\n                2), s, fixed = TRUE)\n        }\n        s\n    })\n}</pre>\n<p>I used <code>sapply()</code> for 3 times to avoid explicit loops but consequently the code might be difficult to read. The critical part is the regular expression “<code>\\.[0-9]+</code>” which means one of more (controlled by “<code>+</code>” after “<code>[0-9]</code>”) digits (“<code>[0-9]</code>” or “<code>[:digit:]</code>”) after a decimal point “<code>.</code>”. As “<code>.</code>” is a <em>metacharacter</em> in regular expressions, we need to use a backslash before it, and again, “” is a special character in R, so we need another backslash to denote a backslash. <img alt=\"o:-)\" class=\"wp-smiley jetpack-lazy-image\" data-lazy-src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/face-angel1.png?w=578&amp;is-pending-load=1\" data-recalc-dims=\"1\" src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/face-angel1.png?w=578\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"/><noscript><img alt=\"o:-)\" class=\"wp-smiley\" data-recalc-dims=\"1\" src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/face-angel1.png?w=578\"/></noscript> </p>\n<pre>x = readLines(zz &lt;- textConnection(\n\"CC = 16.5547557654 + 0.0173022117998 * PP + 0.216234040485 * PP(-1) + 0.810182697599 * (WP + WG)\n\nII = 20.2782089394 + 0.150221823899 * PP + 0.61594357734 * PP(-1) - 0.157787636546 * KK\n\nWP = 1.50029688603 + C(10) * XX + 0.146673821502 * XX(-1) + 0.130395687204 * AA\n\"))\nclose(zz)\n\nwriteLines(coefFormat(x, round, digits = 3))\n#  CC = 16.555 + 0.017 * PP + 0.216 * PP(-1) + 0.81 * (WP + WG)\n#\n#  II = 20.278 + 0.15 * PP + 0.616 * PP(-1) - 0.158 * KK\n#\n#  WP = 1.5 + C(10) * XX + 0.147 * XX(-1) + 0.13 * AA\n#\nwriteLines(coefFormat(x, formatC, digits = 3, format = \"f\"))\n#  CC = 16.555 + 0.017 * PP + 0.216 * PP(-1) + 0.810 * (WP + WG)\n#  \n#  II = 20.278 + 0.150 * PP + 0.616 * PP(-1) - 0.158 * KK\n#  \n#  WP = 1.500 + C(10) * XX + 0.147 * XX(-1) + 0.130 * AA\n#</pre>\n<h2 class=\"related_post_title\">Related Posts</h2><ul class=\"related_post\"><li><a href=\"http://yihui.name/en/2009/06/simulation-of-burning-fire-in-r/\" rel=\"nofollow\" target=\"_blank\" title=\"Simulation of Burning Fire in R\">Simulation of Burning Fire in R</a></li><li><a href=\"http://yihui.name/en/2007/09/r-language-definition-file-for-highlight/\" rel=\"nofollow\" target=\"_blank\" title=\"R Language Definition File for “Highlight”\">R Language Definition File for “Highlight”</a></li></ul>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://yihui.name/en/2009/08/formatting-decimals-in-texts-with-r/\"> Keep on Fighting! » R Language</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n<div class=\"post-tags clearfix\"><ul><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/capital-of-statistics/\" rel=\"tag\">Capital of Statistics</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/formatc/\" rel=\"tag\">formatC()</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/gregexpr/\" rel=\"tag\">gregexpr()</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/r-programming/\" rel=\"tag\">R Programming</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/regular-expression/\" rel=\"tag\">Regular Expression</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/round/\" rel=\"tag\">round()</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/sapply/\" rel=\"tag\">sapply()</a></li></ul></div></article>",
    "main_text": "Formatting Decimals in Texts with R\nPosted on\nAugust 30, 2009\nby\nYihui Xie\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nKeep on Fighting! » R Language\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nY\nanping Chen raised a question in the\nChinese COS forum\non the output of Eviews: how to (re)format the decimal coefficients in equations as text output? For example, we want to round the numbers in\nCC = 16.5547557654 + 0.0173022117998*PP + 0.216234040485 * PP(-1) + 0.810182697599 * (WP + WG)\nto the 3rd decimal places. This can be simply done by regular expressions, as decimals always begin with a “\n.\n”. The basic steps are:\nfind out where are the decimals in the character string;\nformat them;\nreplace the original decimals with formatted values;\nGiven a character vector, we can format the decimals with the code below:\n# x: equations; FUN: formatting function; ...: passed to FUN\ncoefFormat = function(x, FUN, ...) {\n    sapply(x, function(s) {\n        dig = sapply(gregexpr(\"\\.[0-9]+\", s), function(m) {\n            sapply(seq(along = m), function(i) {\n                substr(s, m[i], m[i] + attr(m, \"match.length\")[i] - 1)\n            })\n        })\n        for (j in {\n            if (is.null(dim(dig)))\n                NULL\n            else 1:dim(dig)[1]\n        }) {\n            s = sub(dig[j, 1], substring(FUN(as.numeric(dig[j, 1]), ...),\n                2), s, fixed = TRUE)\n        }\n        s\n    })\n}\nI used\nsapply()\nfor 3 times to avoid explicit loops but consequently the code might be difficult to read. The critical part is the regular expression “\n\\.[0-9]+\n” which means one of more (controlled by “\n+\n” after “\n[0-9]\n”) digits (“\n[0-9]\n” or “\n[:digit:]\n”) after a decimal point “\n.\n”. As “\n.\n” is a\nmetacharacter\nin regular expressions, we need to use a backslash before it, and again, “” is a special character in R, so we need another backslash to denote a backslash.\nx = readLines(zz <- textConnection(\n\"CC = 16.5547557654 + 0.0173022117998 * PP + 0.216234040485 * PP(-1) + 0.810182697599 * (WP + WG)\n\nII = 20.2782089394 + 0.150221823899 * PP + 0.61594357734 * PP(-1) - 0.157787636546 * KK\n\nWP = 1.50029688603 + C(10) * XX + 0.146673821502 * XX(-1) + 0.130395687204 * AA\n\"))\nclose(zz)\n\nwriteLines(coefFormat(x, round, digits = 3))\n#  CC = 16.555 + 0.017 * PP + 0.216 * PP(-1) + 0.81 * (WP + WG)\n#\n#  II = 20.278 + 0.15 * PP + 0.616 * PP(-1) - 0.158 * KK\n#\n#  WP = 1.5 + C(10) * XX + 0.147 * XX(-1) + 0.13 * AA\n#\nwriteLines(coefFormat(x, formatC, digits = 3, format = \"f\"))\n#  CC = 16.555 + 0.017 * PP + 0.216 * PP(-1) + 0.810 * (WP + WG)\n#  \n#  II = 20.278 + 0.150 * PP + 0.616 * PP(-1) - 0.158 * KK\n#  \n#  WP = 1.500 + C(10) * XX + 0.147 * XX(-1) + 0.130 * AA\n#\nRelated Posts\nSimulation of Burning Fire in R\nR Language Definition File for “Highlight”\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nKeep on Fighting! » R Language\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nCapital of Statistics\nformatC()\ngregexpr()\nR Programming\nRegular Expression\nround()\nsapply()",
    "meta_description": "anping Chen raised a question in the Chinese COS forum on the output of Eviews: how to (re)format the decimal coefficients in equations as text output? For example, we want to round the numbers in CC = 16.5547557654 + 0.0173022117998*PP + 0.216234040485 * PP(-1) + 0.810182697599 * (WP + WG) to the 3rd decimal places. [...]",
    "meta_keywords": "capital of statistics,formatc(),gregexpr(),r programming,regular expression,round(),sapply()",
    "og_description": "anping Chen raised a question in the Chinese COS forum on the output of Eviews: how to (re)format the decimal coefficients in equations as text output? For example, we want to round the numbers in CC = 16.5547557654 + 0.0173022117998*PP + 0.216234040485 * PP(-1) + 0.810182697599 * (WP + WG) to the 3rd decimal places. [...]",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2009/08/face-angel1.png",
    "og_title": "Formatting Decimals in Texts with R | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 2.8,
    "sitemap_lastmod": "2011-05-11T21:21:25+00:00",
    "twitter_description": "anping Chen raised a question in the Chinese COS forum on the output of Eviews: how to (re)format the decimal coefficients in equations as text output? For example, we want to round the numbers in CC = 16.5547557654 + 0.0173022117998*PP + 0.216234040485 * PP(-1) + 0.810182697599 * (WP + WG) to the 3rd decimal places. [...]",
    "twitter_title": "Formatting Decimals in Texts with R | R-bloggers",
    "url": "https://www.r-bloggers.com/2009/08/formatting-decimals-in-texts-with-r/",
    "word_count": 569
  }
}