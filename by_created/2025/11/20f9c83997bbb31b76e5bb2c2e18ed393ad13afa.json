{
  "id": "20f9c83997bbb31b76e5bb2c2e18ed393ad13afa",
  "url": "https://www.r-bloggers.com/2025/02/5-levels-of-data-wrangling-every-r-user-must-master/",
  "created_at_utc": "2025-11-22T19:59:14Z",
  "data": null,
  "raw_original": {
    "uuid": "3747b6a7-e04d-454f-97bc-072927b8e297",
    "created_at": "2025-11-22 19:59:14",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2025/02/5-levels-of-data-wrangling-every-r-user-must-master/",
      "crawled_at": "2025-11-22T10:53:58.928827",
      "external_links": [
        {
          "href": "https://albert-rapp.de/posts/33_five_levels_of_data_cleaning/33_five_levels_of_data_cleaning.html",
          "text": "Albert Rapp"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "https://albert-rapp.de/posts/33_five_levels_of_data_cleaning/33_five_levels_of_data_cleaning.html",
          "text": "Albert Rapp"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "5 Levels of Data Wrangling Every R User Must Master | R-bloggers",
      "images": [],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/albert-rapp/",
          "text": "Albert Rapp"
        },
        {
          "href": "https://www.r-bloggers.com/category/r-bloggers/",
          "text": "R bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-394570 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">5 Levels of Data Wrangling Every R User Must Master</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">February 15, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/albert-rapp/\">Albert Rapp</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://albert-rapp.de/posts/33_five_levels_of_data_cleaning/33_five_levels_of_data_cleaning.html\"> Albert Rapp</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<p><link href=\"https://albert-rapp.de/new_code_theme.css\" rel=\"stylesheet\"/></p>\n<p>In today’s blog post, I’ll show you how to go from <code>{dplyr}</code> beginner to pro in 5 simple stages. As always there’s also a video version available to this blog post:</p>\n<div class=\"quarto-video ratio ratio-16x9\"><iframe allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" data-external=\"1\" frameborder=\"0\" src=\"https://www.youtube.com/embed/GZ870c6IsWU\" title=\"\"></iframe></div>\n<p>On this endeavor, let’s work with the Ames housing data set.</p>\n<div class=\"cell\">\n<pre>library(tidyverse)\nhousing_dat &lt;- modeldata::ames\nhousing_dat\n## # A tibble: 2,930 × 74\n##    MS_SubClass            MS_Zoning Lot_Frontage Lot_Area Street Alley Lot_Shape\n##  * &lt;fct&gt;                  &lt;fct&gt;            &lt;dbl&gt;    &lt;int&gt; &lt;fct&gt;  &lt;fct&gt; &lt;fct&gt;    \n##  1 One_Story_1946_and_Ne… Resident…          141    31770 Pave   No_A… Slightly…\n##  2 One_Story_1946_and_Ne… Resident…           80    11622 Pave   No_A… Regular  \n##  3 One_Story_1946_and_Ne… Resident…           81    14267 Pave   No_A… Slightly…\n##  4 One_Story_1946_and_Ne… Resident…           93    11160 Pave   No_A… Regular  \n##  5 Two_Story_1946_and_Ne… Resident…           74    13830 Pave   No_A… Slightly…\n##  6 Two_Story_1946_and_Ne… Resident…           78     9978 Pave   No_A… Slightly…\n##  7 One_Story_PUD_1946_an… Resident…           41     4920 Pave   No_A… Regular  \n##  8 One_Story_PUD_1946_an… Resident…           43     5005 Pave   No_A… Slightly…\n##  9 One_Story_PUD_1946_an… Resident…           39     5389 Pave   No_A… Slightly…\n## 10 Two_Story_1946_and_Ne… Resident…           60     7500 Pave   No_A… Regular  \n## # ℹ 2,920 more rows\n## # ℹ 67 more variables: Land_Contour &lt;fct&gt;, Utilities &lt;fct&gt;, Lot_Config &lt;fct&gt;,\n## #   Land_Slope &lt;fct&gt;, Neighborhood &lt;fct&gt;, Condition_1 &lt;fct&gt;, Condition_2 &lt;fct&gt;,\n## #   Bldg_Type &lt;fct&gt;, House_Style &lt;fct&gt;, Overall_Cond &lt;fct&gt;, Year_Built &lt;int&gt;,\n## #   Year_Remod_Add &lt;int&gt;, Roof_Style &lt;fct&gt;, Roof_Matl &lt;fct&gt;,\n## #   Exterior_1st &lt;fct&gt;, Exterior_2nd &lt;fct&gt;, Mas_Vnr_Type &lt;fct&gt;,\n## #   Mas_Vnr_Area &lt;dbl&gt;, Exter_Cond &lt;fct&gt;, Foundation &lt;fct&gt;, Bsmt_Cond &lt;fct&gt;, …</pre>\n</div>\n<section class=\"level1\" id=\"level-1-do-everything-manually\">\n<h1>Level 1: Do everything manually</h1>\n<p>Let’s run a little analysis of comparing area sizes of different parts of the house by neighborhood. All of the columns that contain sizes are indicated by “SF” (as in square fee).</p>\n<p>In our analysis, we’ll grab the required columns, transform them to square meters and then calculate the mean size by neighborhood. In Level 1, this will all be done manually:</p>\n<div class=\"cell\">\n<pre>housing_dat |&gt; \n  select(\n    Neighborhood,\n    BsmtFin_SF_1,\n    BsmtFin_SF_2,\n    Bsmt_Unf_SF,\n    Total_Bsmt_SF,\n    First_Flr_SF,\n    Second_Flr_SF,\n    Wood_Deck_SF,\n    Open_Porch_SF\n  ) |&gt; \n  mutate(\n    BsmtFin_SF_1   = BsmtFin_SF_1 / 10.7639,\n    BsmtFin_SF_2   = BsmtFin_SF_2 / 10.7639,\n    Bsmt_Unf_SF    = Bsmt_Unf_SF / 10.7639,\n    Total_Bsmt_SF  = Total_Bsmt_SF / 10.7639,\n    First_Flr_SF   = First_Flr_SF / 10.7639,\n    Second_Flr_SF  = Second_Flr_SF / 10.7639,\n    Wood_Deck_SF   = Wood_Deck_SF / 10.7639,\n    Open_Porch_SF  = Open_Porch_SF / 10.7639\n  ) |&gt; \n  summarize(\n    BsmtFin_SF_1   = mean(BsmtFin_SF_1), \n    BsmtFin_SF_2   = mean(BsmtFin_SF_2), \n    Bsmt_Unf_SF    = mean(Bsmt_Unf_SF), \n    Total_Bsmt_SF  = mean(Total_Bsmt_SF), \n    First_Flr_SF   = mean(First_Flr_SF), \n    Second_Flr_SF  = mean(Second_Flr_SF), \n    Wood_Deck_SF   = mean(Wood_Deck_SF), \n    Open_Porch_SF  = mean(Open_Porch_SF),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    &lt;fct&gt;               &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF &lt;dbl&gt;, Wood_Deck_SF &lt;dbl&gt;,\n## #   Open_Porch_SF &lt;dbl&gt;</pre>\n</div>\n</section>\n<section class=\"level1\" id=\"level-2-use-tidyselect-helpers-in-select\">\n<h1>Level 2: Use tidyselect helpers in <code>select()</code></h1>\n<p>In Level 2, we can replace the long list of names by a tidyselect helper inside the <code>select()</code> call.</p>\n<div class=\"cell\">\n<pre>housing_dat |&gt; \n  select(Neighborhood, contains('SF')) |&gt; \n  mutate(\n    BsmtFin_SF_1   = BsmtFin_SF_1 / 10.7639,\n    BsmtFin_SF_2   = BsmtFin_SF_2 / 10.7639,\n    Bsmt_Unf_SF    = Bsmt_Unf_SF / 10.7639,\n    Total_Bsmt_SF  = Total_Bsmt_SF / 10.7639,\n    First_Flr_SF   = First_Flr_SF / 10.7639,\n    Second_Flr_SF  = Second_Flr_SF / 10.7639,\n    Wood_Deck_SF   = Wood_Deck_SF / 10.7639,\n    Open_Porch_SF  = Open_Porch_SF / 10.7639\n  ) |&gt; \n  summarize(\n    BsmtFin_SF_1   = mean(BsmtFin_SF_1), \n    BsmtFin_SF_2   = mean(BsmtFin_SF_2), \n    Bsmt_Unf_SF    = mean(Bsmt_Unf_SF), \n    Total_Bsmt_SF  = mean(Total_Bsmt_SF), \n    First_Flr_SF   = mean(First_Flr_SF), \n    Second_Flr_SF  = mean(Second_Flr_SF), \n    Wood_Deck_SF   = mean(Wood_Deck_SF), \n    Open_Porch_SF  = mean(Open_Porch_SF),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    &lt;fct&gt;               &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF &lt;dbl&gt;, Wood_Deck_SF &lt;dbl&gt;,\n## #   Open_Porch_SF &lt;dbl&gt;</pre>\n</div>\n</section>\n<section class=\"level1\" id=\"level-3-use-across-with-built-in-functions\">\n<h1>Level 3: Use across with built-in functions</h1>\n<p>Now, we can remove a lot of duplicate code inside of <code>summarize()</code> with help from the <code>across()</code> function. Inside this helper function, we specify which columns (<code>.cols</code>) we want to iterate over and what function <code>.fns</code> we want to apply each time.</p>\n<div class=\"cell\">\n<pre>housing_dat |&gt; \n  select(Neighborhood, contains('SF')) |&gt; \n  mutate(\n    BsmtFin_SF_1   = BsmtFin_SF_1 / 10.7639,\n    BsmtFin_SF_2   = BsmtFin_SF_2 / 10.7639,\n    Bsmt_Unf_SF    = Bsmt_Unf_SF / 10.7639,\n    Total_Bsmt_SF  = Total_Bsmt_SF / 10.7639,\n    First_Flr_SF   = First_Flr_SF / 10.7639,\n    Second_Flr_SF  = Second_Flr_SF / 10.7639,\n    Wood_Deck_SF   = Wood_Deck_SF / 10.7639,\n    Open_Porch_SF  = Open_Porch_SF / 10.7639\n  ) |&gt; \n  summarize(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = mean\n    ),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    &lt;fct&gt;               &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF &lt;dbl&gt;, Wood_Deck_SF &lt;dbl&gt;,\n## #   Open_Porch_SF &lt;dbl&gt;</pre>\n</div>\n</section>\n<section class=\"level1\" id=\"level-4-use-across-with-custom-function\">\n<h1>Level 4: Use across with custom function</h1>\n<p>Similarly, we can use <code>across()</code> also inside of <code>mutate()</code>. But this time we also have to define a function that transforms square feet to square meters.</p>\n<div class=\"cell\">\n<pre>housing_dat |&gt; \n  select(Neighborhood, contains('SF')) |&gt; \n  mutate(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = \\(sqft) sqft / 10.7639\n    )\n  ) |&gt; \n  summarize(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = mean\n    ),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    &lt;fct&gt;               &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF &lt;dbl&gt;, Wood_Deck_SF &lt;dbl&gt;,\n## #   Open_Porch_SF &lt;dbl&gt;</pre>\n</div>\n<p>And of course you can use this technique to use custom function arguments as well.</p>\n<div class=\"cell\">\n<pre>housing_dat |&gt; \n  select(Neighborhood, contains('SF')) |&gt; \n  mutate(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = \\(sqft) sqft / 10.7639\n    )\n  ) |&gt; \n  summarize(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = \\(sqft) mean(sqft, na.rm = TRUE)\n    ),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    &lt;fct&gt;               &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF &lt;dbl&gt;, Wood_Deck_SF &lt;dbl&gt;,\n## #   Open_Porch_SF &lt;dbl&gt;</pre>\n</div>\n</section>\n<section class=\"level1\" id=\"level-5-use-tidyselect-helpers-in-across\">\n<h1>Level 5: Use tidyselect helpers in <code>across()</code></h1>\n<p>Finally, we can also use the tidyselect helpers inside of <code>acrouss()</code>. This is incredibly convenient and makes the code much shorter.</p>\n<div class=\"cell\">\n<pre>housing_dat |&gt; \n  select(Neighborhood, contains('SF')) |&gt; \n  mutate(\n    across(\n      .cols = contains('SF'),\n      .fns = \\(sqft) sqft / 10.7639\n    )\n  ) |&gt; \n  summarize(\n    across(\n      .cols = contains('SF'),\n      .fns = mean\n    ),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    &lt;fct&gt;               &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF &lt;dbl&gt;, Wood_Deck_SF &lt;dbl&gt;,\n## #   Open_Porch_SF &lt;dbl&gt;</pre>\n</div>\n</section>\n<section class=\"level1\" id=\"bonus-level-use-clean-names\">\n<h1>Bonus-Level: Use clean names</h1>\n<p>And to throw in a little bonus level for you, let me mention the <code>clean_names()</code> function from the <code>{janitor}</code> package. It transforms all column names into snake_case. That way, you’ll have much more programming friendly column names.</p>\n<p>And I know: Sounds mundane but it will save you lots of time in the long run.</p>\n<div class=\"cell\">\n<pre>housing_dat |&gt; \n  janitor::clean_names() |&gt; \n  select(neighborhood, contains('_sf')) |&gt; \n  mutate(\n    across(\n      .cols = contains('_sf'),\n      .fns = \\(sqft) sqft / 10.7639\n    )\n  ) |&gt; \n  summarize(\n    across(\n      .cols = contains('_sf'),\n      .fns = mean\n    ),\n    .by = neighborhood\n  )\n## # A tibble: 28 × 9\n##    neighborhood        bsmt_fin_sf_1 bsmt_fin_sf_2 bsmt_unf_sf total_bsmt_sf\n##    &lt;fct&gt;                       &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;\n##  1 North_Ames                  0.340        7.77          43.0          95.8\n##  2 Gilbert                     0.480        0.0636        58.6          81.3\n##  3 Stone_Brook                 0.341        2.76          70.8         145. \n##  4 Northwest_Ames              0.277        5.81          50.6         109. \n##  5 Somerset                    0.427        0.776         72.6         110. \n##  6 Briardale                   0.356        0.910         27.4          52.3\n##  7 Northpark_Villa             0.137        8.34          41.2          85.8\n##  8 Northridge_Heights          0.371        0.847         80.8         151. \n##  9 Bloomington_Heights         0.392        0             91.0         121. \n## 10 Northridge                  0.335        8.40          56.4         133. \n## # ℹ 18 more rows\n## # ℹ 4 more variables: first_flr_sf &lt;dbl&gt;, second_flr_sf &lt;dbl&gt;,\n## #   wood_deck_sf &lt;dbl&gt;, open_porch_sf &lt;dbl&gt;</pre>\n</div>\n</section>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://albert-rapp.de/posts/33_five_levels_of_data_cleaning/33_five_levels_of_data_cleaning.html\"> Albert Rapp</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
      "main_text": "5 Levels of Data Wrangling Every R User Must Master\nPosted on\nFebruary 15, 2025\nby\nAlbert Rapp\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nAlbert Rapp\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nIn today’s blog post, I’ll show you how to go from\n{dplyr}\nbeginner to pro in 5 simple stages. As always there’s also a video version available to this blog post:\nOn this endeavor, let’s work with the Ames housing data set.\nlibrary(tidyverse)\nhousing_dat <- modeldata::ames\nhousing_dat\n## # A tibble: 2,930 × 74\n##    MS_SubClass            MS_Zoning Lot_Frontage Lot_Area Street Alley Lot_Shape\n##  * <fct>                  <fct>            <dbl>    <int> <fct>  <fct> <fct>    \n##  1 One_Story_1946_and_Ne… Resident…          141    31770 Pave   No_A… Slightly…\n##  2 One_Story_1946_and_Ne… Resident…           80    11622 Pave   No_A… Regular  \n##  3 One_Story_1946_and_Ne… Resident…           81    14267 Pave   No_A… Slightly…\n##  4 One_Story_1946_and_Ne… Resident…           93    11160 Pave   No_A… Regular  \n##  5 Two_Story_1946_and_Ne… Resident…           74    13830 Pave   No_A… Slightly…\n##  6 Two_Story_1946_and_Ne… Resident…           78     9978 Pave   No_A… Slightly…\n##  7 One_Story_PUD_1946_an… Resident…           41     4920 Pave   No_A… Regular  \n##  8 One_Story_PUD_1946_an… Resident…           43     5005 Pave   No_A… Slightly…\n##  9 One_Story_PUD_1946_an… Resident…           39     5389 Pave   No_A… Slightly…\n## 10 Two_Story_1946_and_Ne… Resident…           60     7500 Pave   No_A… Regular  \n## # ℹ 2,920 more rows\n## # ℹ 67 more variables: Land_Contour <fct>, Utilities <fct>, Lot_Config <fct>,\n## #   Land_Slope <fct>, Neighborhood <fct>, Condition_1 <fct>, Condition_2 <fct>,\n## #   Bldg_Type <fct>, House_Style <fct>, Overall_Cond <fct>, Year_Built <int>,\n## #   Year_Remod_Add <int>, Roof_Style <fct>, Roof_Matl <fct>,\n## #   Exterior_1st <fct>, Exterior_2nd <fct>, Mas_Vnr_Type <fct>,\n## #   Mas_Vnr_Area <dbl>, Exter_Cond <fct>, Foundation <fct>, Bsmt_Cond <fct>, …\nLevel 1: Do everything manually\nLet’s run a little analysis of comparing area sizes of different parts of the house by neighborhood. All of the columns that contain sizes are indicated by “SF” (as in square fee).\nIn our analysis, we’ll grab the required columns, transform them to square meters and then calculate the mean size by neighborhood. In Level 1, this will all be done manually:\nhousing_dat |> \n  select(\n    Neighborhood,\n    BsmtFin_SF_1,\n    BsmtFin_SF_2,\n    Bsmt_Unf_SF,\n    Total_Bsmt_SF,\n    First_Flr_SF,\n    Second_Flr_SF,\n    Wood_Deck_SF,\n    Open_Porch_SF\n  ) |> \n  mutate(\n    BsmtFin_SF_1   = BsmtFin_SF_1 / 10.7639,\n    BsmtFin_SF_2   = BsmtFin_SF_2 / 10.7639,\n    Bsmt_Unf_SF    = Bsmt_Unf_SF / 10.7639,\n    Total_Bsmt_SF  = Total_Bsmt_SF / 10.7639,\n    First_Flr_SF   = First_Flr_SF / 10.7639,\n    Second_Flr_SF  = Second_Flr_SF / 10.7639,\n    Wood_Deck_SF   = Wood_Deck_SF / 10.7639,\n    Open_Porch_SF  = Open_Porch_SF / 10.7639\n  ) |> \n  summarize(\n    BsmtFin_SF_1   = mean(BsmtFin_SF_1), \n    BsmtFin_SF_2   = mean(BsmtFin_SF_2), \n    Bsmt_Unf_SF    = mean(Bsmt_Unf_SF), \n    Total_Bsmt_SF  = mean(Total_Bsmt_SF), \n    First_Flr_SF   = mean(First_Flr_SF), \n    Second_Flr_SF  = mean(Second_Flr_SF), \n    Wood_Deck_SF   = mean(Wood_Deck_SF), \n    Open_Porch_SF  = mean(Open_Porch_SF),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    <fct>               <dbl>        <dbl>       <dbl>         <dbl>        <dbl>\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF <dbl>, Wood_Deck_SF <dbl>,\n## #   Open_Porch_SF <dbl>\nLevel 2: Use tidyselect helpers in\nselect()\nIn Level 2, we can replace the long list of names by a tidyselect helper inside the\nselect()\ncall.\nhousing_dat |> \n  select(Neighborhood, contains('SF')) |> \n  mutate(\n    BsmtFin_SF_1   = BsmtFin_SF_1 / 10.7639,\n    BsmtFin_SF_2   = BsmtFin_SF_2 / 10.7639,\n    Bsmt_Unf_SF    = Bsmt_Unf_SF / 10.7639,\n    Total_Bsmt_SF  = Total_Bsmt_SF / 10.7639,\n    First_Flr_SF   = First_Flr_SF / 10.7639,\n    Second_Flr_SF  = Second_Flr_SF / 10.7639,\n    Wood_Deck_SF   = Wood_Deck_SF / 10.7639,\n    Open_Porch_SF  = Open_Porch_SF / 10.7639\n  ) |> \n  summarize(\n    BsmtFin_SF_1   = mean(BsmtFin_SF_1), \n    BsmtFin_SF_2   = mean(BsmtFin_SF_2), \n    Bsmt_Unf_SF    = mean(Bsmt_Unf_SF), \n    Total_Bsmt_SF  = mean(Total_Bsmt_SF), \n    First_Flr_SF   = mean(First_Flr_SF), \n    Second_Flr_SF  = mean(Second_Flr_SF), \n    Wood_Deck_SF   = mean(Wood_Deck_SF), \n    Open_Porch_SF  = mean(Open_Porch_SF),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    <fct>               <dbl>        <dbl>       <dbl>         <dbl>        <dbl>\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF <dbl>, Wood_Deck_SF <dbl>,\n## #   Open_Porch_SF <dbl>\nLevel 3: Use across with built-in functions\nNow, we can remove a lot of duplicate code inside of\nsummarize()\nwith help from the\nacross()\nfunction. Inside this helper function, we specify which columns (\n.cols\n) we want to iterate over and what function\n.fns\nwe want to apply each time.\nhousing_dat |> \n  select(Neighborhood, contains('SF')) |> \n  mutate(\n    BsmtFin_SF_1   = BsmtFin_SF_1 / 10.7639,\n    BsmtFin_SF_2   = BsmtFin_SF_2 / 10.7639,\n    Bsmt_Unf_SF    = Bsmt_Unf_SF / 10.7639,\n    Total_Bsmt_SF  = Total_Bsmt_SF / 10.7639,\n    First_Flr_SF   = First_Flr_SF / 10.7639,\n    Second_Flr_SF  = Second_Flr_SF / 10.7639,\n    Wood_Deck_SF   = Wood_Deck_SF / 10.7639,\n    Open_Porch_SF  = Open_Porch_SF / 10.7639\n  ) |> \n  summarize(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = mean\n    ),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    <fct>               <dbl>        <dbl>       <dbl>         <dbl>        <dbl>\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF <dbl>, Wood_Deck_SF <dbl>,\n## #   Open_Porch_SF <dbl>\nLevel 4: Use across with custom function\nSimilarly, we can use\nacross()\nalso inside of\nmutate()\n. But this time we also have to define a function that transforms square feet to square meters.\nhousing_dat |> \n  select(Neighborhood, contains('SF')) |> \n  mutate(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = \\(sqft) sqft / 10.7639\n    )\n  ) |> \n  summarize(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = mean\n    ),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    <fct>               <dbl>        <dbl>       <dbl>         <dbl>        <dbl>\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF <dbl>, Wood_Deck_SF <dbl>,\n## #   Open_Porch_SF <dbl>\nAnd of course you can use this technique to use custom function arguments as well.\nhousing_dat |> \n  select(Neighborhood, contains('SF')) |> \n  mutate(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = \\(sqft) sqft / 10.7639\n    )\n  ) |> \n  summarize(\n    across(\n      .cols = c(\n        BsmtFin_SF_1,\n        BsmtFin_SF_2,\n        Bsmt_Unf_SF,\n        Total_Bsmt_SF,\n        First_Flr_SF,\n        Second_Flr_SF,\n        Wood_Deck_SF,\n        Open_Porch_SF\n      ),\n      .fns = \\(sqft) mean(sqft, na.rm = TRUE)\n    ),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    <fct>               <dbl>        <dbl>       <dbl>         <dbl>        <dbl>\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF <dbl>, Wood_Deck_SF <dbl>,\n## #   Open_Porch_SF <dbl>\nLevel 5: Use tidyselect helpers in\nacross()\nFinally, we can also use the tidyselect helpers inside of\nacrouss()\n. This is incredibly convenient and makes the code much shorter.\nhousing_dat |> \n  select(Neighborhood, contains('SF')) |> \n  mutate(\n    across(\n      .cols = contains('SF'),\n      .fns = \\(sqft) sqft / 10.7639\n    )\n  ) |> \n  summarize(\n    across(\n      .cols = contains('SF'),\n      .fns = mean\n    ),\n    .by = Neighborhood\n  )\n## # A tibble: 28 × 9\n##    Neighborhood BsmtFin_SF_1 BsmtFin_SF_2 Bsmt_Unf_SF Total_Bsmt_SF First_Flr_SF\n##    <fct>               <dbl>        <dbl>       <dbl>         <dbl>        <dbl>\n##  1 North_Ames          0.340       7.77          43.0          95.8        109. \n##  2 Gilbert             0.480       0.0636        58.6          81.3         87.4\n##  3 Stone_Brook         0.341       2.76          70.8         145.         147. \n##  4 Northwest_A…        0.277       5.81          50.6         109.         122. \n##  5 Somerset            0.427       0.776         72.6         110.         110. \n##  6 Briardale           0.356       0.910         27.4          52.3         52.3\n##  7 Northpark_V…        0.137       8.34          41.2          85.8         85.3\n##  8 Northridge_…        0.371       0.847         80.8         151.         150. \n##  9 Bloomington…        0.392       0             91.0         121.         131. \n## 10 Northridge          0.335       8.40          56.4         133.         137. \n## # ℹ 18 more rows\n## # ℹ 3 more variables: Second_Flr_SF <dbl>, Wood_Deck_SF <dbl>,\n## #   Open_Porch_SF <dbl>\nBonus-Level: Use clean names\nAnd to throw in a little bonus level for you, let me mention the\nclean_names()\nfunction from the\n{janitor}\npackage. It transforms all column names into snake_case. That way, you’ll have much more programming friendly column names.\nAnd I know: Sounds mundane but it will save you lots of time in the long run.\nhousing_dat |> \n  janitor::clean_names() |> \n  select(neighborhood, contains('_sf')) |> \n  mutate(\n    across(\n      .cols = contains('_sf'),\n      .fns = \\(sqft) sqft / 10.7639\n    )\n  ) |> \n  summarize(\n    across(\n      .cols = contains('_sf'),\n      .fns = mean\n    ),\n    .by = neighborhood\n  )\n## # A tibble: 28 × 9\n##    neighborhood        bsmt_fin_sf_1 bsmt_fin_sf_2 bsmt_unf_sf total_bsmt_sf\n##    <fct>                       <dbl>         <dbl>       <dbl>         <dbl>\n##  1 North_Ames                  0.340        7.77          43.0          95.8\n##  2 Gilbert                     0.480        0.0636        58.6          81.3\n##  3 Stone_Brook                 0.341        2.76          70.8         145. \n##  4 Northwest_Ames              0.277        5.81          50.6         109. \n##  5 Somerset                    0.427        0.776         72.6         110. \n##  6 Briardale                   0.356        0.910         27.4          52.3\n##  7 Northpark_Villa             0.137        8.34          41.2          85.8\n##  8 Northridge_Heights          0.371        0.847         80.8         151. \n##  9 Bloomington_Heights         0.392        0             91.0         121. \n## 10 Northridge                  0.335        8.40          56.4         133. \n## # ℹ 18 more rows\n## # ℹ 4 more variables: first_flr_sf <dbl>, second_flr_sf <dbl>,\n## #   wood_deck_sf <dbl>, open_porch_sf <dbl>\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nAlbert Rapp\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "In today’s blog post, I’ll show you how to go from {dplyr} beginner to pro in 5 simple stages. As always there’s also a video version available to this blog post: On this endeavor, let’s work with the Ames housing data set. library(tidyverse) ...",
      "meta_keywords": null,
      "og_description": "In today’s blog post, I’ll show you how to go from {dplyr} beginner to pro in 5 simple stages. As always there’s also a video version available to this blog post: On this endeavor, let’s work with the Ames housing data set. library(tidyverse) ...",
      "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
      "og_title": "5 Levels of Data Wrangling Every R User Must Master | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 9.4,
      "sitemap_lastmod": null,
      "twitter_description": "In today’s blog post, I’ll show you how to go from {dplyr} beginner to pro in 5 simple stages. As always there’s also a video version available to this blog post: On this endeavor, let’s work with the Ames housing data set. library(tidyverse) ...",
      "twitter_title": "5 Levels of Data Wrangling Every R User Must Master | R-bloggers",
      "url": "https://www.r-bloggers.com/2025/02/5-levels-of-data-wrangling-every-r-user-must-master/",
      "word_count": 1887
    }
  }
}