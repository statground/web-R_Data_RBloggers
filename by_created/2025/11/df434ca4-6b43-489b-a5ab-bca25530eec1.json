{
  "uuid": "df434ca4-6b43-489b-a5ab-bca25530eec1",
  "created_at": "2025-11-22 19:58:56",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/04/population-pyramid-plots-with-base-r/",
    "crawled_at": "2025-11-22T10:51:14.560629",
    "external_links": [
      {
        "href": "https://johnmackintosh.com/blog/2025-04-04-base-r-pyramids/",
        "text": "HighlandR"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://johnmackintosh.github.io/small-area-shiny/",
        "text": "here"
      },
      {
        "href": "https://github.com/johnmackintosh/small-area-shiny",
        "text": "Code for the plots and app"
      },
      {
        "href": "https://johnmackintosh.com/blog/2025-04-04-base-r-pyramids/",
        "text": "HighlandR"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Population pyramid plots with base R | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/highlandr/",
        "text": "HighlandR"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-391628 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Population pyramid plots with base R</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">April 3, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/highlandr/\">HighlandR</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://johnmackintosh.com/blog/2025-04-04-base-r-pyramids/\"> HighlandR</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<p>You will find the app demonstrating these pyramid plots <a href=\"https://johnmackintosh.github.io/small-area-shiny/\" rel=\"nofollow\" target=\"_blank\">here</a></p>\n<p>A brief timeline of this plot:</p>\n<p>It started off as a revised ggplot function for an internal charting package, with source data saved as parquet files.</p>\n<p>Then, because I wanted to try running shiny in the browser, I switched to plotly.</p>\n<p>It took a while to get up and running with shinylive.\nSome of the early guidance has you uploading binary files, which is a massive pain via GitHub on the web.\nIn fact, it’s pretty much impossible.</p>\n<p>Thankfully, I found @coatless’s tutorial on using github actions and got everything up and running.</p>\n<p>To recap, at this point I was using arrow to read my parquet files, ggplot2, scales and plotly, dplyr for data wrangling, and also data.table’s fread() function for reading in a small .CSV file.</p>\n<p>That’s quite a lot of dependencies, and my tiny app had quite a long load time, so I started whittling things down.\nThe parquet files got replaced with .CSVs, so no need for arrow.\nfread() was gone, replaced with read.csv(). Good old fashioned base R replaced dplyr. plotly was gone and I was back to static ggplot2.</p>\n<p>But that by itself has a lot going on under the hood, so I figured I should try and use base graphics instead.</p>\n<p>Actually, my first thought was tinyplot, but even with the dev version, I couldn’t see a way to get the categories on the y-axis.</p>\n<p>So I was back to base R. I plotted the male bars first with <code>barplot</code>, using <code>horiz</code> to ensure they appeared on the y-axis. I removed the border line from the bars but left the default bar width.</p>\n<p>I had to figure out how to get the labels at the correct angle with <code>las</code> and remove axis marks and tick marks.</p>\n<p>I set up a function inside my plotting function to round up the axis limits to the nearest 500, 1000, or 2000 having already worked out the maximum value for each area.</p>\n<p>The female bars were added next and things were starting to look good.</p>\n<p>I had to get rid of the negative numbers on the male side of the x-axis, with the <code>axis</code> function, added a title, and then a subtitle with <code>mtext</code>.</p>\n<p>Finally I added a legend with no border, and was now pretty close to my original ggplot.</p>\n<p>More importantly, the file loads pretty quickly, and is no less responsive than when it was powered by all those heavy-duty packages.</p>\n<p>Increasingly, I am finding satisfaction from using as little as possible to get the job done.\nThis is as minimal as shiny in the browser gets (unless there’s a way of doing it without shiny?)</p>\n<p>There are many guides to creating pyramid plots in R and nearly all of them use ggplot2.</p>\n<p>While I imagine most people will be perfectly happy to use that, I hope this shows you can get by without it, should the need arise.\nI may do some further refinements but am pretty happy with this as proof of concept for using shinylive for small data products via GitHub</p>\n<p><a href=\"https://github.com/johnmackintosh/small-area-shiny\" rel=\"nofollow\" target=\"_blank\">Code for the plots and app</a></p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://johnmackintosh.com/blog/2025-04-04-base-r-pyramids/\"> HighlandR</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Population pyramid plots with base R\nPosted on\nApril 3, 2025\nby\nHighlandR\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nHighlandR\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nYou will find the app demonstrating these pyramid plots\nhere\nA brief timeline of this plot:\nIt started off as a revised ggplot function for an internal charting package, with source data saved as parquet files.\nThen, because I wanted to try running shiny in the browser, I switched to plotly.\nIt took a while to get up and running with shinylive.\nSome of the early guidance has you uploading binary files, which is a massive pain via GitHub on the web.\nIn fact, it’s pretty much impossible.\nThankfully, I found @coatless’s tutorial on using github actions and got everything up and running.\nTo recap, at this point I was using arrow to read my parquet files, ggplot2, scales and plotly, dplyr for data wrangling, and also data.table’s fread() function for reading in a small .CSV file.\nThat’s quite a lot of dependencies, and my tiny app had quite a long load time, so I started whittling things down.\nThe parquet files got replaced with .CSVs, so no need for arrow.\nfread() was gone, replaced with read.csv(). Good old fashioned base R replaced dplyr. plotly was gone and I was back to static ggplot2.\nBut that by itself has a lot going on under the hood, so I figured I should try and use base graphics instead.\nActually, my first thought was tinyplot, but even with the dev version, I couldn’t see a way to get the categories on the y-axis.\nSo I was back to base R. I plotted the male bars first with\nbarplot\n, using\nhoriz\nto ensure they appeared on the y-axis. I removed the border line from the bars but left the default bar width.\nI had to figure out how to get the labels at the correct angle with\nlas\nand remove axis marks and tick marks.\nI set up a function inside my plotting function to round up the axis limits to the nearest 500, 1000, or 2000 having already worked out the maximum value for each area.\nThe female bars were added next and things were starting to look good.\nI had to get rid of the negative numbers on the male side of the x-axis, with the\naxis\nfunction, added a title, and then a subtitle with\nmtext\n.\nFinally I added a legend with no border, and was now pretty close to my original ggplot.\nMore importantly, the file loads pretty quickly, and is no less responsive than when it was powered by all those heavy-duty packages.\nIncreasingly, I am finding satisfaction from using as little as possible to get the job done.\nThis is as minimal as shiny in the browser gets (unless there’s a way of doing it without shiny?)\nThere are many guides to creating pyramid plots in R and nearly all of them use ggplot2.\nWhile I imagine most people will be perfectly happy to use that, I hope this shows you can get by without it, should the need arise.\nI may do some further refinements but am pretty happy with this as proof of concept for using shinylive for small data products via GitHub\nCode for the plots and app\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nHighlandR\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "You will find the app demonstrating these pyramid plots here A brief timeline of this plot: It started off as a revised ggplot function for an internal charting package, with source data saved as parquet files. Then, because I wanted to tr...",
    "meta_keywords": null,
    "og_description": "You will find the app demonstrating these pyramid plots here A brief timeline of this plot: It started off as a revised ggplot function for an internal charting package, with source data saved as parquet files. Then, because I wanted to tr...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Population pyramid plots with base R | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 3.4,
    "sitemap_lastmod": null,
    "twitter_description": "You will find the app demonstrating these pyramid plots here A brief timeline of this plot: It started off as a revised ggplot function for an internal charting package, with source data saved as parquet files. Then, because I wanted to tr...",
    "twitter_title": "Population pyramid plots with base R | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/04/population-pyramid-plots-with-base-r/",
    "word_count": 673
  }
}