{
  "uuid": "77380bab-7dee-415e-a161-df5c869057b9",
  "created_at": "2025-11-22 19:58:57",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/03/observable-for-r-users/",
    "crawled_at": "2025-11-22T10:51:20.504399",
    "external_links": [
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/",
        "text": "R on Nicola Rennie"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://observablehq.com/",
        "text": "observablehq.com"
      },
      {
        "href": "https://quarto.org/",
        "text": "Quarto"
      },
      {
        "href": "https://quarto.org/docs/get-started/",
        "text": "Get Started"
      },
      {
        "href": "https://nrennie.rbind.io/training-intro-to-quarto/",
        "text": "training course materials"
      },
      {
        "href": "https://d3js.org/",
        "text": "D3.js"
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/#data-wrangling-in-r",
        "text": null
      },
      {
        "href": "https://github.com/rfordatascience/tidytuesday/blob/main/data/2025/2025-01-21/readme.md",
        "text": "TidyTuesday dataset in January 2025"
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/#observable-code-blocks",
        "text": null
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/#passing-data-from-r-to-observable",
        "text": null
      },
      {
        "href": "https://quarto.org/docs/interactive/ojs/data-sources.html",
        "text": "data sources"
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/#using-other-libraries",
        "text": null
      },
      {
        "href": "https://idl.uw.edu/arquero/",
        "text": "Arquero"
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/#plotting-with-observable",
        "text": null
      },
      {
        "href": "https://observablehq.com/plot/",
        "text": "Observable Plot"
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/images/plot_01.png",
        "text": null
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/images/plot_02.png",
        "text": null
      },
      {
        "href": "https://observablehq.com/plot/features/scales#color-scales",
        "text": "Observable documentation"
      },
      {
        "href": "https://colorbrewer2.org/",
        "text": "ColorBrewer"
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/images/plot_03.png",
        "text": null
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/images/plot_04.png",
        "text": null
      },
      {
        "href": "https://quarto.org/docs/interactive/ojs/examples/population.html",
        "text": "quarto.org/docs/interactive/ojs/examples/population"
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/#saving-a-static-image",
        "text": null
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/#additional-resources",
        "text": null
      },
      {
        "href": "https://quarto.org/docs/interactive/ojs/",
        "text": "Quarto documentation"
      },
      {
        "href": "https://quarto.org/docs/interactive/ojs/examples/penguins.html",
        "text": "examples with code"
      },
      {
        "href": "https://github.com/deepdk",
        "text": "Deepali Kank"
      },
      {
        "href": "https://deepalikank.in/posts/perfume/perfume",
        "text": "chart about fragrances in perfumes"
      },
      {
        "href": "https://rstudio.github.io/r2d3/",
        "text": "{r2d3} package"
      },
      {
        "href": "https://www.jumpingrivers.com/blog/r-d3-intro-r2d3/",
        "text": "blog post by Mandy Norrbo"
      },
      {
        "href": "https://nrennie.rbind.io/blog/observable-r-users/",
        "text": "R on Nicola Rennie"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Observable for R users | R-bloggers",
    "images": [
      {
        "alt": "Scatter",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "Scatter",
        "base64": null,
        "src": "https://nrennie.rbind.io/blog/observable-r-users/images/plot_01.png"
      },
      {
        "alt": "Scatter",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "Scatter",
        "base64": null,
        "src": "https://nrennie.rbind.io/blog/observable-r-users/images/plot_02.png"
      },
      {
        "alt": "Scatter",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "Scatter",
        "base64": null,
        "src": "https://nrennie.rbind.io/blog/observable-r-users/images/plot_03.png"
      },
      {
        "alt": "Scatter",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "Scatter",
        "base64": null,
        "src": "https://nrennie.rbind.io/blog/observable-r-users/images/plot_04.png"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/r-on-nicola-rennie/",
        "text": "R on Nicola Rennie"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-391584 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Observable for R users</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">March 31, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/r-on-nicola-rennie/\">R on Nicola Rennie</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://nrennie.rbind.io/blog/observable-r-users/\"> R on Nicola Rennie</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47--><p>Observable is a JavaScript-based reactive programming environment, commonly used for interactive data exploration, visualisation, and dashboards. You can create and publish Observable notebooks at\n<a href=\"https://observablehq.com/\" rel=\"nofollow\" target=\"_blank\">observablehq.com</a> (which is also a great place to look for inspiration and support) or you can use Observable Javascript in standalone documents and websites.</p>\n<p>So why would an R user want to learn or use Observable? Although there are several different packages for creating interactive charts directly in R, these can sometimes be hard to customise, load slowly, or require an R server for deployment. With Observable, you can use different JavaScript libraries for advanced customisation (though the learning curve might be quite steep for some). Since it’s JavaScript-based, there’s no need for a server to run code, and its reactive model and efficient rendering in a browser, means that its interactive visualisations can often be faster.</p>\n<p>Although you can do some data wrangling and modelling within Observable, R arguably has much better capabilities for statistical modelling. If you want the best of both worlds, it might make sense to use for wrangling and modelling, then use Observable for creating interactive, web-based visualisations. Luckily, there’s an easy way to do just that using Quarto. This blog post will walk through the process of performing some data wrangling in R, passing the data to Observable, and creating a visualisation using Observable.</p>\n<blockquote>\n<p>\n<a href=\"https://quarto.org/\" rel=\"nofollow\" target=\"_blank\">Quarto</a> is an open-source scientific and technical publishing system, that allows you to easily combine code with narrative text to create reproducible outputs. It works with code written in Python, R, Julia, or Observable. If you haven’t used Quarto before, I’d recommend checking the\n<a href=\"https://quarto.org/docs/get-started/\" rel=\"nofollow\" target=\"_blank\">Get Started</a> section of the documentation. You can also view my <em>Introduction to Quarto</em>\n<a href=\"https://nrennie.rbind.io/training-intro-to-quarto/\" rel=\"nofollow\" target=\"_blank\">training course materials</a>.</p>\n</blockquote>\n<p>If you’re someone who is intrigued by JavaScript libraries like\n<a href=\"https://d3js.org/\" rel=\"nofollow\" target=\"_blank\">D3.js</a> for creating visualisations, but are discouraged by how complicated it looks and how steep the learning curve might be, then using Observable with Quarto can be a gentler introduction. You also don’t need to install or set up any additional software. As long as you have Quarto installed, your document will render in such a way that enables the use of Observable within your outputs.</p>\n<h2 id=\"data-wrangling-in-r\">Data wrangling in R\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/#data-wrangling-in-r\" rel=\"nofollow\" target=\"_blank\"><svg aria-hidden=\"true\" class=\"anchor-symbol\" height=\"26\" viewbox=\"0 0 22 22\" width=\"26\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M0 0h24v24H0z\" fill=\"currentColor\"></path>\n<path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z\"></path>\n</svg></a>\n</h2>\n<p>Let’s dive into an example! We start by creating a new Quarto document. You can choose to leave the YAML empty if you want, but I recommend at least hiding the code by setting <code>echo: false</code> to make sure only your visualisations end up in the final output.</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>1\n2\n3\n4\n</pre></td>\n<td class=\"lntd\">\n<pre>---\nexecute:\n echo: false\n---\n</pre></td></tr></table>\n</div>\n</div><p>We’ll be using data on the history of Himalayan Mountaineering Expeditions, which was used as a\n<a href=\"https://github.com/rfordatascience/tidytuesday/blob/main/data/2025/2025-01-21/readme.md\" rel=\"nofollow\" target=\"_blank\">TidyTuesday dataset in January 2025</a>. We can load the data using the <code>{tidytuesdayR}</code> package before performing any data wrangling in R as we normally would:</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>1\n2\n3\n4\n5\n</pre></td>\n<td class=\"lntd\">\n<pre>```{r}\ntuesdata &lt;- tidytuesdayR::tt_load(\"2025-01-21\")\nexped_tidy &lt;- tuesdata$exped_tidy\npeaks_tidy &lt;- tuesdata$peaks_tidy\n```\n</pre></td></tr></table>\n</div>\n</div><p>We’ll focus on the <code>peaks_tidy</code> data here where the first few lines look like:</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n</pre></td>\n<td class=\"lntd\">\n<pre># A tibble: 480 × 29\n PEAKID PKNAME PKNAME2 LOCATION HEIGHTM HEIGHTF HIMAL\n &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1 AMAD Ama Dablam Amai D… Khumbu … 6814 22356 12\n 2 AMPG Amphu Gyabjen Amphu … Khumbu … 5630 18471 12\n 3 ANN1 Annapurna I NA Annapur… 8091 26545 1\n 4 ANN2 Annapurna II NA Annapur… 7937 26040 1\n 5 ANN3 Annapurna III NA Annapur… 7555 24787 1\n 6 ANN4 Annapurna IV NA Annapur… 7525 24688 1\n 7 ANNE Annapurna I East NA Annapur… 8026 26332 1\n 8 ANNM Annapurna I Middle NA Annapur… 8051 26414 1\n 9 ANNS Annapurna South Annapu… Annapur… 7219 23684 1\n10 APIM Api Main NA Api Him… 7132 23399 2\n# ℹ 470 more rows\n# ℹ 22 more variables: HIMAL_FACTOR &lt;chr&gt;, REGION &lt;dbl&gt;,\n# REGION_FACTOR &lt;chr&gt;, OPEN &lt;lgl&gt;, UNLISTED &lt;lgl&gt;,\n# TREKKING &lt;lgl&gt;, TREKYEAR &lt;dbl&gt;, RESTRICT &lt;chr&gt;, PHOST &lt;dbl&gt;,\n# PHOST_FACTOR &lt;chr&gt;, PSTATUS &lt;dbl&gt;, PSTATUS_FACTOR &lt;chr&gt;,\n# PEAKMEMO &lt;dbl&gt;, PYEAR &lt;dbl&gt;, PSEASON &lt;dbl&gt;, PEXPID &lt;chr&gt;,\n# PSMTDATE &lt;chr&gt;, PCOUNTRY &lt;chr&gt;, PSUMMITERS &lt;chr&gt;, …\n# ℹ Use `print(n = ...)` to see more rows\n</pre></td></tr></table>\n</div>\n</div><p>Here, we’ll keep it reasonably simple and look at the relationship between the first year a climb was recorded (<code>PYEAR</code>) and the height of the peak (<code>HEIGHTM</code>). We’ll also look at the Himalayan region that each peak is in (<code>REGION_FACTOR</code>). We can filter the data and select the columns we’re interested in using <code>{dplyr}</code> (or base R if you prefer):</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>1\n2\n3\n4\n5\n6\n</pre></td>\n<td class=\"lntd\">\n<pre>```{r}\nlibrary(dplyr)\nplot_data &lt;- peaks_tidy |&gt;\n filter(PSTATUS_FACTOR == \"Climbed\") |&gt;\n select(PYEAR, HEIGHTM, REGION_FACTOR)\n```\n</pre></td></tr></table>\n</div>\n</div><p>Our data now looks like this:</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n</pre></td>\n<td class=\"lntd\">\n<pre># A tibble: 368 × 3\n PYEAR HEIGHTM REGION_FACTOR\n &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;\n 1 1961 6814 Khumbu-Rolwaling-Makalu\n 2 1953 5630 Khumbu-Rolwaling-Makalu\n 3 1950 8091 Annapurna-Damodar-Peri\n 4 1960 7937 Annapurna-Damodar-Peri\n 5 1961 7555 Annapurna-Damodar-Peri\n 6 1955 7525 Annapurna-Damodar-Peri\n 7 1974 8026 Annapurna-Damodar-Peri\n 8 1980 8051 Annapurna-Damodar-Peri\n 9 1964 7219 Annapurna-Damodar-Peri\n10 1960 7132 Kanjiroba-Far West\n# ℹ 358 more rows\n# ℹ Use `print(n = ...)` to see more rows\n</pre></td></tr></table>\n</div>\n</div><p>It’s reasonably tidy, and we’re ready to start plotting (in Observable).</p>\n<h2 id=\"observable-code-blocks\">Observable code blocks\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/#observable-code-blocks\" rel=\"nofollow\" target=\"_blank\"><svg aria-hidden=\"true\" class=\"anchor-symbol\" height=\"26\" viewbox=\"0 0 22 22\" width=\"26\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M0 0h24v24H0z\" fill=\"currentColor\"></path>\n<path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z\"></path>\n</svg></a>\n</h2>\n<p>In Quarto, an Observable code block is added in a very similar way to R code blocks. Instead of specifying the language using <code>{r}</code>, we use <code>{ojs}</code> instead. Here, <code>ojs</code> stands for Observable JavaScript (OJS), although it’s important that <code>{ojs}</code> is in lowercase:</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>1\n2\n</pre></td>\n<td class=\"lntd\">\n<pre>```{ojs}\n```\n</pre></td></tr></table>\n</div>\n</div><p>Unlike R, Observable code blocks don’t need to be in order. This means that you can group all of your <em>output</em> code together, and all of your <em>data processing</em> code together to keep your document looking cleaner (similar to the separation of <code>ui</code> and <code>server</code> in Shiny apps).</p>\n<h3 id=\"passing-data-from-r-to-observable\">Passing data from R to Observable\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/#passing-data-from-r-to-observable\" rel=\"nofollow\" target=\"_blank\"><svg aria-hidden=\"true\" class=\"anchor-symbol\" height=\"26\" viewbox=\"0 0 22 22\" width=\"26\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M0 0h24v24H0z\" fill=\"currentColor\"></path>\n<path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z\"></path>\n</svg></a>\n</h3>\n<p>To pass our clean, wrangled data from R to Observable, we use the <code>ojs_define()</code> function, where we define what we want the object to be called in Observable (<code>r_data</code>) and what object we want to pass from R (<code>plot_data</code>):</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>1\n2\n3\n</pre></td>\n<td class=\"lntd\">\n<pre>```{r}\nojs_define(r_data = plot_data)\n```\n</pre></td></tr></table>\n</div>\n</div><p>Note that this is an R code block, not an Observable code block. The Observable object name doesn’t need to be <code>r_data</code>, and can be the same name as the R object (or almost anything else)!</p>\n<p>R passes the data to Observable in a <em>by column</em> format. Depending on which functions or libraries in Observable you use to visualise your data, it might need to be passed in a <em>by row</em> format instead. In Observable, we can use the <code>transpose()</code> function to switch from <em>by column</em> to <em>by row</em> format - since the basic <code>Plot()</code> function we’ll be using later requires it in this format:</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>1\n2\n3\n</pre></td>\n<td class=\"lntd\">\n<pre>```{ojs}\ndata = transpose(r_data)\n```\n</pre></td></tr></table>\n</div>\n</div><p>An alternative approach could be to save the wrangled data to a CSV or JSON file in R, and read it into Observable as a local file using the <code>FileAttachment()</code> function. See the\n<a href=\"https://quarto.org/docs/interactive/ojs/data-sources.html\" rel=\"nofollow\" target=\"_blank\">data sources</a> section of the Quarto documentation for different ways to read in data.</p>\n<h3 id=\"using-other-libraries\">Using other libraries\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/#using-other-libraries\" rel=\"nofollow\" target=\"_blank\"><svg aria-hidden=\"true\" class=\"anchor-symbol\" height=\"26\" viewbox=\"0 0 22 22\" width=\"26\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M0 0h24v24H0z\" fill=\"currentColor\"></path>\n<path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z\"></path>\n</svg></a>\n</h3>\n<p>When using core libraries that come with Observable (such as <code>Observable Plot</code>), there’s no need to install or load anything additional. However, if you want to use non-core libraries like D3 or\n<a href=\"https://idl.uw.edu/arquero/\" rel=\"nofollow\" target=\"_blank\">Arquero</a> (a library inspired by {dplyr} for data transformation), it’s fairly straightforward to do it. We simply need to be explicit about importing those libraries. For example, to access functions from D3, we would run:</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>1\n2\n3\n</pre></td>\n<td class=\"lntd\">\n<pre>```{ojs}\nd3 = require(\"d3@7\")\n```\n</pre></td></tr></table>\n</div>\n</div><p>For this example, we’ll be able to do everything use the core Observable Plot library, so we don’t need to use any additional libraries.</p>\n<h3 id=\"plotting-with-observable\">Plotting with Observable\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/#plotting-with-observable\" rel=\"nofollow\" target=\"_blank\"><svg aria-hidden=\"true\" class=\"anchor-symbol\" height=\"26\" viewbox=\"0 0 22 22\" width=\"26\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M0 0h24v24H0z\" fill=\"currentColor\"></path>\n<path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z\"></path>\n</svg></a>\n</h3>\n<p>\n<a href=\"https://observablehq.com/plot/\" rel=\"nofollow\" target=\"_blank\">Observable Plot</a> is a JavaScript library, primarily aimed at creating exploratory data visualisations, which is one of the core Observable libraries. You can draw many of the most common types of charts using the <code>plot()</code> function from the <code>Plot</code> library. Within <code>Plot.plot()</code>, we specify <code>marks</code> to define the geometries that are drawn such as lines or dots; <code>color</code> to define the colours that are used; as well as other arguments like <code>title</code> and <code>subtitle</code> which can use to add text. If you’re a <code>{ggplot2}</code> user, you might notice some similarities since it also follows a <em>Grammar of Graphics</em> approach.</p>\n<p>Again, we’ll keep it simple for this introductory example and create a basic scatter plot of year against peak height for our Himalayan Expeditions data. In the <code>marks</code> argument, we start by passing in the function for the geometry we want to draw. To create a scatter plot, we need to draw dots, so we use the <code>Plot.dot()</code> function. The first argument is the data set we’re plotting, and the second argument is where we specify which columns of the data map to which axis. Again, if you’re a <code>{ggplot2}</code> user, this is very similar to setting the arguments for the data and aesthetic mapping using <code>aes()</code>.</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>1\n2\n3\n4\n5\n6\n7\n</pre></td>\n<td class=\"lntd\">\n<pre>```{ojs}\nPlot.plot({\n marks: [\n Plot.dot(data, {x: \"PYEAR\", y: \"HEIGHTM\"})\n ]\n})\n```\n</pre></td></tr></table>\n</div>\n</div><p align=\"center\">\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_01.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"Scatter\" data-lazy-src=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_01.png\" height=\"\" of=\"\" peak=\"\" plot=\"\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" vs=\"\" width=\"100%\" year=\"\"/><noscript><img alt=\"Scatter\" height=\"\" of=\"\" peak=\"\" plot=\"\" src=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_01.png\" vs=\"\" width=\"100%\" year=\"\"/></noscript></a>\n</p>\n<p>This gives us a very basic scatter plot, and there are a few adjustments that we might want to make to improve it’s clarity. You might notice that the x-axis looks a little bit odd for data representing years. The year values are treated as numbers, and so Observable formats them with commas. This is helpful when we are plotting large numbers, but not so helpful when they are actually years. There are a couple of approaches we could take, but the easiest way is to convert the <code>PYEAR</code> column from a number to a date, and Observable will know how to format it correctly:</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>1\n2\n3\n4\n5\n6\n7\n</pre></td>\n<td class=\"lntd\">\n<pre>```{ojs}\ndataTyped = data.map(({ PYEAR, HEIGHTM, REGION_FACTOR }) =&gt; ({\n PYEAR: new Date(PYEAR, 0, 1),\n HEIGHTM,\n REGION_FACTOR\n}))\n```\n</pre></td></tr></table>\n</div>\n</div><p>Let’s also edit the axis labels to something more readable than the column names, and add a grid in the background. We use the <code>grid</code>, <code>x</code>, and <code>y</code> arguments to make these adjustments, remembering to also update the data to our new (correctly typed) dataset:</p>\n<blockquote>\n<p>We can add comments to document our code using <code>//</code> in the same way we use <code>#</code> in R.</p>\n</blockquote>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n</pre></td>\n<td class=\"lntd\">\n<pre>```{ojs}\nPlot.plot({\n // Draw points\n marks: [\n Plot.dot(dataTyped, {x: \"PYEAR\", y: \"HEIGHTM\"})\n ],\n // Grid and axes styling\n grid: true,\n x: {label: \"Year of the first recorded climbing attempt on the peak\"},\n y: {label: \"Peak height (m)\"}\n})\n```\n</pre></td></tr></table>\n</div>\n</div><p align=\"center\">\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_02.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"Scatter\" data-lazy-src=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_02.png\" height=\"\" of=\"\" peak=\"\" plot=\"\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" vs=\"\" width=\"100%\" year=\"\"/><noscript><img alt=\"Scatter\" height=\"\" of=\"\" peak=\"\" plot=\"\" src=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_02.png\" vs=\"\" width=\"100%\" year=\"\"/></noscript></a>\n</p>\n<p>To change the colour of the points, we edit the <em>mapping</em> to also set the <code>fill</code> colour of the points to be based on the values in the <code>REGION_FACTOR</code> column. Within the <code>color</code> argument, we can set whether or not we want a legend, and also choose a colour palette in the <code>scheme</code> argument.</p>\n<blockquote>\n<p><strong>Observable colour palettes</strong>: The\n<a href=\"https://observablehq.com/plot/features/scales#color-scales\" rel=\"nofollow\" target=\"_blank\">Observable documentation</a> has an interactive colour palette viewer, where you can browse different sequential, diverging, and discrete colour palettes. The built-in options include the\n<a href=\"https://colorbrewer2.org/\" rel=\"nofollow\" target=\"_blank\">ColorBrewer</a> palettes, which are also available in R.</p>\n</blockquote>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n</pre></td>\n<td class=\"lntd\">\n<pre>```{ojs}\nPlot.plot({\n // Draw points\n marks: [\n Plot.dot(dataTyped, {x: \"PYEAR\", y: \"HEIGHTM\", fill: \"REGION_FACTOR\"})\n ],\n // Colours\n color: {legend: true, scheme: \"set2\"},\n // Grid and axes styling\n grid: true,\n x: {label: \"Year of the first recorded climbing attempt on the peak\"},\n y: {label: \"Peak height (m)\"}\n})\n```\n</pre></td></tr></table>\n</div>\n</div><p align=\"center\">\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_03.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"Scatter\" data-lazy-src=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_03.png\" height=\"\" of=\"\" peak=\"\" plot=\"\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" vs=\"\" width=\"100%\" year=\"\"/><noscript><img alt=\"Scatter\" height=\"\" of=\"\" peak=\"\" plot=\"\" src=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_03.png\" vs=\"\" width=\"100%\" year=\"\"/></noscript></a>\n</p>\n<p>Finally, we can add a title, subtitle, and caption to the plot. We can also set the size of the plot area, and change the sizes of the margins to add a little bit more space around the plot:</p>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n</pre></td>\n<td class=\"lntd\">\n<pre>```{ojs}\nPlot.plot({\n // Draw points\n marks: [\n Plot.dot(dataTyped, {x: \"PYEAR\", y: \"HEIGHTM\", fill: \"REGION_FACTOR\"})\n ],\n // Colours\n color: {legend: true, scheme: \"set2\"},\n // Grid and axes styling\n grid: true,\n x: {label: \"Year of the first recorded climbing attempt on the peak\"},\n y: {label: \"Peak height (m)\"},\n // Text\n title: \"The History of Himalayan Expeditions\",\n subtitle: \"For peaks in the Himalayas that have been climbed, this chart shows the year of the first recorded climb and the height of the peak.\",\n caption: \"Data: The Himalayan Database (2017)\",\n // Size\n height: 400,\n width: 800,\n marginLeft: 50,\n marginRight: 50\n})\n```\n</pre></td></tr></table>\n</div>\n</div><p align=\"center\">\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_04.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"Scatter\" data-lazy-src=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_04.png\" height=\"\" of=\"\" peak=\"\" plot=\"\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" vs=\"\" width=\"100%\" year=\"\"/><noscript><img alt=\"Scatter\" height=\"\" of=\"\" peak=\"\" plot=\"\" src=\"https://nrennie.rbind.io/blog/observable-r-users/images/plot_04.png\" vs=\"\" width=\"100%\" year=\"\"/></noscript></a>\n</p>\n<p>This introductory example showcases only a very small amount of what you can do with Observable. If you start making more plots in Observable, you’ll likely notice that there are lots of different ways to do things. For example, you could edit the axis labels using the <code>Plot.AxisX()</code> function instead of in the <code>x</code> argument. You could also use another library entirely (such as D3) to create a scatter plot. And since Observable is JavaScript-based, you can also use CSS to edit the styling of plot elements, or add hover effects. In terms of interactivity, you can easily add dropdown menus or sliders to plot different subsets of your data, using the <code>Observable Inputs</code> (core) library.</p>\n<p>One of the other nice features of Observable is that, if you see a complicated plot that you like, it’s fairly straightforward to import the notebook that creates it and replace the data with your own. See\n<a href=\"https://quarto.org/docs/interactive/ojs/examples/population.html\" rel=\"nofollow\" target=\"_blank\">quarto.org/docs/interactive/ojs/examples/population</a> for an example of importing a sunburst diagram.</p>\n<h3 id=\"saving-a-static-image\">Saving a static image\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/#saving-a-static-image\" rel=\"nofollow\" target=\"_blank\"><svg aria-hidden=\"true\" class=\"anchor-symbol\" height=\"26\" viewbox=\"0 0 22 22\" width=\"26\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M0 0h24v24H0z\" fill=\"currentColor\"></path>\n<path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z\"></path>\n</svg></a>\n</h3>\n<p>When you create a plot using Observable in your Quarto document, the images are rendered as SVG . However, you may also want to save a static or raster image file (such as a PNG) to share on social media, for example. Of course, the easiest way might be to simply take a screenshot. But you could automate it using the <code>webshot()</code> function from the <code>{webshot2}</code> package, and using CSS selectors to capture the Observable cell output with <code>selector = \".cell-output.cell-output-display\"</code>.</p>\n<h2 id=\"additional-resources\">Additional resources\n<a href=\"https://nrennie.rbind.io/blog/observable-r-users/#additional-resources\" rel=\"nofollow\" target=\"_blank\"><svg aria-hidden=\"true\" class=\"anchor-symbol\" height=\"26\" viewbox=\"0 0 22 22\" width=\"26\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M0 0h24v24H0z\" fill=\"currentColor\"></path>\n<path d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z\"></path>\n</svg></a>\n</h2>\n<ul>\n<li>\n<p>The\n<a href=\"https://quarto.org/docs/interactive/ojs/\" rel=\"nofollow\" target=\"_blank\">Quarto documentation</a> has lots of information about using Observable in Quarto, including with R and Python. It also has plenty of\n<a href=\"https://quarto.org/docs/interactive/ojs/examples/penguins.html\" rel=\"nofollow\" target=\"_blank\">examples with code</a>.</p>\n</li>\n<li>\n<p>\n<a href=\"https://github.com/deepdk\" rel=\"nofollow\" target=\"_blank\">Deepali Kank</a> has lots of great examples of charts created with Observable and D3, and many with the data wrangling performed in R. This\n<a href=\"https://deepalikank.in/posts/perfume/perfume\" rel=\"nofollow\" target=\"_blank\">chart about fragrances in perfumes</a> is especially beautiful!</p>\n</li>\n<li>\n<p>If you’re looking for a different way to work with D3 and R together, then the\n<a href=\"https://rstudio.github.io/r2d3/\" rel=\"nofollow\" target=\"_blank\">{r2d3} package</a> provides functionality for working with D3 visualisations from R. This Jumping Rivers\n<a href=\"https://www.jumpingrivers.com/blog/r-d3-intro-r2d3/\" rel=\"nofollow\" target=\"_blank\">blog post by Mandy Norrbo</a> provides a nice introduction.</p>\n</li>\n</ul>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://nrennie.rbind.io/blog/observable-r-users/\"> R on Nicola Rennie</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Observable for R users\nPosted on\nMarch 31, 2025\nby\nR on Nicola Rennie\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nR on Nicola Rennie\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nObservable is a JavaScript-based reactive programming environment, commonly used for interactive data exploration, visualisation, and dashboards. You can create and publish Observable notebooks at\nobservablehq.com\n(which is also a great place to look for inspiration and support) or you can use Observable Javascript in standalone documents and websites.\nSo why would an R user want to learn or use Observable? Although there are several different packages for creating interactive charts directly in R, these can sometimes be hard to customise, load slowly, or require an R server for deployment. With Observable, you can use different JavaScript libraries for advanced customisation (though the learning curve might be quite steep for some). Since it’s JavaScript-based, there’s no need for a server to run code, and its reactive model and efficient rendering in a browser, means that its interactive visualisations can often be faster.\nAlthough you can do some data wrangling and modelling within Observable, R arguably has much better capabilities for statistical modelling. If you want the best of both worlds, it might make sense to use for wrangling and modelling, then use Observable for creating interactive, web-based visualisations. Luckily, there’s an easy way to do just that using Quarto. This blog post will walk through the process of performing some data wrangling in R, passing the data to Observable, and creating a visualisation using Observable.\nQuarto\nis an open-source scientific and technical publishing system, that allows you to easily combine code with narrative text to create reproducible outputs. It works with code written in Python, R, Julia, or Observable. If you haven’t used Quarto before, I’d recommend checking the\nGet Started\nsection of the documentation. You can also view my\nIntroduction to Quarto\ntraining course materials\n.\nIf you’re someone who is intrigued by JavaScript libraries like\nD3.js\nfor creating visualisations, but are discouraged by how complicated it looks and how steep the learning curve might be, then using Observable with Quarto can be a gentler introduction. You also don’t need to install or set up any additional software. As long as you have Quarto installed, your document will render in such a way that enables the use of Observable within your outputs.\nData wrangling in R\nLet’s dive into an example! We start by creating a new Quarto document. You can choose to leave the YAML empty if you want, but I recommend at least hiding the code by setting\necho: false\nto make sure only your visualisations end up in the final output.\n1\n2\n3\n4\n---\nexecute:\n echo: false\n---\nWe’ll be using data on the history of Himalayan Mountaineering Expeditions, which was used as a\nTidyTuesday dataset in January 2025\n. We can load the data using the\n{tidytuesdayR}\npackage before performing any data wrangling in R as we normally would:\n1\n2\n3\n4\n5\n```{r}\ntuesdata <- tidytuesdayR::tt_load(\"2025-01-21\")\nexped_tidy <- tuesdata$exped_tidy\npeaks_tidy <- tuesdata$peaks_tidy\n```\nWe’ll focus on the\npeaks_tidy\ndata here where the first few lines look like:\n1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n# A tibble: 480 × 29\n PEAKID PKNAME PKNAME2 LOCATION HEIGHTM HEIGHTF HIMAL\n <chr> <chr> <chr> <chr> <dbl> <dbl> <dbl>\n 1 AMAD Ama Dablam Amai D… Khumbu … 6814 22356 12\n 2 AMPG Amphu Gyabjen Amphu … Khumbu … 5630 18471 12\n 3 ANN1 Annapurna I NA Annapur… 8091 26545 1\n 4 ANN2 Annapurna II NA Annapur… 7937 26040 1\n 5 ANN3 Annapurna III NA Annapur… 7555 24787 1\n 6 ANN4 Annapurna IV NA Annapur… 7525 24688 1\n 7 ANNE Annapurna I East NA Annapur… 8026 26332 1\n 8 ANNM Annapurna I Middle NA Annapur… 8051 26414 1\n 9 ANNS Annapurna South Annapu… Annapur… 7219 23684 1\n10 APIM Api Main NA Api Him… 7132 23399 2\n# ℹ 470 more rows\n# ℹ 22 more variables: HIMAL_FACTOR <chr>, REGION <dbl>,\n# REGION_FACTOR <chr>, OPEN <lgl>, UNLISTED <lgl>,\n# TREKKING <lgl>, TREKYEAR <dbl>, RESTRICT <chr>, PHOST <dbl>,\n# PHOST_FACTOR <chr>, PSTATUS <dbl>, PSTATUS_FACTOR <chr>,\n# PEAKMEMO <dbl>, PYEAR <dbl>, PSEASON <dbl>, PEXPID <chr>,\n# PSMTDATE <chr>, PCOUNTRY <chr>, PSUMMITERS <chr>, …\n# ℹ Use `print(n = ...)` to see more rows\nHere, we’ll keep it reasonably simple and look at the relationship between the first year a climb was recorded (\nPYEAR\n) and the height of the peak (\nHEIGHTM\n). We’ll also look at the Himalayan region that each peak is in (\nREGION_FACTOR\n). We can filter the data and select the columns we’re interested in using\n{dplyr}\n(or base R if you prefer):\n1\n2\n3\n4\n5\n6\n```{r}\nlibrary(dplyr)\nplot_data <- peaks_tidy |>\n filter(PSTATUS_FACTOR == \"Climbed\") |>\n select(PYEAR, HEIGHTM, REGION_FACTOR)\n```\nOur data now looks like this:\n1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n# A tibble: 368 × 3\n PYEAR HEIGHTM REGION_FACTOR\n <dbl> <dbl> <chr>\n 1 1961 6814 Khumbu-Rolwaling-Makalu\n 2 1953 5630 Khumbu-Rolwaling-Makalu\n 3 1950 8091 Annapurna-Damodar-Peri\n 4 1960 7937 Annapurna-Damodar-Peri\n 5 1961 7555 Annapurna-Damodar-Peri\n 6 1955 7525 Annapurna-Damodar-Peri\n 7 1974 8026 Annapurna-Damodar-Peri\n 8 1980 8051 Annapurna-Damodar-Peri\n 9 1964 7219 Annapurna-Damodar-Peri\n10 1960 7132 Kanjiroba-Far West\n# ℹ 358 more rows\n# ℹ Use `print(n = ...)` to see more rows\nIt’s reasonably tidy, and we’re ready to start plotting (in Observable).\nObservable code blocks\nIn Quarto, an Observable code block is added in a very similar way to R code blocks. Instead of specifying the language using\n{r}\n, we use\n{ojs}\ninstead. Here,\nojs\nstands for Observable JavaScript (OJS), although it’s important that\n{ojs}\nis in lowercase:\n1\n2\n```{ojs}\n```\nUnlike R, Observable code blocks don’t need to be in order. This means that you can group all of your\noutput\ncode together, and all of your\ndata processing\ncode together to keep your document looking cleaner (similar to the separation of\nui\nand\nserver\nin Shiny apps).\nPassing data from R to Observable\nTo pass our clean, wrangled data from R to Observable, we use the\nojs_define()\nfunction, where we define what we want the object to be called in Observable (\nr_data\n) and what object we want to pass from R (\nplot_data\n):\n1\n2\n3\n```{r}\nojs_define(r_data = plot_data)\n```\nNote that this is an R code block, not an Observable code block. The Observable object name doesn’t need to be\nr_data\n, and can be the same name as the R object (or almost anything else)!\nR passes the data to Observable in a\nby column\nformat. Depending on which functions or libraries in Observable you use to visualise your data, it might need to be passed in a\nby row\nformat instead. In Observable, we can use the\ntranspose()\nfunction to switch from\nby column\nto\nby row\nformat - since the basic\nPlot()\nfunction we’ll be using later requires it in this format:\n1\n2\n3\n```{ojs}\ndata = transpose(r_data)\n```\nAn alternative approach could be to save the wrangled data to a CSV or JSON file in R, and read it into Observable as a local file using the\nFileAttachment()\nfunction. See the\ndata sources\nsection of the Quarto documentation for different ways to read in data.\nUsing other libraries\nWhen using core libraries that come with Observable (such as\nObservable Plot\n), there’s no need to install or load anything additional. However, if you want to use non-core libraries like D3 or\nArquero\n(a library inspired by {dplyr} for data transformation), it’s fairly straightforward to do it. We simply need to be explicit about importing those libraries. For example, to access functions from D3, we would run:\n1\n2\n3\n```{ojs}\nd3 = require(\"d3@7\")\n```\nFor this example, we’ll be able to do everything use the core Observable Plot library, so we don’t need to use any additional libraries.\nPlotting with Observable\nObservable Plot\nis a JavaScript library, primarily aimed at creating exploratory data visualisations, which is one of the core Observable libraries. You can draw many of the most common types of charts using the\nplot()\nfunction from the\nPlot\nlibrary. Within\nPlot.plot()\n, we specify\nmarks\nto define the geometries that are drawn such as lines or dots;\ncolor\nto define the colours that are used; as well as other arguments like\ntitle\nand\nsubtitle\nwhich can use to add text. If you’re a\n{ggplot2}\nuser, you might notice some similarities since it also follows a\nGrammar of Graphics\napproach.\nAgain, we’ll keep it simple for this introductory example and create a basic scatter plot of year against peak height for our Himalayan Expeditions data. In the\nmarks\nargument, we start by passing in the function for the geometry we want to draw. To create a scatter plot, we need to draw dots, so we use the\nPlot.dot()\nfunction. The first argument is the data set we’re plotting, and the second argument is where we specify which columns of the data map to which axis. Again, if you’re a\n{ggplot2}\nuser, this is very similar to setting the arguments for the data and aesthetic mapping using\naes()\n.\n1\n2\n3\n4\n5\n6\n7\n```{ojs}\nPlot.plot({\n marks: [\n Plot.dot(data, {x: \"PYEAR\", y: \"HEIGHTM\"})\n ]\n})\n```\nThis gives us a very basic scatter plot, and there are a few adjustments that we might want to make to improve it’s clarity. You might notice that the x-axis looks a little bit odd for data representing years. The year values are treated as numbers, and so Observable formats them with commas. This is helpful when we are plotting large numbers, but not so helpful when they are actually years. There are a couple of approaches we could take, but the easiest way is to convert the\nPYEAR\ncolumn from a number to a date, and Observable will know how to format it correctly:\n1\n2\n3\n4\n5\n6\n7\n```{ojs}\ndataTyped = data.map(({ PYEAR, HEIGHTM, REGION_FACTOR }) => ({\n PYEAR: new Date(PYEAR, 0, 1),\n HEIGHTM,\n REGION_FACTOR\n}))\n```\nLet’s also edit the axis labels to something more readable than the column names, and add a grid in the background. We use the\ngrid\n,\nx\n, and\ny\narguments to make these adjustments, remembering to also update the data to our new (correctly typed) dataset:\nWe can add comments to document our code using\n//\nin the same way we use\n#\nin R.\n1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n```{ojs}\nPlot.plot({\n // Draw points\n marks: [\n Plot.dot(dataTyped, {x: \"PYEAR\", y: \"HEIGHTM\"})\n ],\n // Grid and axes styling\n grid: true,\n x: {label: \"Year of the first recorded climbing attempt on the peak\"},\n y: {label: \"Peak height (m)\"}\n})\n```\nTo change the colour of the points, we edit the\nmapping\nto also set the\nfill\ncolour of the points to be based on the values in the\nREGION_FACTOR\ncolumn. Within the\ncolor\nargument, we can set whether or not we want a legend, and also choose a colour palette in the\nscheme\nargument.\nObservable colour palettes\n: The\nObservable documentation\nhas an interactive colour palette viewer, where you can browse different sequential, diverging, and discrete colour palettes. The built-in options include the\nColorBrewer\npalettes, which are also available in R.\n1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n```{ojs}\nPlot.plot({\n // Draw points\n marks: [\n Plot.dot(dataTyped, {x: \"PYEAR\", y: \"HEIGHTM\", fill: \"REGION_FACTOR\"})\n ],\n // Colours\n color: {legend: true, scheme: \"set2\"},\n // Grid and axes styling\n grid: true,\n x: {label: \"Year of the first recorded climbing attempt on the peak\"},\n y: {label: \"Peak height (m)\"}\n})\n```\nFinally, we can add a title, subtitle, and caption to the plot. We can also set the size of the plot area, and change the sizes of the margins to add a little bit more space around the plot:\n1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n```{ojs}\nPlot.plot({\n // Draw points\n marks: [\n Plot.dot(dataTyped, {x: \"PYEAR\", y: \"HEIGHTM\", fill: \"REGION_FACTOR\"})\n ],\n // Colours\n color: {legend: true, scheme: \"set2\"},\n // Grid and axes styling\n grid: true,\n x: {label: \"Year of the first recorded climbing attempt on the peak\"},\n y: {label: \"Peak height (m)\"},\n // Text\n title: \"The History of Himalayan Expeditions\",\n subtitle: \"For peaks in the Himalayas that have been climbed, this chart shows the year of the first recorded climb and the height of the peak.\",\n caption: \"Data: The Himalayan Database (2017)\",\n // Size\n height: 400,\n width: 800,\n marginLeft: 50,\n marginRight: 50\n})\n```\nThis introductory example showcases only a very small amount of what you can do with Observable. If you start making more plots in Observable, you’ll likely notice that there are lots of different ways to do things. For example, you could edit the axis labels using the\nPlot.AxisX()\nfunction instead of in the\nx\nargument. You could also use another library entirely (such as D3) to create a scatter plot. And since Observable is JavaScript-based, you can also use CSS to edit the styling of plot elements, or add hover effects. In terms of interactivity, you can easily add dropdown menus or sliders to plot different subsets of your data, using the\nObservable Inputs\n(core) library.\nOne of the other nice features of Observable is that, if you see a complicated plot that you like, it’s fairly straightforward to import the notebook that creates it and replace the data with your own. See\nquarto.org/docs/interactive/ojs/examples/population\nfor an example of importing a sunburst diagram.\nSaving a static image\nWhen you create a plot using Observable in your Quarto document, the images are rendered as SVG . However, you may also want to save a static or raster image file (such as a PNG) to share on social media, for example. Of course, the easiest way might be to simply take a screenshot. But you could automate it using the\nwebshot()\nfunction from the\n{webshot2}\npackage, and using CSS selectors to capture the Observable cell output with\nselector = \".cell-output.cell-output-display\"\n.\nAdditional resources\nThe\nQuarto documentation\nhas lots of information about using Observable in Quarto, including with R and Python. It also has plenty of\nexamples with code\n.\nDeepali Kank\nhas lots of great examples of charts created with Observable and D3, and many with the data wrangling performed in R. This\nchart about fragrances in perfumes\nis especially beautiful!\nIf you’re looking for a different way to work with D3 and R together, then the\n{r2d3} package\nprovides functionality for working with D3 visualisations from R. This Jumping Rivers\nblog post by Mandy Norrbo\nprovides a nice introduction.\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nR on Nicola Rennie\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "Observable is a JavaScript-based reactive programming environment, commonly used for interactive data exploration, visualisation, and dashboards. You can create and publish Observable notebooks at observablehq.com (which is also a great place to look f...",
    "meta_keywords": null,
    "og_description": "Observable is a JavaScript-based reactive programming environment, commonly used for interactive data exploration, visualisation, and dashboards. You can create and publish Observable notebooks at observablehq.com (which is also a great place to look f...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Observable for R users | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 12.9,
    "sitemap_lastmod": null,
    "twitter_description": "Observable is a JavaScript-based reactive programming environment, commonly used for interactive data exploration, visualisation, and dashboards. You can create and publish Observable notebooks at observablehq.com (which is also a great place to look f...",
    "twitter_title": "Observable for R users | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/03/observable-for-r-users/",
    "word_count": 2589
  }
}