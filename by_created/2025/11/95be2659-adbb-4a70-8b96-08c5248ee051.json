{
  "uuid": "95be2659-adbb-4a70-8b96-08c5248ee051",
  "created_at": "2025-11-22 19:57:57",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/08/metacore-and-metatools-0-2-0/",
    "crawled_at": "2025-11-22T10:44:45.149528",
    "external_links": [
      {
        "href": "https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html",
        "text": "pharmaverse blog"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://atorus-research.github.io/metacore/",
        "text": "{metacore}"
      },
      {
        "href": "https://github.com/pharmaverse/metatools",
        "text": "{metatools}"
      },
      {
        "href": "https://www.linkedin.com/in/liam-hobby/",
        "text": "Liam"
      },
      {
        "href": "https://atorus-research.github.io/metacore/",
        "text": "{metacore}"
      },
      {
        "href": "https://github.com/pharmaverse/metatools",
        "text": "{metatools}"
      },
      {
        "href": "https://atorus-research.github.io/metacore/",
        "text": "{metacore}"
      },
      {
        "href": "https://github.com/pharmaverse/metatools",
        "text": "{metatools}"
      },
      {
        "href": "https://atorus-research.github.io/metacore/reference/select_dataset.html",
        "text": "metacore::select_dataset()"
      },
      {
        "href": "https://github.com/pharmaverse/metatools",
        "text": "{metatools}"
      },
      {
        "href": "https://github.com/pharmaverse/metatools",
        "text": "{metatools}"
      },
      {
        "href": "https://github.com/pharmaverse/metatools",
        "text": "{metatools}"
      },
      {
        "href": "https://atorus-research.github.io/metacore/reference/select_dataset.html",
        "text": "metacore::select_dataset()"
      },
      {
        "href": "https://atorus-research.github.io/metacore/reference/select_dataset.html",
        "text": "metacore::select_dataset()"
      },
      {
        "href": "https://github.com/pharmaverse/metatools",
        "text": "{metatools}"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/build_from_derived.html",
        "text": "build_from_derived"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/check_variables.html",
        "text": "check_variables"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/check_unique_keys.html",
        "text": "check_unique_keys"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/make_supp_qual.html",
        "text": "make_supp_qual"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/drop_unspec_vars.html",
        "text": "drop_unspec_vars"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/add_variables.html",
        "text": "add_variables"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/order_cols.html",
        "text": "order_cols"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/sort_by_key.html",
        "text": "sort_by_key"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/create_var_from_codelist.html",
        "text": "metatools::create_var_from_codelist()"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/create_var_from_codelist.html",
        "text": "metatools::create_var_from_codelist()"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/create_cat_var.html",
        "text": "metatools::create_cat_var()"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/build_from_derived.html",
        "text": "metatools::build_from_derived()"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/combine_supp.html",
        "text": "metatools::combine_supp()"
      },
      {
        "href": "https://pharmaverse.github.io/metatools/reference/check_variables.html",
        "text": "metatools::check_variables()"
      },
      {
        "href": "https://cli.r-lib.org/",
        "text": "{cli}"
      },
      {
        "href": "https://atorus-research.github.io/metacore/",
        "text": "{metacore}"
      },
      {
        "href": "https://github.com/atorus-research/metacore",
        "text": "Metacore"
      },
      {
        "href": "https://github.com/pharmaverse/metatools",
        "text": "Metatools"
      },
      {
        "href": "https://github.com/pharmaverse/blog/tree/main/posts/zzz_DO_NOT_EDIT_metacore_0.2.0/metacore_0.2.0.qmd",
        "text": "Source"
      },
      {
        "href": "https://pharmaverse.github.io/blog/session_info.html",
        "text": "Session info"
      },
      {
        "href": "https://creativecommons.org/licenses/by/4.0/",
        "text": "CC BY 4.0"
      },
      {
        "href": "https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html",
        "text": "https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html"
      },
      {
        "href": "https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html",
        "text": "pharmaverse blog"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Metacore and Metatools 0.2.0 | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/liam-hobby/",
        "text": "Liam Hobby"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-394601 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Metacore and Metatools 0.2.0</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">August 3, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/liam-hobby/\">Liam Hobby</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html\"> pharmaverse blog</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<!--------------- typical setup ----------------->\n<!--------------- post begins here ----------------->\n<section class=\"level2\" id=\"section\">\n<h2 class=\"anchored\" data-anchor-id=\"section\"><bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"></bslib-tooltip></h2>\n<p><template>A Centralized Metadata Object Focus on Clinical Trial Data Programming Workflows • metacore</template> <a class=\"r-link-pkg\" href=\"https://atorus-research.github.io/metacore/\" rel=\"nofollow\" target=\"_blank\">{metacore}</a>  and <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>GitHub – pharmaverse/metatools</template> <a class=\"r-link-pkg\" href=\"https://github.com/pharmaverse/metatools\" rel=\"nofollow\" target=\"_blank\">{metatools}</a> </bslib-tooltip> have a new package maintainer</p>\n<p>Hi, everyone! I’m <a href=\"https://www.linkedin.com/in/liam-hobby/\" rel=\"nofollow\" target=\"_blank\" title=\"Liam Hobby\">Liam</a> and I’m excited to announce that I have taken over as package maintainer for both <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>A Centralized Metadata Object Focus on Clinical Trial Data Programming Workflows • metacore</template> <a class=\"r-link-pkg\" href=\"https://atorus-research.github.io/metacore/\" rel=\"nofollow\" target=\"_blank\">{metacore}</a> </bslib-tooltip> and <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>GitHub – pharmaverse/metatools</template> <a class=\"r-link-pkg\" href=\"https://github.com/pharmaverse/metatools\" rel=\"nofollow\" target=\"_blank\">{metatools}</a> </bslib-tooltip> from Christina Fillmore. I work at GSK as a clinical programmer and I am coming to the end of my second year in the industry. This is my first experience working within the open-source world, but I am a regular user of pharmaverse packages and am keen to get more involved with the community.</p>\n<p>Christina remains on-hand as a mentor and I’d like to thank both her and Ben Straub for the continued support before we dive into the details of <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>A Centralized Metadata Object Focus on Clinical Trial Data Programming Workflows • metacore</template> <a class=\"r-link-pkg\" href=\"https://atorus-research.github.io/metacore/\" rel=\"nofollow\" target=\"_blank\">{metacore}</a> </bslib-tooltip>/<bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>GitHub – pharmaverse/metatools</template> <a class=\"r-link-pkg\" href=\"https://github.com/pharmaverse/metatools\" rel=\"nofollow\" target=\"_blank\">{metatools}</a> </bslib-tooltip> 0.2.0.</p>\n</section>\n<section class=\"level2\" id=\"whats-new-in-metacore\">\n<h2 class=\"anchored\" data-anchor-id=\"whats-new-in-metacore\">What’s new in metacore?</h2>\n<p>The goal of version 0.2.0 was to clarify the distinction between an imported Metacore spec, containing information about multiple datasets, and a subsetted spec containing information about just a single dataset (as achieved via <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Select metacore object to single dataset — select_dataset • metacore</template> <a class=\"r-link-call\" href=\"https://atorus-research.github.io/metacore/reference/select_dataset.html\" rel=\"nofollow\" target=\"_blank\">metacore::select_dataset()</a> </bslib-tooltip>).</p>\n<p>We received a number of questions and issues raised where users were attempting to use a Metacore object containing metadata for multiple datasets in functions from <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>GitHub – pharmaverse/metatools</template> <a class=\"r-link-pkg\" href=\"https://github.com/pharmaverse/metatools\" rel=\"nofollow\" target=\"_blank\">{metatools}</a> </bslib-tooltip> that were designed to take a single, subsetted specification. When developing datasets, the typical workflow is to be working on a single dataset at a time – so subsetting the Metacore object is the logical thing to do. The issue was that the approach to functions in <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>GitHub – pharmaverse/metatools</template> <a class=\"r-link-pkg\" href=\"https://github.com/pharmaverse/metatools\" rel=\"nofollow\" target=\"_blank\">{metatools}</a> </bslib-tooltip> was inconsistent, with some functions permitting multiple specification metadata and others not.</p>\n<p>Now, a Metacore object which has multiple datasets or one with a single dataset have been redesigned to be programmatically distinct, with the single dataset implemented as a subclass of Metacore called “DatasetMeta”.</p>\n<p>From the users’ perspective there is one key change. <strong>A metadata object about a single dataset will be required for users to work with <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>GitHub – pharmaverse/metatools</template> <a class=\"r-link-pkg\" href=\"https://github.com/pharmaverse/metatools\" rel=\"nofollow\" target=\"_blank\">{metatools}</a> </bslib-tooltip> functions</strong>, which have had their API harmonised to accept only subsetted Metacore objects (via <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Select metacore object to single dataset — select_dataset • metacore</template> <a class=\"r-link-call\" href=\"https://atorus-research.github.io/metacore/reference/select_dataset.html\" rel=\"nofollow\" target=\"_blank\">metacore::select_dataset()</a> </bslib-tooltip>).</p>\n<p>The print statements of both combined and subsetted Metacore objects have been refined to better illustrate the differences between them and provide more helpful information to the user.</p>\n<div class=\"cell\">\n<pre>library(dplyr)</pre>\n<div class=\"cell-output cell-output-stderr\">\n<pre>\nAttaching package: 'dplyr'</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>The following objects are masked from 'package:stats':\n\n    filter, lag</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>The following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union</pre>\n</div>\n<pre>library(metacore)\nlibrary(metatools)\nlibrary(tibble)\nlibrary(haven)\n\nload(metacore_example(\"pilot_ADaM.rda\"))\nmetacore</pre>\n<div class=\"cell-output cell-output-stderr\">\n<pre>── Metacore object contains metadata for 5 datasets ────────────────────────────</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ ADSL (Subject-Level Analysis Dataset)</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ ADADAS (ADAS-Cog Analysis)</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ ADLBC (Analysis Dataset Lab Blood Chemistry)</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ ADTTE (AE Time To 1st Derm. Event Analysis)</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ ADAE (Adverse Events Analysis Dataset)</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>ℹ To use the Metacore object with metatools package, first subset a dataset using `metacore::select_dataset()`</pre>\n</div>\n</div>\n<p>The <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Select metacore object to single dataset — select_dataset • metacore</template> <a class=\"r-link-call\" href=\"https://atorus-research.github.io/metacore/reference/select_dataset.html\" rel=\"nofollow\" target=\"_blank\">metacore::select_dataset()</a> </bslib-tooltip> function is now explicit about what is being selected:</p>\n<div class=\"cell\">\n<pre>adsl_spec &lt;- select_dataset(metacore, \"ADSL\", quiet = TRUE)</pre>\n<div class=\"cell-output cell-output-stderr\">\n<pre>✔ ADSL dataset successfully selected</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>ℹ Dataset metadata specification subsetted with suppressed warnings</pre>\n</div>\n</div>\n<p>Printing the subsetted object now provides more detailed information:</p>\n<div class=\"cell\">\n<pre>adsl_spec</pre>\n<div class=\"cell-output cell-output-stderr\">\n<pre>── Dataset specification object for ADSL (Subject-Level Analysis Dataset) ──────</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>The dataset contains 51 variables</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>Dataset key: USUBJID</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>The structure of the specification object is:</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ codelist: character [16 x 4] code_id, name, type, codes</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ derivations: character [50 x 2] derivation_id derivation</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ ds_spec: character [1 x 3] dataset, structure, label</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ ds_vars: character [51 x 7] dataset, variable, key_seq, order, keep, core,\n  supp_flag</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ supp: character [0 x 4] dataset, variable, idvar, qeval</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ value_spec: character [51 x 8] dataset, variable, code_id, derivation_id,\n  type, origin, where, sig_dig</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>→ var_spec: character [51 x 6] variable, type, length, label, format, common</pre>\n</div>\n<div class=\"cell-output cell-output-stderr\">\n</div>\n<div class=\"cell-output cell-output-stderr\">\n<pre>To inspect the specification object use `View()` in the console.</pre>\n</div>\n</div>\n<p>Functions that take a Metacore object as input will emit a helpful message if a subsetted object is not supplied.</p>\n<div class=\"cell\">\n<pre>ds_list &lt;- list(DM = read_xpt(metatools_example(\"dm.xpt\")))\ncreate_var_from_codelist(data.frame(), metacore)</pre>\n<div class=\"cell-output cell-output-error\">\n<pre>Error in `verify_DatasetMeta()`:\n! The object supplied to the argument `metacore` is not a subsetted\n  Metacore object. Use `metacore::select_dataset()` to subset metadata for the\n  required dataset.</pre>\n</div>\n</div>\n<section class=\"level4\" id=\"related-soft-deprecation-of-dataset_name-in-metatools\">\n<h4 class=\"anchored\" data-anchor-id=\"related-soft-deprecation-of-dataset_name-in-metatools\">Related: soft deprecation of <code>dataset_name</code> in metatools</h4>\n<p>Additionally, the argument <code>dataset_name</code> has been <strong>soft-deprecated</strong> across all functions in <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>GitHub - pharmaverse/metatools</template> <a class=\"r-link-pkg\" href=\"https://github.com/pharmaverse/metatools\" rel=\"nofollow\" target=\"_blank\">{metatools}</a> </bslib-tooltip>. While the argument is still available and will not break existing code, using it will now issue a warning. This change encourages users to adopt the preferred workflow, creating a subsetted Metacore object, and improves performance by avoiding repeated subsetting operations each time these functions are called.</p>\n<p>The full list of affected functions is included below. The <code>dataset_name</code> argument will remain available for <strong>at least one year</strong> from the release date of 0.2.0 before being fully removed.</p>\n<p><a href=\"https://pharmaverse.github.io/metatools/reference/build_from_derived.html\" rel=\"nofollow\" target=\"_blank\" title=\"Build a dataset from derived\"><code>build_from_derived</code></a>, <a href=\"https://pharmaverse.github.io/metatools/reference/check_variables.html\" rel=\"nofollow\" target=\"_blank\" title=\"Check Variable Names\"><code>check_variables</code></a>, <a href=\"https://pharmaverse.github.io/metatools/reference/check_unique_keys.html\" rel=\"nofollow\" target=\"_blank\" title=\"Check Uniqueness of Records by Key\"><code>check_unique_keys</code></a>, <a href=\"https://pharmaverse.github.io/metatools/reference/make_supp_qual.html\" rel=\"nofollow\" target=\"_blank\" title=\"Make Supplemental Qualifier\"><code>make_supp_qual</code></a>, <a href=\"https://pharmaverse.github.io/metatools/reference/drop_unspec_vars.html\" rel=\"nofollow\" target=\"_blank\" title=\"Drop Unspecified Variables\"><code>drop_unspec_vars</code></a>, <a href=\"https://pharmaverse.github.io/metatools/reference/add_variables.html\" rel=\"nofollow\" target=\"_blank\" title=\"Add Missing Variables\"><code>add_variables</code></a>, <a href=\"https://pharmaverse.github.io/metatools/reference/order_cols.html\" rel=\"nofollow\" target=\"_blank\" title=\"Sort Columns by Order\"><code>order_cols</code></a>, <a href=\"https://pharmaverse.github.io/metatools/reference/sort_by_key.html\" rel=\"nofollow\" target=\"_blank\" title=\"Sort Rows by Key Sequence\"><code>sort_by_key</code></a>.</p>\n</section>\n</section>\n<section class=\"level2\" id=\"create_var_from_codelist\">\n<h2 class=\"anchored\" data-anchor-id=\"create_var_from_codelist\"><code>create_var_from_codelist()</code></h2>\n<p><bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Create Variable from Codelist — create_var_from_codelist • metatools</template> <a class=\"r-link-call\" href=\"https://pharmaverse.github.io/metatools/reference/create_var_from_codelist.html\" rel=\"nofollow\" target=\"_blank\">metatools::create_var_from_codelist()</a> </bslib-tooltip> now optionally allows the user to specify a codelist from which the new column should be generated. This is useful in situations like the one below where the user is trying to derive <code>PARAM</code> from <code>PARAMCD</code> but the codelist for the <code>out_var</code> (<code>PARAM</code>) does not contain the values of <code>PARAMCD</code>.</p>\n<table class=\"caption-top table\">\n<thead>\n<tr class=\"header\">\n<th>ID</th>\n<th>Order</th>\n<th>Code</th>\n<th>Decode</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>PARAM</td>\n<td>1</td>\n<td>Alanine Aminotransferase</td>\n<td>Alanine Aminotransferase</td>\n</tr>\n<tr class=\"even\">\n<td>PARAM</td>\n<td>2</td>\n<td>Bilirubin</td>\n<td>Bilirubin</td>\n</tr>\n<tr class=\"odd\">\n<td>PARAM</td>\n<td>3</td>\n<td>Creatine</td>\n<td>Creatine</td>\n</tr>\n</tbody>\n</table>\n<p>Example of default usage not providing the correct result:</p>\n<div class=\"cell\">\n<pre>adlbc_spec &lt;- suppressMessages(select_dataset(metacore, \"ADLBC\", quiet = TRUE))\ndata &lt;- tibble(PARAMCD = c(\"ALB\", \"ALP\", \"ALT\"))\ncreate_var_from_codelist(data, adlbc_spec, input_var = PARAMCD, out_var = PARAM, strict = FALSE)</pre>\n<div class=\"cell-output cell-output-stdout\">\n<pre># A tibble: 3 × 2\n  PARAMCD PARAM\n  &lt;chr&gt;   &lt;chr&gt;\n1 ALB     &lt;NA&gt; \n2 ALP     &lt;NA&gt; \n3 ALT     &lt;NA&gt; </pre>\n</div>\n</div>\n<p>By default, <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Create Variable from Codelist — create_var_from_codelist • metatools</template> <a class=\"r-link-call\" href=\"https://pharmaverse.github.io/metatools/reference/create_var_from_codelist.html\" rel=\"nofollow\" target=\"_blank\">metatools::create_var_from_codelist()</a> </bslib-tooltip> takes the codelist of the <code>out_var</code> as input. The user can now overwrite this default with a specific codelist (in this case <code>PARAMCD</code> below) to achieve the desired result.</p>\n<table class=\"caption-top table\">\n<thead>\n<tr class=\"header\">\n<th>ID</th>\n<th>Order</th>\n<th>Code</th>\n<th>Decode</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>PARAMCD</td>\n<td>1</td>\n<td>ALT</td>\n<td>Alanine Aminotransferase</td>\n</tr>\n<tr class=\"even\">\n<td>PARAMCD</td>\n<td>2</td>\n<td>BILI</td>\n<td>Bilirubin</td>\n</tr>\n<tr class=\"odd\">\n<td>PARAMCD</td>\n<td>3</td>\n<td>CREAT</td>\n<td>Creatine</td>\n</tr>\n</tbody>\n</table>\n<div class=\"cell\">\n<pre>create_var_from_codelist(data, adlbc_spec, input_var = PARAMCD, out_var = PARAM, codelist = get_control_term(adlbc_spec, PARAMCD), decode_to_code = FALSE)</pre>\n<div class=\"cell-output cell-output-stdout\">\n<pre># A tibble: 3 × 2\n  PARAMCD PARAM                         \n  &lt;chr&gt;   &lt;chr&gt;                         \n1 ALB     Albumin (g/L)                 \n2 ALP     Alkaline Phosphatase (U/L)    \n3 ALT     Alanine Aminotransferase (U/L)</pre>\n</div>\n</div>\n<p>This function also provides a new option <code>strict</code>, which when set to <code>TRUE</code> (default) will issue a warning indicating any values in your input column that do not appear in the codelist.</p>\n<div class=\"cell\">\n<pre>data &lt;- tibble(PARAMCD = c(\"ALB\", \"ALP\", \"ALT\", \"DUMMY1\", \"DUMMY2\"))\nx &lt;- create_var_from_codelist(data, adlbc_spec, input_var = PARAMCD, out_var = PARAM, codelist = get_control_term(adlbc_spec, PARAMCD), decode_to_code = FALSE, strict = TRUE)</pre>\n<div class=\"cell-output cell-output-stderr\">\n<pre>Warning: In `create_var_from_codelist()`: The following values present in the input\ndataset are not present in the codelist: DUMMY1 and DUMMY2</pre>\n</div>\n</div>\n</section>\n<section class=\"level2\" id=\"create_cat_var\">\n<h2 class=\"anchored\" data-anchor-id=\"create_cat_var\">create_cat_var()</h2>\n<p><bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Create Categorical Variable from Codelist — create_cat_var • metatools</template> <a class=\"r-link-call\" href=\"https://pharmaverse.github.io/metatools/reference/create_cat_var.html\" rel=\"nofollow\" target=\"_blank\">metatools::create_cat_var()</a> </bslib-tooltip> has been updated so that users can now specify to create a new variable from either the <code>code</code> or <code>decode</code> column of the controlled terminology. Previously, a codelist set-up like the one below would be evaluated from the <code>code</code> column only, leaving out the “years” text from the new variable.</p>\n<table class=\"caption-top table\">\n<caption>Example of a codelist for AGEGR2</caption>\n<colgroup>\n<col style=\"width: 11%\"/>\n<col style=\"width: 29%\"/>\n<col style=\"width: 16%\"/>\n<col style=\"width: 10%\"/>\n<col style=\"width: 11%\"/>\n<col style=\"width: 20%\"/>\n</colgroup>\n<thead>\n<tr class=\"header\">\n<th>ID</th>\n<th>Name</th>\n<th>Data Type</th>\n<th>Order</th>\n<th>Code</th>\n<th>Decode</th>\n</tr>\n</thead>\n<tbody>\n<tr class=\"odd\">\n<td>AGEGR2</td>\n<td>Pooled Age Group 2</td>\n<td>text</td>\n<td>1</td>\n<td>&lt;35</td>\n<td>&lt;35 years</td>\n</tr>\n<tr class=\"even\">\n<td>AGEGR2</td>\n<td>Pooled Age Group 2</td>\n<td>text</td>\n<td>2</td>\n<td>35-49</td>\n<td>35-49 years</td>\n</tr>\n<tr class=\"odd\">\n<td>AGEGR2</td>\n<td>Pooled Age Group 2</td>\n<td>text</td>\n<td>3</td>\n<td>&gt;= 50</td>\n<td>&gt;= 50 years</td>\n</tr>\n</tbody>\n</table>\n<p>Now, specifying the option <code>create_from_decode = TRUE</code> will allow you to create the variable based on the text in the <code>decode</code> column. If you are using this option to also create a numeric coded variable (in this case <code>AGEGR2N</code>), ensure your CT is set up so that the <code>decode</code> columns match.</p>\n<div class=\"cell\">\n<pre>dm &lt;- read_xpt(metatools_example(\"dm.xpt\"))\ncreate_cat_var(dm, adsl_spec, AGE, AGEGR2, AGEGR2N, create_from_decode = TRUE) %&gt;%\n  select(USUBJID, AGE, AGEGR2, AGEGR2N) %&gt;%\n  head(5)</pre>\n<div class=\"cell-output cell-output-stdout\">\n<pre># A tibble: 5 × 4\n  USUBJID       AGE AGEGR2      AGEGR2N\n  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;\n1 01-701-1015    63 18-64 years       1\n2 01-701-1023    64 18-64 years       1\n3 01-701-1028    71 65-80 years       2\n4 01-701-1033    74 65-80 years       2\n5 01-701-1034    77 65-80 years       2</pre>\n</div>\n</div>\n<p>This function now also provides a default <code>strict = TRUE</code> option, that issues a warning message if there are values in the reference column that do not fit into the categories in the controlled terminology. This can be disabled with <code>strict = FALSE</code>.</p>\n<div class=\"cell\">\n<pre>dm2 &lt;- dm |&gt;\n  tibble::add_row(AGE = 15) |&gt;\n  tibble::add_row(AGE = 16)\nx &lt;- create_cat_var(dm2, adsl_spec, AGE, AGEGR2, create_from_decode = TRUE)</pre>\n<div class=\"cell-output cell-output-stderr\">\n<pre>Warning: There are 2 observations in AGE that do not fit into the provided categories\nfor AGEGR2. Please check your controlled terminology.</pre>\n</div>\n</div>\n</section>\n<section class=\"level2\" id=\"summary-of-other-changes\">\n<h2 class=\"anchored\" data-anchor-id=\"summary-of-other-changes\">Summary of Other Changes</h2>\n<ul>\n<li><p>Fixed a bug where the presence of variables with VLM in the <code>value_spec</code> table would prevent variables of the same name in different datasets being populated in the <code>value_spec</code> table.</p></li>\n<li><p><bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Build a dataset from derived — build_from_derived • metatools</template> <a class=\"r-link-call\" href=\"https://pharmaverse.github.io/metatools/reference/build_from_derived.html\" rel=\"nofollow\" target=\"_blank\">metatools::build_from_derived()</a> </bslib-tooltip> adds new options for the <code>keep</code> parameter that allow users to derive either <code>all</code> or only <code>prerequisite</code> columns from source datasets. Thanks to Matt Bearham for this amendment!</p></li>\n<li><p><bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Combine the Domain and Supplemental Qualifier — combine_supp • metatools</template> <a class=\"r-link-call\" href=\"https://pharmaverse.github.io/metatools/reference/combine_supp.html\" rel=\"nofollow\" target=\"_blank\">metatools::combine_supp()</a> </bslib-tooltip> now adds the label found in <code>QLABEL</code> to the <code>QNAM</code> columns that are derived from supplementary datasets. Thanks to Bill Denney for this amendment!</p></li>\n<li><p><bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Check Variable Names — check_variables • metatools</template> <a class=\"r-link-call\" href=\"https://pharmaverse.github.io/metatools/reference/check_variables.html\" rel=\"nofollow\" target=\"_blank\">metatools::check_variables()</a> </bslib-tooltip> now provides a <code>strict</code> option that will issue a warning rather than throw an error when <code>strict = FALSE</code>.</p></li>\n<li><p><bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>Helpers for Developing Command Line Interfaces • cli</template> <a class=\"r-link-pkg\" href=\"https://cli.r-lib.org/\" rel=\"nofollow\" target=\"_blank\">{cli}</a> </bslib-tooltip> output is now used across both packages and messaging for various functions has been improved.</p></li>\n</ul>\n</section>\n<section class=\"level2\" id=\"whats-next\">\n<h2 class=\"anchored\" data-anchor-id=\"whats-next\">What’s next?</h2>\n<p>The next step for both packages will be working through and closing out issues from the backlog, updating the examples and vignettes, and improving the user experience via more informative messaging.</p>\n<p>For <bslib-tooltip bsoptions=\"[]\" data-require-bs-caller=\"tooltip()\" data-require-bs-version=\"5\" placement=\"auto\"> <template>A Centralized Metadata Object Focus on Clinical Trial Data Programming Workflows • metacore</template> <a class=\"r-link-pkg\" href=\"https://atorus-research.github.io/metacore/\" rel=\"nofollow\" target=\"_blank\">{metacore}</a> </bslib-tooltip>, there has been some interest in a UI to help users write custom specification readers for specs not in the standard P21 format. So this will be explored as well.</p>\n<p>I hope to release the next update towards the end of the year, looking at an approximately 6-monthly release schedule going forward. Until then I encourage people to explore some of the new features and provide feedback on the changes through GitHub at the links below:</p>\n<ul>\n<li><p><a href=\"https://github.com/atorus-research/metacore\" rel=\"nofollow\" target=\"_blank\" title=\"GitHub - Metacore\">Metacore</a></p></li>\n<li><p><a href=\"https://github.com/pharmaverse/metatools\" rel=\"nofollow\" target=\"_blank\" title=\"GitHub - Metatools\">Metatools</a></p></li>\n</ul>\n<p>Thanks for reading!</p>\n<!--------------- appendices go here ----------------->\n</section>\n<div class=\"cell\">\n<div class=\"cell-output-display\">\n</div>\n</div>\n<div class=\"default\" id=\"quarto-appendix\"><section class=\"level2 appendix\" id=\"last-updated\"><h2 class=\"anchored quarto-appendix-heading\">Last updated</h2><div class=\"quarto-appendix-contents\">\n<p>2025-08-07 01:11:34.287895</p>\n</div></section><section class=\"level2 appendix\" id=\"details\"><h2 class=\"anchored quarto-appendix-heading\">Details</h2><div class=\"quarto-appendix-contents\">\n<p><a href=\"https://github.com/pharmaverse/blog/tree/main/posts/zzz_DO_NOT_EDIT_metacore_0.2.0/metacore_0.2.0.qmd\" rel=\"nofollow\" target=\"_blank\">Source</a>, <a href=\"https://pharmaverse.github.io/blog/session_info.html\" rel=\"nofollow\" target=\"_blank\">Session info</a></p>\n</div></section><section class=\"quarto-appendix-contents\" id=\"quarto-reuse\"><h2 class=\"anchored quarto-appendix-heading\">Reuse</h2><div class=\"quarto-appendix-contents\"><div><a href=\"https://creativecommons.org/licenses/by/4.0/\" rel=\"nofollow\" target=\"_blank\">CC BY 4.0</a></div></div></section><section class=\"quarto-appendix-contents\" id=\"quarto-citation\"><h2 class=\"anchored quarto-appendix-heading\">Citation</h2><div><div class=\"quarto-appendix-secondary-label\">BibTeX citation:</div><pre>@online{hobby2025,\n  author = {Hobby, Liam},\n  title = {Metacore and {Metatools} 0.2.0},\n  date = {2025-08-04},\n  url = {https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html},\n  langid = {en}\n}\n</pre><div class=\"quarto-appendix-secondary-label\">For attribution, please cite this work as:</div><div class=\"csl-entry quarto-appendix-citeas\" id=\"ref-hobby2025\">\nHobby, Liam. 2025. <span>“Metacore and Metatools 0.2.0.”</span> August\n4, 2025. <a href=\"https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html\" rel=\"nofollow\" target=\"_blank\">https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html</a>.\n</div></div></section></div>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html\"> pharmaverse blog</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Metacore and Metatools 0.2.0\nPosted on\nAugust 3, 2025\nby\nLiam Hobby\nin\nR bloggers\n| 0 Comments\n[This article was first published on\npharmaverse blog\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\n{metacore}\nand\n{metatools}\nhave a new package maintainer\nHi, everyone! I’m\nLiam\nand I’m excited to announce that I have taken over as package maintainer for both\n{metacore}\nand\n{metatools}\nfrom Christina Fillmore. I work at GSK as a clinical programmer and I am coming to the end of my second year in the industry. This is my first experience working within the open-source world, but I am a regular user of pharmaverse packages and am keen to get more involved with the community.\nChristina remains on-hand as a mentor and I’d like to thank both her and Ben Straub for the continued support before we dive into the details of\n{metacore}\n/\n{metatools}\n0.2.0.\nWhat’s new in metacore?\nThe goal of version 0.2.0 was to clarify the distinction between an imported Metacore spec, containing information about multiple datasets, and a subsetted spec containing information about just a single dataset (as achieved via\nmetacore::select_dataset()\n).\nWe received a number of questions and issues raised where users were attempting to use a Metacore object containing metadata for multiple datasets in functions from\n{metatools}\nthat were designed to take a single, subsetted specification. When developing datasets, the typical workflow is to be working on a single dataset at a time – so subsetting the Metacore object is the logical thing to do. The issue was that the approach to functions in\n{metatools}\nwas inconsistent, with some functions permitting multiple specification metadata and others not.\nNow, a Metacore object which has multiple datasets or one with a single dataset have been redesigned to be programmatically distinct, with the single dataset implemented as a subclass of Metacore called “DatasetMeta”.\nFrom the users’ perspective there is one key change.\nA metadata object about a single dataset will be required for users to work with\n{metatools}\nfunctions\n, which have had their API harmonised to accept only subsetted Metacore objects (via\nmetacore::select_dataset()\n).\nThe print statements of both combined and subsetted Metacore objects have been refined to better illustrate the differences between them and provide more helpful information to the user.\nlibrary(dplyr)\nAttaching package: 'dplyr'\nThe following objects are masked from 'package:stats':\n\n    filter, lag\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\nlibrary(metacore)\nlibrary(metatools)\nlibrary(tibble)\nlibrary(haven)\n\nload(metacore_example(\"pilot_ADaM.rda\"))\nmetacore\n── Metacore object contains metadata for 5 datasets ────────────────────────────\n→ ADSL (Subject-Level Analysis Dataset)\n→ ADADAS (ADAS-Cog Analysis)\n→ ADLBC (Analysis Dataset Lab Blood Chemistry)\n→ ADTTE (AE Time To 1st Derm. Event Analysis)\n→ ADAE (Adverse Events Analysis Dataset)\nℹ To use the Metacore object with metatools package, first subset a dataset using `metacore::select_dataset()`\nThe\nmetacore::select_dataset()\nfunction is now explicit about what is being selected:\nadsl_spec <- select_dataset(metacore, \"ADSL\", quiet = TRUE)\n✔ ADSL dataset successfully selected\nℹ Dataset metadata specification subsetted with suppressed warnings\nPrinting the subsetted object now provides more detailed information:\nadsl_spec\n── Dataset specification object for ADSL (Subject-Level Analysis Dataset) ──────\nThe dataset contains 51 variables\nDataset key: USUBJID\nThe structure of the specification object is:\n→ codelist: character [16 x 4] code_id, name, type, codes\n→ derivations: character [50 x 2] derivation_id derivation\n→ ds_spec: character [1 x 3] dataset, structure, label\n→ ds_vars: character [51 x 7] dataset, variable, key_seq, order, keep, core,\n  supp_flag\n→ supp: character [0 x 4] dataset, variable, idvar, qeval\n→ value_spec: character [51 x 8] dataset, variable, code_id, derivation_id,\n  type, origin, where, sig_dig\n→ var_spec: character [51 x 6] variable, type, length, label, format, common\nTo inspect the specification object use `View()` in the console.\nFunctions that take a Metacore object as input will emit a helpful message if a subsetted object is not supplied.\nds_list <- list(DM = read_xpt(metatools_example(\"dm.xpt\")))\ncreate_var_from_codelist(data.frame(), metacore)\nError in `verify_DatasetMeta()`:\n! The object supplied to the argument `metacore` is not a subsetted\n  Metacore object. Use `metacore::select_dataset()` to subset metadata for the\n  required dataset.\nRelated: soft deprecation of\ndataset_name\nin metatools\nAdditionally, the argument\ndataset_name\nhas been\nsoft-deprecated\nacross all functions in\n{metatools}\n. While the argument is still available and will not break existing code, using it will now issue a warning. This change encourages users to adopt the preferred workflow, creating a subsetted Metacore object, and improves performance by avoiding repeated subsetting operations each time these functions are called.\nThe full list of affected functions is included below. The\ndataset_name\nargument will remain available for\nat least one year\nfrom the release date of 0.2.0 before being fully removed.\nbuild_from_derived\n,\ncheck_variables\n,\ncheck_unique_keys\n,\nmake_supp_qual\n,\ndrop_unspec_vars\n,\nadd_variables\n,\norder_cols\n,\nsort_by_key\n.\ncreate_var_from_codelist()\nmetatools::create_var_from_codelist()\nnow optionally allows the user to specify a codelist from which the new column should be generated. This is useful in situations like the one below where the user is trying to derive\nPARAM\nfrom\nPARAMCD\nbut the codelist for the\nout_var\n(\nPARAM\n) does not contain the values of\nPARAMCD\n.\nID\nOrder\nCode\nDecode\nPARAM\n1\nAlanine Aminotransferase\nAlanine Aminotransferase\nPARAM\n2\nBilirubin\nBilirubin\nPARAM\n3\nCreatine\nCreatine\nExample of default usage not providing the correct result:\nadlbc_spec <- suppressMessages(select_dataset(metacore, \"ADLBC\", quiet = TRUE))\ndata <- tibble(PARAMCD = c(\"ALB\", \"ALP\", \"ALT\"))\ncreate_var_from_codelist(data, adlbc_spec, input_var = PARAMCD, out_var = PARAM, strict = FALSE)\n# A tibble: 3 × 2\n  PARAMCD PARAM\n  <chr>   <chr>\n1 ALB     <NA> \n2 ALP     <NA> \n3 ALT     <NA>\nBy default,\nmetatools::create_var_from_codelist()\ntakes the codelist of the\nout_var\nas input. The user can now overwrite this default with a specific codelist (in this case\nPARAMCD\nbelow) to achieve the desired result.\nID\nOrder\nCode\nDecode\nPARAMCD\n1\nALT\nAlanine Aminotransferase\nPARAMCD\n2\nBILI\nBilirubin\nPARAMCD\n3\nCREAT\nCreatine\ncreate_var_from_codelist(data, adlbc_spec, input_var = PARAMCD, out_var = PARAM, codelist = get_control_term(adlbc_spec, PARAMCD), decode_to_code = FALSE)\n# A tibble: 3 × 2\n  PARAMCD PARAM                         \n  <chr>   <chr>                         \n1 ALB     Albumin (g/L)                 \n2 ALP     Alkaline Phosphatase (U/L)    \n3 ALT     Alanine Aminotransferase (U/L)\nThis function also provides a new option\nstrict\n, which when set to\nTRUE\n(default) will issue a warning indicating any values in your input column that do not appear in the codelist.\ndata <- tibble(PARAMCD = c(\"ALB\", \"ALP\", \"ALT\", \"DUMMY1\", \"DUMMY2\"))\nx <- create_var_from_codelist(data, adlbc_spec, input_var = PARAMCD, out_var = PARAM, codelist = get_control_term(adlbc_spec, PARAMCD), decode_to_code = FALSE, strict = TRUE)\nWarning: In `create_var_from_codelist()`: The following values present in the input\ndataset are not present in the codelist: DUMMY1 and DUMMY2\ncreate_cat_var()\nmetatools::create_cat_var()\nhas been updated so that users can now specify to create a new variable from either the\ncode\nor\ndecode\ncolumn of the controlled terminology. Previously, a codelist set-up like the one below would be evaluated from the\ncode\ncolumn only, leaving out the “years” text from the new variable.\nExample of a codelist for AGEGR2\nID\nName\nData Type\nOrder\nCode\nDecode\nAGEGR2\nPooled Age Group 2\ntext\n1\n<35\n<35 years\nAGEGR2\nPooled Age Group 2\ntext\n2\n35-49\n35-49 years\nAGEGR2\nPooled Age Group 2\ntext\n3\n>= 50\n>= 50 years\nNow, specifying the option\ncreate_from_decode = TRUE\nwill allow you to create the variable based on the text in the\ndecode\ncolumn. If you are using this option to also create a numeric coded variable (in this case\nAGEGR2N\n), ensure your CT is set up so that the\ndecode\ncolumns match.\ndm <- read_xpt(metatools_example(\"dm.xpt\"))\ncreate_cat_var(dm, adsl_spec, AGE, AGEGR2, AGEGR2N, create_from_decode = TRUE) %>%\n  select(USUBJID, AGE, AGEGR2, AGEGR2N) %>%\n  head(5)\n# A tibble: 5 × 4\n  USUBJID       AGE AGEGR2      AGEGR2N\n  <chr>       <dbl> <chr>         <dbl>\n1 01-701-1015    63 18-64 years       1\n2 01-701-1023    64 18-64 years       1\n3 01-701-1028    71 65-80 years       2\n4 01-701-1033    74 65-80 years       2\n5 01-701-1034    77 65-80 years       2\nThis function now also provides a default\nstrict = TRUE\noption, that issues a warning message if there are values in the reference column that do not fit into the categories in the controlled terminology. This can be disabled with\nstrict = FALSE\n.\ndm2 <- dm |>\n  tibble::add_row(AGE = 15) |>\n  tibble::add_row(AGE = 16)\nx <- create_cat_var(dm2, adsl_spec, AGE, AGEGR2, create_from_decode = TRUE)\nWarning: There are 2 observations in AGE that do not fit into the provided categories\nfor AGEGR2. Please check your controlled terminology.\nSummary of Other Changes\nFixed a bug where the presence of variables with VLM in the\nvalue_spec\ntable would prevent variables of the same name in different datasets being populated in the\nvalue_spec\ntable.\nmetatools::build_from_derived()\nadds new options for the\nkeep\nparameter that allow users to derive either\nall\nor only\nprerequisite\ncolumns from source datasets. Thanks to Matt Bearham for this amendment!\nmetatools::combine_supp()\nnow adds the label found in\nQLABEL\nto the\nQNAM\ncolumns that are derived from supplementary datasets. Thanks to Bill Denney for this amendment!\nmetatools::check_variables()\nnow provides a\nstrict\noption that will issue a warning rather than throw an error when\nstrict = FALSE\n.\n{cli}\noutput is now used across both packages and messaging for various functions has been improved.\nWhat’s next?\nThe next step for both packages will be working through and closing out issues from the backlog, updating the examples and vignettes, and improving the user experience via more informative messaging.\nFor\n{metacore}\n, there has been some interest in a UI to help users write custom specification readers for specs not in the standard P21 format. So this will be explored as well.\nI hope to release the next update towards the end of the year, looking at an approximately 6-monthly release schedule going forward. Until then I encourage people to explore some of the new features and provide feedback on the changes through GitHub at the links below:\nMetacore\nMetatools\nThanks for reading!\nLast updated\n2025-08-07 01:11:34.287895\nDetails\nSource\n,\nSession info\nReuse\nCC BY 4.0\nCitation\nBibTeX citation:\n@online{hobby2025,\n  author = {Hobby, Liam},\n  title = {Metacore and {Metatools} 0.2.0},\n  date = {2025-08-04},\n  url = {https://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html},\n  langid = {en}\n}\nFor attribution, please cite this work as:\nHobby, Liam. 2025.\n“Metacore and Metatools 0.2.0.”\nAugust\n4, 2025.\nhttps://pharmaverse.github.io/blog/posts/2025-08-04_metacore_0.2.0/metacore_0.2.0.html\n.\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\npharmaverse blog\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "A Centralized Metadata Object Focus on Clinical Trial Data Programming Workflows • metacore {metacore} and GitHub - pharmaverse/metatools {metatools} have a new package maintainer Hi, everyone! I’m Liam and I’m excited to announce that I ...",
    "meta_keywords": null,
    "og_description": "A Centralized Metadata Object Focus on Clinical Trial Data Programming Workflows • metacore {metacore} and GitHub - pharmaverse/metatools {metatools} have a new package maintainer Hi, everyone! I’m Liam and I’m excited to announce that I ...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Metacore and Metatools 0.2.0 | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 9.1,
    "sitemap_lastmod": null,
    "twitter_description": "A Centralized Metadata Object Focus on Clinical Trial Data Programming Workflows • metacore {metacore} and GitHub - pharmaverse/metatools {metatools} have a new package maintainer Hi, everyone! I’m Liam and I’m excited to announce that I ...",
    "twitter_title": "Metacore and Metatools 0.2.0 | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/08/metacore-and-metatools-0-2-0/",
    "word_count": 1815
  }
}