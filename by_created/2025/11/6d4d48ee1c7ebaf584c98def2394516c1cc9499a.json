{
  "id": "6d4d48ee1c7ebaf584c98def2394516c1cc9499a",
  "url": "https://www.r-bloggers.com/2025/01/compact-pentomino-solution-parquet-magic/",
  "created_at_utc": "2025-11-22T19:59:31Z",
  "data": null,
  "raw_original": {
    "uuid": "4f517f68-67b4-4db7-aff6-07dbdff9ab49",
    "created_at": "2025-11-22 19:59:31",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2025/01/compact-pentomino-solution-parquet-magic/",
      "crawled_at": "2025-11-22T10:56:00.444473",
      "external_links": [
        {
          "href": "https://chichacha.github.io/chi-files/posts/pentomino/pentomino_part3.html",
          "text": "CHI(œá)-Files"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "https://isomerdesign.com/Pentomino/",
          "text": "Isomer Design"
        },
        {
          "href": "https://parquet.apache.org/",
          "text": "Parquet"
        },
        {
          "href": "https://github.com/chichacha/pentomino",
          "text": "Github repo"
        },
        {
          "href": "https://isomerdesign.com/Pentomino/",
          "text": "isomerdesign.com"
        },
        {
          "href": "https://chichacha.github.io/chi-files/posts/pentomino/pentomino_part3.html",
          "text": "CHI(œá)-Files"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "Compact Pentomino Solution : Parquet Magic | R-bloggers",
      "images": [
        {
          "alt": null,
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": null,
          "base64": null,
          "src": "https://i2.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/unnamed-chunk-3-1.png?w=450&ssl=1"
        },
        {
          "alt": null,
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": null,
          "base64": null,
          "src": "https://i2.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/pentomino_5x5-1.png?w=450&ssl=1"
        },
        {
          "alt": null,
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": null,
          "base64": null,
          "src": "https://i1.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/pentomino_5x5_agg-1.png?w=450&ssl=1"
        },
        {
          "alt": null,
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": null,
          "base64": null,
          "src": "https://i0.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/triplicate-1.png?w=450&ssl=1"
        },
        {
          "alt": null,
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": null,
          "base64": null,
          "src": "https://i0.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/triplicate2-1.png?w=450&ssl=1"
        },
        {
          "alt": null,
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": null,
          "base64": null,
          "src": "https://i0.wp.com/chichacha.github.io/chi-files/posts/pentomino/images/Pentominos.gif?w=578&ssl=1"
        }
      ],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/chisato/",
          "text": "Chisato"
        },
        {
          "href": "https://www.r-bloggers.com/category/r-bloggers/",
          "text": "R bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-393226 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Compact Pentomino Solution : Parquet Magic</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">January 13, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/chisato/\">Chisato</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://chichacha.github.io/chi-files/posts/pentomino/pentomino_part3.html\"> CHI(œá)-Files</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<section class=\"level3\" id=\"saving-the-sf-object-pentomino-solutions-for-later-use-as-parquet\">\n<h3 class=\"anchored\" data-anchor-id=\"saving-the-sf-object-pentomino-solutions-for-later-use-as-parquet\">Saving the <code>sf</code> Object (Pentomino Solutions) for Later Use as Parquet üì¶</h3>\n<p>Confession time: I only discovered Parquet files last year. üôà For someone who spends a good chunk of their time in the data world, it felt like a secret club I wasn‚Äôt part of. But hey, if you‚Äôre not in that club yet either, let‚Äôs join together now! üéâ</p>\n<p>Last few days, I was working with an <code>sf</code> object containing solutions for my Pentomino puzzles. (Original Solution is from this amazing Pentomino Website by <a href=\"https://isomerdesign.com/Pentomino/\" rel=\"nofollow\" target=\"_blank\">Isomer Design</a>). Now, Pentomino solution isn‚Äôt ‚Äúbig data‚Äù by any stretch (I usually deal with much larger datasets in my business work). But even so, the file was big enough that I couldn‚Äôt just upload it to GitHub.üòÖ</p>\n<p>This got me thinking: what if I save the <code>sf</code> object as Parquet format to reduce the file size, and so I can reuse the file later on.</p>\n</section>\n<section class=\"level3\" id=\"why-parquet\">\n<h3 class=\"anchored\" data-anchor-id=\"why-parquet\">Why Parquet</h3>\n<p>Think of <a href=\"https://parquet.apache.org/\" rel=\"nofollow\" target=\"_blank\">Parquet</a> as the ultra-organized sibling to CSV. While CSV is great for simplicity, Parquet packs your data more tightly and efficiently‚Äîlike Marie Kondo personally folding each column! ‚ú®</p>\n<p>In terms of size, my Pentomino solutions went from a hefty 105MB GeoJSON to a feather-light 695KB Parquet file. Perfect for GitHub! üî• (P.S. You‚Äôll see this dataset in action shortly!)</p>\n<p>It‚Äôs not just about saving space‚Äîthough. It‚Äôs also about speed üèéÔ∏è. Parquet makes it faster to read, write, and process data, which become crusial when working with millions of rows of data.</p>\n<div class=\"cell\">\n<details class=\"code-fold\">\n<summary>Converting &amp; Writing sf file to Parquet</summary>\n<pre># Load required libraries\nlibrary(tidyverse) # Easily Install and Load the 'Tidyverse' \nlibrary(sf) # Simple Features for R        \nlibrary(arrow) # Integration to 'Apache' 'Arrow'    \n\n# Save Pentomino solutions in different formats\npento_sf |&gt; write_rds(file = \"data/pentomino_solution_sf.rds\")  # RDS format\n# To reload later: pento_sf &lt;- read_rds(\"data/pentomino_solution_sf.rds\")\n\npento_sf |&gt; write_sf(\"data/pentomino_solution_sf.geojson\")  # GeoJSON format\n\n# Attempting to save as Parquet using write_sf (this doesn't work)\npento_sf |&gt; write_sf(\"data/pentomino_solution_sf.parquet\")\n# Error: write_sf can't write Parquet files directly! \n\n# Alternative: Using write_parquet (this also fails for spatial objects)\npento_sf |&gt; write_parquet(\"data/pentomino_solution_sf.parquet\")\n# Error: Can't infer Arrow data type from object inheriting from XY / POLYGON / sfg.\n\n# Convert sf object to data frame because write_parquet with geometry fails.\npento_df &lt;- pento_sf %&gt;% \n  mutate(wkt = st_as_text(geometry)) |&gt; # Convert geometry to WKT format\n  st_drop_geometry() ## now I've converted geometry column, I don't need them\n\npento_df |&gt; write_parquet(\"data/pentomino_solution_sf.parquet\")\n##https://arrow.apache.org/docs/r/reference/write_parquet.html\n\n# File size comparison (approximate):\n# data/pentomino_solution_sf.geojson   105.51 MB\n# data/pentomino_solution_sf.rds       110.62 MB\n# data/pentomino_solution_sf.parquet   695 KB (so small!!)</pre>\n</details>\n</div>\n<p>For larger or more complex datasets, you might not see this dramatic size reduction, but Parquet still offers significant savings and speed! Because this pentomino <code>sf</code> dataset is actually quite simple. File size reduction is quite impressive!</p>\n<p>I‚Äôve uploaded this parquet file to <a href=\"https://github.com/chichacha/pentomino\" rel=\"nofollow\" target=\"_blank\">Github repo</a>. So I‚Äôll read in the solution file from Github in below.</p>\n<div class=\"cell\">\n<details class=\"code-fold\">\n<summary>Reading in Pentomino Solution Parquet File from GitHub</summary>\n<pre># Load required libraries\nlibrary(tidyverse) # Data manipulation and visualization\nlibrary(arrow)     # Integration with Apache Arrow for Parquet files\nlibrary(sf)        # Simple Features for handling spatial data\nlibrary(cowplot)   # Streamlined ggplot2 themes and annotations\n\n# Just Prepping some color palette\nretro &lt;-  c(\"#00A0B0\", \"#6A4A3C\", \"#CC333F\", \"#EB6841\", \"#EDC951\")\nretro12 &lt;- colorRampPalette(retro)(12)\npiece&lt;-c(\"F\",\"I\",\"L\",\"N\",\"P\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\")\nnames(retro12) &lt;- piece\n\n# Read Parquet file from GitHub\npento_df &lt;- read_parquet(\"https://github.com/chichacha/pentomino/raw/refs/heads/main/pentomino_solution_sf.parquet\")\n\n# Convert WKT column back to geometry to recreate the spatial object\npento_sf &lt;- pento_df |&gt; \n  st_as_sf(wkt = \"wkt\") |&gt;        # Convert WKT strings into spatial geometries\n  rename(geometry = wkt)          # Rename for compatibility with sf conventions\n\n# Show the structure of pento_sf\nglimpse(pento_sf) </pre>\n</details>\n<div class=\"cell-output cell-output-stdout\">\n<pre>Rows: 321,416\nColumns: 5\n$ sol_idx   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ‚Ä¶\n$ dim       &lt;chr&gt; \"3√ó10\", \"3√ó10\", \"3√ó10\", \"3√ó10\", \"3√ó10\", \"3√ó10\", \"3√ó15\", \"3√ó1‚Ä¶\n$ value     &lt;chr&gt; \"F\", \"I\", \"N\", \"P\", \"U\", \"Y\", \"F\", \"I\", \"L\", \"N\", \"P\", \"T\", ‚Ä¶\n$ piece_cnt &lt;int&gt; 6, 6, 6, 6, 6, 6, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 12, 12, 12,‚Ä¶\n$ geometry  &lt;POLYGON&gt; POLYGON ((6.5 0.5, 5.5 0.5,..., POLYGON ((0.5 1.5, 1.5 1‚Ä¶</pre>\n</div>\n</div>\n</section>\n<section class=\"level3\" id=\"solution-counts-per-puzzle-dimension\">\n<h3 class=\"anchored\" data-anchor-id=\"solution-counts-per-puzzle-dimension\">Solution Counts per Puzzle Dimension</h3>\n<p>Have you ever wondered how different puzzle dimensions influence the number of possible solutions? In below plot, the length of the bar reflects the abundance of solutions per pieces being used.</p>\n<p>This visualization is based on solutions provided by <a href=\"https://isomerdesign.com/Pentomino/\" rel=\"nofollow\" target=\"_blank\">isomerdesign.com</a>, a fantastic resource for pentomino enthusiasts. After parsing their solution files, I discovered a total of <strong>33,008</strong> solutions spanning 46 unique puzzle dimensions. 46 Dimensions ‚Äì <em>3√ó10, 3√ó15, 3√ó20, 3√ó21a, 3√ó21b, 3√ó21c, 3√ó21d, 4√ó10, 4√ó15, 4√ó16a, 4√ó16b, 4√ó16c, 4√ó16d, 4√ó16e, 4√ó16g, 4√ó16h, 4√ó16i, 4√ó16k, 5√ó10, 5√ó11, 5√ó12, 5√ó3, 5√ó4, 5√ó5, 5√ó6, 5√ó7, 5√ó8, 5√ó9, 6√ó10, 8√ó8a, 8√ó8b, 8√ó8c, 8√ó8d, 8√ó8e, Triplicate F, Triplicate I, Triplicate L, Triplicate N, Triplicate P, Triplicate T, Triplicate U, Triplicate V, Triplicate W, Triplicate X, Triplicate Y, Triplicate Z</em></p>\n<div class=\"cell\">\n<details class=\"code-fold\">\n<summary>Creation of Stacking Bar Chart with ggplot2</summary>\n<pre>pento_sf |&gt;\n  st_drop_geometry() |&gt;   #By dropping geometry, computation is quicker\n  group_by(dim,piece_cnt) |&gt;\n  summarise(solution_cnt=max(sol_idx),.groups = \"drop\") |&gt; \n  #filter(piece_cnt==3)\n  #count(dim,wt=solution_cnt,sort=T) |&gt; arrange(n)\n  ggplot(aes(x=fct_reorder(as.factor(piece_cnt),solution_cnt,sum,.desc=F),\n             y=solution_cnt)) +\n  geom_col(aes(fill=dim, group=dim)) +\n  ggfittext::geom_fit_text(aes(label=str_c(dim,\"\\n\",scales::comma(solution_cnt)), group=dim),position=\"stack\", family=\"Roboto Condensed\") +\n  coord_flip() +\n  scale_fill_manual(values=colorRampPalette(retro)(length(unique(pento_sf$dim))), guide=\"none\") +\n  labs(\n  title = \"Number of Solutions Provided per Pieces Used\",\n  subtitle = \"Based on solution files from isomerdesign.com\",\n  caption = \"Data Source: https://isomerdesign.com/Pentomino/\",\n  y = \"Number of Solutions\", x=\"Number of Pentomino Pieces Used in Puzzle\") +\n  theme_minimal_vgrid(font_family=\"Roboto Condensed\") +\n  annotate(geom=\"text\",x=\"9\",y=0,label=\"*Triplicate Series*\\n\", hjust=0, vjust=0,\n           family=\"Roboto Condensed\", size=3,fontface = \"italic\") +\n  annotate(geom=\"label\",x=\"5\", y=120, label=\"&lt;&lt;&lt; 5x5 squares can be made 107 different ways!\", hjust=0, family=\"Roboto Condensed\", size=3, fill=\"lightyellow\") +\n  annotate(geom=\"label\",x=\"4\", y=100, label=\"&lt;&lt;&lt; 5x4 rectangles can be made 50 different ways\", hjust=0, family=\"Roboto Condensed\", size=3, fill=\"lightyellow\") +\n  annotate(geom=\"label\",x=\"3\", y=50, label=\"&lt;&lt;&lt; 5x3 rectangles can be made 7 different ways\", hjust=0, family=\"Roboto Condensed\", size=3, fill=\"lightyellow\") +\n  geom_blank(aes(x=\"\"))</pre>\n</details>\n<div class=\"cell-output-display\">\n<div>\n<figure class=\"figure\">\n<p><img class=\"img-fluid figure-img\" data-lazy-src=\"https://i2.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/unnamed-chunk-3-1.png?w=450&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img class=\"img-fluid figure-img\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/unnamed-chunk-3-1.png?w=450&amp;ssl=1\"/></noscript></p>\n</figure>\n</div>\n</div>\n</div>\n</section>\n<section class=\"level3\" id=\"x5-squares-the-ultimate-pentomino-challenge\">\n<h3 class=\"anchored\" data-anchor-id=\"x5-squares-the-ultimate-pentomino-challenge\">5x5 Squares: The Ultimate Pentomino Challenge</h3>\n<p>How many ways could you fit a 5x5 square using only five pentomino pieces? Believe it or not, there are 107 unique solutions! üß©</p>\n<p>Some pieces, like the trusty L, are frequent problem-solvers‚Äîthey appear in many solutions. Meanwhile, the poor X is the wallflower of this puzzle, only making it into two solutions. It seems that some shapes just get along better with tight grids than others.</p>\n<p>Below, you‚Äôll find a visualization of all 107 solutions. Each group represents a different combination of pieces, showing which sets of pentominoes team up to conquer the 5x5 challenge. It‚Äôs a fascinating glimpse into which pieces are the MVPs and which are sitting out this game.</p>\n<div class=\"cell\">\n<details class=\"code-fold\">\n<summary>107 5x5 Solutions</summary>\n<pre>piece_comb &lt;-pento_sf |&gt;\n  filter(piece_cnt==5) |&gt; \n  st_drop_geometry() |&gt;\n  group_by(sol_idx) |&gt;\n  summarise(piece_combo=paste(sort(value),collapse=\"\"),.groups=\"drop\") |&gt;\n  add_count(piece_combo,sort=T)\n\npento_sf |&gt;\n  filter(piece_cnt==5) |&gt; \n  left_join(piece_comb) |&gt;\n  mutate(piece_combo=fct_reorder(piece_combo,n,max,.desc=T)) |&gt;\n  ggplot() +\n  geom_sf(aes(fill=value), color=\"#fffff3\") +\n  scale_fill_manual(values=retro12) +\n  facet_wrap(~piece_combo+sol_idx,ncol=15) +\n  theme_nothing()</pre>\n</details>\n<div class=\"cell-output-display\">\n<div>\n<figure class=\"figure\">\n<p><img class=\"img-fluid figure-img\" data-lazy-src=\"https://i2.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/pentomino_5x5-1.png?w=450&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img class=\"img-fluid figure-img\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/pentomino_5x5-1.png?w=450&amp;ssl=1\"/></noscript></p>\n</figure>\n</div>\n</div>\n</div>\n<p>To dig a little deeper, I also explored how often each piece shows up across the 107 solutions. Below, you can see a breakdown of where each pentomino appears and how many times it‚Äôs been part of a winning combination. The number on each piece reflects its frequency‚ÄîL is clearly the hero of this puzzle appearing in 85 solutions out of 107 (79%), while X is struggling to make an impression.</p>\n<div class=\"cell\">\n<details class=\"code-fold\">\n<summary>Frequency of Piece Usage &amp; Coverage</summary>\n<pre>pento_sf |&gt;\n  filter(piece_cnt==5) |&gt; \n  group_by(value) |&gt;\n  summarise(freq=n()) |&gt;\n  ggplot() +\n  geom_sf(aes(fill=value), color=\"#fffff3\") +\n  geom_text(aes(label=str_c(value,\" \",freq), x=0.5,y=6.5), \n               family=\"Roboto Condensed\", size=7,\n               fontface=\"bold\", hjust=0, vjust=1) +\n  scale_fill_manual(values=retro12) +\n  facet_wrap(~fct_reorder(value,freq,sum,.desc=T),ncol=6) +\n  theme_nothing()</pre>\n</details>\n<div class=\"cell-output-display\">\n<div>\n<figure class=\"figure\">\n<p><img class=\"img-fluid figure-img\" data-lazy-src=\"https://i1.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/pentomino_5x5_agg-1.png?w=450&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img class=\"img-fluid figure-img\" data-recalc-dims=\"1\" src=\"https://i1.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/pentomino_5x5_agg-1.png?w=450&amp;ssl=1\"/></noscript></p>\n</figure>\n</div>\n</div>\n</div>\n</section>\n<section class=\"level3\" id=\"the-triplicate-series-pentominoes-in-3x-size\">\n<h3 class=\"anchored\" data-anchor-id=\"the-triplicate-series-pentominoes-in-3x-size\">The Triplicate Series: Pentominoes in 3x Size!</h3>\n<p>There are solutions labeled as Triplicate Series ‚Äî it‚Äôs like a puzzle within a puzzle,Pentomino-ception! ü§Ø</p>\n<p>Normally, each pentomino consists of <strong>5</strong> squares, but in this series, we take it to the next level. Each pentomino is rebuilt to be 3x bigger using a combination of 9 other pentominoes (excluding itself, of course). The result? A supersized version made up of <strong>45</strong> squares!</p>\n<p>For example, the classic ‚ÄúL‚Äù pentomino is recreated as a massive ‚ÄúL,‚Äù but only with help from the rest of the gang (except for the original ‚ÄúL‚Äù itself)</p>\n<div class=\"cell\">\n<details class=\"code-fold\">\n<summary>Triplicated Pentomino</summary>\n<pre>### Handy helper function to flip the geometry\nflip &lt;- function(direction = \"h\") {\n  if (direction == \"h\") {\n    matrix(c(-1, 0, 0, 1), 2, 2)  # Flip horizontally\n  } else if (direction == \"v\") {\n    matrix(c(1, 0, 0, -1), 2, 2)  # Flip vertically\n  } else {\n    stop(\"Invalid direction. Use 'h' or 'v'.\")\n  }\n}\n\n### Offset so that letters don't overlap\noffset &lt;- function(i,n=6){\n  x &lt;- (i-1)%%n\n  y &lt;- floor((i-1)/n)\n  c(x,y)\n}\n\npento_sf |&gt;\n  filter(str_detect(dim,\"Tri\")) |&gt;\n  filter(sol_idx==1) |&gt;\n  mutate(dim_idx=dense_rank(dim)) |&gt;\n  mutate(offset=map(dim_idx,offset)) |&gt;\n  rowwise() |&gt;\n  mutate(geometry=geometry+offset*13) |&gt;\n  ggplot() +\n  geom_sf(aes(fill=value, geometry=geometry*flip(\"v\")),color=\"#fffff3\") +\n  scale_fill_manual(values=retro12) +\n  theme_nothing()</pre>\n</details>\n<div class=\"cell-output-display\">\n<div>\n<figure class=\"figure\">\n<p><img class=\"img-fluid figure-img\" data-lazy-src=\"https://i0.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/triplicate-1.png?w=450&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img class=\"img-fluid figure-img\" data-recalc-dims=\"1\" src=\"https://i0.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/triplicate-1.png?w=450&amp;ssl=1\"/></noscript></p>\n</figure>\n</div>\n</div>\n</div>\n<div class=\"cell\">\n<details class=\"code-fold\">\n<summary>Triplicated Pentomino Example 2</summary>\n<pre>pento_sf |&gt;\n  filter(str_detect(dim,\"Tri\")) |&gt;\n  filter(sol_idx==15) |&gt;\n  mutate(dim_idx=dense_rank(dim)) |&gt;\n  mutate(offset=map(dim_idx,offset)) |&gt;\n  rowwise() |&gt;\n  mutate(geometry=geometry+offset*12.5) |&gt;\n  mutate(geometry=st_buffer(geometry,dist=-0.1)) |&gt;\n  ungroup() |&gt;\n  ggplot() +\n  geom_sf(aes(fill=value, geometry=geometry*flip(\"v\"))) +\n  geom_sf(aes(fill=value, \n              geometry=st_voronoi(geometry*flip(\"v\"),bOnlyEdges = T)),\n          color=\"#fffff350\",linewidth=0.1) +\n  \n  scale_fill_manual(values=retro12) +\n  theme_nothing()</pre>\n</details>\n<div class=\"cell-output-display\">\n<div>\n<figure class=\"figure\">\n<p><img class=\"img-fluid figure-img\" data-lazy-src=\"https://i0.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/triplicate2-1.png?w=450&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img class=\"img-fluid figure-img\" data-recalc-dims=\"1\" src=\"https://i0.wp.com/chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/triplicate2-1.png?w=450&amp;ssl=1\"/></noscript></p>\n</figure>\n</div>\n</div>\n</div>\n</section>\n<section class=\"level3\" id=\"warp-for-now\">\n<h3 class=\"anchored\" data-anchor-id=\"warp-for-now\">Warp for Now‚Ä¶</h3>\n<p>And with that, the Triplicate Series and 5x5 solutions are just the tip of the Pentomino iceberg. Thank you for going into the rabbit hole with me! üêáüï≥Ô∏è</p>\n<p><img class=\"img-fluid\" data-lazy-src=\"https://i0.wp.com/chichacha.github.io/chi-files/posts/pentomino/images/Pentominos.gif?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img class=\"img-fluid\" data-recalc-dims=\"1\" src=\"https://i0.wp.com/chichacha.github.io/chi-files/posts/pentomino/images/Pentominos.gif?w=578&amp;ssl=1\"/></noscript></p>\n</section>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://chichacha.github.io/chi-files/posts/pentomino/pentomino_part3.html\"> CHI(œá)-Files</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
      "main_text": "Compact Pentomino Solution : Parquet Magic\nPosted on\nJanuary 13, 2025\nby\nChisato\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nCHI(œá)-Files\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nSaving the\nsf\nObject (Pentomino Solutions) for Later Use as Parquet üì¶\nConfession time: I only discovered Parquet files last year. üôà For someone who spends a good chunk of their time in the data world, it felt like a secret club I wasn‚Äôt part of. But hey, if you‚Äôre not in that club yet either, let‚Äôs join together now! üéâ\nLast few days, I was working with an\nsf\nobject containing solutions for my Pentomino puzzles. (Original Solution is from this amazing Pentomino Website by\nIsomer Design\n). Now, Pentomino solution isn‚Äôt ‚Äúbig data‚Äù by any stretch (I usually deal with much larger datasets in my business work). But even so, the file was big enough that I couldn‚Äôt just upload it to GitHub.üòÖ\nThis got me thinking: what if I save the\nsf\nobject as Parquet format to reduce the file size, and so I can reuse the file later on.\nWhy Parquet\nThink of\nParquet\nas the ultra-organized sibling to CSV. While CSV is great for simplicity, Parquet packs your data more tightly and efficiently‚Äîlike Marie Kondo personally folding each column! ‚ú®\nIn terms of size, my Pentomino solutions went from a hefty 105MB GeoJSON to a feather-light 695KB Parquet file. Perfect for GitHub! üî• (P.S. You‚Äôll see this dataset in action shortly!)\nIt‚Äôs not just about saving space‚Äîthough. It‚Äôs also about speed üèéÔ∏è. Parquet makes it faster to read, write, and process data, which become crusial when working with millions of rows of data.\nConverting & Writing sf file to Parquet\n# Load required libraries\nlibrary(tidyverse) # Easily Install and Load the 'Tidyverse' \nlibrary(sf) # Simple Features for R        \nlibrary(arrow) # Integration to 'Apache' 'Arrow'    \n\n# Save Pentomino solutions in different formats\npento_sf |> write_rds(file = \"data/pentomino_solution_sf.rds\")  # RDS format\n# To reload later: pento_sf <- read_rds(\"data/pentomino_solution_sf.rds\")\n\npento_sf |> write_sf(\"data/pentomino_solution_sf.geojson\")  # GeoJSON format\n\n# Attempting to save as Parquet using write_sf (this doesn't work)\npento_sf |> write_sf(\"data/pentomino_solution_sf.parquet\")\n# Error: write_sf can't write Parquet files directly! \n\n# Alternative: Using write_parquet (this also fails for spatial objects)\npento_sf |> write_parquet(\"data/pentomino_solution_sf.parquet\")\n# Error: Can't infer Arrow data type from object inheriting from XY / POLYGON / sfg.\n\n# Convert sf object to data frame because write_parquet with geometry fails.\npento_df <- pento_sf %>% \n  mutate(wkt = st_as_text(geometry)) |> # Convert geometry to WKT format\n  st_drop_geometry() ## now I've converted geometry column, I don't need them\n\npento_df |> write_parquet(\"data/pentomino_solution_sf.parquet\")\n##https://arrow.apache.org/docs/r/reference/write_parquet.html\n\n# File size comparison (approximate):\n# data/pentomino_solution_sf.geojson   105.51 MB\n# data/pentomino_solution_sf.rds       110.62 MB\n# data/pentomino_solution_sf.parquet   695 KB (so small!!)\nFor larger or more complex datasets, you might not see this dramatic size reduction, but Parquet still offers significant savings and speed! Because this pentomino\nsf\ndataset is actually quite simple. File size reduction is quite impressive!\nI‚Äôve uploaded this parquet file to\nGithub repo\n. So I‚Äôll read in the solution file from Github in below.\nReading in Pentomino Solution Parquet File from GitHub\n# Load required libraries\nlibrary(tidyverse) # Data manipulation and visualization\nlibrary(arrow)     # Integration with Apache Arrow for Parquet files\nlibrary(sf)        # Simple Features for handling spatial data\nlibrary(cowplot)   # Streamlined ggplot2 themes and annotations\n\n# Just Prepping some color palette\nretro <-  c(\"#00A0B0\", \"#6A4A3C\", \"#CC333F\", \"#EB6841\", \"#EDC951\")\nretro12 <- colorRampPalette(retro)(12)\npiece<-c(\"F\",\"I\",\"L\",\"N\",\"P\",\"T\",\"U\",\"V\",\"W\",\"X\",\"Y\",\"Z\")\nnames(retro12) <- piece\n\n# Read Parquet file from GitHub\npento_df <- read_parquet(\"https://github.com/chichacha/pentomino/raw/refs/heads/main/pentomino_solution_sf.parquet\")\n\n# Convert WKT column back to geometry to recreate the spatial object\npento_sf <- pento_df |> \n  st_as_sf(wkt = \"wkt\") |>        # Convert WKT strings into spatial geometries\n  rename(geometry = wkt)          # Rename for compatibility with sf conventions\n\n# Show the structure of pento_sf\nglimpse(pento_sf)\nRows: 321,416\nColumns: 5\n$ sol_idx   <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, ‚Ä¶\n$ dim       <chr> \"3√ó10\", \"3√ó10\", \"3√ó10\", \"3√ó10\", \"3√ó10\", \"3√ó10\", \"3√ó15\", \"3√ó1‚Ä¶\n$ value     <chr> \"F\", \"I\", \"N\", \"P\", \"U\", \"Y\", \"F\", \"I\", \"L\", \"N\", \"P\", \"T\", ‚Ä¶\n$ piece_cnt <int> 6, 6, 6, 6, 6, 6, 9, 9, 9, 9, 9, 9, 9, 9, 9, 12, 12, 12, 12,‚Ä¶\n$ geometry  <POLYGON> POLYGON ((6.5 0.5, 5.5 0.5,..., POLYGON ((0.5 1.5, 1.5 1‚Ä¶\nSolution Counts per Puzzle Dimension\nHave you ever wondered how different puzzle dimensions influence the number of possible solutions? In below plot, the length of the bar reflects the abundance of solutions per pieces being used.\nThis visualization is based on solutions provided by\nisomerdesign.com\n, a fantastic resource for pentomino enthusiasts. After parsing their solution files, I discovered a total of\n33,008\nsolutions spanning 46 unique puzzle dimensions. 46 Dimensions ‚Äì\n3√ó10, 3√ó15, 3√ó20, 3√ó21a, 3√ó21b, 3√ó21c, 3√ó21d, 4√ó10, 4√ó15, 4√ó16a, 4√ó16b, 4√ó16c, 4√ó16d, 4√ó16e, 4√ó16g, 4√ó16h, 4√ó16i, 4√ó16k, 5√ó10, 5√ó11, 5√ó12, 5√ó3, 5√ó4, 5√ó5, 5√ó6, 5√ó7, 5√ó8, 5√ó9, 6√ó10, 8√ó8a, 8√ó8b, 8√ó8c, 8√ó8d, 8√ó8e, Triplicate F, Triplicate I, Triplicate L, Triplicate N, Triplicate P, Triplicate T, Triplicate U, Triplicate V, Triplicate W, Triplicate X, Triplicate Y, Triplicate Z\nCreation of Stacking Bar Chart with ggplot2\npento_sf |>\n  st_drop_geometry() |>   #By dropping geometry, computation is quicker\n  group_by(dim,piece_cnt) |>\n  summarise(solution_cnt=max(sol_idx),.groups = \"drop\") |> \n  #filter(piece_cnt==3)\n  #count(dim,wt=solution_cnt,sort=T) |> arrange(n)\n  ggplot(aes(x=fct_reorder(as.factor(piece_cnt),solution_cnt,sum,.desc=F),\n             y=solution_cnt)) +\n  geom_col(aes(fill=dim, group=dim)) +\n  ggfittext::geom_fit_text(aes(label=str_c(dim,\"\\n\",scales::comma(solution_cnt)), group=dim),position=\"stack\", family=\"Roboto Condensed\") +\n  coord_flip() +\n  scale_fill_manual(values=colorRampPalette(retro)(length(unique(pento_sf$dim))), guide=\"none\") +\n  labs(\n  title = \"Number of Solutions Provided per Pieces Used\",\n  subtitle = \"Based on solution files from isomerdesign.com\",\n  caption = \"Data Source: https://isomerdesign.com/Pentomino/\",\n  y = \"Number of Solutions\", x=\"Number of Pentomino Pieces Used in Puzzle\") +\n  theme_minimal_vgrid(font_family=\"Roboto Condensed\") +\n  annotate(geom=\"text\",x=\"9\",y=0,label=\"*Triplicate Series*\\n\", hjust=0, vjust=0,\n           family=\"Roboto Condensed\", size=3,fontface = \"italic\") +\n  annotate(geom=\"label\",x=\"5\", y=120, label=\"<<< 5x5 squares can be made 107 different ways!\", hjust=0, family=\"Roboto Condensed\", size=3, fill=\"lightyellow\") +\n  annotate(geom=\"label\",x=\"4\", y=100, label=\"<<< 5x4 rectangles can be made 50 different ways\", hjust=0, family=\"Roboto Condensed\", size=3, fill=\"lightyellow\") +\n  annotate(geom=\"label\",x=\"3\", y=50, label=\"<<< 5x3 rectangles can be made 7 different ways\", hjust=0, family=\"Roboto Condensed\", size=3, fill=\"lightyellow\") +\n  geom_blank(aes(x=\"\"))\n5x5 Squares: The Ultimate Pentomino Challenge\nHow many ways could you fit a 5x5 square using only five pentomino pieces? Believe it or not, there are 107 unique solutions! üß©\nSome pieces, like the trusty L, are frequent problem-solvers‚Äîthey appear in many solutions. Meanwhile, the poor X is the wallflower of this puzzle, only making it into two solutions. It seems that some shapes just get along better with tight grids than others.\nBelow, you‚Äôll find a visualization of all 107 solutions. Each group represents a different combination of pieces, showing which sets of pentominoes team up to conquer the 5x5 challenge. It‚Äôs a fascinating glimpse into which pieces are the MVPs and which are sitting out this game.\n107 5x5 Solutions\npiece_comb <-pento_sf |>\n  filter(piece_cnt==5) |> \n  st_drop_geometry() |>\n  group_by(sol_idx) |>\n  summarise(piece_combo=paste(sort(value),collapse=\"\"),.groups=\"drop\") |>\n  add_count(piece_combo,sort=T)\n\npento_sf |>\n  filter(piece_cnt==5) |> \n  left_join(piece_comb) |>\n  mutate(piece_combo=fct_reorder(piece_combo,n,max,.desc=T)) |>\n  ggplot() +\n  geom_sf(aes(fill=value), color=\"#fffff3\") +\n  scale_fill_manual(values=retro12) +\n  facet_wrap(~piece_combo+sol_idx,ncol=15) +\n  theme_nothing()\nTo dig a little deeper, I also explored how often each piece shows up across the 107 solutions. Below, you can see a breakdown of where each pentomino appears and how many times it‚Äôs been part of a winning combination. The number on each piece reflects its frequency‚ÄîL is clearly the hero of this puzzle appearing in 85 solutions out of 107 (79%), while X is struggling to make an impression.\nFrequency of Piece Usage & Coverage\npento_sf |>\n  filter(piece_cnt==5) |> \n  group_by(value) |>\n  summarise(freq=n()) |>\n  ggplot() +\n  geom_sf(aes(fill=value), color=\"#fffff3\") +\n  geom_text(aes(label=str_c(value,\" \",freq), x=0.5,y=6.5), \n               family=\"Roboto Condensed\", size=7,\n               fontface=\"bold\", hjust=0, vjust=1) +\n  scale_fill_manual(values=retro12) +\n  facet_wrap(~fct_reorder(value,freq,sum,.desc=T),ncol=6) +\n  theme_nothing()\nThe Triplicate Series: Pentominoes in 3x Size!\nThere are solutions labeled as Triplicate Series ‚Äî it‚Äôs like a puzzle within a puzzle,Pentomino-ception! ü§Ø\nNormally, each pentomino consists of\n5\nsquares, but in this series, we take it to the next level. Each pentomino is rebuilt to be 3x bigger using a combination of 9 other pentominoes (excluding itself, of course). The result? A supersized version made up of\n45\nsquares!\nFor example, the classic ‚ÄúL‚Äù pentomino is recreated as a massive ‚ÄúL,‚Äù but only with help from the rest of the gang (except for the original ‚ÄúL‚Äù itself)\nTriplicated Pentomino\n### Handy helper function to flip the geometry\nflip <- function(direction = \"h\") {\n  if (direction == \"h\") {\n    matrix(c(-1, 0, 0, 1), 2, 2)  # Flip horizontally\n  } else if (direction == \"v\") {\n    matrix(c(1, 0, 0, -1), 2, 2)  # Flip vertically\n  } else {\n    stop(\"Invalid direction. Use 'h' or 'v'.\")\n  }\n}\n\n### Offset so that letters don't overlap\noffset <- function(i,n=6){\n  x <- (i-1)%%n\n  y <- floor((i-1)/n)\n  c(x,y)\n}\n\npento_sf |>\n  filter(str_detect(dim,\"Tri\")) |>\n  filter(sol_idx==1) |>\n  mutate(dim_idx=dense_rank(dim)) |>\n  mutate(offset=map(dim_idx,offset)) |>\n  rowwise() |>\n  mutate(geometry=geometry+offset*13) |>\n  ggplot() +\n  geom_sf(aes(fill=value, geometry=geometry*flip(\"v\")),color=\"#fffff3\") +\n  scale_fill_manual(values=retro12) +\n  theme_nothing()\nTriplicated Pentomino Example 2\npento_sf |>\n  filter(str_detect(dim,\"Tri\")) |>\n  filter(sol_idx==15) |>\n  mutate(dim_idx=dense_rank(dim)) |>\n  mutate(offset=map(dim_idx,offset)) |>\n  rowwise() |>\n  mutate(geometry=geometry+offset*12.5) |>\n  mutate(geometry=st_buffer(geometry,dist=-0.1)) |>\n  ungroup() |>\n  ggplot() +\n  geom_sf(aes(fill=value, geometry=geometry*flip(\"v\"))) +\n  geom_sf(aes(fill=value, \n              geometry=st_voronoi(geometry*flip(\"v\"),bOnlyEdges = T)),\n          color=\"#fffff350\",linewidth=0.1) +\n  \n  scale_fill_manual(values=retro12) +\n  theme_nothing()\nWarp for Now‚Ä¶\nAnd with that, the Triplicate Series and 5x5 solutions are just the tip of the Pentomino iceberg. Thank you for going into the rabbit hole with me! üêáüï≥Ô∏è\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nCHI(œá)-Files\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "Saving the sf Object (Pentomino Solutions) for Later Use as Parquet üì¶ Confession time: I only discovered Parquet files last year. üôà For someone who spends a good chunk of their time in the data world, it felt like a secret club I wasn‚Äôt part of...",
      "meta_keywords": null,
      "og_description": "Saving the sf Object (Pentomino Solutions) for Later Use as Parquet üì¶ Confession time: I only discovered Parquet files last year. üôà For someone who spends a good chunk of their time in the data world, it felt like a secret club I wasn‚Äôt part of...",
      "og_image": "https://chichacha.github.io/chi-files/posts/pentomino/pentomino_part3_files/figure-html/unnamed-chunk-3-1.png",
      "og_title": "Compact Pentomino Solution : Parquet Magic | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 9.3,
      "sitemap_lastmod": null,
      "twitter_description": "Saving the sf Object (Pentomino Solutions) for Later Use as Parquet üì¶ Confession time: I only discovered Parquet files last year. üôà For someone who spends a good chunk of their time in the data world, it felt like a secret club I wasn‚Äôt part of...",
      "twitter_title": "Compact Pentomino Solution : Parquet Magic | R-bloggers",
      "url": "https://www.r-bloggers.com/2025/01/compact-pentomino-solution-parquet-magic/",
      "word_count": 1857
    }
  }
}