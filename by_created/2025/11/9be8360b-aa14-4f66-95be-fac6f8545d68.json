{
  "uuid": "9be8360b-aa14-4f66-95be-fac6f8545d68",
  "created_at": "2025-11-22 19:58:58",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/03/file-management-with-the-fs-package/",
    "crawled_at": "2025-11-22T10:51:27.557198",
    "external_links": [
      {
        "href": "https://albert-rapp.de/posts/36_fs_package/",
        "text": "Albert Rapp"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://albert-rapp.de/posts/36_fs_package/",
        "text": "Albert Rapp"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "File Management With The {fs} Package | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/albert-rapp/",
        "text": "Albert Rapp"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-394541 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">File Management With The {fs} Package</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">March 29, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/albert-rapp/\">Albert Rapp</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://albert-rapp.de/posts/36_fs_package/\"> Albert Rapp</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<p><link href=\"https://albert-rapp.de/new_code_theme.css\" rel=\"stylesheet\"/></p>\n<p>As data scientists we often have to deal with lots of tedious tasks. One such tedious task can be interacting with the file system on our computer or the remote machine we’re working with. Thankfully, the <code>{fs}</code> package has a bunch of convenvience function that make our life a whole lot easier.</p>\n<p>Let’s check out a few examples. And if videos are more your thing, you can also watch the video version of this blog post on YouTube.</p>\n<div class=\"quarto-video ratio ratio-16x9\"><iframe allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" data-external=\"1\" frameborder=\"0\" src=\"https://www.youtube.com/embed/EfHVYXqIuJ4\" title=\"\"></iframe></div>\n<section class=\"level2\" id=\"assemble-paths\">\n<h2 class=\"anchored\" data-anchor-id=\"assemble-paths\">Assemble paths</h2>\n<p>Check out this data set.</p>\n<div class=\"cell\">\n<pre>library(tidyverse)\nlibrary(fs)\noriginal_tib &lt;- tibble(\n  dir = c('some/path/blub', 'bla/here/', 'direct/'),\n  file_names = c('file_a.csv', 'file_b.csv', 'file_c.txt')\n)\noriginal_tib\n## # A tibble: 3 × 2\n##   dir            file_names\n##   &lt;chr&gt;          &lt;chr&gt;     \n## 1 some/path/blub file_a.csv\n## 2 bla/here/      file_b.csv\n## 3 direct/        file_c.txt</pre>\n</div>\n<p>Here, assembling a path in the form <code>directory/file_name.ext</code> can be tricky. Some directories have trailing <code>/</code> and some don’t. So, working with <code>paste0()</code> or <code>glue::glue()</code> would be challenging. Thankfully, the <code>path()</code> function from the <code>{fs}</code> package doesn’t care whether trailing <code>/</code> are there or not.</p>\n<div class=\"cell\">\n<pre>original_tib |&gt;\n  mutate(path = path(dir, file_names))\n## # A tibble: 3 × 3\n##   dir            file_names path                     \n##   &lt;chr&gt;          &lt;chr&gt;      &lt;fs::path&gt;               \n## 1 some/path/blub file_a.csv some/path/blub/file_a.csv\n## 2 bla/here/      file_b.csv bla/here/file_b.csv      \n## 3 direct/        file_c.txt direct/file_c.txt</pre>\n</div>\n</section>\n<section class=\"level2\" id=\"remove-and-set-extensions\">\n<h2 class=\"anchored\" data-anchor-id=\"remove-and-set-extensions\">Remove and set extensions</h2>\n<p>We can even modify file extensions really easily. That’s convenient when we want to take input from csv-files and then turn the data into images using the same file names.</p>\n<div class=\"cell\">\n<pre>original_tib |&gt;\n  mutate(\n    path = path(dir, file_names),\n    out_path = path_ext_set(path, 'png')\n  )\n## # A tibble: 3 × 4\n##   dir            file_names path                      out_path                 \n##   &lt;chr&gt;          &lt;chr&gt;      &lt;fs::path&gt;                &lt;fs::path&gt;               \n## 1 some/path/blub file_a.csv some/path/blub/file_a.csv some/path/blub/file_a.png\n## 2 bla/here/      file_b.csv bla/here/file_b.csv       bla/here/file_b.png      \n## 3 direct/        file_c.txt direct/file_c.txt         direct/file_c.png</pre>\n</div>\n</section>\n<section class=\"level2\" id=\"get-directory-infos\">\n<h2 class=\"anchored\" data-anchor-id=\"get-directory-infos\">Get directory infos</h2>\n<p>You can get information on a directory as a tree in the console. Here, I’m using a directory called <code>raw-input</code> inside my working directory to demonstrate that.</p>\n<div class=\"cell\">\n<pre>dir_tree('raw-input')\n## raw-input\n## ├── a\n## │   └── dat.csv\n## ├── b\n## │   └── dat.csv\n## └── c\n##     └── dat.csv</pre>\n</div>\n<p>You can also get lots of information on these files.</p>\n<div class=\"cell\">\n<pre>dir_info('raw-input')\n## # A tibble: 3 × 18\n##   path        type    size permissions modification_time   user  group device_id\n##   &lt;fs::path&gt;  &lt;fct&gt;  &lt;fs:&gt; &lt;fs::perms&gt; &lt;dttm&gt;              &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;\n## 1 raw-input/a direc…    4K rwxrwxr-x   2025-03-29 09:02:24 albe… albe…     66307\n## 2 raw-input/b direc…    4K rwxrwxr-x   2025-03-29 09:04:33 albe… albe…     66307\n## 3 raw-input/c direc…    4K rwxrwxr-x   2025-03-29 09:04:35 albe… albe…     66307\n## # ℹ 10 more variables: hard_links &lt;dbl&gt;, special_device_id &lt;dbl&gt;, inode &lt;dbl&gt;,\n## #   block_size &lt;dbl&gt;, blocks &lt;dbl&gt;, flags &lt;int&gt;, generation &lt;dbl&gt;,\n## #   access_time &lt;dttm&gt;, change_time &lt;dttm&gt;, birth_time &lt;dttm&gt;</pre>\n</div>\n<p>But in a lot of cases, it will probably suffice to just get the file paths.</p>\n<div class=\"cell\">\n<pre>dir_ls('raw-input')\n## raw-input/a raw-input/b raw-input/c</pre>\n</div>\n<p>In this function, you’ll need to use <code>recurse = TRUE</code>, though, to go into nested structures.</p>\n<div class=\"cell\">\n<pre>dir_ls('raw-input', recurse = TRUE)\n## raw-input/a         raw-input/a/dat.csv raw-input/b         raw-input/b/dat.csv \n## raw-input/c         raw-input/c/dat.csv</pre>\n</div>\n</section>\n<section class=\"level2\" id=\"iterate-over-file-paths\">\n<h2 class=\"anchored\" data-anchor-id=\"iterate-over-file-paths\">Iterate over file paths</h2>\n<p>Usually, you don’t want to stop after finding the desired paths. You usually want to iterate over them. For this, you can save the output of <code>dir_ls()</code> into a vector and iterate through it using the <code>map()</code> or <code>walk()</code> function. Here, the function I use inside of <code>walk()</code> will</p>\n<ul>\n<li>load the data using the specified path,</li>\n<li>create a ggplot from it, and</li>\n<li>save the image.</li>\n</ul>\n<p>The tricky thing here is that I do want to save the files in an <code>output</code> directory. It is supposed to have the same structure as the <code>raw-input</code> directory. That’s why I also need to create the necessary paths and directories for that inside the function.</p>\n<div class=\"cell\">\n<pre>csv_files &lt;- dir_ls(\n  'raw-input',\n  recurse = TRUE,\n  regexp = '\\\\.csv$'\n)\n\ncsv_files |&gt;\n  walk(\n    \\(file_path) {\n      plt &lt;- read_csv(file_path) |&gt;\n        ggplot(aes(col_a, col_b)) +\n        geom_point(size = 10, col = 'dodgerblue4')\n\n      out_path &lt;- file_path |&gt;\n        path_ext_set('.png') |&gt;\n        str_replace('^raw-input', 'output')\n\n      dir_create(path_dir(out_path))\n      ggsave(filename = out_path)\n    }\n  )\n## Rows: 3 Columns: 3\n## ── Column specification ────────────────────────────────────────────────────────\n## Delimiter: \",\"\n## dbl (3): col_a, col_b, col_c\n## \n## ℹ Use `spec()` to retrieve the full column specification for this data.\n## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n## Saving 6 x 4 in image\n## Rows: 3 Columns: 3\n## ── Column specification ────────────────────────────────────────────────────────\n## Delimiter: \",\"\n## dbl (3): col_a, col_b, col_c\n## \n## ℹ Use `spec()` to retrieve the full column specification for this data.\n## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n## Saving 6 x 4 in image\n## Rows: 3 Columns: 3\n## ── Column specification ────────────────────────────────────────────────────────\n## Delimiter: \",\"\n## dbl (3): col_a, col_b, col_c\n## \n## ℹ Use `spec()` to retrieve the full column specification for this data.\n## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n## Saving 6 x 4 in image</pre>\n</div>\n<p>Splendid. This should have worked and you can now see the <code>output</code> directory and the plots in the file tree.</p>\n<div class=\"cell\">\n<pre>dir_tree()\n## .\n## ├── index.qmd\n## ├── index.rmarkdown\n## ├── output\n## │   ├── a\n## │   │   └── dat.png\n## │   ├── b\n## │   │   └── dat.png\n## │   └── c\n## │       └── dat.png\n## └── raw-input\n##     ├── a\n##     │   └── dat.csv\n##     ├── b\n##     │   └── dat.csv\n##     └── c\n##         └── dat.csv</pre>\n</div>\n</section>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://albert-rapp.de/posts/36_fs_package/\"> Albert Rapp</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "File Management With The {fs} Package\nPosted on\nMarch 29, 2025\nby\nAlbert Rapp\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nAlbert Rapp\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nAs data scientists we often have to deal with lots of tedious tasks. One such tedious task can be interacting with the file system on our computer or the remote machine we’re working with. Thankfully, the\n{fs}\npackage has a bunch of convenvience function that make our life a whole lot easier.\nLet’s check out a few examples. And if videos are more your thing, you can also watch the video version of this blog post on YouTube.\nAssemble paths\nCheck out this data set.\nlibrary(tidyverse)\nlibrary(fs)\noriginal_tib <- tibble(\n  dir = c('some/path/blub', 'bla/here/', 'direct/'),\n  file_names = c('file_a.csv', 'file_b.csv', 'file_c.txt')\n)\noriginal_tib\n## # A tibble: 3 × 2\n##   dir            file_names\n##   <chr>          <chr>     \n## 1 some/path/blub file_a.csv\n## 2 bla/here/      file_b.csv\n## 3 direct/        file_c.txt\nHere, assembling a path in the form\ndirectory/file_name.ext\ncan be tricky. Some directories have trailing\n/\nand some don’t. So, working with\npaste0()\nor\nglue::glue()\nwould be challenging. Thankfully, the\npath()\nfunction from the\n{fs}\npackage doesn’t care whether trailing\n/\nare there or not.\noriginal_tib |>\n  mutate(path = path(dir, file_names))\n## # A tibble: 3 × 3\n##   dir            file_names path                     \n##   <chr>          <chr>      <fs::path>               \n## 1 some/path/blub file_a.csv some/path/blub/file_a.csv\n## 2 bla/here/      file_b.csv bla/here/file_b.csv      \n## 3 direct/        file_c.txt direct/file_c.txt\nRemove and set extensions\nWe can even modify file extensions really easily. That’s convenient when we want to take input from csv-files and then turn the data into images using the same file names.\noriginal_tib |>\n  mutate(\n    path = path(dir, file_names),\n    out_path = path_ext_set(path, 'png')\n  )\n## # A tibble: 3 × 4\n##   dir            file_names path                      out_path                 \n##   <chr>          <chr>      <fs::path>                <fs::path>               \n## 1 some/path/blub file_a.csv some/path/blub/file_a.csv some/path/blub/file_a.png\n## 2 bla/here/      file_b.csv bla/here/file_b.csv       bla/here/file_b.png      \n## 3 direct/        file_c.txt direct/file_c.txt         direct/file_c.png\nGet directory infos\nYou can get information on a directory as a tree in the console. Here, I’m using a directory called\nraw-input\ninside my working directory to demonstrate that.\ndir_tree('raw-input')\n## raw-input\n## ├── a\n## │   └── dat.csv\n## ├── b\n## │   └── dat.csv\n## └── c\n##     └── dat.csv\nYou can also get lots of information on these files.\ndir_info('raw-input')\n## # A tibble: 3 × 18\n##   path        type    size permissions modification_time   user  group device_id\n##   <fs::path>  <fct>  <fs:> <fs::perms> <dttm>              <chr> <chr>     <dbl>\n## 1 raw-input/a direc…    4K rwxrwxr-x   2025-03-29 09:02:24 albe… albe…     66307\n## 2 raw-input/b direc…    4K rwxrwxr-x   2025-03-29 09:04:33 albe… albe…     66307\n## 3 raw-input/c direc…    4K rwxrwxr-x   2025-03-29 09:04:35 albe… albe…     66307\n## # ℹ 10 more variables: hard_links <dbl>, special_device_id <dbl>, inode <dbl>,\n## #   block_size <dbl>, blocks <dbl>, flags <int>, generation <dbl>,\n## #   access_time <dttm>, change_time <dttm>, birth_time <dttm>\nBut in a lot of cases, it will probably suffice to just get the file paths.\ndir_ls('raw-input')\n## raw-input/a raw-input/b raw-input/c\nIn this function, you’ll need to use\nrecurse = TRUE\n, though, to go into nested structures.\ndir_ls('raw-input', recurse = TRUE)\n## raw-input/a         raw-input/a/dat.csv raw-input/b         raw-input/b/dat.csv \n## raw-input/c         raw-input/c/dat.csv\nIterate over file paths\nUsually, you don’t want to stop after finding the desired paths. You usually want to iterate over them. For this, you can save the output of\ndir_ls()\ninto a vector and iterate through it using the\nmap()\nor\nwalk()\nfunction. Here, the function I use inside of\nwalk()\nwill\nload the data using the specified path,\ncreate a ggplot from it, and\nsave the image.\nThe tricky thing here is that I do want to save the files in an\noutput\ndirectory. It is supposed to have the same structure as the\nraw-input\ndirectory. That’s why I also need to create the necessary paths and directories for that inside the function.\ncsv_files <- dir_ls(\n  'raw-input',\n  recurse = TRUE,\n  regexp = '\\\\.csv$'\n)\n\ncsv_files |>\n  walk(\n    \\(file_path) {\n      plt <- read_csv(file_path) |>\n        ggplot(aes(col_a, col_b)) +\n        geom_point(size = 10, col = 'dodgerblue4')\n\n      out_path <- file_path |>\n        path_ext_set('.png') |>\n        str_replace('^raw-input', 'output')\n\n      dir_create(path_dir(out_path))\n      ggsave(filename = out_path)\n    }\n  )\n## Rows: 3 Columns: 3\n## ── Column specification ────────────────────────────────────────────────────────\n## Delimiter: \",\"\n## dbl (3): col_a, col_b, col_c\n## \n## ℹ Use `spec()` to retrieve the full column specification for this data.\n## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n## Saving 6 x 4 in image\n## Rows: 3 Columns: 3\n## ── Column specification ────────────────────────────────────────────────────────\n## Delimiter: \",\"\n## dbl (3): col_a, col_b, col_c\n## \n## ℹ Use `spec()` to retrieve the full column specification for this data.\n## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n## Saving 6 x 4 in image\n## Rows: 3 Columns: 3\n## ── Column specification ────────────────────────────────────────────────────────\n## Delimiter: \",\"\n## dbl (3): col_a, col_b, col_c\n## \n## ℹ Use `spec()` to retrieve the full column specification for this data.\n## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n## Saving 6 x 4 in image\nSplendid. This should have worked and you can now see the\noutput\ndirectory and the plots in the file tree.\ndir_tree()\n## .\n## ├── index.qmd\n## ├── index.rmarkdown\n## ├── output\n## │   ├── a\n## │   │   └── dat.png\n## │   ├── b\n## │   │   └── dat.png\n## │   └── c\n## │       └── dat.png\n## └── raw-input\n##     ├── a\n##     │   └── dat.csv\n##     ├── b\n##     │   └── dat.csv\n##     └── c\n##         └── dat.csv\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nAlbert Rapp\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "As data scientists we often have to deal with lots of tedious tasks. One such tedious task can be interacting with the file system on our computer or the remote machine we’re working with. Thankfully, the {fs} package has a bunch of convenvience...",
    "meta_keywords": null,
    "og_description": "As data scientists we often have to deal with lots of tedious tasks. One such tedious task can be interacting with the file system on our computer or the remote machine we’re working with. Thankfully, the {fs} package has a bunch of convenvience...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "File Management With The {fs} Package | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 5.1,
    "sitemap_lastmod": null,
    "twitter_description": "As data scientists we often have to deal with lots of tedious tasks. One such tedious task can be interacting with the file system on our computer or the remote machine we’re working with. Thankfully, the {fs} package has a bunch of convenvience...",
    "twitter_title": "File Management With The {fs} Package | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/03/file-management-with-the-fs-package/",
    "word_count": 1023
  }
}