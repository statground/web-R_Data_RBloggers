{
  "uuid": "33101e46-a969-4094-9540-d41d208fe6c6",
  "created_at": "2025-11-22 19:58:03",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/07/organizing-r-development-using-srcpkgs/",
    "crawled_at": "2025-11-22T10:45:20.149442",
    "external_links": [
      {
        "href": "https://kforner.netlify.app/posts/organizing_dev_with_srcpkgs/",
        "text": "kforner"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://kforner.github.io/srcpkgs/",
        "text": "srcpkgs"
      },
      {
        "href": "https://www.sib.swiss/vital-it",
        "text": "Swiss Institute of Bioinformatics Vital-IT group"
      },
      {
        "href": "https://code.visualstudio.com/docs/devcontainers/containers",
        "text": "devcontainers"
      },
      {
        "href": "https://github.com/kforner/srcpkgs",
        "text": "srcpkgs"
      },
      {
        "href": "https://kforner.github.io/srcpkgs/",
        "text": "online documentation"
      },
      {
        "href": "https://kforner.github.io/srcpkgs/articles/demo.html",
        "text": "why would you need srcpkgs?"
      },
      {
        "href": "https://kforner.netlify.app/about",
        "text": "I (Karl Forner)"
      },
      {
        "href": "https://kforner.netlify.app/posts/organizing_dev_with_srcpkgs/",
        "text": "kforner"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Organizing R development using srcpkgs | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/karl-forner/",
        "text": "Karl Forner"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-394212 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Organizing R development using srcpkgs</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">July 17, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/karl-forner/\">Karl Forner</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://kforner.netlify.app/posts/organizing_dev_with_srcpkgs/\"> kforner</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<section class=\"level2\" id=\"overview\">\n<h2 class=\"anchored\" data-anchor-id=\"overview\">Overview</h2>\n<p>This is an introduction on organizing R projects using source packages (powered by my R package <a href=\"https://kforner.github.io/srcpkgs/\" rel=\"nofollow\" target=\"_blank\">srcpkgs</a>). It is based on notes for a talk I have on 2024-05-27 for the <a href=\"https://www.sib.swiss/vital-it\" rel=\"nofollow\" target=\"_blank\">Swiss Institute of Bioinformatics Vital-IT group</a> Analysts meeting.</p>\n<p>The objective is to organize R projects in order to:</p>\n<ul>\n<li>reuse code</li>\n<li>share code</li>\n<li>increase robustness</li>\n<li>enable analysis (code) reproducibility</li>\n</ul>\n<p>The context is mostly for analysis oriented R projects.</p>\n<section class=\"level3\" id=\"r-packages\">\n<h3 class=\"anchored\" data-anchor-id=\"r-packages\">R packages</h3>\n<p>All R users use R packages, the core ones such as base, stats, tools, and some from CRAN or BioConductor.</p>\n<p>Why would you want to use R packages for your own code???</p>\n<p>a R package is:</p>\n<ul>\n<li>self-contained\n<ul>\n<li>it bundles together all related code, the documentation, the relevant data and tests</li>\n</ul></li>\n<li>the dependencies are explicitly stated, and are themselves R packages</li>\n</ul>\n</section>\n</section>\n<section class=\"level2\" id=\"on-the-natural-evolution-of-code-projects\">\n<h2 class=\"anchored\" data-anchor-id=\"on-the-natural-evolution-of-code-projects\">On the natural evolution of code projects…</h2>\n<p>My view on the general evolution of analysis projects:</p>\n<ul>\n<li><p>you start with a <strong>single script</strong>, sequential, with no functions</p></li>\n<li><p>at one point (after writing hundreds or thousands of lines) you realize that you need some <strong>functions</strong></p></li>\n<li><p>then you start reusing those functions across projects by copy/paste. This raises a number of problems</p>\n<ul>\n<li>versioning: at one point you will fix or improve such a function\n<ul>\n<li>it may be difficult to remember which project contains the latest version</li>\n<li>what of the projects that contain the incorrect versions?</li>\n</ul></li>\n</ul></li>\n<li><p>then you may want, if you work in a team, to share this code with colleagues, or to use theirs</p>\n<ul>\n<li>–&gt; it requires some <strong>documentation</strong>, even terse.</li>\n<li>there’s a increased <strong>responsibility</strong>. What if your code is wrong and impact the projects of your colleagues? One remedy is to write tests for those functions.</li>\n<li>those functions are seldom independent, so that you can not just pick one</li>\n<li>all those functions are <em>exposed</em> (i.e <em>public</em> or <em>exported</em>).\n<ul>\n<li>if you start to use a low-level function in your project, and that in the next version it has been refactored and that this function has been changed, or removed, updating the shared code will break the project.</li>\n</ul></li>\n</ul></li>\n<li><p>for all those reasons you start packaging your reusable code as a <strong>R package</strong></p>\n<ul>\n<li>you can add documentation, tests, group code logically. It brings a namespace so that you can decide what you expose.</li>\n</ul></li>\n<li><p>But… it does NOT really solve the <strong>versioning</strong> problem</p>\n<ul>\n<li>in R, packages have to be <strong>installed</strong> (e.g. using <code>install.packages()</code>) before you can use them with <code>library(mypkg)</code></li>\n<li>packages have a version number (N.B: this is not the same as <em>code versioning</em>)</li>\n<li>if you use version v1 in your project A, and version v2 in project B, you have to juggle with versions (install/uninstall) Of course there are some tools to deal with that (renv…) but they work with external packages (or you need some private custom repositories)</li>\n<li>and it’s very cumbersome. Suppose that in your project A you find a bug in the (installed package). In order to fix it, you need to\n<ul>\n<li>fetch the source code of the package</li>\n<li>try to reproduce your problem. Chances are that you need your project data, you have to reproduce your session</li>\n<li>finally, if you manage to fix it. You have to publish it, install it.</li>\n</ul></li>\n</ul></li>\n<li><p>my approach is to use what I call <strong>R source packages</strong></p>\n<ul>\n<li>they are normal R packages, but instead of installing them on your R system, you load them directly from source in your R session.</li>\n<li>it was made possible by the infamous <strong>Hadley Wickham</strong>, and his <code>devtools::load_all()</code> function, that mimics the loading of an installed package</li>\n<li>this greatly helps with all those problems:\n<ul>\n<li>you embed your source packages inside your project (as <em>git submodules</em>, we’ll that see later) this solves the versioning/reproducibility at your reusable code level: all your projects may use a different version</li>\n</ul></li>\n<li>if you need to fix a bug, or improve and augment your reusable code, it’s a simple as editing the code for your project. And using <code>srcpkgs</code>, you can even easily reload the code inside your existing R sessions, without losing any computed data.</li>\n</ul></li>\n<li><p>so far so good. Then for ease of maintenance/modularity, you start splitting your reusable code by category, and develop several R packages, e.g. one for some misc utilities, one for loading data from your database, one for some specific analysis…</p>\n<ul>\n<li>this is where <code>srcpkgs</code> become usefuls, since <code>devtools</code> was designed to manage a <strong>single R source package</strong>, not a collection/<strong>library</strong> of possibly inter-dependent packages.\n<ul>\n<li>additionally has a useful little hack that enables you to use the standard <code>library()</code> function to load your source packages. So that when you analysis is finalized, or deployed in <em>production</em>, with your packages installed in the standard way, your script will continue to worl without any change.</li>\n</ul></li>\n</ul></li>\n<li><p>But this does not solve the <strong>reproducibility</strong> for the external packages</p>\n<ul>\n<li>your code and source library most certainly use external packages, and also depend on your R version (and thus on the <em>bioconductor</em> version)</li>\n<li>it may also depend on your OS architecture (CPU…)</li>\n<li>this is out of scope for that talk, but one solution for that is to use a virtualized development environment: a <strong>docker</strong> container (cf https://rocker-project.org/) that contains a fixed version of <strong>R</strong>, and of all the needed external packages.</li>\n<li>now the challenge is to synchronize that docker container version with your source library version…</li>\n<li>also cf <a href=\"https://code.visualstudio.com/docs/devcontainers/containers\" rel=\"nofollow\" target=\"_blank\">devcontainers</a></li>\n</ul></li>\n</ul>\n<section class=\"level3\" id=\"summary\">\n<h3 class=\"anchored\" data-anchor-id=\"summary\">Summary</h3>\n<p><code>script --&gt; script+functions --&gt; script + source files --&gt;  R package --&gt; R source package --&gt; R source library [ + R docker env]</code></p>\n</section>\n</section>\n<section class=\"level2\" id=\"my-recommended-project-setup\">\n<h2 class=\"anchored\" data-anchor-id=\"my-recommended-project-setup\">My recommended project setup</h2>\n<ul>\n<li>the source <strong>library</strong> of R packages\n<ul>\n<li>should be a <strong>single dedicated git repository</strong>\n<ul>\n<li>recommended since it’s easier to have consistent versions of interdependent packages</li>\n<li>but each package could be in its own git repository if needed</li>\n</ul></li>\n<li>each package should contain <strong>tests</strong> (very important, even if it’s counter intuitive, but there is usually more value in the test suite than in the code itself, don’t get me started on that…)</li>\n<li>for internal packages, especially for a public of developers I personally that the <strong>documentation</strong> is less important, for example that for a publicly released package.</li>\n<li>you should use <strong>CI</strong> (Continuous Integration, like github actions or gitlab CI) to automatically run the automated tests each time you push to the repository.</li>\n<li>also, reporting the test coverage is important</li>\n</ul></li>\n<li>the <strong>project code</strong>\n<ul>\n<li>MUST be versioned in a git repository (in github/gitlab…): one repository per project</li>\n<li>should itself be a R (source) package\n<ul>\n<li>easier to add tests, documentation, vignettes</li>\n</ul></li>\n<li>but can be a single script or a set of source files</li>\n<li>contain a given version (commit/tag/branch) of the source library as a <strong>git submodule</strong></li>\n<li>should contain a <strong>vscode devcontainer</strong> to execute the project’s code (automatically usable via <strong>github codespaces</strong>)</li>\n</ul></li>\n<li>the project R code will then use the <code>srcpkgs</code> package, that will automatically <strong>discover</strong> the R packages contained in the project folder, and transparently load them using the <em>hacked</em> <code>library()</code> function as if they were installed packages.</li>\n</ul>\n</section>\n<section class=\"level1\" id=\"resources\">\n<h1>Resources</h1>\n<ul>\n<li>the github repository of <a href=\"https://github.com/kforner/srcpkgs\" rel=\"nofollow\" target=\"_blank\"><code>srcpkgs</code></a></li>\n<li>the <a href=\"https://kforner.github.io/srcpkgs/\" rel=\"nofollow\" target=\"_blank\">online documentation</a>\n<ul>\n<li>notably this demo vignette: <a href=\"https://kforner.github.io/srcpkgs/articles/demo.html\" rel=\"nofollow\" target=\"_blank\">why would you need srcpkgs?</a></li>\n</ul></li>\n<li>This post should be available on <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\" target=\"_blank\">R bloggers</a></li>\n</ul>\n<p><a href=\"https://kforner.netlify.app/about\" rel=\"nofollow\" target=\"_blank\">I (Karl Forner)</a> am currently working as a consultant, contact me if you want me to help you on using R, organizing development, developing R packages or more generally support your software development efforts.</p>\n</section>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://kforner.netlify.app/posts/organizing_dev_with_srcpkgs/\"> kforner</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Organizing R development using srcpkgs\nPosted on\nJuly 17, 2025\nby\nKarl Forner\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nkforner\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nOverview\nThis is an introduction on organizing R projects using source packages (powered by my R package\nsrcpkgs\n). It is based on notes for a talk I have on 2024-05-27 for the\nSwiss Institute of Bioinformatics Vital-IT group\nAnalysts meeting.\nThe objective is to organize R projects in order to:\nreuse code\nshare code\nincrease robustness\nenable analysis (code) reproducibility\nThe context is mostly for analysis oriented R projects.\nR packages\nAll R users use R packages, the core ones such as base, stats, tools, and some from CRAN or BioConductor.\nWhy would you want to use R packages for your own code???\na R package is:\nself-contained\nit bundles together all related code, the documentation, the relevant data and tests\nthe dependencies are explicitly stated, and are themselves R packages\nOn the natural evolution of code projects…\nMy view on the general evolution of analysis projects:\nyou start with a\nsingle script\n, sequential, with no functions\nat one point (after writing hundreds or thousands of lines) you realize that you need some\nfunctions\nthen you start reusing those functions across projects by copy/paste. This raises a number of problems\nversioning: at one point you will fix or improve such a function\nit may be difficult to remember which project contains the latest version\nwhat of the projects that contain the incorrect versions?\nthen you may want, if you work in a team, to share this code with colleagues, or to use theirs\n–> it requires some\ndocumentation\n, even terse.\nthere’s a increased\nresponsibility\n. What if your code is wrong and impact the projects of your colleagues? One remedy is to write tests for those functions.\nthose functions are seldom independent, so that you can not just pick one\nall those functions are\nexposed\n(i.e\npublic\nor\nexported\n).\nif you start to use a low-level function in your project, and that in the next version it has been refactored and that this function has been changed, or removed, updating the shared code will break the project.\nfor all those reasons you start packaging your reusable code as a\nR package\nyou can add documentation, tests, group code logically. It brings a namespace so that you can decide what you expose.\nBut… it does NOT really solve the\nversioning\nproblem\nin R, packages have to be\ninstalled\n(e.g. using\ninstall.packages()\n) before you can use them with\nlibrary(mypkg)\npackages have a version number (N.B: this is not the same as\ncode versioning\n)\nif you use version v1 in your project A, and version v2 in project B, you have to juggle with versions (install/uninstall) Of course there are some tools to deal with that (renv…) but they work with external packages (or you need some private custom repositories)\nand it’s very cumbersome. Suppose that in your project A you find a bug in the (installed package). In order to fix it, you need to\nfetch the source code of the package\ntry to reproduce your problem. Chances are that you need your project data, you have to reproduce your session\nfinally, if you manage to fix it. You have to publish it, install it.\nmy approach is to use what I call\nR source packages\nthey are normal R packages, but instead of installing them on your R system, you load them directly from source in your R session.\nit was made possible by the infamous\nHadley Wickham\n, and his\ndevtools::load_all()\nfunction, that mimics the loading of an installed package\nthis greatly helps with all those problems:\nyou embed your source packages inside your project (as\ngit submodules\n, we’ll that see later) this solves the versioning/reproducibility at your reusable code level: all your projects may use a different version\nif you need to fix a bug, or improve and augment your reusable code, it’s a simple as editing the code for your project. And using\nsrcpkgs\n, you can even easily reload the code inside your existing R sessions, without losing any computed data.\nso far so good. Then for ease of maintenance/modularity, you start splitting your reusable code by category, and develop several R packages, e.g. one for some misc utilities, one for loading data from your database, one for some specific analysis…\nthis is where\nsrcpkgs\nbecome usefuls, since\ndevtools\nwas designed to manage a\nsingle R source package\n, not a collection/\nlibrary\nof possibly inter-dependent packages.\nadditionally has a useful little hack that enables you to use the standard\nlibrary()\nfunction to load your source packages. So that when you analysis is finalized, or deployed in\nproduction\n, with your packages installed in the standard way, your script will continue to worl without any change.\nBut this does not solve the\nreproducibility\nfor the external packages\nyour code and source library most certainly use external packages, and also depend on your R version (and thus on the\nbioconductor\nversion)\nit may also depend on your OS architecture (CPU…)\nthis is out of scope for that talk, but one solution for that is to use a virtualized development environment: a\ndocker\ncontainer (cf https://rocker-project.org/) that contains a fixed version of\nR\n, and of all the needed external packages.\nnow the challenge is to synchronize that docker container version with your source library version…\nalso cf\ndevcontainers\nSummary\nscript --> script+functions --> script + source files -->  R package --> R source package --> R source library [ + R docker env]\nMy recommended project setup\nthe source\nlibrary\nof R packages\nshould be a\nsingle dedicated git repository\nrecommended since it’s easier to have consistent versions of interdependent packages\nbut each package could be in its own git repository if needed\neach package should contain\ntests\n(very important, even if it’s counter intuitive, but there is usually more value in the test suite than in the code itself, don’t get me started on that…)\nfor internal packages, especially for a public of developers I personally that the\ndocumentation\nis less important, for example that for a publicly released package.\nyou should use\nCI\n(Continuous Integration, like github actions or gitlab CI) to automatically run the automated tests each time you push to the repository.\nalso, reporting the test coverage is important\nthe\nproject code\nMUST be versioned in a git repository (in github/gitlab…): one repository per project\nshould itself be a R (source) package\neasier to add tests, documentation, vignettes\nbut can be a single script or a set of source files\ncontain a given version (commit/tag/branch) of the source library as a\ngit submodule\nshould contain a\nvscode devcontainer\nto execute the project’s code (automatically usable via\ngithub codespaces\n)\nthe project R code will then use the\nsrcpkgs\npackage, that will automatically\ndiscover\nthe R packages contained in the project folder, and transparently load them using the\nhacked\nlibrary()\nfunction as if they were installed packages.\nResources\nthe github repository of\nsrcpkgs\nthe\nonline documentation\nnotably this demo vignette:\nwhy would you need srcpkgs?\nThis post should be available on\nR bloggers\nI (Karl Forner)\nam currently working as a consultant, contact me if you want me to help you on using R, organizing development, developing R packages or more generally support your software development efforts.\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nkforner\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "Overview This is an introduction on organizing R projects using source packages (powered by my R package srcpkgs). It is based on notes for a talk I have on 2024-05-27 for the Swiss Institute of Bioinformatics Vital-IT group Analysts meeting. T...",
    "meta_keywords": null,
    "og_description": "Overview This is an introduction on organizing R projects using source packages (powered by my R package srcpkgs). It is based on notes for a talk I have on 2024-05-27 for the Swiss Institute of Bioinformatics Vital-IT group Analysts meeting. T...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Organizing R development using srcpkgs | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 6.8,
    "sitemap_lastmod": null,
    "twitter_description": "Overview This is an introduction on organizing R projects using source packages (powered by my R package srcpkgs). It is based on notes for a talk I have on 2024-05-27 for the Swiss Institute of Bioinformatics Vital-IT group Analysts meeting. T...",
    "twitter_title": "Organizing R development using srcpkgs | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/07/organizing-r-development-using-srcpkgs/",
    "word_count": 1355
  }
}