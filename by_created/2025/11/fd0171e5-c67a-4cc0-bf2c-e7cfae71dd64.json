{
  "uuid": "fd0171e5-c67a-4cc0-bf2c-e7cfae71dd64",
  "created_at": "2025-11-17 20:40:32",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2009/08/trend-analysis-with-the-cox-stuart-test-in-r/",
    "crawled_at": "2025-11-17T10:29:16.618038",
    "external_links": [
      {
        "href": "https://statistic-on-air.blogspot.com/2009/08/trend-analysis-with-cox-stuart-test-in.html",
        "text": "Statistic on aiR"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://statistic-on-air.blogspot.com/2009/08/trend-analysis-with-cox-stuart-test-in.html",
        "text": "Statistic on aiR"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Trend Analysis with the Cox-Stuart test in R | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/todos-logos/",
        "text": "Todos Logos"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-615 post type-post status-publish format-standard hentry\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Trend Analysis with the Cox-Stuart test in R</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">August 8, 2009</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/todos-logos/\">Todos Logos</a></span>  in Uncategorized | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://statistic-on-air.blogspot.com/2009/08/trend-analysis-with-cox-stuart-test-in.html\"> Statistic on aiR</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->The <b>Cox-Stuart test</b> is defined as a little powerful test (power equal to 0.78), but very robust for the <b>trend analysis</b>. It is therefore applicable to a wide variety of situations, to get an idea of the evolution of values obtained. The proposed method is based on the <em>binomial distribution</em>. In R there is no function to perform a test of Cox-Stuart, so now we see the logical steps that are the basis of test and finally we can write the function ourself.<br/><br/><span class=\"fullpost\">You want to assess whether there is an <em>increasing or decreasing trend</em> of the number of daily customers of a restaurant. We have the number of customers in 15 days:<br/><div style=\"text-align: center;\">Customers: 5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14</div><br/><br/>To perform the test of Cox-Stuart, the number of observations must be even. In our case we have 15 observations. Delete, therefore, the observation at position (N+1)/2 (here the observation with value = 20):<br/><br/><pre>\ncustomers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)\n\nlength(customers)\n[1] 15\n\ncust_even = customers[ -(length(customers)+1)/2 ]\nlength(cust_even)\n[1] 14</pre><br/><br/>Now we have 14 observations, and we can then proceed. Divide the observations into two vectors, the first containing the first half of the measures, and the second the second half:<br/><br/><pre>\nfHalf = cust_even[1:7]\nsHalf = cust_even[8:14]\n\nfHalf\n[1]  5  9 12 18 17 16 19\n\nsHalf\n[1]  4  3 18 16 17 15 14</pre><br/><br/>Now subtract, value by value, the content of the two vectors:<br/><br/><pre>\ndifference = fHalf - sHalf\n\ndifference\n[1]  1  6 -6  2  0  1  5</pre><br/><br/>Now consider only the signs of the contents of the vector difference<br/><br/><pre>\nsigns = sign(difference)\n\nsigns\n[1]  1  1 -1  1  0  1  1</pre><br/><br/>A difference has value 0 and therefore also in the vector with the signs there is a value equal to 0. This must be eliminated:<br/><br/><pre>\nsigns = signs[ signs != 0 ]\n\nsigns\n[1]  1  1 -1  1  1  1</pre><br/><br/>We obtained six differences, and then six signs. Now we have to count the number of positive-signs and the number of negative-signs:<br/><br/><pre>\npos = signs[signs &gt; 0]\nneg = signs[signs &lt; 0]\n\nlength(pos)\n[1] 5\n\nlength(neg)\n[1] 1</pre><br/><br/>Now we choose the number of signs that is smaller. In this case we choose the number of negative signs (1). We compute the probability to obtain x = 1 successes on N = 6 experiments, each of which yields success with probability p = 0.5 (binomial distribution):<br/><br/><pre>\npbinom(1, 6, 0.5)\n[1] 0.109375</pre><br/><br/>The value so calculated is higher than 0.05 (we choose a significance level of 95%). Therefore there is no significant trend (which would have been in decline since the number of negative signs is minor).<br/>If the value was less than 0.05, we accepted the hypothesis of a significant trend.<br/><br/>Now try to fit a regression model, and observe the p-value of the slope: the coefficient b is not significant.<br/><br/><pre>\ncustomers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)\ndays &lt;- c(1:length(customers))\nmodel &lt;- lm(customers ~ days)\nsummary(model)\n\nCall:\nlm(formula = customers ~ days)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-11.090  -2.173   1.352   3.967   6.467 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)   \n(Intercept)  11.3048     3.1104   3.634  0.00303 **\ndays          0.2786     0.3421   0.814  0.43014   \n---\nSignif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 \n\nResidual standard error: 5.724 on 13 degrees of freedom</pre><br/><br/><br/>Here is the code to perform a Cos-Stuart test, written by me.<br/><br/><pre>\ncox.stuart.test =\nfunction (x)\n{\n  method = \"Cox-Stuart test for trend analysis\"\n  leng = length(x)\n  apross = round(leng) %% 2\n  if (apross == 1) {\n    delete = (length(x)+1)/2\n    x = x[ -delete ] \n  }\n  half = length(x)/2\n  x1 = x[1:half]\n  x2 = x[(half+1):(length(x))]\n  difference = x1-x2\n  signs = sign(difference)\n  signcorr = signs[signs != 0]\n  pos = signs[signs&gt;0]\n  neg = signs[signs</pre><br/><br/>We can now use the function just created:<br/><br/><pre>\ncustomers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)\ncox.stuart.test(customers)\n\n        Cox-Stuart test for trend analysis\n\ndata:  \nDecreasing trend, p-value = 0.1094</pre><br/></span>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://statistic-on-air.blogspot.com/2009/08/trend-analysis-with-cox-stuart-test-in.html\"> Statistic on aiR</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n</article>",
    "main_text": "Trend Analysis with the Cox-Stuart test in R\nPosted on\nAugust 8, 2009\nby\nTodos Logos\nin Uncategorized | 0 Comments\n[This article was first published on\nStatistic on aiR\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nThe\nCox-Stuart test\nis defined as a little powerful test (power equal to 0.78), but very robust for the\ntrend analysis\n. It is therefore applicable to a wide variety of situations, to get an idea of the evolution of values obtained. The proposed method is based on the\nbinomial distribution\n. In R there is no function to perform a test of Cox-Stuart, so now we see the logical steps that are the basis of test and finally we can write the function ourself.\nYou want to assess whether there is an\nincreasing or decreasing trend\nof the number of daily customers of a restaurant. We have the number of customers in 15 days:\nCustomers: 5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14\nTo perform the test of Cox-Stuart, the number of observations must be even. In our case we have 15 observations. Delete, therefore, the observation at position (N+1)/2 (here the observation with value = 20):\ncustomers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)\n\nlength(customers)\n[1] 15\n\ncust_even = customers[ -(length(customers)+1)/2 ]\nlength(cust_even)\n[1] 14\nNow we have 14 observations, and we can then proceed. Divide the observations into two vectors, the first containing the first half of the measures, and the second the second half:\nfHalf = cust_even[1:7]\nsHalf = cust_even[8:14]\n\nfHalf\n[1]  5  9 12 18 17 16 19\n\nsHalf\n[1]  4  3 18 16 17 15 14\nNow subtract, value by value, the content of the two vectors:\ndifference = fHalf - sHalf\n\ndifference\n[1]  1  6 -6  2  0  1  5\nNow consider only the signs of the contents of the vector difference\nsigns = sign(difference)\n\nsigns\n[1]  1  1 -1  1  0  1  1\nA difference has value 0 and therefore also in the vector with the signs there is a value equal to 0. This must be eliminated:\nsigns = signs[ signs != 0 ]\n\nsigns\n[1]  1  1 -1  1  1  1\nWe obtained six differences, and then six signs. Now we have to count the number of positive-signs and the number of negative-signs:\npos = signs[signs > 0]\nneg = signs[signs < 0]\n\nlength(pos)\n[1] 5\n\nlength(neg)\n[1] 1\nNow we choose the number of signs that is smaller. In this case we choose the number of negative signs (1). We compute the probability to obtain x = 1 successes on N = 6 experiments, each of which yields success with probability p = 0.5 (binomial distribution):\npbinom(1, 6, 0.5)\n[1] 0.109375\nThe value so calculated is higher than 0.05 (we choose a significance level of 95%). Therefore there is no significant trend (which would have been in decline since the number of negative signs is minor).\nIf the value was less than 0.05, we accepted the hypothesis of a significant trend.\nNow try to fit a regression model, and observe the p-value of the slope: the coefficient b is not significant.\ncustomers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)\ndays <- c(1:length(customers))\nmodel <- lm(customers ~ days)\nsummary(model)\n\nCall:\nlm(formula = customers ~ days)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-11.090  -2.173   1.352   3.967   6.467 \n\nCoefficients:\n            Estimate Std. Error t value Pr(>|t|)   \n(Intercept)  11.3048     3.1104   3.634  0.00303 **\ndays          0.2786     0.3421   0.814  0.43014   \n---\nSignif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 \n\nResidual standard error: 5.724 on 13 degrees of freedom\nHere is the code to perform a Cos-Stuart test, written by me.\ncox.stuart.test =\nfunction (x)\n{\n  method = \"Cox-Stuart test for trend analysis\"\n  leng = length(x)\n  apross = round(leng) %% 2\n  if (apross == 1) {\n    delete = (length(x)+1)/2\n    x = x[ -delete ] \n  }\n  half = length(x)/2\n  x1 = x[1:half]\n  x2 = x[(half+1):(length(x))]\n  difference = x1-x2\n  signs = sign(difference)\n  signcorr = signs[signs != 0]\n  pos = signs[signs>0]\n  neg = signs[signs\nWe can now use the function just created:\ncustomers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)\ncox.stuart.test(customers)\n\n        Cox-Stuart test for trend analysis\n\ndata:  \nDecreasing trend, p-value = 0.1094\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nStatistic on aiR\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "The Cox-Stuart test is defined as a little powerful test (power equal to 0.78), but very robust for the trend analysis. It is therefore applicable to a wide variety of situations, to get an idea of the evolution of values obtained. The proposed method is based on the binomial distribution. In R there is no function to perform a test of Cox-Stuart, so now we see the logical steps that are the basis of test and finally we can write the function ourself.You want to assess whether there is an increasing or decreasing trend of the number of daily customers of a restaurant. We have the number of customers in 15 days:Customers: 5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14 To perform the test of Cox-Stuart, the number of observations must be even. In our case we have 15 observations. Delete, therefore, the observation at position (N+1)/2 (here the observation with value = 20):customers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)length(customers)[1] 15cust_even = customers[ -(length(customers)+1)/2 ]length(cust_even)[1] 14 Now we have 14 observations, and we can then proceed. Divide the observations into two vectors, the first containing the first half of the measures, and the second the second half:fHalf = cust_even[1:7]sHalf = cust_even[8:14]fHalf[1] 5 9 12 18 17 16 19sHalf[1] 4 3 18 16 17 15 14 Now subtract, value by value, the content of the two vectors:difference = fHalf - sHalfdifference[1] 1 6 -6 2 0 1 5 Now consider only the signs of the contents of the vector differencesigns = sign(difference)signs[1] 1 1 -1 1 0 1 1 A difference has value 0 and therefore also in the vector with the signs there is a value equal to 0. This must be eliminated:signs = signs[ signs != 0 ]signs[1] 1 1 -1 1 1 1 We obtained six differences, and then six signs. Now we have to count the number of positive-signs and the number of negative-signs:pos = signs[signs > 0]neg = signs[signs length(pos)[1] 5length(neg)[1] 1 Now we choose the number of signs that is smaller. In this case we choose the number of negative signs (1). We compute the probability to obtain x = 1 successes on N = 6 experiments, each of which yields success with probability p = 0.5 (binomial distribution):pbinom(1, 6, 0.5)[1] 0.109375 The value so calculated is higher than 0.05 (we choose a significance level of 95%). Therefore there is no significant trend (which would have been in decline since the number of negative signs is minor).If the value was less than 0.05, we accepted the hypothesis of a significant trend.Now try to fit a regression model, and observe the p-value of the slope: the coefficient b is not significant.customers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)days model summary(model)Call:lm(formula = customers ~ days)Residuals: Min 1Q Median 3Q Max -11.090 -2.173 1.352 3.967 6.467 Coefficients: Estimate Std. Error t value Pr(>|t|) (Intercept) 11.3048 3.1104 3.634 0.00303 **days 0.2786 0.3421 0.814 0.43014 ---Signif. codes: 0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 Residual standard error: 5.724 on 13 degrees of freedom Here is the code to perform a Cos-Stuart test, written by me.cox.stuart.test =function (x){ method = \"Cox-Stuart test for trend analysis\" leng = length(x) apross = round(leng) %% 2 if (apross == 1) { delete = (length(x)+1)/2 x = x[ -delete ] } half = length(x)/2 x1 = x[1:half] x2 = x[(half+1):(length(x))] difference = x1-x2 signs = sign(difference) signcorr = signs[signs != 0] pos = signs[signs>0] neg = signs[signs if (length(pos) prop = pbinom(length(pos), length(signcorr), 0.5) names(prop) = \"Increasing trend, p-value\" rval class(rval) = \"htest\" return(rval) } else { prop = pbinom(length(neg), length(signcorr), 0.5) names(prop) = \"Decreasing trend, p-value\" rval class(rval) = \"htest\" return(rval) }} We can now use the function just created:customers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)cox.stuart.test(customers) Cox-Stuart test for trend analysisdata: Decreasing trend, p-value = 0.1094",
    "meta_keywords": null,
    "og_description": "The Cox-Stuart test is defined as a little powerful test (power equal to 0.78), but very robust for the trend analysis. It is therefore applicable to a wide variety of situations, to get an idea of the evolution of values obtained. The proposed method is based on the binomial distribution. In R there is no function to perform a test of Cox-Stuart, so now we see the logical steps that are the basis of test and finally we can write the function ourself.You want to assess whether there is an increasing or decreasing trend of the number of daily customers of a restaurant. We have the number of customers in 15 days:Customers: 5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14 To perform the test of Cox-Stuart, the number of observations must be even. In our case we have 15 observations. Delete, therefore, the observation at position (N+1)/2 (here the observation with value = 20):customers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)length(customers)[1] 15cust_even = customers[ -(length(customers)+1)/2 ]length(cust_even)[1] 14 Now we have 14 observations, and we can then proceed. Divide the observations into two vectors, the first containing the first half of the measures, and the second the second half:fHalf = cust_even[1:7]sHalf = cust_even[8:14]fHalf[1] 5 9 12 18 17 16 19sHalf[1] 4 3 18 16 17 15 14 Now subtract, value by value, the content of the two vectors:difference = fHalf - sHalfdifference[1] 1 6 -6 2 0 1 5 Now consider only the signs of the contents of the vector differencesigns = sign(difference)signs[1] 1 1 -1 1 0 1 1 A difference has value 0 and therefore also in the vector with the signs there is a value equal to 0. This must be eliminated:signs = signs[ signs != 0 ]signs[1] 1 1 -1 1 1 1 We obtained six differences, and then six signs. Now we have to count the number of positive-signs and the number of negative-signs:pos = signs[signs > 0]neg = signs[signs length(pos)[1] 5length(neg)[1] 1 Now we choose the number of signs that is smaller. In this case we choose the number of negative signs (1). We compute the probability to obtain x = 1 successes on N = 6 experiments, each of which yields success with probability p = 0.5 (binomial distribution):pbinom(1, 6, 0.5)[1] 0.109375 The value so calculated is higher than 0.05 (we choose a significance level of 95%). Therefore there is no significant trend (which would have been in decline since the number of negative signs is minor).If the value was less than 0.05, we accepted the hypothesis of a significant trend.Now try to fit a regression model, and observe the p-value of the slope: the coefficient b is not significant.customers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)days model summary(model)Call:lm(formula = customers ~ days)Residuals: Min 1Q Median 3Q Max -11.090 -2.173 1.352 3.967 6.467 Coefficients: Estimate Std. Error t value Pr(>|t|) (Intercept) 11.3048 3.1104 3.634 0.00303 **days 0.2786 0.3421 0.814 0.43014 ---Signif. codes: 0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 Residual standard error: 5.724 on 13 degrees of freedom Here is the code to perform a Cos-Stuart test, written by me.cox.stuart.test =function (x){ method = \"Cox-Stuart test for trend analysis\" leng = length(x) apross = round(leng) %% 2 if (apross == 1) { delete = (length(x)+1)/2 x = x[ -delete ] } half = length(x)/2 x1 = x[1:half] x2 = x[(half+1):(length(x))] difference = x1-x2 signs = sign(difference) signcorr = signs[signs != 0] pos = signs[signs>0] neg = signs[signs if (length(pos) prop = pbinom(length(pos), length(signcorr), 0.5) names(prop) = \"Increasing trend, p-value\" rval class(rval) = \"htest\" return(rval) } else { prop = pbinom(length(neg), length(signcorr), 0.5) names(prop) = \"Decreasing trend, p-value\" rval class(rval) = \"htest\" return(rval) }} We can now use the function just created:customers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)cox.stuart.test(customers) Cox-Stuart test for trend analysisdata: Decreasing trend, p-value = 0.1094",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Trend Analysis with the Cox-Stuart test in R | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 4.3,
    "sitemap_lastmod": "2010-10-17T16:47:58+00:00",
    "twitter_description": "The Cox-Stuart test is defined as a little powerful test (power equal to 0.78), but very robust for the trend analysis. It is therefore applicable to a wide variety of situations, to get an idea of the evolution of values obtained. The proposed method is based on the binomial distribution. In R there is no function to perform a test of Cox-Stuart, so now we see the logical steps that are the basis of test and finally we can write the function ourself.You want to assess whether there is an increasing or decreasing trend of the number of daily customers of a restaurant. We have the number of customers in 15 days:Customers: 5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14 To perform the test of Cox-Stuart, the number of observations must be even. In our case we have 15 observations. Delete, therefore, the observation at position (N+1)/2 (here the observation with value = 20):customers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)length(customers)[1] 15cust_even = customers[ -(length(customers)+1)/2 ]length(cust_even)[1] 14 Now we have 14 observations, and we can then proceed. Divide the observations into two vectors, the first containing the first half of the measures, and the second the second half:fHalf = cust_even[1:7]sHalf = cust_even[8:14]fHalf[1] 5 9 12 18 17 16 19sHalf[1] 4 3 18 16 17 15 14 Now subtract, value by value, the content of the two vectors:difference = fHalf - sHalfdifference[1] 1 6 -6 2 0 1 5 Now consider only the signs of the contents of the vector differencesigns = sign(difference)signs[1] 1 1 -1 1 0 1 1 A difference has value 0 and therefore also in the vector with the signs there is a value equal to 0. This must be eliminated:signs = signs[ signs != 0 ]signs[1] 1 1 -1 1 1 1 We obtained six differences, and then six signs. Now we have to count the number of positive-signs and the number of negative-signs:pos = signs[signs > 0]neg = signs[signs length(pos)[1] 5length(neg)[1] 1 Now we choose the number of signs that is smaller. In this case we choose the number of negative signs (1). We compute the probability to obtain x = 1 successes on N = 6 experiments, each of which yields success with probability p = 0.5 (binomial distribution):pbinom(1, 6, 0.5)[1] 0.109375 The value so calculated is higher than 0.05 (we choose a significance level of 95%). Therefore there is no significant trend (which would have been in decline since the number of negative signs is minor).If the value was less than 0.05, we accepted the hypothesis of a significant trend.Now try to fit a regression model, and observe the p-value of the slope: the coefficient b is not significant.customers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)days model summary(model)Call:lm(formula = customers ~ days)Residuals: Min 1Q Median 3Q Max -11.090 -2.173 1.352 3.967 6.467 Coefficients: Estimate Std. Error t value Pr(>|t|) (Intercept) 11.3048 3.1104 3.634 0.00303 **days 0.2786 0.3421 0.814 0.43014 ---Signif. codes: 0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 Residual standard error: 5.724 on 13 degrees of freedom Here is the code to perform a Cos-Stuart test, written by me.cox.stuart.test =function (x){ method = \"Cox-Stuart test for trend analysis\" leng = length(x) apross = round(leng) %% 2 if (apross == 1) { delete = (length(x)+1)/2 x = x[ -delete ] } half = length(x)/2 x1 = x[1:half] x2 = x[(half+1):(length(x))] difference = x1-x2 signs = sign(difference) signcorr = signs[signs != 0] pos = signs[signs>0] neg = signs[signs if (length(pos) prop = pbinom(length(pos), length(signcorr), 0.5) names(prop) = \"Increasing trend, p-value\" rval class(rval) = \"htest\" return(rval) } else { prop = pbinom(length(neg), length(signcorr), 0.5) names(prop) = \"Decreasing trend, p-value\" rval class(rval) = \"htest\" return(rval) }} We can now use the function just created:customers = c(5, 9, 12, 18, 17, 16, 19, 20, 4, 3, 18, 16, 17, 15, 14)cox.stuart.test(customers) Cox-Stuart test for trend analysisdata: Decreasing trend, p-value = 0.1094",
    "twitter_title": "Trend Analysis with the Cox-Stuart test in R | R-bloggers",
    "url": "https://www.r-bloggers.com/2009/08/trend-analysis-with-the-cox-stuart-test-in-r/",
    "word_count": 864
  }
}