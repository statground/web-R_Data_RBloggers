{
  "uuid": "4cfcca4c-0002-4743-8e09-ebfd062fe8e8",
  "created_at": "2025-11-17 20:38:59",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2023/12/code-smell-error-handling-eclipse/",
    "crawled_at": "2025-11-17T09:39:32.938186",
    "external_links": [
      {
        "href": "https://www.njtierney.com/post/2023/12/06/long-errors-smell/",
        "text": "Blog on Credibly Curious"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://youtu.be/7oyiPBjLAWY?si=WmuA9wKlZ_kq8eGl",
        "text": "Jenny Bryan’s UseR! Keynote in 2018"
      },
      {
        "href": "https://martinfowler.com/books/refactoring.html",
        "text": "Martin Fowler’s book: Improving the Design of Existing Code"
      },
      {
        "href": "https://www.njtierney.com/post/2023/12/06/long-errors-smell/#fn:1",
        "text": "1"
      },
      {
        "href": "https://design.tidyverse.org/err-constructor.html",
        "text": "The tidyverse design document on error checking"
      },
      {
        "href": "https://adamgruer.rbind.io/",
        "text": "Adam Gruer"
      },
      {
        "href": "https://rlang.r-lib.org/reference/topic-error-call.html",
        "text": "“Including function calls in error messages”"
      },
      {
        "href": "https://rlang.r-lib.org/reference/topic-error-call.html#input-checkers-and-caller-arg-",
        "text": "Input checkers andcaller_arg()"
      },
      {
        "href": "https://style.tidyverse.org/error-messages.html",
        "text": "tidyverse style guide on error messages"
      },
      {
        "href": "https://cli.r-lib.org/reference/cli_abort.html",
        "text": "cli::cli_abort()"
      },
      {
        "href": "https://cli.r-lib.org/reference/cli_abort.html",
        "text": "cli::cli_abort()"
      },
      {
        "href": "https://cli.r-lib.org/reference/inline-markup.html",
        "text": "inline markup"
      },
      {
        "href": "https://rlang.r-lib.org/reference/topic-error-chaining.html",
        "text": "chain errors together"
      },
      {
        "href": "https://rlang.r-lib.org/reference/topic-error-call.html",
        "text": "name of the function"
      },
      {
        "href": "https://style.tidyverse.org/error-messages.html",
        "text": "whole section on error messages"
      },
      {
        "href": "https://blog.r-hub.io/2022/03/10/input-checking/",
        "text": "“Checking the inputs of your R functions”"
      },
      {
        "href": "https://hugogruson.fr/",
        "text": "Hugo Gruson"
      },
      {
        "href": "https://samabbott.co.uk/",
        "text": "Sam Abbott"
      },
      {
        "href": "https://twitter.com/cap1024",
        "text": "Carl Pearson"
      },
      {
        "href": "https://mllg.github.io/checkmate/",
        "text": "checkmate"
      },
      {
        "href": "https://vctrs.r-lib.org/reference/vec_assert.html",
        "text": "vec_assert()"
      },
      {
        "href": "https://github.com/brodieG/vetr",
        "text": "vetr"
      },
      {
        "href": "https://github.com/ropensci/assertr/",
        "text": "assertr"
      },
      {
        "href": "https://www.mm218.dev/posts/2023-11-07-classed-errors/",
        "text": "Mike Mahoney’s blog post, “Classed conditions from rlang functions”"
      },
      {
        "href": "https://design.tidyverse.org/err-constructor.html",
        "text": "tidyverse design page on error constructors"
      },
      {
        "href": "https://greta-stats.org/",
        "text": "greta"
      },
      {
        "href": "https://cli.r-lib.org/index.html",
        "text": "cli"
      },
      {
        "href": "https://github.com/gaborcsardi",
        "text": "Gábor Csárdi"
      },
      {
        "href": "https://rlang.r-lib.org/",
        "text": "rlang"
      },
      {
        "href": "https://github.com/lionel-",
        "text": "Lionel Henry"
      },
      {
        "href": "https://adamgruer.rbind.io/",
        "text": "Adam Gruer"
      },
      {
        "href": "https://masalmon.eu/",
        "text": "Maëlle Salmon"
      },
      {
        "href": "https://pragprog.com/titles/tpp20/the-pragmatic-programmer-20th-anniversary-edition/",
        "text": "The Pragmatic Programmer"
      },
      {
        "href": "https://www.njtierney.com/post/2023/12/06/long-errors-smell/#fnref:1",
        "text": "↩︎"
      },
      {
        "href": "https://www.njtierney.com/post/2023/12/06/long-errors-smell/",
        "text": "Blog on Credibly Curious"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Code Smell: Error Handling Eclipse | R-bloggers",
    "images": [
      {
        "alt": "An amusing “no parking” sign that threatens to transport your car to another universe. Collingwood, Melbourne",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "An amusing “no parking” sign that threatens to transport your car to another universe. Collingwood, Melbourne",
        "base64": null,
        "src": "https://i0.wp.com/www.njtierney.com/post/2023/12/06/long-errors-smell/img/no-parking.jpg?w=578&ssl=1"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/blog-on-credibly-curious/",
        "text": "Blog on Credibly Curious"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-381442 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Code Smell: Error Handling Eclipse</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">December 5, 2023</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/blog-on-credibly-curious/\">Blog on Credibly Curious</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://www.njtierney.com/post/2023/12/06/long-errors-smell/\"> Blog on Credibly Curious</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.9--><figure>\n<img alt=\"An amusing “no parking” sign that threatens to transport your car to another universe. Collingwood, Melbourne\" data-lazy-src=\"https://i0.wp.com/www.njtierney.com/post/2023/12/06/long-errors-smell/img/no-parking.jpg?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"An amusing “no parking” sign that threatens to transport your car to another universe. Collingwood, Melbourne\" data-recalc-dims=\"1\" src=\"https://i0.wp.com/www.njtierney.com/post/2023/12/06/long-errors-smell/img/no-parking.jpg?w=578&amp;ssl=1\"/></noscript>\n<figcaption aria-hidden=\"true\">An amusing “no parking” sign that threatens to transport your car to another universe. Collingwood, Melbourne</figcaption>\n</figure>\n<p>Error messages are really important, and really hard to write well. When software authors take the time to check your inputs, and share reasons why it fails, they are doing you a favour. So, writing error messages is good.</p>\n<p>However, this error checking code can sometimes totally eclipse the intent of the code. We can describe these kinds of patterns as a “code smell”. I first heard about code smells in <a href=\"https://youtu.be/7oyiPBjLAWY?si=WmuA9wKlZ_kq8eGl\" rel=\"nofollow\" target=\"_blank\">Jenny Bryan’s UseR! Keynote in 2018</a>, which I highly recommend watching. The term “code smell”, comes from <a href=\"https://martinfowler.com/books/refactoring.html\" rel=\"nofollow\" target=\"_blank\">Martin Fowler’s book: Improving the Design of Existing Code</a>). The definition of a code smell that Jenny gives in her talk is:</p>\n<blockquote>\n<p>Structures in code that suggest (or scream for) <strong>refactoring</strong></p>\n</blockquote>\n<p>She then goes on to define refactoring as:</p>\n<blockquote>\n<p>Making code easier to understand for the next person (which might be you), cheaper to modify by the next person who comes through, <strong>without changing behaviour</strong>.</p>\n</blockquote>\n<p>The talk is a delight, and watching it again was really awesome. If you haven’t watched it, you should, and if you haven’t seen it for a while, it’s worth another watch.</p>\n<p>Anyway, I digress.</p>\n<p>I call this code smell, and “Error Handling Eclipse”:</p>\n<blockquote>\n<p>When error checking code totally eclipses the intent of the code.<sup id=\"fnref:1\"><a class=\"footnote-ref\" href=\"https://www.njtierney.com/post/2023/12/06/long-errors-smell/#fn:1\" rel=\"nofollow\" role=\"doc-noteref\" target=\"_blank\">1</a></sup></p>\n</blockquote>\n<p>The code smell looks like this:</p>\n<div class=\"highlight\">\n<pre>vector_to_square &lt;- function(data) {\n  dims &lt;- sqrt(length(data))\n  \n  squarable_length &lt;- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      c(\n        \"Provided vector is not of a squarable length\",\n        \"{.var data} is of length {.num {length(data)}}\",\n        \"This cannot be represented as a square\",\n        \"Square root of {.var dim(data)} is: {.num {round(dims, 3)}}.\"\n      )\n    )\n  }\n  \n  if (!is.numeric(data)) {\n    cli::cli_abort(\n      c(\n        \"Provided vector must be {.cls numeric}, not {.cls {class(data)}}\",\n        \"We see that {.run is.numeric(data)} returns {.cls {class(data)}}\"\n      )\n    )\n  }\n  \n  matrix(\n    data = data,\n    nrow = dims,\n    ncol = dims,\n    byrow = TRUE\n  )\n}</pre>\n</div>\n<p>The code smell, “error handling eclipse”, can be seen here where the long error messages in the body of a function crow the intent. I believe the refactoring move here is to wrap these error functions into a function. This reduces repetition, and makes the intent of the code clearer, since you don’t need to wade through error checking code. <a href=\"https://design.tidyverse.org/err-constructor.html\" rel=\"nofollow\" target=\"_blank\">The tidyverse design document on error checking</a>) mentions building these “error checking” functions when the error is used three times. I think there is more benefit to write it out every time.</p>\n<h2 id=\"whats-the-solution\">What’s the solution?</h2>\n<p>This code can be improved by refactoring the errors as <code>check_*</code> functions, something like, <code>check_array_is_square(x)</code>.</p>\n<h2 id=\"show-me-the-difference\">Show me the difference</h2>\n<p>To demonstrate this, let’s take a look again at the example code from above, a function that converts a vector into a square matrix:</p>\n<div class=\"highlight\">\n<pre>vector_to_square &lt;- function(data) {\n  dims &lt;- sqrt(length(data))\n  \n  squarable_length &lt;- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      c(\n        \"Provided vector is not of a squarable length\",\n        \"{.var x} is of length {.num {length(data)}}\",\n        \"This cannot be represented as a square\",\n        \"Square root of {.var dim(data)} is: {.num {round(dims, 3)}}.\"\n      )\n    )\n  }\n  \n  if (!is.numeric(data)) {\n    cli::cli_abort(\n      c(\n        \"Provided vector must be {.cls numeric}, not {.cls {class(data)}}\",\n        \"We see that {.run is.numeric(data)} returns {.cls {class(data)}}\"\n      )\n    )\n  }\n  \n  matrix(\n    data = data,\n    nrow = dims,\n    ncol = dims,\n    byrow = TRUE\n  )\n}</pre>\n</div>\n<p>Now let’s demonstrate its use, and what the errors look like:</p>\n<div class=\"highlight\">\n<pre>vector_to_square(data = 1:4)\n#&gt;      [,1] [,2]\n#&gt; [1,]    1    2\n#&gt; [2,]    3    4\nvector_to_square(data = 1:5)\n#&gt; Error in `vector_to_square()`:\n#&gt; ! Provided vector is not of a squarable length\n#&gt; `x` is of length 5\n#&gt; This cannot be represented as a square\n#&gt; Square root of `dim(data)` is: 2.236.\nvector_to_square(data = LETTERS[1:4])\n#&gt; Error in `vector_to_square()`:\n#&gt; ! Provided vector must be &lt;numeric&gt;, not &lt;character&gt;\n#&gt; We see that `is.numeric(data)` returns &lt;character&gt;\n</pre>\n</div>\n<p>So we have some input checking code, which does two things:</p>\n<ul>\n<li>checks if the inputs can be a square matrix</li>\n<li>checks if inputs are not numeric</li>\n</ul>\n<p>While we like these error messages, wrapping up the error messags as functions clarifies the intent of them, and avoids repitition:</p>\n<div class=\"highlight\">\n<pre>check_if_squarable &lt;- function(x) {\n  dims &lt;- sqrt(length(x))\n  \n  squarable_length &lt;- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      c(\n        \"Provided vector is not of a squarable length\",\n        \"{.var x} is of length {.num {length(x)}}\",\n        \"This cannot be represented as a square\",\n        \"Square root of {.var dim(x)} is: {.num {round(dims, 3)}}.\"\n      )\n    )\n  }\n}\n\ncheck_if_not_numeric &lt;- function(x) {\n  if (!is.numeric(x)) {\n    cli::cli_abort(\n      c(\n        \"Provided vector must be {.cls numeric}, not {.cls {class(x)}}\",\n        \"We see that {.run is.numeric(x)} returns {.cls {class(x)}}\"\n      )\n    )\n  }\n  \n}</pre>\n</div>\n<p>These error messages can then be put into the function like so:</p>\n<div class=\"highlight\">\n<pre>vector_to_square &lt;- function(data) {\n  check_if_squarable(data)\n  check_if_not_numeric(data)\n  \n  dims &lt;- sqrt(length(data))\n  \n  matrix(\n    data = data,\n    nrow = dims,\n    ncol = dims,\n    byrow = TRUE\n  )\n}</pre>\n</div>\n<p>The error checking code no longer eclipses your intent.</p>\n<p>I think the main benefit here is <em>improvement in intent</em> - I don’t have to read some error checking code, I can read the function name <code>check_if_squarable(data)</code> - this tells me it checks if it is squareable, and <code>check_if_not_numeric(data)</code> does what it says on the tin. This means I don’t have to spend time reading error checking code, which can sometimes be quite complex. I can focus on those functions intention. This means I can summarise this function like so:</p>\n<ul>\n<li>\n<p>Do some checking of the inputs</p>\n</li>\n<li>\n<p>Get the dimensions for a square matrix</p>\n</li>\n<li>\n<p>Make the matrix, filling in by row</p>\n</li>\n</ul>\n<p>There are a couple of other benefits to this:</p>\n<ul>\n<li>All my checking functions can get re-used in the other work I do</li>\n<li>I can find common cases of checking and improve them.</li>\n<li>I see two checking functions, and it invites me to think about other checks that I might want to perform.</li>\n</ul>\n<h2 id=\"but-now-the-error-smells\">But now the error smells</h2>\n<p>Ah, but we didn’t check to see what these new errors look like! My friend <a href=\"https://adamgruer.rbind.io/\" rel=\"nofollow\" target=\"_blank\">Adam Gruer</a> pointed out:</p>\n<blockquote>\n<p>might a user get confused when then the error is reported as coming from the check_function rather than the function they called? What are your thoughts?</p>\n</blockquote>\n<p>Indeed, the errors are now different, check it out:</p>\n<div class=\"highlight\">\n<pre>vector_to_square(data = 1:4)\n#&gt;      [,1] [,2]\n#&gt; [1,]    1    2\n#&gt; [2,]    3    4\nvector_to_square(data = 1:5)\n#&gt; Error in `check_if_squarable()`:\n#&gt; ! Provided vector is not of a squarable length\n#&gt; `x` is of length 5\n#&gt; This cannot be represented as a square\n#&gt; Square root of `dim(x)` is: 2.236.\nvector_to_square(data = LETTERS[1:4])\n#&gt; Error in `check_if_not_numeric()`:\n#&gt; ! Provided vector must be &lt;numeric&gt;, not &lt;character&gt;\n#&gt; We see that `is.numeric(x)` returns &lt;character&gt;\n</pre>\n</div>\n<p>The error message is about the <strong>checking</strong> function, <code>check_if_squarable()</code> or <code>check_if_not_numeric()</code>. This could be confusing to the user as the error doesn’t appear to be coming from the <code>vector_to_square()</code> function.</p>\n<p>Seeing this also made me realise I’ve seen this problem before and been unsure how to solve it. Thankfully, the rlang team has thought about this, and they have a helpful vignette, <a href=\"https://rlang.r-lib.org/reference/topic-error-call.html\" rel=\"nofollow\" target=\"_blank\">“Including function calls in error messages”</a>.</p>\n<p>They bring up two really great points. Both of which I hadn’t really thought about solving. I just thought this was the compromise.</p>\n<p>The first is how to make sure the input checking function references the function it was called in. This is why we see the error being about <code>check_if_squarable()</code>, and not <code>vector_to_square()</code>, which is what we want.</p>\n<p>This is solved by passing the <code>check_</code> functions a <code>call</code> environment. So we add <code>call = rlang::caller_env()</code> as an argument:</p>\n<div class=\"highlight\">\n<pre>check_if_squarable &lt;- function(x,\n                               # Add this\n                               call = rlang::caller_env()) {\n  dims &lt;- sqrt(length(x))\n  \n  squarable_length &lt;- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      message = c(\n        \"Provided vector is not of a squarable length\",\n        \"{.var x} is of length {.num {length(x)}}\",\n        \"This cannot be represented as a square\",\n        \"Square root of {.var dim(x)} is: {.num {round(dims, 3)}}.\"\n      ),\n      # And this\n      call = call\n    )\n  }\n}\n\ncheck_if_not_numeric &lt;- function(x,\n                                 # Add this\n                                 call = rlang::caller_env()) {\n  if (!is.numeric(x)) {\n    cli::cli_abort(\n      message = c(\n        \"Provided vector must be {.cls numeric}, not {.cls {class(x)}}\",\n        \"We see that {.run is.numeric(x)} returns {.cls {class(x)}}\"\n      ),\n      # And this\n      call = call\n    )\n  }\n  \n}</pre>\n</div>\n<p>Let’s see what that looks like now:</p>\n<div class=\"highlight\">\n<pre>vector_to_square(data = 1:4)\n#&gt;      [,1] [,2]\n#&gt; [1,]    1    2\n#&gt; [2,]    3    4\nvector_to_square(data = 1:5)\n#&gt; Error in `vector_to_square()`:\n#&gt; ! Provided vector is not of a squarable length\n#&gt; `x` is of length 5\n#&gt; This cannot be represented as a square\n#&gt; Square root of `dim(x)` is: 2.236.\nvector_to_square(data = LETTERS[1:4])\n#&gt; Error in `vector_to_square()`:\n#&gt; ! Provided vector must be &lt;numeric&gt;, not &lt;character&gt;\n#&gt; We see that `is.numeric(x)` returns &lt;character&gt;\n</pre>\n</div>\n<p>OK much better, the error now starts with: “Error in <code>vector_to_square()</code>”.</p>\n<p>The second problem, which is hauntingly familiar, is to do with supplying argument names. Notice that the error message gives the error in terms of the argument <code>x</code>? Despite our argument to <code>vector_to_square</code> using the argument, <code>data</code></p>\n<div class=\"highlight\">\n<pre>vector_to_square(data = 1:4)\n#&gt;      [,1] [,2]\n#&gt; [1,]    1    2\n#&gt; [2,]    3    4\nvector_to_square(data = 1:5)\n#&gt; Error in `vector_to_square()`:\n#&gt; ! Provided vector is not of a squarable length\n#&gt; `x` is of length 5\n#&gt; This cannot be represented as a square\n#&gt; Square root of `dim(x)` is: 2.236.\nvector_to_square(data = LETTERS[1:4])\n#&gt; Error in `vector_to_square()`:\n#&gt; ! Provided vector must be &lt;numeric&gt;, not &lt;character&gt;\n#&gt; We see that `is.numeric(x)` returns &lt;character&gt;\n</pre>\n</div>\n<p>A small detail, perhaps? But I think it’s actually kind of a big problem! I don’t want my users to have to try and reckon/think about what <code>x</code> is, or have to imagine that I’ve written some fancy code checking functions. I just want them to know where the error came from. In more complex functions this could be even more confusing.</p>\n<p>Thankfully, yet again, the rlang team has thought about this, in <a href=\"https://rlang.r-lib.org/reference/topic-error-call.html#input-checkers-and-caller-arg-\" rel=\"nofollow\" target=\"_blank\">Input checkers and <code>caller_arg()</code></a>, they suggest adding <code>arg = rlang::caller_arg(x)</code> to our checking function, which helps capture the name of the argument that is passed to the check functions. Super neat.</p>\n<p>Let’s demonstrate this - we change uses of <code>x</code> to using <code>arg</code> in the error message.</p>\n<div class=\"highlight\">\n<pre>check_if_squarable &lt;- function(x,\n                               arg = rlang::caller_arg(x),\n                               call = rlang::caller_env()) {\n  x_len &lt;- length(x)\n  dims &lt;- sqrt(x_len)\n  \n  squarable_length &lt;- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      message = c(\n        \"Provided vector is not of a squarable length\",\n        \"{.arg {arg}} is of length {.num {x_len}}\",\n        \"This cannot be represented as a square\"\n      ),\n      call = call\n    )\n  }\n}\n\ncheck_if_not_numeric &lt;- function(x,\n                                 arg = rlang::caller_arg(x),\n                                 call = rlang::caller_env()) {\n  if (!is.numeric(x)) {\n    cli::cli_abort(\n      message = c(\n        \"Provided vector, {.arg {arg}}, must be {.cls numeric}, not {.cls {class(x)}}\",\n        \"We see that {.run is.numeric({.arg {arg}})} returns {.cls {class(x)}}\"\n      ),\n      call = call\n    )\n  }\n  \n}</pre>\n</div>\n<p>(in rewriting-ing this, I realised I don’t need to include the square root of the length to explain to the user, so I deleted that part of the message)</p>\n<div class=\"highlight\">\n<pre>vector_to_square(data = 1:4)\n#&gt;      [,1] [,2]\n#&gt; [1,]    1    2\n#&gt; [2,]    3    4\nvector_to_square(data = 1:5)\n#&gt; Error in `vector_to_square()`:\n#&gt; ! Provided vector is not of a squarable length\n#&gt; `data` is of length 5\n#&gt; This cannot be represented as a square\nvector_to_square(data = LETTERS[1:4])\n#&gt; Error in `vector_to_square()`:\n#&gt; ! Provided vector, `data`, must be &lt;numeric&gt;, not &lt;character&gt;\n#&gt; We see that `` is.numeric(`data`) `` returns &lt;character&gt;\n</pre>\n</div>\n<p>This now uses <code>data</code> instead of <code>x</code>, which is what we want!</p>\n<h1 id=\"on-writing-error-messages\">On writing error messages</h1>\n<p>I do think that writing good error messages is hard. Something that helped me think about this differently was something from the <a href=\"https://style.tidyverse.org/error-messages.html\" rel=\"nofollow\" target=\"_blank\">tidyverse style guide on error messages</a>:</p>\n<blockquote>\n<p>An error message should start with a general statement of the problem then give a concise description of what went wrong. Consistent use of punctuation and formatting makes errors easier to parse</p>\n</blockquote>\n<p>They also recommend using <a href=\"https://cli.r-lib.org/reference/cli_abort.html\" rel=\"nofollow\" target=\"_blank\"><code>cli::cli_abort()</code></a>, which we used above. I’ve really enjoyed using this over <code>stop</code>, because, well, again, the tidyverse team summarises the reasons well, <a href=\"https://cli.r-lib.org/reference/cli_abort.html\" rel=\"nofollow\" target=\"_blank\"><code>cli::cli_abort()</code></a> is good because it:</p>\n<blockquote>\n<ul>\n<li>\n<p>Makes it easy to generate bulleted lists.</p>\n</li>\n<li>\n<p>Uses glue style interpolation to insert data into the error.</p>\n</li>\n<li>\n<p>Supports a wide range of <a href=\"https://cli.r-lib.org/reference/inline-markup.html\" rel=\"nofollow\" target=\"_blank\">inline markup</a>.</p>\n</li>\n<li>\n<p>Provides convenient tools to <a href=\"https://rlang.r-lib.org/reference/topic-error-chaining.html\" rel=\"nofollow\" target=\"_blank\">chain errors together</a>.</p>\n</li>\n<li>\n<p>Can control the <a href=\"https://rlang.r-lib.org/reference/topic-error-call.html\" rel=\"nofollow\" target=\"_blank\">name of the function</a> shown in the error.</p>\n</li>\n</ul>\n</blockquote>\n<p>You should read the <a href=\"https://style.tidyverse.org/error-messages.html\" rel=\"nofollow\" target=\"_blank\">whole section on error messages</a>, they’ve got great advice on how to write good error messages.</p>\n<h1 id=\"on-input-checking-functions\">On input checking functions</h1>\n<p>This type of error message is often called an “input checking function”. There’s a really nice blog post <a href=\"https://blog.r-hub.io/2022/03/10/input-checking/\" rel=\"nofollow\" target=\"_blank\">“Checking the inputs of your R functions”</a>, by <a href=\"https://hugogruson.fr/\" rel=\"nofollow\" target=\"_blank\">Hugo Gruson</a>, <a href=\"https://samabbott.co.uk/\" rel=\"nofollow\" target=\"_blank\">Sam Abbott</a>, and <a href=\"https://twitter.com/cap1024\" rel=\"nofollow\" target=\"_blank\">Carl Pearson</a>, which goes into more detail on the topic. They also recommend a few packages/functions for input checking that are worth checking out, such as <a href=\"https://mllg.github.io/checkmate/\" rel=\"nofollow\" target=\"_blank\"><code>checkmate</code></a>, <a href=\"https://vctrs.r-lib.org/reference/vec_assert.html\" rel=\"nofollow\" target=\"_blank\"><code>vec_assert()</code></a>, <a href=\"https://github.com/brodieG/vetr\" rel=\"nofollow\" target=\"_blank\"><code>vetr</code></a>, and <a href=\"https://github.com/ropensci/assertr/\" rel=\"nofollow\" target=\"_blank\"><code>assertr</code></a> to list a few.</p>\n<h1 id=\"some-more-thoughts\">Some more thoughts</h1>\n<p>In writing this blog post I’ve now realised that my pattern of creating <code>check_</code> functions for input checking now also results in a potentially undesirable error for the user where they won’t know where the error has come from. I’ll need to make a note to change this in a lot of my packages.</p>\n<p>In the future I’d really like to dive a bit deeper into adding classes or subclasses of errors. <a href=\"https://www.mm218.dev/posts/2023-11-07-classed-errors/\" rel=\"nofollow\" target=\"_blank\">Mike Mahoney’s blog post, “Classed conditions from rlang functions”</a> provides a good simple usecase of classed errors. And there’s a <a href=\"https://design.tidyverse.org/err-constructor.html\" rel=\"nofollow\" target=\"_blank\">tidyverse design page on error constructors</a> that I should read more deeply. I’m pretty sure this would be helpful in things like <a href=\"https://greta-stats.org/\" rel=\"nofollow\" target=\"_blank\"><code>greta</code></a>.</p>\n<h1 id=\"functions-are-good\">Functions are good</h1>\n<p>I will wrap up by emphasising a point about using functions. <strong>Good functions can be individually reasoned with</strong>, and used repeatedly across your work. This means you can write them once, use them many times, and only need to make changes to one place, rather than in many. Writing functions helps abstract away details, and helps clarify your code. They are an important building block for writing good code that has content that can be easily reasoned with, and extended.</p>\n<h1 id=\"thanks\">Thanks</h1>\n<p>Thank you very much to the maintainers of <a href=\"https://cli.r-lib.org/index.html\" rel=\"nofollow\" target=\"_blank\"><code>cli</code></a> (<a href=\"https://github.com/gaborcsardi\" rel=\"nofollow\" target=\"_blank\">Gábor Csárdi</a>), and <a href=\"https://rlang.r-lib.org/\" rel=\"nofollow\" target=\"_blank\"><code>rlang</code></a> (<a href=\"https://github.com/lionel-\" rel=\"nofollow\" target=\"_blank\">Lionel Henry</a>), and the team behind these packages. These are hard problems! Thanks to <a href=\"https://adamgruer.rbind.io/\" rel=\"nofollow\" target=\"_blank\">Adam Gruer</a> for asking a great question that made me dive deeper into error checking. Special thanks to <a href=\"https://masalmon.eu/\" rel=\"nofollow\" target=\"_blank\">Maëlle Salmon</a> for providing very useful comments that improved this post greatly, and thank you in general being a kind source of knowledge.</p>\n<p>Is there anything I missed? Other questions / problems to explore in this space? Leave me a comment below if you want to chat about any of this :).</p>\n<section class=\"footnotes\" role=\"doc-endnotes\">\n<hr/>\n<ol>\n<li id=\"fn:1\" role=\"doc-endnote\">\n<p>Thank you to Maëlle Salmon for helping me articulate this point, with inspiration from <a href=\"https://pragprog.com/titles/tpp20/the-pragmatic-programmer-20th-anniversary-edition/\" rel=\"nofollow\" target=\"_blank\">The Pragmatic Programmer</a>). <a class=\"footnote-backref\" href=\"https://www.njtierney.com/post/2023/12/06/long-errors-smell/#fnref:1\" rel=\"nofollow\" role=\"doc-backlink\" target=\"_blank\">↩︎</a></p>\n</li>\n</ol>\n</section>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://www.njtierney.com/post/2023/12/06/long-errors-smell/\"> Blog on Credibly Curious</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div> </div>\n</article>",
    "main_text": "Code Smell: Error Handling Eclipse\nPosted on\nDecember 5, 2023\nby\nBlog on Credibly Curious\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nBlog on Credibly Curious\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nAn amusing “no parking” sign that threatens to transport your car to another universe. Collingwood, Melbourne\nError messages are really important, and really hard to write well. When software authors take the time to check your inputs, and share reasons why it fails, they are doing you a favour. So, writing error messages is good.\nHowever, this error checking code can sometimes totally eclipse the intent of the code. We can describe these kinds of patterns as a “code smell”. I first heard about code smells in\nJenny Bryan’s UseR! Keynote in 2018\n, which I highly recommend watching. The term “code smell”, comes from\nMartin Fowler’s book: Improving the Design of Existing Code\n). The definition of a code smell that Jenny gives in her talk is:\nStructures in code that suggest (or scream for)\nrefactoring\nShe then goes on to define refactoring as:\nMaking code easier to understand for the next person (which might be you), cheaper to modify by the next person who comes through,\nwithout changing behaviour\n.\nThe talk is a delight, and watching it again was really awesome. If you haven’t watched it, you should, and if you haven’t seen it for a while, it’s worth another watch.\nAnyway, I digress.\nI call this code smell, and “Error Handling Eclipse”:\nWhen error checking code totally eclipses the intent of the code.\n1\nThe code smell looks like this:\nvector_to_square <- function(data) {\n  dims <- sqrt(length(data))\n  \n  squarable_length <- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      c(\n        \"Provided vector is not of a squarable length\",\n        \"{.var data} is of length {.num {length(data)}}\",\n        \"This cannot be represented as a square\",\n        \"Square root of {.var dim(data)} is: {.num {round(dims, 3)}}.\"\n      )\n    )\n  }\n  \n  if (!is.numeric(data)) {\n    cli::cli_abort(\n      c(\n        \"Provided vector must be {.cls numeric}, not {.cls {class(data)}}\",\n        \"We see that {.run is.numeric(data)} returns {.cls {class(data)}}\"\n      )\n    )\n  }\n  \n  matrix(\n    data = data,\n    nrow = dims,\n    ncol = dims,\n    byrow = TRUE\n  )\n}\nThe code smell, “error handling eclipse”, can be seen here where the long error messages in the body of a function crow the intent. I believe the refactoring move here is to wrap these error functions into a function. This reduces repetition, and makes the intent of the code clearer, since you don’t need to wade through error checking code.\nThe tidyverse design document on error checking\n) mentions building these “error checking” functions when the error is used three times. I think there is more benefit to write it out every time.\nWhat’s the solution?\nThis code can be improved by refactoring the errors as\ncheck_*\nfunctions, something like,\ncheck_array_is_square(x)\n.\nShow me the difference\nTo demonstrate this, let’s take a look again at the example code from above, a function that converts a vector into a square matrix:\nvector_to_square <- function(data) {\n  dims <- sqrt(length(data))\n  \n  squarable_length <- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      c(\n        \"Provided vector is not of a squarable length\",\n        \"{.var x} is of length {.num {length(data)}}\",\n        \"This cannot be represented as a square\",\n        \"Square root of {.var dim(data)} is: {.num {round(dims, 3)}}.\"\n      )\n    )\n  }\n  \n  if (!is.numeric(data)) {\n    cli::cli_abort(\n      c(\n        \"Provided vector must be {.cls numeric}, not {.cls {class(data)}}\",\n        \"We see that {.run is.numeric(data)} returns {.cls {class(data)}}\"\n      )\n    )\n  }\n  \n  matrix(\n    data = data,\n    nrow = dims,\n    ncol = dims,\n    byrow = TRUE\n  )\n}\nNow let’s demonstrate its use, and what the errors look like:\nvector_to_square(data = 1:4)\n#>      [,1] [,2]\n#> [1,]    1    2\n#> [2,]    3    4\nvector_to_square(data = 1:5)\n#> Error in `vector_to_square()`:\n#> ! Provided vector is not of a squarable length\n#> `x` is of length 5\n#> This cannot be represented as a square\n#> Square root of `dim(data)` is: 2.236.\nvector_to_square(data = LETTERS[1:4])\n#> Error in `vector_to_square()`:\n#> ! Provided vector must be <numeric>, not <character>\n#> We see that `is.numeric(data)` returns <character>\nSo we have some input checking code, which does two things:\nchecks if the inputs can be a square matrix\nchecks if inputs are not numeric\nWhile we like these error messages, wrapping up the error messags as functions clarifies the intent of them, and avoids repitition:\ncheck_if_squarable <- function(x) {\n  dims <- sqrt(length(x))\n  \n  squarable_length <- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      c(\n        \"Provided vector is not of a squarable length\",\n        \"{.var x} is of length {.num {length(x)}}\",\n        \"This cannot be represented as a square\",\n        \"Square root of {.var dim(x)} is: {.num {round(dims, 3)}}.\"\n      )\n    )\n  }\n}\n\ncheck_if_not_numeric <- function(x) {\n  if (!is.numeric(x)) {\n    cli::cli_abort(\n      c(\n        \"Provided vector must be {.cls numeric}, not {.cls {class(x)}}\",\n        \"We see that {.run is.numeric(x)} returns {.cls {class(x)}}\"\n      )\n    )\n  }\n  \n}\nThese error messages can then be put into the function like so:\nvector_to_square <- function(data) {\n  check_if_squarable(data)\n  check_if_not_numeric(data)\n  \n  dims <- sqrt(length(data))\n  \n  matrix(\n    data = data,\n    nrow = dims,\n    ncol = dims,\n    byrow = TRUE\n  )\n}\nThe error checking code no longer eclipses your intent.\nI think the main benefit here is\nimprovement in intent\n- I don’t have to read some error checking code, I can read the function name\ncheck_if_squarable(data)\n- this tells me it checks if it is squareable, and\ncheck_if_not_numeric(data)\ndoes what it says on the tin. This means I don’t have to spend time reading error checking code, which can sometimes be quite complex. I can focus on those functions intention. This means I can summarise this function like so:\nDo some checking of the inputs\nGet the dimensions for a square matrix\nMake the matrix, filling in by row\nThere are a couple of other benefits to this:\nAll my checking functions can get re-used in the other work I do\nI can find common cases of checking and improve them.\nI see two checking functions, and it invites me to think about other checks that I might want to perform.\nBut now the error smells\nAh, but we didn’t check to see what these new errors look like! My friend\nAdam Gruer\npointed out:\nmight a user get confused when then the error is reported as coming from the check_function rather than the function they called? What are your thoughts?\nIndeed, the errors are now different, check it out:\nvector_to_square(data = 1:4)\n#>      [,1] [,2]\n#> [1,]    1    2\n#> [2,]    3    4\nvector_to_square(data = 1:5)\n#> Error in `check_if_squarable()`:\n#> ! Provided vector is not of a squarable length\n#> `x` is of length 5\n#> This cannot be represented as a square\n#> Square root of `dim(x)` is: 2.236.\nvector_to_square(data = LETTERS[1:4])\n#> Error in `check_if_not_numeric()`:\n#> ! Provided vector must be <numeric>, not <character>\n#> We see that `is.numeric(x)` returns <character>\nThe error message is about the\nchecking\nfunction,\ncheck_if_squarable()\nor\ncheck_if_not_numeric()\n. This could be confusing to the user as the error doesn’t appear to be coming from the\nvector_to_square()\nfunction.\nSeeing this also made me realise I’ve seen this problem before and been unsure how to solve it. Thankfully, the rlang team has thought about this, and they have a helpful vignette,\n“Including function calls in error messages”\n.\nThey bring up two really great points. Both of which I hadn’t really thought about solving. I just thought this was the compromise.\nThe first is how to make sure the input checking function references the function it was called in. This is why we see the error being about\ncheck_if_squarable()\n, and not\nvector_to_square()\n, which is what we want.\nThis is solved by passing the\ncheck_\nfunctions a\ncall\nenvironment. So we add\ncall = rlang::caller_env()\nas an argument:\ncheck_if_squarable <- function(x,\n                               # Add this\n                               call = rlang::caller_env()) {\n  dims <- sqrt(length(x))\n  \n  squarable_length <- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      message = c(\n        \"Provided vector is not of a squarable length\",\n        \"{.var x} is of length {.num {length(x)}}\",\n        \"This cannot be represented as a square\",\n        \"Square root of {.var dim(x)} is: {.num {round(dims, 3)}}.\"\n      ),\n      # And this\n      call = call\n    )\n  }\n}\n\ncheck_if_not_numeric <- function(x,\n                                 # Add this\n                                 call = rlang::caller_env()) {\n  if (!is.numeric(x)) {\n    cli::cli_abort(\n      message = c(\n        \"Provided vector must be {.cls numeric}, not {.cls {class(x)}}\",\n        \"We see that {.run is.numeric(x)} returns {.cls {class(x)}}\"\n      ),\n      # And this\n      call = call\n    )\n  }\n  \n}\nLet’s see what that looks like now:\nvector_to_square(data = 1:4)\n#>      [,1] [,2]\n#> [1,]    1    2\n#> [2,]    3    4\nvector_to_square(data = 1:5)\n#> Error in `vector_to_square()`:\n#> ! Provided vector is not of a squarable length\n#> `x` is of length 5\n#> This cannot be represented as a square\n#> Square root of `dim(x)` is: 2.236.\nvector_to_square(data = LETTERS[1:4])\n#> Error in `vector_to_square()`:\n#> ! Provided vector must be <numeric>, not <character>\n#> We see that `is.numeric(x)` returns <character>\nOK much better, the error now starts with: “Error in\nvector_to_square()\n”.\nThe second problem, which is hauntingly familiar, is to do with supplying argument names. Notice that the error message gives the error in terms of the argument\nx\n? Despite our argument to\nvector_to_square\nusing the argument,\ndata\nvector_to_square(data = 1:4)\n#>      [,1] [,2]\n#> [1,]    1    2\n#> [2,]    3    4\nvector_to_square(data = 1:5)\n#> Error in `vector_to_square()`:\n#> ! Provided vector is not of a squarable length\n#> `x` is of length 5\n#> This cannot be represented as a square\n#> Square root of `dim(x)` is: 2.236.\nvector_to_square(data = LETTERS[1:4])\n#> Error in `vector_to_square()`:\n#> ! Provided vector must be <numeric>, not <character>\n#> We see that `is.numeric(x)` returns <character>\nA small detail, perhaps? But I think it’s actually kind of a big problem! I don’t want my users to have to try and reckon/think about what\nx\nis, or have to imagine that I’ve written some fancy code checking functions. I just want them to know where the error came from. In more complex functions this could be even more confusing.\nThankfully, yet again, the rlang team has thought about this, in\nInput checkers and\ncaller_arg()\n, they suggest adding\narg = rlang::caller_arg(x)\nto our checking function, which helps capture the name of the argument that is passed to the check functions. Super neat.\nLet’s demonstrate this - we change uses of\nx\nto using\narg\nin the error message.\ncheck_if_squarable <- function(x,\n                               arg = rlang::caller_arg(x),\n                               call = rlang::caller_env()) {\n  x_len <- length(x)\n  dims <- sqrt(x_len)\n  \n  squarable_length <- floor(dims) == dims\n  \n  if (!squarable_length) {\n    cli::cli_abort(\n      message = c(\n        \"Provided vector is not of a squarable length\",\n        \"{.arg {arg}} is of length {.num {x_len}}\",\n        \"This cannot be represented as a square\"\n      ),\n      call = call\n    )\n  }\n}\n\ncheck_if_not_numeric <- function(x,\n                                 arg = rlang::caller_arg(x),\n                                 call = rlang::caller_env()) {\n  if (!is.numeric(x)) {\n    cli::cli_abort(\n      message = c(\n        \"Provided vector, {.arg {arg}}, must be {.cls numeric}, not {.cls {class(x)}}\",\n        \"We see that {.run is.numeric({.arg {arg}})} returns {.cls {class(x)}}\"\n      ),\n      call = call\n    )\n  }\n  \n}\n(in rewriting-ing this, I realised I don’t need to include the square root of the length to explain to the user, so I deleted that part of the message)\nvector_to_square(data = 1:4)\n#>      [,1] [,2]\n#> [1,]    1    2\n#> [2,]    3    4\nvector_to_square(data = 1:5)\n#> Error in `vector_to_square()`:\n#> ! Provided vector is not of a squarable length\n#> `data` is of length 5\n#> This cannot be represented as a square\nvector_to_square(data = LETTERS[1:4])\n#> Error in `vector_to_square()`:\n#> ! Provided vector, `data`, must be <numeric>, not <character>\n#> We see that `` is.numeric(`data`) `` returns <character>\nThis now uses\ndata\ninstead of\nx\n, which is what we want!\nOn writing error messages\nI do think that writing good error messages is hard. Something that helped me think about this differently was something from the\ntidyverse style guide on error messages\n:\nAn error message should start with a general statement of the problem then give a concise description of what went wrong. Consistent use of punctuation and formatting makes errors easier to parse\nThey also recommend using\ncli::cli_abort()\n, which we used above. I’ve really enjoyed using this over\nstop\n, because, well, again, the tidyverse team summarises the reasons well,\ncli::cli_abort()\nis good because it:\nMakes it easy to generate bulleted lists.\nUses glue style interpolation to insert data into the error.\nSupports a wide range of\ninline markup\n.\nProvides convenient tools to\nchain errors together\n.\nCan control the\nname of the function\nshown in the error.\nYou should read the\nwhole section on error messages\n, they’ve got great advice on how to write good error messages.\nOn input checking functions\nThis type of error message is often called an “input checking function”. There’s a really nice blog post\n“Checking the inputs of your R functions”\n, by\nHugo Gruson\n,\nSam Abbott\n, and\nCarl Pearson\n, which goes into more detail on the topic. They also recommend a few packages/functions for input checking that are worth checking out, such as\ncheckmate\n,\nvec_assert()\n,\nvetr\n, and\nassertr\nto list a few.\nSome more thoughts\nIn writing this blog post I’ve now realised that my pattern of creating\ncheck_\nfunctions for input checking now also results in a potentially undesirable error for the user where they won’t know where the error has come from. I’ll need to make a note to change this in a lot of my packages.\nIn the future I’d really like to dive a bit deeper into adding classes or subclasses of errors.\nMike Mahoney’s blog post, “Classed conditions from rlang functions”\nprovides a good simple usecase of classed errors. And there’s a\ntidyverse design page on error constructors\nthat I should read more deeply. I’m pretty sure this would be helpful in things like\ngreta\n.\nFunctions are good\nI will wrap up by emphasising a point about using functions.\nGood functions can be individually reasoned with\n, and used repeatedly across your work. This means you can write them once, use them many times, and only need to make changes to one place, rather than in many. Writing functions helps abstract away details, and helps clarify your code. They are an important building block for writing good code that has content that can be easily reasoned with, and extended.\nThanks\nThank you very much to the maintainers of\ncli\n(\nGábor Csárdi\n), and\nrlang\n(\nLionel Henry\n), and the team behind these packages. These are hard problems! Thanks to\nAdam Gruer\nfor asking a great question that made me dive deeper into error checking. Special thanks to\nMaëlle Salmon\nfor providing very useful comments that improved this post greatly, and thank you in general being a kind source of knowledge.\nIs there anything I missed? Other questions / problems to explore in this space? Leave me a comment below if you want to chat about any of this :).\nThank you to Maëlle Salmon for helping me articulate this point, with inspiration from\nThe Pragmatic Programmer\n).\n↩︎\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nBlog on Credibly Curious\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "An amusing “no parking” sign that threatens to transport your car to another universe. Collingwood, Melbourne Error messages are really important, and really hard to write well. When software authors take the time to check your inputs, and share rea...",
    "meta_keywords": null,
    "og_description": "An amusing “no parking” sign that threatens to transport your car to another universe. Collingwood, Melbourne Error messages are really important, and really hard to write well. When software authors take the time to check your inputs, and share rea...",
    "og_image": "https://www.njtierney.com/post/2023/12/06/long-errors-smell/img/no-parking.jpg",
    "og_title": "Code Smell: Error Handling Eclipse | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 12.8,
    "sitemap_lastmod": "2023-12-06T00:00:00+00:00",
    "twitter_description": "An amusing “no parking” sign that threatens to transport your car to another universe. Collingwood, Melbourne Error messages are really important, and really hard to write well. When software authors take the time to check your inputs, and share rea...",
    "twitter_title": "Code Smell: Error Handling Eclipse | R-bloggers",
    "url": "https://www.r-bloggers.com/2023/12/code-smell-error-handling-eclipse/",
    "word_count": 2559
  }
}