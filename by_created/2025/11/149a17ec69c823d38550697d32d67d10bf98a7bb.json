{
  "id": "149a17ec69c823d38550697d32d67d10bf98a7bb",
  "url": "https://www.r-bloggers.com/2025/04/generate-route-titles-and-descriptions-from-gpx-files-with-llms-and-ellmer/",
  "created_at_utc": "2025-11-22T19:58:53Z",
  "data": null,
  "raw_original": {
    "uuid": "0ca74263-3d64-4067-887b-3c6c5862a652",
    "created_at": "2025-11-22 19:58:53",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2025/04/generate-route-titles-and-descriptions-from-gpx-files-with-llms-and-ellmer/",
      "crawled_at": "2025-11-22T10:50:44.625443",
      "external_links": [
        {
          "href": "https://martinctc.github.io/blog/describe-gpx-files-with-ellmer/",
          "text": "Musings on R"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "https://martinctc.github.io/blog/summarising-top-100-uk-climbs-running-local-language-models-with-lm-studio-and-r/",
          "text": "LM Studio"
        },
        {
          "href": "https://martinctc.github.io/blog/harness-azure-openai-and-r-summarisation-rvest/",
          "text": "Azure OpenAI"
        },
        {
          "href": "https://github.com/martinctc/gpxtoolbox",
          "text": "gpxtoolbox"
        },
        {
          "href": "https://ellmer.tidyverse.org/",
          "text": "{ellmer}"
        },
        {
          "href": "https://ridewithgps.com/",
          "text": "Ride with GPS"
        },
        {
          "href": "https://martinctc.github.io/gpxtoolbox/reference/identify_geo.html",
          "text": "identify_geo()"
        },
        {
          "href": "https://ellmer.tidyverse.org/reference/index.html",
          "text": "here"
        },
        {
          "href": "https://martinctc.github.io/blog/harness-azure-openai-and-r-summarisation-rvest/",
          "text": "this previous post"
        },
        {
          "href": "https://martinctc.github.io/gpxtoolbox/articles/gpxtoolbox.html",
          "text": "this vignette"
        },
        {
          "href": "https://github.com/martinctc/gpxtoolbox/issues",
          "text": "https://github.com/martinctc/gpxtoolbox/issues"
        },
        {
          "href": "https://martinctc.github.io/blog/describe-gpx-files-with-ellmer/",
          "text": "Musings on R"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "Generate Route Titles and Descriptions from GPX Files with LLMs and {ellmer} | R-bloggers",
      "images": [
        {
          "alt": null,
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": null,
          "base64": null,
          "src": "https://i0.wp.com/raw.githubusercontent.com/martinctc/blog/master/images/gpxtoolbox/cyclist-planning-route.png?w=578&ssl=1"
        }
      ],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/martin-chan/",
          "text": "Martin Chan"
        },
        {
          "href": "https://www.r-bloggers.com/category/r-bloggers/",
          "text": "R bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-391809 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Generate Route Titles and Descriptions from GPX Files with LLMs and {ellmer}</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">April 10, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/martin-chan/\">Martin Chan</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://martinctc.github.io/blog/describe-gpx-files-with-ellmer/\"> Musings on R</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47--><h2 id=\"introduction\">Introduction</h2>\n<p><img alt=\"\" data-lazy-src=\"https://i0.wp.com/raw.githubusercontent.com/martinctc/blog/master/images/gpxtoolbox/cyclist-planning-route.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"\" data-recalc-dims=\"1\" src=\"https://i0.wp.com/raw.githubusercontent.com/martinctc/blog/master/images/gpxtoolbox/cyclist-planning-route.png?w=578&amp;ssl=1\"/></noscript></p>\n<p>As someone who enjoys both cycling and coding in R, Iâ€™ve always wondered whether there are ways in which R (or data science more generally) could help with my training efficiency or the cycling experience. In the previous two posts in this blog, I wrote about using LLMs from <a href=\"https://martinctc.github.io/blog/summarising-top-100-uk-climbs-running-local-language-models-with-lm-studio-and-r/\" rel=\"nofollow\" target=\"_blank\">LM Studio</a> and <a href=\"https://martinctc.github.io/blog/harness-azure-openai-and-r-summarisation-rvest/\" rel=\"nofollow\" target=\"_blank\">Azure OpenAI</a> to create text summaries and descriptions of the top 100 cycling climbs in the UK. As a sport that places heavy emphasis on data, there are actually plenty of opportunities to apply data science techniques to cycling.</p>\n<p>A recent opportunity for me is around the problem of planning cycle routes. Cycling routes are commonly stored in files with the extension <code>.gpx</code> (which stands for GPS Exchange Format), and they typically contain GPS data such as waypoints, routes, and tracks. GPX files are based on XML (Extensible Markup Language), meaning they use XML syntax to structure the data, making them both human-readable and machine-readable.</p>\n<p>Each GPX file would represent a particular cycling route, and at a certain point, one would easily have accumulated over a hundred GPX files without a system to organise them. This poses a problem. For instance,</p>\n<ul>\n<li>how would I figure out the distance and elevation of each route?</li>\n<li>is the route a loop, or is it a one-way route?</li>\n<li>where does the route go through?</li>\n</ul>\n<p>The traditional way to figure this out is to manually load the GPX file into your route planner of choice, be it Strava, Komoot, Garmin, Hammerhead, etc., and again <em>manually</em> give the route a title and a description. Itâ€™s probably going to take 5 minutes to do this for each route â€“ give or take â€“ but why spend your time doing things manually when you can spend more time on the bike, right? ðŸ˜Š</p>\n<p>With <strong>a lot</strong> of help from GitHub Copilot (so much so that I have to credit it here), I created the <a href=\"https://github.com/martinctc/gpxtoolbox\" rel=\"nofollow\" target=\"_blank\"><code>gpxtoolbox</code></a> package, which allows you to read in GPX files programmatically into R, and:</p>\n<ul>\n<li>Generate route maps and elevation profile graphs</li>\n<li>Calculate total distance and elevation statistics</li>\n<li>Identify locations at the start and end points of the route, as well as the 25%, 50%, and 75% marks</li>\n<li>Interface with LLMs with <a href=\"https://ellmer.tidyverse.org/\" rel=\"nofollow\" target=\"_blank\">{ellmer}</a> to generate a title and description of the GPX file. The <code>{ellmer}</code> package provides a unified and consistent interface to interact with multiple large language model (LLM) providers, such as OpenAI, Azure OpenAI, Claude, and Gemini.</li>\n</ul>\n<p>What this essentially means is that there is now an R workflow to get from a GPX file (or hundreds of them) to an LLM-generated title and description for the route. Since {ellmer} allows you to interface with different LLMs, you can also play with the model options as well as the prompt to optimise the results.</p>\n<p>This post will provide an introduction to {gpxtoolbox} and how to use it.</p>\n<h2 id=\"getting-started\">Getting Started</h2>\n<p>To follow along, youâ€™ll need the following:</p>\n<ul>\n<li>The <code>{gpxtoolbox}</code> package for processing GPX files.</li>\n<li>The <code>{ellmer}</code> package for interfacing with LLMs.</li>\n<li>An API key for your chosen LLM provider (e.g., OpenAI, Azure OpenAI).</li>\n</ul>\n<p>Letâ€™s start by installing the required packages:</p>\n<pre>install.packages(\"ellmer\")\ndevtools::install_github(\"martinctc/gpxtoolbox\")\n</pre>\n<p>Since {gpxtoolbox} is not (yet) available on CRAN, the above code installs this directly from the GitHub repository.</p>\n<h2 id=\"example-workflow\">Example Workflow</h2>\n<p>Hereâ€™s a step-by-step guide to generating titles and descriptions for a GPX route.</p>\n<h3 id=\"step-1-process-a-gpx-file\">Step 1: Process a GPX File</h3>\n<p>First, use the <code>analyse_gpx()</code> function from <code>{gpxtoolbox}</code> to extract route statistics from a GPX file:</p>\n<pre>library(gpxtoolbox)\n\n# Path to the example GPX file\nexample_gpx_path &lt;- system.file(\"extdata\", \"icc_intro_ride.gpx\", package = \"gpxtoolbox\")\n\n# Analyse the GPX file and get route statistics\nstats &lt;- analyse_gpx(example_gpx_path, return = \"stats\")\nprint(stats)\n</pre>\n<p>The following is returned:</p>\n<pre>$total_distance_km\n[1] 42.81\n\n$total_elevation_gain_m\n[1] 622.2\n\n$total_elevation_loss_m\n[1] 556.6\n\n$max_elevation_m\n[1] 143\n\n$min_elevation_m\n[1] 29.9\n\n$start_point\n[1] \"The Gatehouse, Fieldway Crescent, Canonbury, Highbury, London Borough of Islington, London, Greater London, England, N5 1PZ, United Kingdom\"\n\n$end_point\n[1] \"Archway Road, London Borough of Haringey, London, Greater London, England, N6 4EJ, United Kingdom\"\n\n$p25_point\n[1] \"Highwood Hill, Mill Hill, London Borough of Barnet, London, Greater London, England, NW7 4HN, United Kingdom\"\n\n$p50_point\n[1] \"36, Camlet Way, Hadley Wood, London Borough of Enfield, London, Greater London, England, EN4 0LJ, United Kingdom\"\n\n$p75_point\n[1] \"Lincoln Road, Colney Hatch, London Borough of Barnet, London, Greater London, England, N2 9DJ, United Kingdom\"\n</pre>\n<p>In the above example, <code>example_gpx_path</code> points to a sample GPX file that comes installed with the {gpxtoolbox} package, which is a route for the introduction ride for the Islington Cycling Club. You can replace <code>example_gpx_path</code> with the path to a GPX file that you have saved locally to your machine. Alternatively, you can also supply an URL to a route on <a href=\"https://ridewithgps.com/\" rel=\"nofollow\" target=\"_blank\">Ride with GPS</a>.</p>\n<p>The <code>stats</code> object is a named list containing key metrics and details about the GPX route:</p>\n<ul>\n<li><strong><code>$total_distance_km</code></strong>: The total distance of the route in kilometers.</li>\n<li><strong><code>$total_elevation_gain_m</code></strong>: The total elevation gain (uphill) in meters.</li>\n<li><strong><code>$total_elevation_loss_m</code></strong>: The total elevation loss (downhill) in meters.</li>\n<li><strong><code>$max_elevation_m</code></strong>: The highest elevation point along the route in meters.</li>\n<li><strong><code>$min_elevation_m</code></strong>: The lowest elevation point along the route in meters.</li>\n<li><strong><code>$start_point</code></strong>: A human-readable address or location for the starting point of the route.</li>\n<li><strong><code>$end_point</code></strong>: A human-readable address or location for the ending point of the route.</li>\n<li><strong><code>$p25_point</code>, <code>$p50_point</code>, <code>$p75_point</code></strong>: Human-readable addresses or locations for the points at 25%, 50%, and 75% of the routeâ€™s total distance, respectively. In {gpxtoolbox}, this is implemented as an API call to OpenStreetMap with the latitude and longitude columns exposed in the track points. For more details, see the implementation of <a href=\"https://martinctc.github.io/gpxtoolbox/reference/identify_geo.html\" rel=\"nofollow\" target=\"_blank\"><code>identify_geo()</code></a>.</li>\n</ul>\n<h3 id=\"step-2-generate-a-title-and-description\">Step 2: Generate a Title and Description</h3>\n<p><code>gen_description()</code> accepts a list of route statistics as per above, and uses this as part of the prompt to be sent to the LLM. Note that before you can use <code>gen_description()</code>, you will need to have obtained an API key and endpoint from your LLM provider of choice. This function directly calls the <code>chat_*()</code> prefixed functions from {ellmer}, for which you can find more information <a href=\"https://ellmer.tidyverse.org/reference/index.html\" rel=\"nofollow\" target=\"_blank\">here</a>. For instance, you would need to satisfy the arguments from <code>chat_azure()</code> if you are using Azure AI, <code>chat_claude()</code> for Claude, and so on. For an example on how to set up Azure Open AI, you can reference <a href=\"https://martinctc.github.io/blog/harness-azure-openai-and-r-summarisation-rvest/\" rel=\"nofollow\" target=\"_blank\">this previous post</a>.</p>\n<p>Once you have all the bits and pieces ready, simply pass the list object containing the route stats and the required API values to <code>gen_description()</code>, using the <code>platform</code> argument to specify the platform to use (which in turn determines which function to call from {ellmer}):</p>\n<pre># Generate a title and description using OpenAI\nresult &lt;- gen_description(\n  stats = stats,\n  platform = \"azure\",\n  api_key = Sys.getenv(\"OPENAI_API_KEY\"),\n  deployment_id = \"gpt-4o-mini\"\n)\n\ncat(result)\n</pre>\n<p>The output will include a title and a detailed description of the route, highlighting key features such as distance, elevation gain, and notable landmarks:</p>\n<pre>[1] \"**Title:** Highbury to Highwood Hill Adventure - 42.8 km, 622 m Climb  \\n\\n**Description:** Embark on an exhilarating journey from The Gatehouse in Canonbury to Archway Road, traversing through the scenic landscapes of North London. This 42.81 km route offers a total elevation gain of 622.2 m, showcasing a mix of rewarding climbs and gentle descents. Experience stunning views at the 25% mark at Highwood Hill in Mill Hill, pass through the tranquil Camlet Way at the halfway point, and enjoy the charm of Lincoln Road in Colney Hatch as you approach the final stretch. With elevations ranging from 29.9 m to a peak of 143 m, this route is perfect for those looking to experience both urban and lush green environments in a single adventure. Lace up your hiking boots and explore the diverse terrains this route has to offer!\"\n</pre>\n<h3 id=\"step-3-customizing-the-prompt\">Step 3: Customizing the Prompt</h3>\n<p>The <code>gen_description()</code> function uses a default prompt to generate the title and description. If youâ€™d like to tailor the output, you can use the <code>prompt</code> argument to supply your own prompt to the function. The template prompt, which is used as default, is stored in <code>desc_prompt.md</code> file included in the <code>{gpxtoolbox}</code> package. This allows you to tailor the tone and style of the generated text to your preferences.</p>\n<h3 id=\"step-4-visualizing-the-route\">Step 4: Visualizing the route</h3>\n<p>Asides from generating a title and description for a route, you can also visualise the route with <code>plot_route()</code>, which generates the shape of the route and the elevation profile. Admittedly, this feature is not as developed as I would like, and I am considering to integrate {leaflet} or some sort of mapping package as a next step. You can check out <a href=\"https://martinctc.github.io/gpxtoolbox/articles/gpxtoolbox.html\" rel=\"nofollow\" target=\"_blank\">this vignette</a> which I will update with examples as new features land.</p>\n<h2 id=\"why-use-ellmer\">Why Use {ellmer}?</h2>\n<p>In previous posts, Iâ€™ve demonstrated how to create custom functions for interfacing with LLMs. While this approach offers flexibility, it can be time-consuming to maintain and adapt to different providers. The <code>{ellmer}</code> package simplifies this process by providing a consistent interface to multiple LLM platforms, including:</p>\n<ul>\n<li>OpenAI</li>\n<li>Azure OpenAI</li>\n<li>Claude</li>\n<li>Gemini</li>\n<li>Perplexity</li>\n<li>DeepSeek</li>\n</ul>\n<p>With <code>{ellmer}</code>, you can switch between providers with minimal changes to your code, making it a versatile and efficient solution for working with LLMs.</p>\n<h2 id=\"conclusion\">Conclusion</h2>\n<p>The integration of <code>{gpxtoolbox}</code> and <code>{ellmer}</code> opens up many possibilities for automating the creation of route titles and descriptions. Whilst this tool was originally inspired by a cycling use case, this package is relevant also for planning hikes, walks, or runs. If you havenâ€™t already, give <code>{gpxtoolbox}</code> and <code>{ellmer}</code> a try and let me know what you think. Happy exploring!</p>\n<p>N.B. For any enhancement or bug requests, I would appreciate if you can submit an issue to <a href=\"https://github.com/martinctc/gpxtoolbox/issues\" rel=\"nofollow\" target=\"_blank\">https://github.com/martinctc/gpxtoolbox/issues</a>. Thank you!</p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://martinctc.github.io/blog/describe-gpx-files-with-ellmer/\"> Musings on R</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
      "main_text": "Generate Route Titles and Descriptions from GPX Files with LLMs and {ellmer}\nPosted on\nApril 10, 2025\nby\nMartin Chan\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nMusings on R\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nIntroduction\nAs someone who enjoys both cycling and coding in R, Iâ€™ve always wondered whether there are ways in which R (or data science more generally) could help with my training efficiency or the cycling experience. In the previous two posts in this blog, I wrote about using LLMs from\nLM Studio\nand\nAzure OpenAI\nto create text summaries and descriptions of the top 100 cycling climbs in the UK. As a sport that places heavy emphasis on data, there are actually plenty of opportunities to apply data science techniques to cycling.\nA recent opportunity for me is around the problem of planning cycle routes. Cycling routes are commonly stored in files with the extension\n.gpx\n(which stands for GPS Exchange Format), and they typically contain GPS data such as waypoints, routes, and tracks. GPX files are based on XML (Extensible Markup Language), meaning they use XML syntax to structure the data, making them both human-readable and machine-readable.\nEach GPX file would represent a particular cycling route, and at a certain point, one would easily have accumulated over a hundred GPX files without a system to organise them. This poses a problem. For instance,\nhow would I figure out the distance and elevation of each route?\nis the route a loop, or is it a one-way route?\nwhere does the route go through?\nThe traditional way to figure this out is to manually load the GPX file into your route planner of choice, be it Strava, Komoot, Garmin, Hammerhead, etc., and again\nmanually\ngive the route a title and a description. Itâ€™s probably going to take 5 minutes to do this for each route â€“ give or take â€“ but why spend your time doing things manually when you can spend more time on the bike, right? ðŸ˜Š\nWith\na lot\nof help from GitHub Copilot (so much so that I have to credit it here), I created the\ngpxtoolbox\npackage, which allows you to read in GPX files programmatically into R, and:\nGenerate route maps and elevation profile graphs\nCalculate total distance and elevation statistics\nIdentify locations at the start and end points of the route, as well as the 25%, 50%, and 75% marks\nInterface with LLMs with\n{ellmer}\nto generate a title and description of the GPX file. The\n{ellmer}\npackage provides a unified and consistent interface to interact with multiple large language model (LLM) providers, such as OpenAI, Azure OpenAI, Claude, and Gemini.\nWhat this essentially means is that there is now an R workflow to get from a GPX file (or hundreds of them) to an LLM-generated title and description for the route. Since {ellmer} allows you to interface with different LLMs, you can also play with the model options as well as the prompt to optimise the results.\nThis post will provide an introduction to {gpxtoolbox} and how to use it.\nGetting Started\nTo follow along, youâ€™ll need the following:\nThe\n{gpxtoolbox}\npackage for processing GPX files.\nThe\n{ellmer}\npackage for interfacing with LLMs.\nAn API key for your chosen LLM provider (e.g., OpenAI, Azure OpenAI).\nLetâ€™s start by installing the required packages:\ninstall.packages(\"ellmer\")\ndevtools::install_github(\"martinctc/gpxtoolbox\")\nSince {gpxtoolbox} is not (yet) available on CRAN, the above code installs this directly from the GitHub repository.\nExample Workflow\nHereâ€™s a step-by-step guide to generating titles and descriptions for a GPX route.\nStep 1: Process a GPX File\nFirst, use the\nanalyse_gpx()\nfunction from\n{gpxtoolbox}\nto extract route statistics from a GPX file:\nlibrary(gpxtoolbox)\n\n# Path to the example GPX file\nexample_gpx_path <- system.file(\"extdata\", \"icc_intro_ride.gpx\", package = \"gpxtoolbox\")\n\n# Analyse the GPX file and get route statistics\nstats <- analyse_gpx(example_gpx_path, return = \"stats\")\nprint(stats)\nThe following is returned:\n$total_distance_km\n[1] 42.81\n\n$total_elevation_gain_m\n[1] 622.2\n\n$total_elevation_loss_m\n[1] 556.6\n\n$max_elevation_m\n[1] 143\n\n$min_elevation_m\n[1] 29.9\n\n$start_point\n[1] \"The Gatehouse, Fieldway Crescent, Canonbury, Highbury, London Borough of Islington, London, Greater London, England, N5 1PZ, United Kingdom\"\n\n$end_point\n[1] \"Archway Road, London Borough of Haringey, London, Greater London, England, N6 4EJ, United Kingdom\"\n\n$p25_point\n[1] \"Highwood Hill, Mill Hill, London Borough of Barnet, London, Greater London, England, NW7 4HN, United Kingdom\"\n\n$p50_point\n[1] \"36, Camlet Way, Hadley Wood, London Borough of Enfield, London, Greater London, England, EN4 0LJ, United Kingdom\"\n\n$p75_point\n[1] \"Lincoln Road, Colney Hatch, London Borough of Barnet, London, Greater London, England, N2 9DJ, United Kingdom\"\nIn the above example,\nexample_gpx_path\npoints to a sample GPX file that comes installed with the {gpxtoolbox} package, which is a route for the introduction ride for the Islington Cycling Club. You can replace\nexample_gpx_path\nwith the path to a GPX file that you have saved locally to your machine. Alternatively, you can also supply an URL to a route on\nRide with GPS\n.\nThe\nstats\nobject is a named list containing key metrics and details about the GPX route:\n$total_distance_km\n: The total distance of the route in kilometers.\n$total_elevation_gain_m\n: The total elevation gain (uphill) in meters.\n$total_elevation_loss_m\n: The total elevation loss (downhill) in meters.\n$max_elevation_m\n: The highest elevation point along the route in meters.\n$min_elevation_m\n: The lowest elevation point along the route in meters.\n$start_point\n: A human-readable address or location for the starting point of the route.\n$end_point\n: A human-readable address or location for the ending point of the route.\n$p25_point\n,\n$p50_point\n,\n$p75_point\n: Human-readable addresses or locations for the points at 25%, 50%, and 75% of the routeâ€™s total distance, respectively. In {gpxtoolbox}, this is implemented as an API call to OpenStreetMap with the latitude and longitude columns exposed in the track points. For more details, see the implementation of\nidentify_geo()\n.\nStep 2: Generate a Title and Description\ngen_description()\naccepts a list of route statistics as per above, and uses this as part of the prompt to be sent to the LLM. Note that before you can use\ngen_description()\n, you will need to have obtained an API key and endpoint from your LLM provider of choice. This function directly calls the\nchat_*()\nprefixed functions from {ellmer}, for which you can find more information\nhere\n. For instance, you would need to satisfy the arguments from\nchat_azure()\nif you are using Azure AI,\nchat_claude()\nfor Claude, and so on. For an example on how to set up Azure Open AI, you can reference\nthis previous post\n.\nOnce you have all the bits and pieces ready, simply pass the list object containing the route stats and the required API values to\ngen_description()\n, using the\nplatform\nargument to specify the platform to use (which in turn determines which function to call from {ellmer}):\n# Generate a title and description using OpenAI\nresult <- gen_description(\n  stats = stats,\n  platform = \"azure\",\n  api_key = Sys.getenv(\"OPENAI_API_KEY\"),\n  deployment_id = \"gpt-4o-mini\"\n)\n\ncat(result)\nThe output will include a title and a detailed description of the route, highlighting key features such as distance, elevation gain, and notable landmarks:\n[1] \"**Title:** Highbury to Highwood Hill Adventure - 42.8 km, 622 m Climb  \\n\\n**Description:** Embark on an exhilarating journey from The Gatehouse in Canonbury to Archway Road, traversing through the scenic landscapes of North London. This 42.81 km route offers a total elevation gain of 622.2 m, showcasing a mix of rewarding climbs and gentle descents. Experience stunning views at the 25% mark at Highwood Hill in Mill Hill, pass through the tranquil Camlet Way at the halfway point, and enjoy the charm of Lincoln Road in Colney Hatch as you approach the final stretch. With elevations ranging from 29.9 m to a peak of 143 m, this route is perfect for those looking to experience both urban and lush green environments in a single adventure. Lace up your hiking boots and explore the diverse terrains this route has to offer!\"\nStep 3: Customizing the Prompt\nThe\ngen_description()\nfunction uses a default prompt to generate the title and description. If youâ€™d like to tailor the output, you can use the\nprompt\nargument to supply your own prompt to the function. The template prompt, which is used as default, is stored in\ndesc_prompt.md\nfile included in the\n{gpxtoolbox}\npackage. This allows you to tailor the tone and style of the generated text to your preferences.\nStep 4: Visualizing the route\nAsides from generating a title and description for a route, you can also visualise the route with\nplot_route()\n, which generates the shape of the route and the elevation profile. Admittedly, this feature is not as developed as I would like, and I am considering to integrate {leaflet} or some sort of mapping package as a next step. You can check out\nthis vignette\nwhich I will update with examples as new features land.\nWhy Use {ellmer}?\nIn previous posts, Iâ€™ve demonstrated how to create custom functions for interfacing with LLMs. While this approach offers flexibility, it can be time-consuming to maintain and adapt to different providers. The\n{ellmer}\npackage simplifies this process by providing a consistent interface to multiple LLM platforms, including:\nOpenAI\nAzure OpenAI\nClaude\nGemini\nPerplexity\nDeepSeek\nWith\n{ellmer}\n, you can switch between providers with minimal changes to your code, making it a versatile and efficient solution for working with LLMs.\nConclusion\nThe integration of\n{gpxtoolbox}\nand\n{ellmer}\nopens up many possibilities for automating the creation of route titles and descriptions. Whilst this tool was originally inspired by a cycling use case, this package is relevant also for planning hikes, walks, or runs. If you havenâ€™t already, give\n{gpxtoolbox}\nand\n{ellmer}\na try and let me know what you think. Happy exploring!\nN.B. For any enhancement or bug requests, I would appreciate if you can submit an issue to\nhttps://github.com/martinctc/gpxtoolbox/issues\n. Thank you!\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nMusings on R\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "Introduction",
      "meta_keywords": null,
      "og_description": "Introduction",
      "og_image": "https://raw.githubusercontent.com/martinctc/blog/master/images/gpxtoolbox/cyclist-planning-route.png",
      "og_title": "Generate Route Titles and Descriptions from GPX Files with LLMs and {ellmer} | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 8.8,
      "sitemap_lastmod": null,
      "twitter_description": "Introduction",
      "twitter_title": "Generate Route Titles and Descriptions from GPX Files with LLMs and {ellmer} | R-bloggers",
      "url": "https://www.r-bloggers.com/2025/04/generate-route-titles-and-descriptions-from-gpx-files-with-llms-and-ellmer/",
      "word_count": 1762
    }
  }
}