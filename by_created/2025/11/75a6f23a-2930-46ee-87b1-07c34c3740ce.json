{
  "uuid": "75a6f23a-2930-46ee-87b1-07c34c3740ce",
  "created_at": "2025-11-17 20:40:45",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2009/06/pdq-5-0-test-suite-or-how-i-spent-my-weekend/",
    "crawled_at": "2025-11-17T10:33:50.682449",
    "external_links": [
      {
        "href": "https://perfdynamics.blogspot.com/2009/06/pdq-50-test-suite-or-how-i-spent-my.html",
        "text": "Taking the Pith Out of Performance"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "http://en.oreilly.com/velocity2009",
        "text": "Velocity 2009"
      },
      {
        "href": "http://www.perfdynamics.com/Tools/PDQ.html",
        "text": "PDQ"
      },
      {
        "href": "http://www.swig.org/",
        "text": "SWIG"
      },
      {
        "href": "http://www.perfdynamics.com/Tools/PDQ-R.html",
        "text": "PDQ-R"
      },
      {
        "href": "http://www.perfdynamics.com/Tools/PDQperl.html",
        "text": "Perl PDQ"
      },
      {
        "href": "http://www.perfdynamics.com/Tools/PDQpython.html",
        "text": "PyDQ"
      },
      {
        "href": "http://www.perfdynamics.com/Tools/PDQcode.html",
        "text": "new release"
      },
      {
        "href": "https://perfdynamics.blogspot.com/2009/06/pdq-50-test-suite-or-how-i-spent-my.html",
        "text": "Taking the Pith Out of Performance"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "PDQ 5.0 Test Suite or … How I Spent My Weekend | R-bloggers",
    "images": [
      {
        "alt": null,
        "base64": null,
        "src": "https://blogger.googleusercontent.com/tracker/6977755959349847093-9140527639470906440?l=perfdynamics.blogspot.com"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://blogger.googleusercontent.com/tracker/6977755959349847093-9140527639470906440?l=perfdynamics.blogspot.com"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/neil-gunther/",
        "text": "Neil Gunther"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/tag/barycentric-coordinates/",
        "text": "barycentric coordinates"
      },
      {
        "href": "https://www.r-bloggers.com/tag/pdq/",
        "text": "PDQ"
      },
      {
        "href": "https://www.r-bloggers.com/tag/performance-models/",
        "text": "performance models"
      },
      {
        "href": "https://www.r-bloggers.com/tag/perl/",
        "text": "Perl"
      },
      {
        "href": "https://www.r-bloggers.com/tag/python/",
        "text": "Python"
      },
      {
        "href": "https://www.r-bloggers.com/tag/r/",
        "text": "R"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-22050 post type-post status-publish format-standard hentry category-r-bloggers tag-barycentric-coordinates tag-pdq tag-performance-models tag-perl tag-python tag-r\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">PDQ 5.0 Test Suite or … How I Spent My Weekend</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">June 29, 2009</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/neil-gunther/\">Neil Gunther</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://perfdynamics.blogspot.com/2009/06/pdq-50-test-suite-or-how-i-spent-my.html\"> Taking the Pith Out of Performance</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->I was planning to blog about the amazing time I had at <a href=\"http://en.oreilly.com/velocity2009\" rel=\"nofollow\" target=\"_blank\">Velocity 2009</a> last week, when this landed in my mailbox (edited for space and privacy): <blockquote><tt><br/>Subject:     Seeking help with PDQ-R ...<br/>Date:     Thu, 25 Jun 2009 15:51:21 -0500<br/><br/>My name is James and I've been trying to learn to properly use PDQ after reading two of your books, \"Guerrilla Capacity Planning\" and \"Analyzing Computer System Performance with Perl::PDQ.\" I'm still getting a grip on PDQ-R. ... I decided to set about of re-creating the queue circuit in the study with PDQ-R as an exercise. ... <br/>The output of my code yields:<br/>[1] \"Manual response time for class 1 is 0.864179 seconds\"<br/>[1] \"PDQ-R  response time for class 1 is 0.313637 seconds\"<br/>[1] \"Manual response time for class 2 is 6.105397 seconds\"<br/>[1] \"PDQ-R  response time for class 2 is 3.552873 seconds\"<br/>[1] \"Manual response time for class 3 is 4.535833 seconds\"<br/>[1] \"PDQ-R  response time for class 3 is 4.535833 seconds\"<br/>If you could give my code a look over and give me some hints I would really appreciate it.</tt></blockquote><a name=\"more\"></a> <br/>It turns out that James N. had discovered a bug (gasp!) in <a href=\"http://www.perfdynamics.com/Tools/PDQ.html\" rel=\"nofollow\" target=\"_blank\">PDQ</a>, which is why we have users. (jk)  The above output refers to a simple model of a database system comprising 3 resources (call them: cpu, disk1 and disk2) and 3 transaction streams (work1, work2, work3) and no limit on the queue lengths, i.e., an open queueing network or circuit. Here’s what my rendition looks like:<br/><pre>\n# PDQ-R model\n\nlibrary(pdq)\n\n# Request rates of the 3 transaction streams into the DBMS\nXsys&lt;-c(50/150, 80/150, 70/150)\n\n# Service demands at each resource\nDcpu&lt;-c(0.096, 0.615, 0.193)\nDdk1&lt;-c(0.088, 0.683, 0.763)\nDdk2&lt;-c(0.119, 0.795, 0.400)\n\n# Start PDQ code with Init call\nInit(\"James' DB Model\");\n\n# Define the 3 transaction workloads\nworkname&lt;-1:3\nfor (w in 1:3) {\n workname[w] &lt;- sprintf(\"work%d\", w)\n CreateOpen(workname[w], Xsys[w])\n}\n\n# Define the 3 resources\nCreateNode(\"cpu\", CEN, FCFS)\nCreateNode(\"dk1\", CEN, FCFS)\nCreateNode(\"dk2\", CEN, FCFS)\n\nfor (w in 1:3) {\n SetDemand(\"cpu\", workname[w], Dcpu[w])\n SetDemand(\"dk1\", workname[w], Ddk1[w])\n SetDemand(\"dk2\", workname[w], Ddk2[w])\n}\n\nSolve(CANON)\nReport()\n</pre><br/>To hunt down the problem, I rewrote the PDQ-R model in C, just  in case there were any translation problems with <a href=\"http://www.swig.org/\" rel=\"nofollow\" target=\"_blank\">SWIG</a>-ing PDQ/lib into <a href=\"http://www.perfdynamics.com/Tools/PDQ-R.html\" rel=\"nofollow\" target=\"_blank\">PDQ-R</a>, <a href=\"http://www.perfdynamics.com/Tools/PDQperl.html\" rel=\"nofollow\" target=\"_blank\">Perl PDQ</a>, <a href=\"http://www.perfdynamics.com/Tools/PDQpython.html\" rel=\"nofollow\" target=\"_blank\">PyDQ</a>, etc.<br/><pre>\n/*   \n    multiclass-open.c\n\n    Created by NJG on Thursday,  June 25, 2009\n    Updated by NJG on Sunday,  June 28, 2009\n*/\n\n#include &lt; stdio.h &gt;\n#include &lt; stdlib.h &gt;\n#include &lt; string.h &gt;\n#include &lt; math.h &gt;\n#include \"PDQ_Lib.h\"\n\n\nint main(void) {\n\n    extern void     exit();\n    extern char     s1[];\n    \n    char            *p; // dummy pointer for names\n    char            *devname[3];\n    char            *workname[3];\n    int             i, j, k, n, s, w;\n    double          actualtR[4][3];\n    \n    // Expected RT values\n    double  expectR[4][3] = {\n                {0.174, 1.118, 0.351},\n                {0.351, 2.734, 3.054},\n                {0.340, 2.270, 1.142},\n                {0.865, 6.122, 4.546}               \n                };\n\n    // Request rates of the 3 transaction streams into the DBMS\n    double Xsys[] = {50.0/150, 80.0/150, 70.0/150};\n        \n    // Service demands\n    double Dcpu[] = {0.096, 0.615, 0.193};\n    double Ddk1[] = {0.088, 0.683, 0.763};\n    double Ddk2[] = {0.119, 0.795, 0.400};\n        \n    // Name the workloads\n    for(w = 0; w &lt; 3; w++) {\n        resets(s1);\n        sprintf(s1, \"work%d\", w+1);\n        if ( (p = (char *) malloc(strlen(s1) * sizeof(char)) ) != NULL) {\n            strcpy(p, s1); // copy into assigned storage\n            workname[w] = p;\n        } \n        else { \n            printf(\"malloc failed!\\n\");\n            exit(-1); \n        }\n    }\n    free(p);\n    \n    // Name the resources\n    for(k = 0; k &lt; 3; k++) {\n        resets(s1);\n        if (k == 0) sprintf(s1, \"%s\", \"cpu\");\n        if (k == 1) sprintf(s1, \"%s\", \"dk1\");       \n        if (k == 2) sprintf(s1, \"%s\", \"dk2\");       \n        if ( (p = (char *) malloc(strlen(s1) * sizeof(char)) ) != NULL) {\n            strcpy(p, s1); // copy into assigned storage\n            devname[k] = p;\n        } \n        else { \n            printf(\"malloc failed!\\n\");\n            exit(-1); \n        }\n    }\n    free(p);\n    \n    /************************** Start PDQ code **********************/\n    PDQ_Init(\"Multiclass Test Model\");\n    \n    // Create workloads\n    for(w = 0; w &lt; 3; w++) {\n        s = PDQ_CreateOpen(workname[w], Xsys[w]);\n    }\n    \n    // Create resources\n    n = PDQ_CreateNode(\"cpu\", CEN, FCFS);\n    n = PDQ_CreateNode(\"dk1\", CEN, FCFS);\n    n = PDQ_CreateNode(\"dk2\", CEN, FCFS);\n    \n    // Assign demands \n    for(w = 0; w &lt; 3; w++) {\n        PDQ_SetDemand(\"cpu\", workname[w], Dcpu[w]);\n        PDQ_SetDemand(\"dk1\", workname[w], Ddk1[w]); \n        PDQ_SetDemand(\"dk2\", workname[w], Ddk2[w]);\n    }\n    \n    PDQ_Solve(CANON);\n        \n    printf(\"Expected Response Times\\n\");\n    for(i = 0; i &lt; 4; i++) {\n        for(j = 0; j &lt; 3; j++) {\n            printf(\"%4.3f\\t\", expectR[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    printf(\"--------------------------\\n\");   \n   \n    printf(\"Actual Response Times\\n\");\n    for(i = 0; i &lt; 4; i++) {\n        // System response times for QNM\n        if (i == 3) {\n            for(w = 0; w &lt; 3; w++) {\n                printf(\"%4.3f\\t\", \n                actualtR[i][w] = PDQ_GetResponse(TRANS, workname[w]));\n            }\n        }\n        \n        // Residence times per resource\n        if (i &lt; 3) {\n            for(w = 0; w &lt; 3; w++) {\n                printf(\"%4.3f\\t\", \n                actualtR[i][w] = PDQ_GetResidenceTime(devname[i], workname[w], TRANS));\n            }\n        }    \n        printf(\"\\n\");\n    }\n    \n} // main\n</pre><br/>This code also compares <em>actual</em> (meaning, computed by PDQ) with <em>expected</em> values (embedded as  2-d array) of residence times due to each workload at each resource. The \"expected\" values can come from any one of a number of sources such as: measurements, other models, other tools, etc. This forms the basis of the test code approach.<br/><br/>The problem seen by James turns out to arise from a conflict between the way resource utilizations are computed for the new multi-server queues (released in PDQ 5.0.1) and multi-class workloads. When the PDQ lib is corrected, the agreement can be observed in this output:<br/><pre>\n[njg]~/PDQ/Test Suite/C-PDQ% ./mulclass-open\nExpected Response Times\n0.174    1.118    0.351    \n0.351    2.734    3.054    \n0.340    2.270    1.142    \n0.865    6.122    4.546    &lt;--\n--------------------------\nActual Response Times\n0.175    1.118    0.351    \n0.352    2.728    3.048    \n0.340    2.274    1.144    \n0.866    6.120    4.543    &lt;--\n</pre><br/>The last line in each of the above tables corresponds to the \"manual\" values that James was reporting in his email.<br/><br/>The PDQ test cases had not kept up with new code developments; one of the hazards of only having severely punctuated time to work on PDQ. The <a href=\"http://www.perfdynamics.com/Tools/PDQcode.html\" rel=\"nofollow\" target=\"_blank\">new release</a> PDQ 5.0.2 should be available for download later this week. I'll send out an email notice at that time.<div class=\"blogger-post-footer\"><img alt=\"\" class=\"jetpack-lazy-image\" data-lazy-src=\"https://blogger.googleusercontent.com/tracker/6977755959349847093-9140527639470906440?l=perfdynamics.blogspot.com&amp;is-pending-load=1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/6977755959349847093-9140527639470906440?l=perfdynamics.blogspot.com\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" width=\"1\"/><noscript><img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/6977755959349847093-9140527639470906440?l=perfdynamics.blogspot.com\" width=\"1\"/></noscript></div>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://perfdynamics.blogspot.com/2009/06/pdq-50-test-suite-or-how-i-spent-my.html\"> Taking the Pith Out of Performance</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n<div class=\"post-tags clearfix\"><ul><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/barycentric-coordinates/\" rel=\"tag\">barycentric coordinates</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/pdq/\" rel=\"tag\">PDQ</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/performance-models/\" rel=\"tag\">performance models</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/perl/\" rel=\"tag\">Perl</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/python/\" rel=\"tag\">Python</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/r/\" rel=\"tag\">R</a></li></ul></div></article>",
    "main_text": "PDQ 5.0 Test Suite or … How I Spent My Weekend\nPosted on\nJune 29, 2009\nby\nNeil Gunther\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nTaking the Pith Out of Performance\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nI was planning to blog about the amazing time I had at\nVelocity 2009\nlast week, when this landed in my mailbox (edited for space and privacy):\nSubject:     Seeking help with PDQ-R ...\nDate:     Thu, 25 Jun 2009 15:51:21 -0500\nMy name is James and I've been trying to learn to properly use PDQ after reading two of your books, \"Guerrilla Capacity Planning\" and \"Analyzing Computer System Performance with Perl::PDQ.\" I'm still getting a grip on PDQ-R. ... I decided to set about of re-creating the queue circuit in the study with PDQ-R as an exercise. ...\nThe output of my code yields:\n[1] \"Manual response time for class 1 is 0.864179 seconds\"\n[1] \"PDQ-R  response time for class 1 is 0.313637 seconds\"\n[1] \"Manual response time for class 2 is 6.105397 seconds\"\n[1] \"PDQ-R  response time for class 2 is 3.552873 seconds\"\n[1] \"Manual response time for class 3 is 4.535833 seconds\"\n[1] \"PDQ-R  response time for class 3 is 4.535833 seconds\"\nIf you could give my code a look over and give me some hints I would really appreciate it.\nIt turns out that James N. had discovered a bug (gasp!) in\nPDQ\n, which is why we have users. (jk)  The above output refers to a simple model of a database system comprising 3 resources (call them: cpu, disk1 and disk2) and 3 transaction streams (work1, work2, work3) and no limit on the queue lengths, i.e., an open queueing network or circuit. Here’s what my rendition looks like:\n# PDQ-R model\n\nlibrary(pdq)\n\n# Request rates of the 3 transaction streams into the DBMS\nXsys<-c(50/150, 80/150, 70/150)\n\n# Service demands at each resource\nDcpu<-c(0.096, 0.615, 0.193)\nDdk1<-c(0.088, 0.683, 0.763)\nDdk2<-c(0.119, 0.795, 0.400)\n\n# Start PDQ code with Init call\nInit(\"James' DB Model\");\n\n# Define the 3 transaction workloads\nworkname<-1:3\nfor (w in 1:3) {\n workname[w] <- sprintf(\"work%d\", w)\n CreateOpen(workname[w], Xsys[w])\n}\n\n# Define the 3 resources\nCreateNode(\"cpu\", CEN, FCFS)\nCreateNode(\"dk1\", CEN, FCFS)\nCreateNode(\"dk2\", CEN, FCFS)\n\nfor (w in 1:3) {\n SetDemand(\"cpu\", workname[w], Dcpu[w])\n SetDemand(\"dk1\", workname[w], Ddk1[w])\n SetDemand(\"dk2\", workname[w], Ddk2[w])\n}\n\nSolve(CANON)\nReport()\nTo hunt down the problem, I rewrote the PDQ-R model in C, just  in case there were any translation problems with\nSWIG\n-ing PDQ/lib into\nPDQ-R\n,\nPerl PDQ\n,\nPyDQ\n, etc.\n/*   \n    multiclass-open.c\n\n    Created by NJG on Thursday,  June 25, 2009\n    Updated by NJG on Sunday,  June 28, 2009\n*/\n\n#include < stdio.h >\n#include < stdlib.h >\n#include < string.h >\n#include < math.h >\n#include \"PDQ_Lib.h\"\n\nint main(void) {\n\n    extern void     exit();\n    extern char     s1[];\n    \n    char            *p; // dummy pointer for names\n    char            *devname[3];\n    char            *workname[3];\n    int             i, j, k, n, s, w;\n    double          actualtR[4][3];\n    \n    // Expected RT values\n    double  expectR[4][3] = {\n                {0.174, 1.118, 0.351},\n                {0.351, 2.734, 3.054},\n                {0.340, 2.270, 1.142},\n                {0.865, 6.122, 4.546}               \n                };\n\n    // Request rates of the 3 transaction streams into the DBMS\n    double Xsys[] = {50.0/150, 80.0/150, 70.0/150};\n        \n    // Service demands\n    double Dcpu[] = {0.096, 0.615, 0.193};\n    double Ddk1[] = {0.088, 0.683, 0.763};\n    double Ddk2[] = {0.119, 0.795, 0.400};\n        \n    // Name the workloads\n    for(w = 0; w < 3; w++) {\n        resets(s1);\n        sprintf(s1, \"work%d\", w+1);\n        if ( (p = (char *) malloc(strlen(s1) * sizeof(char)) ) != NULL) {\n            strcpy(p, s1); // copy into assigned storage\n            workname[w] = p;\n        } \n        else { \n            printf(\"malloc failed!\\n\");\n            exit(-1); \n        }\n    }\n    free(p);\n    \n    // Name the resources\n    for(k = 0; k < 3; k++) {\n        resets(s1);\n        if (k == 0) sprintf(s1, \"%s\", \"cpu\");\n        if (k == 1) sprintf(s1, \"%s\", \"dk1\");       \n        if (k == 2) sprintf(s1, \"%s\", \"dk2\");       \n        if ( (p = (char *) malloc(strlen(s1) * sizeof(char)) ) != NULL) {\n            strcpy(p, s1); // copy into assigned storage\n            devname[k] = p;\n        } \n        else { \n            printf(\"malloc failed!\\n\");\n            exit(-1); \n        }\n    }\n    free(p);\n    \n    /************************** Start PDQ code **********************/\n    PDQ_Init(\"Multiclass Test Model\");\n    \n    // Create workloads\n    for(w = 0; w < 3; w++) {\n        s = PDQ_CreateOpen(workname[w], Xsys[w]);\n    }\n    \n    // Create resources\n    n = PDQ_CreateNode(\"cpu\", CEN, FCFS);\n    n = PDQ_CreateNode(\"dk1\", CEN, FCFS);\n    n = PDQ_CreateNode(\"dk2\", CEN, FCFS);\n    \n    // Assign demands \n    for(w = 0; w < 3; w++) {\n        PDQ_SetDemand(\"cpu\", workname[w], Dcpu[w]);\n        PDQ_SetDemand(\"dk1\", workname[w], Ddk1[w]); \n        PDQ_SetDemand(\"dk2\", workname[w], Ddk2[w]);\n    }\n    \n    PDQ_Solve(CANON);\n        \n    printf(\"Expected Response Times\\n\");\n    for(i = 0; i < 4; i++) {\n        for(j = 0; j < 3; j++) {\n            printf(\"%4.3f\\t\", expectR[i][j]);\n        }\n        printf(\"\\n\");\n    }\n    printf(\"--------------------------\\n\");   \n   \n    printf(\"Actual Response Times\\n\");\n    for(i = 0; i < 4; i++) {\n        // System response times for QNM\n        if (i == 3) {\n            for(w = 0; w < 3; w++) {\n                printf(\"%4.3f\\t\", \n                actualtR[i][w] = PDQ_GetResponse(TRANS, workname[w]));\n            }\n        }\n        \n        // Residence times per resource\n        if (i < 3) {\n            for(w = 0; w < 3; w++) {\n                printf(\"%4.3f\\t\", \n                actualtR[i][w] = PDQ_GetResidenceTime(devname[i], workname[w], TRANS));\n            }\n        }    \n        printf(\"\\n\");\n    }\n    \n} // main\nThis code also compares\nactual\n(meaning, computed by PDQ) with\nexpected\nvalues (embedded as  2-d array) of residence times due to each workload at each resource. The \"expected\" values can come from any one of a number of sources such as: measurements, other models, other tools, etc. This forms the basis of the test code approach.\nThe problem seen by James turns out to arise from a conflict between the way resource utilizations are computed for the new multi-server queues (released in PDQ 5.0.1) and multi-class workloads. When the PDQ lib is corrected, the agreement can be observed in this output:\n[njg]~/PDQ/Test Suite/C-PDQ% ./mulclass-open\nExpected Response Times\n0.174    1.118    0.351    \n0.351    2.734    3.054    \n0.340    2.270    1.142    \n0.865    6.122    4.546    <--\n--------------------------\nActual Response Times\n0.175    1.118    0.351    \n0.352    2.728    3.048    \n0.340    2.274    1.144    \n0.866    6.120    4.543    <--\nThe last line in each of the above tables corresponds to the \"manual\" values that James was reporting in his email.\nThe PDQ test cases had not kept up with new code developments; one of the hazards of only having severely punctuated time to work on PDQ. The\nnew release\nPDQ 5.0.2 should be available for download later this week. I'll send out an email notice at that time.\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nTaking the Pith Out of Performance\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nbarycentric coordinates\nPDQ\nperformance models\nPerl\nPython\nR",
    "meta_description": "I was planning to blog about the amazing time I had at Velocity 2009 last week, when this landed in my mailbox (edited for space and privacy): Subject: Seeking help with PDQ-R ...Date: Thu, 25 Jun 2009 15:51:21 -0500My name is James and I've be...",
    "meta_keywords": "barycentric coordinates,pdq,performance models,perl,python,r",
    "og_description": "I was planning to blog about the amazing time I had at Velocity 2009 last week, when this landed in my mailbox (edited for space and privacy): Subject: Seeking help with PDQ-R ...Date: Thu, 25 Jun 2009 15:51:21 -0500My name is James and I've be...",
    "og_image": "https://blogger.googleusercontent.com/tracker/6977755959349847093-9140527639470906440?l=perfdynamics.blogspot.com",
    "og_title": "PDQ 5.0 Test Suite or … How I Spent My Weekend | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 6.2,
    "sitemap_lastmod": "2010-09-06T20:57:54+00:00",
    "twitter_description": "I was planning to blog about the amazing time I had at Velocity 2009 last week, when this landed in my mailbox (edited for space and privacy): Subject: Seeking help with PDQ-R ...Date: Thu, 25 Jun 2009 15:51:21 -0500My name is James and I've be...",
    "twitter_title": "PDQ 5.0 Test Suite or … How I Spent My Weekend | R-bloggers",
    "url": "https://www.r-bloggers.com/2009/06/pdq-5-0-test-suite-or-how-i-spent-my-weekend/",
    "word_count": 1237
  }
}