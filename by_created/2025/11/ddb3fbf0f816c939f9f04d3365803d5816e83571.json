{
  "id": "ddb3fbf0f816c939f9f04d3365803d5816e83571",
  "url": "https://www.r-bloggers.com/2024/01/using-drop_na-in-fast-classification-and-regression/",
  "created_at_utc": "2025-11-17T20:38:32Z",
  "data": null,
  "raw_original": {
    "uuid": "db37fe53-5e2b-437d-95a9-8f8d355369d1",
    "created_at": "2025-11-17 20:38:32",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2024/01/using-drop_na-in-fast-classification-and-regression/",
      "crawled_at": "2025-11-17T09:17:28.849548",
      "external_links": [
        {
          "href": "https://www.spsanderson.com/steveondata/posts/2024-01-17/index.html",
          "text": "Steve's Data Tips and Tricks"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "https://www.spsanderson.com/steveondata/posts/2024-01-17/index.html",
          "text": "Steve's Data Tips and Tricks"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "Using .drop_na in Fast Classification and Regression | R-bloggers",
      "images": [],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/steven-p-sanderson-ii-mph/",
          "text": "Steven P. Sanderson II, MPH"
        },
        {
          "href": "https://www.r-bloggers.com/category/r-bloggers/",
          "text": "R bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-381547 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Using .drop_na in Fast Classification and Regression</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">January 16, 2024</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/steven-p-sanderson-ii-mph/\">Steven P. Sanderson II, MPH</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://www.spsanderson.com/steveondata/posts/2024-01-17/index.html\"> Steve's Data Tips and Tricks</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<section class=\"level1\" id=\"introduction\">\n<h1>Introduction</h1>\n<p>In the newest release of tidyAML there has been an addition of a new parameter to the functions <code>fast_classification()</code> and <code>fast_regression()</code>. The parameter is <code>.drop_na</code> and it is a logical value that defaults to <code>TRUE</code>. This parameter is used to determine if the function should drop rows with missing values from the output if a model cannot be built for some reason. Let’s take a look at the function and it’s arguments.</p>\n<pre>fast_regression(\n  .data,\n  .rec_obj,\n  .parsnip_fns = \"all\",\n  .parsnip_eng = \"all\",\n  .split_type = \"initial_split\",\n  .split_args = NULL,\n  .drop_na = TRUE\n)</pre>\n<section class=\"level2\" id=\"arguments\">\n<h2 class=\"anchored\" data-anchor-id=\"arguments\">Arguments</h2>\n<p><code>.data</code> – The data being passed to the function for the regression problem <code>.rec_obj</code> – The recipe object being passed. <code>.parsnip_fns</code> – The default is ‘all’ which will create all possible regression model specifications supported. <code>.parsnip_eng</code> – The default is ‘all’ which will create all possible regression model specifications supported. <code>.split_type</code> – The default is ‘initial_split’, you can pass any type of split supported by rsample <code>.split_args</code> – The default is NULL, when NULL then the default parameters of the split type will be executed for the rsample split type. <code>.drop_na</code> – The default is TRUE, which will drop all NA’s from the data.</p>\n<p>Now let’s see this in action.</p>\n</section>\n</section>\n<section class=\"level1\" id=\"example\">\n<h1>Example</h1>\n<p>We are going to use the <code>mtcars</code> dataset for this example. We will create a regression problem where we are trying to predict <code>mpg</code> using all other variables in the dataset. We will not load in all the libraries that are supported causing the function to return NULL for some models and we will set the parameter <code>.drop_na</code> to <code>FALSE</code>.</p>\n<div class=\"cell\">\n<pre>library(tidyAML)\nlibrary(tidymodels)\nlibrary(tidyverse)\n\ntidymodels::tidymodels_prefer()\n\n# Create regression problem\nrec_obj &lt;- recipe(mpg ~ ., data = mtcars)\nfrt_tbl &lt;- fast_regression(\n  mtcars,\n  rec_obj,\n  .parsnip_eng = c(\"lm\",\"glm\",\"gee\"),\n  .parsnip_fns = \"linear_reg\",\n  .drop_na = FALSE\n  )\n\nglimpse(frt_tbl)</pre>\n<div class=\"cell-output cell-output-stdout\">\n<pre>Rows: 3\nColumns: 8\n$ .model_id       &lt;int&gt; 1, 2, 3\n$ .parsnip_engine &lt;chr&gt; \"lm\", \"gee\", \"glm\"\n$ .parsnip_mode   &lt;chr&gt; \"regression\", \"regression\", \"regression\"\n$ .parsnip_fns    &lt;chr&gt; \"linear_reg\", \"linear_reg\", \"linear_reg\"\n$ model_spec      &lt;list&gt; [~NULL, ~NULL, NULL, regression, TRUE, NULL, lm, TRUE]…\n$ wflw            &lt;list&gt; [cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb, mp…\n$ fitted_wflw     &lt;list&gt; [cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb, mp…\n$ pred_wflw       &lt;list&gt; [&lt;tbl_df[64 x 3]&gt;], &lt;NULL&gt;, [&lt;tbl_df[64 x 3]&gt;]</pre>\n</div>\n<pre>extract_wflw(frt_tbl, 1:nrow(frt_tbl))</pre>\n<div class=\"cell-output cell-output-stdout\">\n<pre>[[1]]\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: linear_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n0 Recipe Steps\n\n── Model ───────────────────────────────────────────────────────────────────────\nLinear Regression Model Specification (regression)\n\nComputational engine: lm \n\n\n[[2]]\nNULL\n\n[[3]]\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: linear_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n0 Recipe Steps\n\n── Model ───────────────────────────────────────────────────────────────────────\nLinear Regression Model Specification (regression)\n\nComputational engine: glm </pre>\n</div>\n</div>\n<p>Here we can see that the function returned NULL for the <code>gee</code> model because we did not load in the <code>multilevelmod</code> library. We can also see that the function did not drop that model from the output because <code>.drop_na</code> was set to <code>FALSE</code>. Now let’s set it back to <code>TRUE</code>.</p>\n<div class=\"cell\">\n<pre>frt_tbl &lt;- fast_regression(\n  mtcars,\n  rec_obj,\n  .parsnip_eng = c(\"lm\",\"glm\",\"gee\"),\n  .parsnip_fns = \"linear_reg\",\n  .drop_na = TRUE\n  )\n\nglimpse(frt_tbl)</pre>\n<div class=\"cell-output cell-output-stdout\">\n<pre>Rows: 2\nColumns: 8\n$ .model_id       &lt;int&gt; 1, 3\n$ .parsnip_engine &lt;chr&gt; \"lm\", \"glm\"\n$ .parsnip_mode   &lt;chr&gt; \"regression\", \"regression\"\n$ .parsnip_fns    &lt;chr&gt; \"linear_reg\", \"linear_reg\"\n$ model_spec      &lt;list&gt; [~NULL, ~NULL, NULL, regression, TRUE, NULL, lm, TRUE]…\n$ wflw            &lt;list&gt; [cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb, mp…\n$ fitted_wflw     &lt;list&gt; [cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb, mp…\n$ pred_wflw       &lt;list&gt; [&lt;tbl_df[64 x 3]&gt;], [&lt;tbl_df[64 x 3]&gt;]</pre>\n</div>\n<pre>extract_wflw(frt_tbl, 1:nrow(frt_tbl))</pre>\n<div class=\"cell-output cell-output-stdout\">\n<pre>[[1]]\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: linear_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n0 Recipe Steps\n\n── Model ───────────────────────────────────────────────────────────────────────\nLinear Regression Model Specification (regression)\n\nComputational engine: lm \n\n\n[[2]]\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: linear_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n0 Recipe Steps\n\n── Model ───────────────────────────────────────────────────────────────────────\nLinear Regression Model Specification (regression)\n\nComputational engine: glm </pre>\n</div>\n</div>\n<p>Here we can see that the <code>gee</code> model was dropped from the output because the function could not build the model due to the <code>multilevelmod</code> library not being loaded. This is a great way to drop models that cannot be built due to missing libraries or other reasons.</p>\n</section>\n<section class=\"level1\" id=\"conclusion\">\n<h1>Conclusion</h1>\n<p>The <code>.drop_na</code> parameter is a great way to drop models that cannot be built due to missing libraries or other reasons. This is a great addition to the <code>fast_classification()</code> and <code>fast_regression()</code> functions.</p>\n<p>Happy coding!</p>\n</section>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://www.spsanderson.com/steveondata/posts/2024-01-17/index.html\"> Steve's Data Tips and Tricks</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div> </div>\n</article>",
      "main_text": "Using .drop_na in Fast Classification and Regression\nPosted on\nJanuary 16, 2024\nby\nSteven P. Sanderson II, MPH\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nSteve's Data Tips and Tricks\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nIntroduction\nIn the newest release of tidyAML there has been an addition of a new parameter to the functions\nfast_classification()\nand\nfast_regression()\n. The parameter is\n.drop_na\nand it is a logical value that defaults to\nTRUE\n. This parameter is used to determine if the function should drop rows with missing values from the output if a model cannot be built for some reason. Let’s take a look at the function and it’s arguments.\nfast_regression(\n  .data,\n  .rec_obj,\n  .parsnip_fns = \"all\",\n  .parsnip_eng = \"all\",\n  .split_type = \"initial_split\",\n  .split_args = NULL,\n  .drop_na = TRUE\n)\nArguments\n.data\n– The data being passed to the function for the regression problem\n.rec_obj\n– The recipe object being passed.\n.parsnip_fns\n– The default is ‘all’ which will create all possible regression model specifications supported.\n.parsnip_eng\n– The default is ‘all’ which will create all possible regression model specifications supported.\n.split_type\n– The default is ‘initial_split’, you can pass any type of split supported by rsample\n.split_args\n– The default is NULL, when NULL then the default parameters of the split type will be executed for the rsample split type.\n.drop_na\n– The default is TRUE, which will drop all NA’s from the data.\nNow let’s see this in action.\nExample\nWe are going to use the\nmtcars\ndataset for this example. We will create a regression problem where we are trying to predict\nmpg\nusing all other variables in the dataset. We will not load in all the libraries that are supported causing the function to return NULL for some models and we will set the parameter\n.drop_na\nto\nFALSE\n.\nlibrary(tidyAML)\nlibrary(tidymodels)\nlibrary(tidyverse)\n\ntidymodels::tidymodels_prefer()\n\n# Create regression problem\nrec_obj <- recipe(mpg ~ ., data = mtcars)\nfrt_tbl <- fast_regression(\n  mtcars,\n  rec_obj,\n  .parsnip_eng = c(\"lm\",\"glm\",\"gee\"),\n  .parsnip_fns = \"linear_reg\",\n  .drop_na = FALSE\n  )\n\nglimpse(frt_tbl)\nRows: 3\nColumns: 8\n$ .model_id       <int> 1, 2, 3\n$ .parsnip_engine <chr> \"lm\", \"gee\", \"glm\"\n$ .parsnip_mode   <chr> \"regression\", \"regression\", \"regression\"\n$ .parsnip_fns    <chr> \"linear_reg\", \"linear_reg\", \"linear_reg\"\n$ model_spec      <list> [~NULL, ~NULL, NULL, regression, TRUE, NULL, lm, TRUE]…\n$ wflw            <list> [cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb, mp…\n$ fitted_wflw     <list> [cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb, mp…\n$ pred_wflw       <list> [<tbl_df[64 x 3]>], <NULL>, [<tbl_df[64 x 3]>]\nextract_wflw(frt_tbl, 1:nrow(frt_tbl))\n[[1]]\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: linear_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n0 Recipe Steps\n\n── Model ───────────────────────────────────────────────────────────────────────\nLinear Regression Model Specification (regression)\n\nComputational engine: lm \n\n[[2]]\nNULL\n\n[[3]]\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: linear_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n0 Recipe Steps\n\n── Model ───────────────────────────────────────────────────────────────────────\nLinear Regression Model Specification (regression)\n\nComputational engine: glm\nHere we can see that the function returned NULL for the\ngee\nmodel because we did not load in the\nmultilevelmod\nlibrary. We can also see that the function did not drop that model from the output because\n.drop_na\nwas set to\nFALSE\n. Now let’s set it back to\nTRUE\n.\nfrt_tbl <- fast_regression(\n  mtcars,\n  rec_obj,\n  .parsnip_eng = c(\"lm\",\"glm\",\"gee\"),\n  .parsnip_fns = \"linear_reg\",\n  .drop_na = TRUE\n  )\n\nglimpse(frt_tbl)\nRows: 2\nColumns: 8\n$ .model_id       <int> 1, 3\n$ .parsnip_engine <chr> \"lm\", \"glm\"\n$ .parsnip_mode   <chr> \"regression\", \"regression\"\n$ .parsnip_fns    <chr> \"linear_reg\", \"linear_reg\"\n$ model_spec      <list> [~NULL, ~NULL, NULL, regression, TRUE, NULL, lm, TRUE]…\n$ wflw            <list> [cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb, mp…\n$ fitted_wflw     <list> [cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb, mp…\n$ pred_wflw       <list> [<tbl_df[64 x 3]>], [<tbl_df[64 x 3]>]\nextract_wflw(frt_tbl, 1:nrow(frt_tbl))\n[[1]]\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: linear_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n0 Recipe Steps\n\n── Model ───────────────────────────────────────────────────────────────────────\nLinear Regression Model Specification (regression)\n\nComputational engine: lm \n\n[[2]]\n══ Workflow ════════════════════════════════════════════════════════════════════\nPreprocessor: Recipe\nModel: linear_reg()\n\n── Preprocessor ────────────────────────────────────────────────────────────────\n0 Recipe Steps\n\n── Model ───────────────────────────────────────────────────────────────────────\nLinear Regression Model Specification (regression)\n\nComputational engine: glm\nHere we can see that the\ngee\nmodel was dropped from the output because the function could not build the model due to the\nmultilevelmod\nlibrary not being loaded. This is a great way to drop models that cannot be built due to missing libraries or other reasons.\nConclusion\nThe\n.drop_na\nparameter is a great way to drop models that cannot be built due to missing libraries or other reasons. This is a great addition to the\nfast_classification()\nand\nfast_regression()\nfunctions.\nHappy coding!\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nSteve's Data Tips and Tricks\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "Introduction In the newest release of tidyAML there has been an addition of a new parameter to the functions fast_classification() and fast_regression(). The parameter is .drop_na and it is a logical value that defaults to TRUE. This parameter i...",
      "meta_keywords": null,
      "og_description": "Introduction In the newest release of tidyAML there has been an addition of a new parameter to the functions fast_classification() and fast_regression(). The parameter is .drop_na and it is a logical value that defaults to TRUE. This parameter i...",
      "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
      "og_title": "Using .drop_na in Fast Classification and Regression | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 4.1,
      "sitemap_lastmod": "2024-01-17T05:00:00+00:00",
      "twitter_description": "Introduction In the newest release of tidyAML there has been an addition of a new parameter to the functions fast_classification() and fast_regression(). The parameter is .drop_na and it is a logical value that defaults to TRUE. This parameter i...",
      "twitter_title": "Using .drop_na in Fast Classification and Regression | R-bloggers",
      "url": "https://www.r-bloggers.com/2024/01/using-drop_na-in-fast-classification-and-regression/",
      "word_count": 812
    }
  }
}