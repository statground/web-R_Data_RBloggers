{
  "uuid": "f2a61480-ad9a-459d-a5b4-160fcb08570e",
  "created_at": "2025-11-17 20:41:47",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2007/07/testing-for-missing-values-of-numeric-double-vectors-in-r/",
    "crawled_at": "2025-11-17T10:57:01.795573",
    "external_links": [
      {
        "href": "http://userprimary.net/user/2007/07/13/testing-for-missing-values-of-numeric-double-vectors-in-r/",
        "text": "\"R-bloggers\" via Tal Galili in Google Reader"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://www.r-project.org",
        "text": "R"
      },
      {
        "href": "http://cran.r-project.org/doc/manuals/R-exts.html#Missing-and-special-values",
        "text": "Writing R Extensions Manual (WREM)"
      },
      {
        "href": "http://www.technorati.com/tag/programming",
        "text": "programming"
      },
      {
        "href": "http://www.technorati.com/tag/R",
        "text": "R"
      },
      {
        "href": "http://userprimary.net/user/2007/07/13/testing-for-missing-values-of-numeric-double-vectors-in-r/",
        "text": "\"R-bloggers\" via Tal Galili in Google Reader"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Testing for missing values of numeric (double) vectors in R | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/seth/",
        "text": "seth"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/tag/r/",
        "text": "R"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-57 post type-post status-publish format-standard hentry category-r-bloggers tag-r\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Testing for missing values of numeric (double) vectors in R</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">July 13, 2007</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/seth/\">seth</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"http://userprimary.net/user/2007/07/13/testing-for-missing-values-of-numeric-double-vectors-in-r/\"> \"R-bloggers\" via Tal Galili in Google Reader</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0--><p>I just came across this bit of <a href=\"https://www.r-project.org\" rel=\"nofollow\" target=\"_blank\">R</a> trickiness when trying to improve the error messages for one of our packages.  I tried adding a check at the C level for NA_REAL, but to no avail.  The test failed even when I was certain that I was passing down a vector containing missing values.  Consulting the <a href=\"http://cran.r-project.org/doc/manuals/R-exts.html#Missing-and-special-values\" rel=\"nofollow\" target=\"_blank\">Writing R Extensions Manual (WREM)</a> led me quickly to ISNA.  The WREM says that ISNA only applies to numeric values of type double and that other types can be checked by equality comparison to NA_INTEGER, NA_LOGICAL, etc.  What could perhaps be better emphasized is that ISNA is the only appropriate way to test for missingness of REALSXP elements and that equality testing with NA_REAL does not work.</p>\n<p>It is an easy mistake to make since one might be lulled into complacency by the repeating patterns of a switch statement.  Here’s how NOT to do it:</p>\n<p><br/>\nSEXP hello_hasNA(SEXP v)<br/>\n{<br/>\n    int i, found_na = 0;</p>\n<p>    for (i = 0; i &lt; length(v); i++) {<br/>\n        switch (TYPEOF(v)) {<br/>\n        case INTSXP:<br/>\n            if (INTEGER(v)[i] == NA_INTEGER)<br/>\n                found_na = 1;<br/>\n            break;<br/>\n        case LGLSXP:<br/>\n            if (LOGICAL(v)[i] == NA_LOGICAL)<br/>\n                found_na = 1;<br/>\n            break;<br/>\n        case REALSXP:<br/>\n            if (REAL(v)[i] == NA_REAL) /* WRONG, must use ISNA() */<br/>\n                found_na = 1;<br/>\n            break;<br/>\n        case STRSXP:<br/>\n            if (STRING_ELT(v, i) == NA_STRING)<br/>\n                found_na = 1;<br/>\n            break;<br/>\n        default:<br/>\n            error(“no support for type”);<br/>\n        }<br/>\n        if (found_na)<br/>\n            break;<br/>\n    }<br/>\n    return ScalarLogical(found_na);<br/>\n}<br/>\n</p>\n<p>To fix things, replace the REALSXP case like this:</p>\n<p><br/>\n        case REALSXP:<br/>\n            if (ISNA(REAL(v)[i]))<br/>\n                found_na = 1;<br/>\n            break;<br/>\n</p>\n<p>\n<p style=\"text-align:right;font-size:10px\">Technorati Tags: <a href=\"http://www.technorati.com/tag/programming\" rel=\"nofollow\" target=\"_blank\">programming</a>, <a href=\"http://www.technorati.com/tag/R\" rel=\"nofollow\" target=\"_blank\">R</a></p>\n<p></p></p>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://userprimary.net/user/2007/07/13/testing-for-missing-values-of-numeric-double-vectors-in-r/\"> \"R-bloggers\" via Tal Galili in Google Reader</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n<div class=\"post-tags clearfix\"><ul><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/r/\" rel=\"tag\">R</a></li></ul></div></article>",
    "main_text": "Testing for missing values of numeric (double) vectors in R\nPosted on\nJuly 13, 2007\nby\nseth\nin\nR bloggers\n| 0 Comments\n[This article was first published on\n\"R-bloggers\" via Tal Galili in Google Reader\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nI just came across this bit of\nR\ntrickiness when trying to improve the error messages for one of our packages.  I tried adding a check at the C level for NA_REAL, but to no avail.  The test failed even when I was certain that I was passing down a vector containing missing values.  Consulting the\nWriting R Extensions Manual (WREM)\nled me quickly to ISNA.  The WREM says that ISNA only applies to numeric values of type double and that other types can be checked by equality comparison to NA_INTEGER, NA_LOGICAL, etc.  What could perhaps be better emphasized is that ISNA is the only appropriate way to test for missingness of REALSXP elements and that equality testing with NA_REAL does not work.\nIt is an easy mistake to make since one might be lulled into complacency by the repeating patterns of a switch statement.  Here’s how NOT to do it:\nSEXP hello_hasNA(SEXP v)\n{\nint i, found_na = 0;\nfor (i = 0; i < length(v); i++) {\nswitch (TYPEOF(v)) {\ncase INTSXP:\nif (INTEGER(v)[i] == NA_INTEGER)\nfound_na = 1;\nbreak;\ncase LGLSXP:\nif (LOGICAL(v)[i] == NA_LOGICAL)\nfound_na = 1;\nbreak;\ncase REALSXP:\nif (REAL(v)[i] == NA_REAL) /* WRONG, must use ISNA() */\nfound_na = 1;\nbreak;\ncase STRSXP:\nif (STRING_ELT(v, i) == NA_STRING)\nfound_na = 1;\nbreak;\ndefault:\nerror(“no support for type”);\n}\nif (found_na)\nbreak;\n}\nreturn ScalarLogical(found_na);\n}\nTo fix things, replace the REALSXP case like this:\ncase REALSXP:\nif (ISNA(REAL(v)[i]))\nfound_na = 1;\nbreak;\nTechnorati Tags:\nprogramming\n,\nR\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\n\"R-bloggers\" via Tal Galili in Google Reader\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nR",
    "meta_description": "I just came across this bit of R trickiness when trying to improve the error messages for one of our packages. I tried adding a check at the C level for NA_REAL, but to no avail. The test failed even when I was certain that I was passing down a vecto...",
    "meta_keywords": "r",
    "og_description": "I just came across this bit of R trickiness when trying to improve the error messages for one of our packages. I tried adding a check at the C level for NA_REAL, but to no avail. The test failed even when I was certain that I was passing down a vecto...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Testing for missing values of numeric (double) vectors in R | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 2,
    "sitemap_lastmod": "2007-07-13T17:09:43+00:00",
    "twitter_description": "I just came across this bit of R trickiness when trying to improve the error messages for one of our packages. I tried adding a check at the C level for NA_REAL, but to no avail. The test failed even when I was certain that I was passing down a vecto...",
    "twitter_title": "Testing for missing values of numeric (double) vectors in R | R-bloggers",
    "url": "https://www.r-bloggers.com/2007/07/testing-for-missing-values-of-numeric-double-vectors-in-r/",
    "word_count": 405
  }
}