{
  "uuid": "8a13cfc1-0bbd-450e-8cbe-d7c75ddbea28",
  "created_at": "2025-11-22 19:59:21",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/01/downloading-datasets-from-our-world-in-data-in-r/",
    "crawled_at": "2025-11-22T10:54:39.435372",
    "external_links": [
      {
        "href": "https://statisticaloddsandends.wordpress.com/2025/01/30/downloading-datasets-from-our-world-in-data-in-r/",
        "text": "R – Statistical Odds & Ends"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://www.allendowney.com/blog/2024/11/24/download-the-world-in-data/",
        "text": "Allen Downey’s blog"
      },
      {
        "href": "https://ourworldindata.org/",
        "text": "Our World in Data"
      },
      {
        "href": "https://ourworldindata.org/easier-to-reuse-our-data",
        "text": "providing API access"
      },
      {
        "href": "https://docs.owid.io/projects/etl/api/#chart-data-api",
        "text": "this link"
      },
      {
        "href": "https://www.allendowney.com/blog/2024/11/24/download-the-world-in-data/",
        "text": "Allen Downey’s blog post"
      },
      {
        "href": "https://docs.owid.io/projects/etl/api/#chart-data-api",
        "text": "chart data API page"
      },
      {
        "href": "https://ourworldindata.org/grapher/average-monthly-surface-temperature",
        "text": "average monthly surface temperature"
      },
      {
        "href": "https://www.allendowney.com/blog/2024/11/24/download-the-world-in-data/",
        "text": "Allen Downey"
      },
      {
        "href": "https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?ssl=1",
        "text": null
      },
      {
        "href": "https://ourworldindata.org/grapher/average-monthly-surface-temperature?tab=chart&time=2001-05-15..2024-05-15&country=OWID_WRL~THA",
        "text": "https://ourworldindata.org/grapher/average-monthly-surface-temperature?tab=chart&time=2001-05-15..2024-05-15&country=OWID_WRL~THA"
      },
      {
        "href": "https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?ssl=1",
        "text": null
      },
      {
        "href": "https://statisticaloddsandends.wordpress.com/2025/01/30/downloading-datasets-from-our-world-in-data-in-r/",
        "text": "R – Statistical Odds & Ends"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Downloading datasets from Our World in Data in R | R-bloggers",
    "images": [
      {
        "alt": null,
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=450&ssl=1"
      },
      {
        "alt": null,
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=450&ssl=1"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/kjytay/",
        "text": "kjytay"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-390246 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Downloading datasets from Our World in Data in R</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">January 30, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/kjytay/\">kjytay</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://statisticaloddsandends.wordpress.com/2025/01/30/downloading-datasets-from-our-world-in-data-in-r/\"> R – Statistical Odds &amp; Ends</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47--><p>I recently learned from <a href=\"https://www.allendowney.com/blog/2024/11/24/download-the-world-in-data/\" rel=\"nofollow\" target=\"_blank\">Allen Downey’s blog</a> that <strong><a href=\"https://ourworldindata.org/\" rel=\"nofollow\" target=\"_blank\">Our World in Data</a></strong> is <a href=\"https://ourworldindata.org/easier-to-reuse-our-data\" rel=\"nofollow\" target=\"_blank\">providing API access</a> to their data. Our World in Data hosts datasets across several important topics, from population and demographic change, poverty and economic development, to human rights and democracy. From Nov 2024, Our World in Data “[offers] direct URLs to access data in CSV format and comprehensive metadata in JSON format” (this is what they call the <em><strong>Public Chart API</strong></em>).</p>\n<p>See <a href=\"https://docs.owid.io/projects/etl/api/#chart-data-api\" rel=\"nofollow\" target=\"_blank\">this link</a> for full documentation on the chart data API. <a href=\"https://www.allendowney.com/blog/2024/11/24/download-the-world-in-data/\" rel=\"nofollow\" target=\"_blank\">Allen Downey’s blog post</a> shows how to use this API in Python; in this post I’ll show the corresponding code in R.</p>\n<p><span style=\"text-decoration: underline\"><strong>Downloading metadata</strong></span></p>\n<p>The <a href=\"https://docs.owid.io/projects/etl/api/#chart-data-api\" rel=\"nofollow\" target=\"_blank\">chart data API page</a> tells us what APIs are available to us. The starting point is a base URL which we denote by <code>&lt;base_url&gt;</code>. This is what’s available to us:</p>\n<ul>\n<li><code>&lt;base_url&gt;</code> – The page on the website where you can see the chart.</li>\n<li><code>&lt;base_url&gt;.csv</code> – The data for this chart, usually what we want to download.</li>\n<li><code>&lt;base_url&gt;.metadata.json</code> – The metadata for this chart, e.g. chart title, the units, how to cite the data sources.</li>\n<li><code>&lt;base_url&gt;.zip</code> – The dataset, metadata, and a readme as zip file.</li>\n</ul>\n<p>Let’s start by looking at the metadata for <a href=\"https://ourworldindata.org/grapher/average-monthly-surface-temperature\" rel=\"nofollow\" target=\"_blank\">average monthly surface temperature</a>:</p>\n<pre>\nlibrary(tidyverse)\nlibrary(httr)\nlibrary(jsonlite)\n\n# define URL and query parameters\nurl &lt;- \"https://ourworldindata.org/grapher/average-monthly-surface-temperature.metadata.json\"\nquery_params &lt;- list(\n  v = \"1\",\n  csvType = \"full\",\n  useColumnShortNames = \"true\"\n)\n\n# get metadata\nheaders &lt;- add_headers(`User-Agent` = \"Our World In Data data fetch/1.0\")\nresponse &lt;- GET(url, query = query_params, headers)\nmetadata &lt;- fromJSON(content(response, as = \"text\", encoding = \"UTF-8\"))\n</pre>\n<p>The returned metadata object is a list with a few keys:</p>\n<pre>\n# view the metadata keys\nnames(metadata)\n\n#&gt; [1] \"chart\"          \"columns\"        \"dateDownloaded\" \"activeFilters\" \n</pre>\n<p>The <code>chart</code> element gives us high-level information of the chart:</p>\n<pre>\nglimpse(metadata$chart)\n\n#&gt; List of 5\n#&gt;  $ title           : chr \"Average monthly surface temperature\"\n#&gt;  $ subtitle        : chr \"The temperature of the air measured 2 meters above the ground, encompassing land, sea, and in-land water surfaces.\"\n#&gt;  $ citation        : chr \"Contains modified Copernicus Climate Change Service information (2025)\"\n#&gt;  $ originalChartUrl: chr \"https://ourworldindata.org/grapher/average-monthly-surface-temperature?v=1&amp;csvType=full&amp;useColumnShortNames=true\"\n#&gt;  $ selection       : chr \"World\"\n</pre>\n<p>There’s more information on the dataset in <code>metadata$columns$temperature_2m</code></p>\n<pre>\nnames(metadata$columns$temperature_2m)\n#&gt;  [1] \"titleShort\"            \"titleLong\"             \"descriptionShort\"      \"descriptionProcessing\" \"shortUnit\"             \"unit\"                 \n#&gt;  [7] \"timespan\"              \"type\"                  \"owidVariableId\"        \"shortName\"             \"lastUpdated\"           \"citationShort\"        \n#&gt; [13] \"citationLong\"          \"fullMetadata\"   \n</pre>\n<p>(Why <code>temperature_2m</code>? Looking at <code>metadata$columns$temperature_2m$shortName</code>, it seems like <code>temperature_2m</code> is the short name for the dataset.)</p>\n<p><span style=\"text-decoration: underline\"><strong>Downloading the dataset</strong></span></p>\n<p>Here is code downloading the average monthly surface temperature for just the USA:</p>\n<pre>\n# define the URL and query parameters\nurl &lt;- \"https://ourworldindata.org/grapher/average-monthly-surface-temperature.csv\"\nquery_params &lt;- list(\n  v = \"1\",\n  csvType = \"filtered\",\n  useColumnShortNames = \"true\",\n  tab = \"chart\",\n  country = \"USA\"\n)\n\n# get data\nheaders &lt;- add_headers(`User-Agent` = \"Our World In Data data fetch/1.0\")\nresponse &lt;- GET(url, query = query_params, headers)\ndf &lt;- read_csv(content(response, as = \"text\", encoding = \"UTF-8\"))\n\nhead(df)\n#&gt; # A tibble: 6 × 6\n#&gt;   Entity        Code   year Day        temperature_2m...5 temperature_2m...6\n#&gt;   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;date&gt;                  &lt;dbl&gt;              &lt;dbl&gt;\n#&gt; 1 United States USA    1941 1941-12-15            -1.88                 8.02\n#&gt; 2 United States USA    1942 1942-01-15            -4.78                 7.85\n#&gt; 3 United States USA    1942 1942-02-15            -3.87                 7.85\n#&gt; 4 United States USA    1942 1942-03-15             0.0978               7.85\n#&gt; 5 United States USA    1942 1942-04-15             7.54                 7.85\n#&gt; 6 United States USA    1942 1942-05-15            12.1                  7.85\n</pre>\n<p><a href=\"https://www.allendowney.com/blog/2024/11/24/download-the-world-in-data/\" rel=\"nofollow\" target=\"_blank\">Allen Downey</a> notes that the last column is undocumented, and based on context is probably the average annual temperature.</p>\n<p>Here’s a simple plot of the data:</p>\n<pre>\nplot(df$Day, df$temperature_2m...5, type = \"l\",\n     main = \"USA ave monthly temperature\",\n     xlab = \"Date\", ylab = \"Temperature in C\")\n</pre>\n<p><a href=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?ssl=1\" rel=\"nofollow\" target=\"_blank\"><img alt=\"\" class=\"aligncenter size-large wp-image-8203\" data-attachment-id=\"8203\" data-comments-opened=\"1\" data-image-caption=\"\" data-image-description=\"\" data-image-title=\"temperature_plot\" data-large-file=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=450&amp;ssl=1\" data-lazy-sizes=\"(max-width: 584px) 100vw, 584px\" data-lazy-src=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=450&amp;ssl=1\" data-medium-file=\"https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=300\" data-orig-file=\"https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png\" data-orig-size=\"1200,800\" data-permalink=\"https://statisticaloddsandends.wordpress.com/2025/01/30/downloading-datasets-from-our-world-in-data-in-r/temperature_plot/\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" srcset_temp=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=450&amp;ssl=1 584w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=1168 1168w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=150 150w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=300 300w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=768 768w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=1024 1024w\"/><noscript><img alt=\"\" aperture\":\"0\",\"credit\":\"\",\"camera\":\"\",\"caption\":\"\",\"created_timestamp\":\"0\",\"copyright\":\"\",\"focal_len=\"\" class=\"aligncenter size-large wp-image-8203\" data-attachment-id=\"8203\" data-comments-opened=\"1\" data-image-caption=\"\" data-image-description=\"\" data-image-meta=\"{\" data-image-title=\"temperature_plot\" data-large-file=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=450&amp;ssl=1\" data-medium-file=\"https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=300\" data-orig-file=\"https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png\" data-orig-size=\"1200,800\" data-permalink=\"https://statisticaloddsandends.wordpress.com/2025/01/30/downloading-datasets-from-our-world-in-data-in-r/temperature_plot/\" data-recalc-dims=\"1\" loading=\"lazy\" sizes=\"(max-width: 584px) 100vw, 584px\" src=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=450&amp;ssl=1\" srcset_temp=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=450&amp;ssl=1 584w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=1168 1168w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=150 150w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=300 300w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=768 768w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=1024 1024w\"/></noscript></a></p>\n<p>If you wanted the entire dataset, just use <code>csvType = \"full\"</code> in the request parameters, like so:</p>\n<pre>\n# define the URL and query parameters\nurl &lt;- \"https://ourworldindata.org/grapher/average-monthly-surface-temperature.csv\"\nquery_params &lt;- list(\n  v = \"1\",\n  csvType = \"full\",\n  useColumnShortNames = \"true\",\n  tab = \"chart\"\n)\n\n# same code for the http request works, see above\n</pre>\n<p>How do you know which filters you can apply? There is no extensive documentation of what filters you can apply, but as you click on the base URL to change the chart, the URL changes. You can then use this to infer the query parameters to add.</p>\n<p>For example, I clicked around on the chart to get this URL: <a href=\"https://ourworldindata.org/grapher/average-monthly-surface-temperature?tab=chart&amp;time=2001-05-15..2024-05-15&amp;country=OWID_WRL~THA\" rel=\"nofollow\" target=\"_blank\">https://ourworldindata.org/grapher/average-monthly-surface-temperature?tab=chart&amp;time=2001-05-15..2024-05-15&amp;country=OWID_WRL~THA</a>. The code below shows how you can download the data and reproduce the chart:</p>\n<pre>\n# define the URL and query parameters\nurl &lt;- \"https://ourworldindata.org/grapher/average-monthly-surface-temperature.csv\"\nquery_params &lt;- list(\n  v = \"1\",\n  csvType = \"filtered\",\n  useColumnShortNames = \"true\",\n  tab = \"chart\",\n  time = \"2001-05-15..2024-05-15\",\n  country = \"OWID_WRL~THA\"\n)\n\n# get data\nheaders &lt;- add_headers(`User-Agent` = \"Our World In Data data fetch/1.0\")\nresponse &lt;- GET(url, query = query_params, headers)\ndf &lt;- read_csv(content(response, as = \"text\", encoding = \"UTF-8\"))\nggplot(df) +\n  geom_line(aes(x = Day, y = temperature_2m...5, col = Entity)) +\n  labs(title = \"Ave monthly temperature for World &amp; Thailand\",\n       x = \"Date\", y = \"Temperature in C\") +\n  theme_bw() +\n  theme(legend.position = \"bottom\")\n</pre>\n<p><a href=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?ssl=1\" rel=\"nofollow\" target=\"_blank\"><img alt=\"\" class=\"aligncenter size-large wp-image-8207\" data-attachment-id=\"8207\" data-comments-opened=\"1\" data-image-caption=\"\" data-image-description=\"\" data-image-title=\"temperature_plot2\" data-large-file=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=450&amp;ssl=1\" data-lazy-sizes=\"(max-width: 584px) 100vw, 584px\" data-lazy-src=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=450&amp;ssl=1\" data-medium-file=\"https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=300\" data-orig-file=\"https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png\" data-orig-size=\"1200,800\" data-permalink=\"https://statisticaloddsandends.wordpress.com/2025/01/30/downloading-datasets-from-our-world-in-data-in-r/temperature_plot2/\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" srcset_temp=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=450&amp;ssl=1 584w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=1168 1168w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=150 150w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=300 300w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=768 768w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=1024 1024w\"/><noscript><img alt=\"\" aperture\":\"0\",\"credit\":\"\",\"camera\":\"\",\"caption\":\"\",\"created_timestamp\":\"0\",\"copyright\":\"\",\"focal_len=\"\" class=\"aligncenter size-large wp-image-8207\" data-attachment-id=\"8207\" data-comments-opened=\"1\" data-image-caption=\"\" data-image-description=\"\" data-image-meta=\"{\" data-image-title=\"temperature_plot2\" data-large-file=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=450&amp;ssl=1\" data-medium-file=\"https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=300\" data-orig-file=\"https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png\" data-orig-size=\"1200,800\" data-permalink=\"https://statisticaloddsandends.wordpress.com/2025/01/30/downloading-datasets-from-our-world-in-data-in-r/temperature_plot2/\" data-recalc-dims=\"1\" loading=\"lazy\" sizes=\"(max-width: 584px) 100vw, 584px\" src=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=450&amp;ssl=1\" srcset_temp=\"https://i0.wp.com/statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=450&amp;ssl=1 584w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=1168 1168w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=150 150w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=300 300w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=768 768w, https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot2.png?w=1024 1024w\"/></noscript></a></p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://statisticaloddsandends.wordpress.com/2025/01/30/downloading-datasets-from-our-world-in-data-in-r/\"> R – Statistical Odds &amp; Ends</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Downloading datasets from Our World in Data in R\nPosted on\nJanuary 30, 2025\nby\nkjytay\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nR – Statistical Odds & Ends\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nI recently learned from\nAllen Downey’s blog\nthat\nOur World in Data\nis\nproviding API access\nto their data. Our World in Data hosts datasets across several important topics, from population and demographic change, poverty and economic development, to human rights and democracy. From Nov 2024, Our World in Data “[offers] direct URLs to access data in CSV format and comprehensive metadata in JSON format” (this is what they call the\nPublic Chart API\n).\nSee\nthis link\nfor full documentation on the chart data API.\nAllen Downey’s blog post\nshows how to use this API in Python; in this post I’ll show the corresponding code in R.\nDownloading metadata\nThe\nchart data API page\ntells us what APIs are available to us. The starting point is a base URL which we denote by\n<base_url>\n. This is what’s available to us:\n<base_url>\n– The page on the website where you can see the chart.\n<base_url>.csv\n– The data for this chart, usually what we want to download.\n<base_url>.metadata.json\n– The metadata for this chart, e.g. chart title, the units, how to cite the data sources.\n<base_url>.zip\n– The dataset, metadata, and a readme as zip file.\nLet’s start by looking at the metadata for\naverage monthly surface temperature\n:\nlibrary(tidyverse)\nlibrary(httr)\nlibrary(jsonlite)\n\n# define URL and query parameters\nurl <- \"https://ourworldindata.org/grapher/average-monthly-surface-temperature.metadata.json\"\nquery_params <- list(\n  v = \"1\",\n  csvType = \"full\",\n  useColumnShortNames = \"true\"\n)\n\n# get metadata\nheaders <- add_headers(`User-Agent` = \"Our World In Data data fetch/1.0\")\nresponse <- GET(url, query = query_params, headers)\nmetadata <- fromJSON(content(response, as = \"text\", encoding = \"UTF-8\"))\nThe returned metadata object is a list with a few keys:\n# view the metadata keys\nnames(metadata)\n\n#> [1] \"chart\"          \"columns\"        \"dateDownloaded\" \"activeFilters\"\nThe\nchart\nelement gives us high-level information of the chart:\nglimpse(metadata$chart)\n\n#> List of 5\n#>  $ title           : chr \"Average monthly surface temperature\"\n#>  $ subtitle        : chr \"The temperature of the air measured 2 meters above the ground, encompassing land, sea, and in-land water surfaces.\"\n#>  $ citation        : chr \"Contains modified Copernicus Climate Change Service information (2025)\"\n#>  $ originalChartUrl: chr \"https://ourworldindata.org/grapher/average-monthly-surface-temperature?v=1&csvType=full&useColumnShortNames=true\"\n#>  $ selection       : chr \"World\"\nThere’s more information on the dataset in\nmetadata$columns$temperature_2m\nnames(metadata$columns$temperature_2m)\n#>  [1] \"titleShort\"            \"titleLong\"             \"descriptionShort\"      \"descriptionProcessing\" \"shortUnit\"             \"unit\"                 \n#>  [7] \"timespan\"              \"type\"                  \"owidVariableId\"        \"shortName\"             \"lastUpdated\"           \"citationShort\"        \n#> [13] \"citationLong\"          \"fullMetadata\"\n(Why\ntemperature_2m\n? Looking at\nmetadata$columns$temperature_2m$shortName\n, it seems like\ntemperature_2m\nis the short name for the dataset.)\nDownloading the dataset\nHere is code downloading the average monthly surface temperature for just the USA:\n# define the URL and query parameters\nurl <- \"https://ourworldindata.org/grapher/average-monthly-surface-temperature.csv\"\nquery_params <- list(\n  v = \"1\",\n  csvType = \"filtered\",\n  useColumnShortNames = \"true\",\n  tab = \"chart\",\n  country = \"USA\"\n)\n\n# get data\nheaders <- add_headers(`User-Agent` = \"Our World In Data data fetch/1.0\")\nresponse <- GET(url, query = query_params, headers)\ndf <- read_csv(content(response, as = \"text\", encoding = \"UTF-8\"))\n\nhead(df)\n#> # A tibble: 6 × 6\n#>   Entity        Code   year Day        temperature_2m...5 temperature_2m...6\n#>   <chr>         <chr> <dbl> <date>                  <dbl>              <dbl>\n#> 1 United States USA    1941 1941-12-15            -1.88                 8.02\n#> 2 United States USA    1942 1942-01-15            -4.78                 7.85\n#> 3 United States USA    1942 1942-02-15            -3.87                 7.85\n#> 4 United States USA    1942 1942-03-15             0.0978               7.85\n#> 5 United States USA    1942 1942-04-15             7.54                 7.85\n#> 6 United States USA    1942 1942-05-15            12.1                  7.85\nAllen Downey\nnotes that the last column is undocumented, and based on context is probably the average annual temperature.\nHere’s a simple plot of the data:\nplot(df$Day, df$temperature_2m...5, type = \"l\",\n     main = \"USA ave monthly temperature\",\n     xlab = \"Date\", ylab = \"Temperature in C\")\nIf you wanted the entire dataset, just use\ncsvType = \"full\"\nin the request parameters, like so:\n# define the URL and query parameters\nurl <- \"https://ourworldindata.org/grapher/average-monthly-surface-temperature.csv\"\nquery_params <- list(\n  v = \"1\",\n  csvType = \"full\",\n  useColumnShortNames = \"true\",\n  tab = \"chart\"\n)\n\n# same code for the http request works, see above\nHow do you know which filters you can apply? There is no extensive documentation of what filters you can apply, but as you click on the base URL to change the chart, the URL changes. You can then use this to infer the query parameters to add.\nFor example, I clicked around on the chart to get this URL:\nhttps://ourworldindata.org/grapher/average-monthly-surface-temperature?tab=chart&time=2001-05-15..2024-05-15&country=OWID_WRL~THA\n. The code below shows how you can download the data and reproduce the chart:\n# define the URL and query parameters\nurl <- \"https://ourworldindata.org/grapher/average-monthly-surface-temperature.csv\"\nquery_params <- list(\n  v = \"1\",\n  csvType = \"filtered\",\n  useColumnShortNames = \"true\",\n  tab = \"chart\",\n  time = \"2001-05-15..2024-05-15\",\n  country = \"OWID_WRL~THA\"\n)\n\n# get data\nheaders <- add_headers(`User-Agent` = \"Our World In Data data fetch/1.0\")\nresponse <- GET(url, query = query_params, headers)\ndf <- read_csv(content(response, as = \"text\", encoding = \"UTF-8\"))\nggplot(df) +\n  geom_line(aes(x = Day, y = temperature_2m...5, col = Entity)) +\n  labs(title = \"Ave monthly temperature for World & Thailand\",\n       x = \"Date\", y = \"Temperature in C\") +\n  theme_bw() +\n  theme(legend.position = \"bottom\")\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nR – Statistical Odds & Ends\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "I recently learned from Allen Downey’s blog that Our World in Data is providing API access to their data. Our World in Data hosts datasets across several important topics, from population and demographic change, poverty and economic development, to human … Continue reading →",
    "meta_keywords": null,
    "og_description": "I recently learned from Allen Downey’s blog that Our World in Data is providing API access to their data. Our World in Data hosts datasets across several important topics, from population and demographic change, poverty and economic development, to human … Continue reading →",
    "og_image": "https://statisticaloddsandends.wordpress.com/wp-content/uploads/2025/01/temperature_plot.png?w=584",
    "og_title": "Downloading datasets from Our World in Data in R | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 5.1,
    "sitemap_lastmod": null,
    "twitter_description": "I recently learned from Allen Downey’s blog that Our World in Data is providing API access to their data. Our World in Data hosts datasets across several important topics, from population and demographic change, poverty and economic development, to human … Continue reading →",
    "twitter_title": "Downloading datasets from Our World in Data in R | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/01/downloading-datasets-from-our-world-in-data-in-r/",
    "word_count": 1014
  }
}