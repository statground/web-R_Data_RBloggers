{
  "id": "43a2655a55b07de9a6576273bfe68e41ffbd551f",
  "url": "https://www.r-bloggers.com/2023/12/dorling-cartograms/",
  "created_at_utc": "2025-11-17T20:38:58Z",
  "data": null,
  "raw_original": {
    "uuid": "a7abc1d2-dde1-4965-9714-ea54e8a29c3b",
    "created_at": "2025-11-17 20:38:58",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2023/12/dorling-cartograms/",
      "crawled_at": "2025-11-17T09:38:33.721410",
      "external_links": [
        {
          "href": "https://kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/",
          "text": "R on kieranhealy.org"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "https://www.arcgis.com/home/item.html?id=b686a7679cb747e9825d1d1bb6b26046",
          "text": "Dorling Cartogram"
        },
        {
          "href": "https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-bl.png?ssl=1",
          "text": null
        },
        {
          "href": "https://i2.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-nhw.png?ssl=1",
          "text": null
        },
        {
          "href": "https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-asian.png?ssl=1",
          "text": null
        },
        {
          "href": "https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-hs.png?ssl=1",
          "text": null
        },
        {
          "href": "https://kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/",
          "text": "R on kieranhealy.org"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "Dorling Cartograms | R-bloggers",
      "images": [
        {
          "alt": "Dorling cartogram, percent Black by county",
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": "Dorling cartogram, percent Black by county",
          "base64": null,
          "src": "https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-bl.png?w=578&ssl=1"
        },
        {
          "alt": "Dorling cartogram, percent Non-Hispanic White by county",
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": "Dorling cartogram, percent Non-Hispanic White by county",
          "base64": null,
          "src": "https://i2.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-nhw.png?w=578&ssl=1"
        },
        {
          "alt": "Dorling cartogram, percent Asian by county",
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": "Dorling cartogram, percent Asian by county",
          "base64": null,
          "src": "https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-asian.png?w=578&ssl=1"
        },
        {
          "alt": "Dorling cartogram, percent Hispanic by county",
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": "Dorling cartogram, percent Hispanic by county",
          "base64": null,
          "src": "https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-hs.png?w=578&ssl=1"
        }
      ],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/r-on-kieranhealy-org/",
          "text": "R on kieranhealy.org"
        },
        {
          "href": "https://www.r-bloggers.com/category/r-bloggers/",
          "text": "R bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-380679 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Dorling Cartograms</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">December 6, 2023</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/r-on-kieranhealy-org/\">R on kieranhealy.org</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/\"> R on kieranhealy.org</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.9--><p>I was writing some examples for next semester’s dataviz class and shared one of them—a <a href=\"https://www.arcgis.com/home/item.html?id=b686a7679cb747e9825d1d1bb6b26046\" rel=\"nofollow\" target=\"_blank\">Dorling Cartogram</a>—on the socials medias. Some people don’t like cartograms, some people do like cartograms; in conclusion, we live in a world of contrasts.</p>\n<p>Also, some people asked for the code. So here it is, fwiw, after the pictures. These are not the most polished figures, but that is kind of the point, as we go through them in class and <del>indoctrinate students in the inflexible ideology of Cultural Marxism</del> discuss them like reasonable people and so on.</p>\n<figure><a href=\"https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-bl.png?ssl=1\" rel=\"nofollow\" target=\"_blank\">\n<img alt=\"Dorling cartogram, percent Black by county\" data-lazy-src=\"https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-bl.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"Dorling cartogram, percent Black by county\" data-recalc-dims=\"1\" src=\"https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-bl.png?w=578&amp;ssl=1\"/></noscript> </a><figcaption>\n<p>Percent Black by County</p>\n</figcaption>\n</figure>\n<figure><a href=\"https://i2.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-nhw.png?ssl=1\" rel=\"nofollow\" target=\"_blank\">\n<img alt=\"Dorling cartogram, percent Non-Hispanic White by county\" data-lazy-src=\"https://i2.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-nhw.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"Dorling cartogram, percent Non-Hispanic White by county\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-nhw.png?w=578&amp;ssl=1\"/></noscript> </a><figcaption>\n<p>Percent Non-Hispanic White by County</p>\n</figcaption>\n</figure>\n<figure><a href=\"https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-asian.png?ssl=1\" rel=\"nofollow\" target=\"_blank\">\n<img alt=\"Dorling cartogram, percent Asian by county\" data-lazy-src=\"https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-asian.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"Dorling cartogram, percent Asian by county\" data-recalc-dims=\"1\" src=\"https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-asian.png?w=578&amp;ssl=1\"/></noscript> </a><figcaption>\n<p>Percent Asian by County</p>\n</figcaption>\n</figure>\n<figure><a href=\"https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-hs.png?ssl=1\" rel=\"nofollow\" target=\"_blank\">\n<img alt=\"Dorling cartogram, percent Hispanic by county\" data-lazy-src=\"https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-hs.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"Dorling cartogram, percent Hispanic by county\" data-recalc-dims=\"1\" src=\"https://i1.wp.com/kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/dorling-hs.png?w=578&amp;ssl=1\"/></noscript> </a><figcaption>\n<p>Percent Hispanic by County</p>\n</figcaption>\n</figure>\n<p>And the code:</p>\n<div class=\"highlight-wrapper\">\n<div class=\"highlight-before\">r</div>\n<div class=\"highlight\"><div class=\"chroma\">\n<table class=\"lntable\"><tr><td class=\"lntd\">\n<pre>  1\n  2\n  3\n  4\n  5\n  6\n  7\n  8\n  9\n 10\n 11\n 12\n 13\n 14\n 15\n 16\n 17\n 18\n 19\n 20\n 21\n 22\n 23\n 24\n 25\n 26\n 27\n 28\n 29\n 30\n 31\n 32\n 33\n 34\n 35\n 36\n 37\n 38\n 39\n 40\n 41\n 42\n 43\n 44\n 45\n 46\n 47\n 48\n 49\n 50\n 51\n 52\n 53\n 54\n 55\n 56\n 57\n 58\n 59\n 60\n 61\n 62\n 63\n 64\n 65\n 66\n 67\n 68\n 69\n 70\n 71\n 72\n 73\n 74\n 75\n 76\n 77\n 78\n 79\n 80\n 81\n 82\n 83\n 84\n 85\n 86\n 87\n 88\n 89\n 90\n 91\n 92\n 93\n 94\n 95\n 96\n 97\n 98\n 99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n132\n133\n134\n135\n136\n137\n138\n139\n140\n141\n142\n143\n144\n145\n146\n147\n148\n149\n150\n151\n152\n153\n154\n155\n156\n157\n158\n159\n160\n161\n162\n163\n164\n165\n166\n167\n168\n169\n170\n171\n172\n173\n174\n175\n176\n177\n178\n</pre></td>\n<td class=\"lntd\">\n<pre>## Dorling Cartogram example with US Census data\n## Requires you sign up for a free Census API key\n## https://api.census.gov/data/key_signup.html\n##\n\n## Required packages\nlibrary(tidyverse)\nlibrary(tidycensus)\nlibrary(sf)\nlibrary(cartogram)\nlibrary(colorspace)\n\n## Setup\noptions(tigris_use_cache = TRUE)\n\n## Do this\ncensus_api_key(\"YOUR API KEY HERE\")\n## or, to install in your .Rprofile follow the instructions at\n## https://walker-data.com/tidycensus/reference/census_api_key.html\n\npop_names &lt;- tribble(\n  ~varname, ~clean,\n  \"B01003_001\", \"pop\",\n  \"B01001B_001\", \"black\",\n  \"B01001A_001\", \"white\",\n  \"B01001H_001\", \"nh_white\",\n  \"B01001I_001\", \"hispanic\",\n  \"B01001D_001\", \"asian\"\n)\n\n## Get the data\nfips_pop &lt;- get_acs(geography = \"county\",\n                    variables = pop_names$varname,\n                    cache_table = TRUE) |&gt;\n  left_join(pop_names, join_by(variable == varname)) |&gt; \n  mutate(variable = clean) |&gt; \n  select(-clean, -moe) |&gt;\n  pivot_wider(names_from = variable, values_from = estimate) |&gt;\n  rename(fips = GEOID, name = NAME) |&gt;\n  mutate(prop_pop = pop/sum(pop),\n         prop_black = black/pop,\n         prop_hisp = hispanic/pop,\n         prop_white = white/pop,\n         prop_nhwhite = nh_white/pop,\n         prop_asian = asian/pop)\n\nfips_map &lt;- get_acs(geography = \"county\",\n                    variables = \"B01001_001\",\n                    geometry = TRUE,\n                    shift_geo = FALSE,\n                    cache_table = TRUE) |&gt;\n  select(GEOID, NAME, geometry) |&gt;\n  rename(fips = GEOID, name = NAME)\n\n\npop_cat_labels &lt;- c(\"&lt;5\", as.character(seq(10, 95, 5)), \"100\")\n\ncounties_sf &lt;- fips_map |&gt;\n  left_join(fips_pop, by = c(\"fips\", \"name\")) |&gt;\n  mutate(black_disc = cut(prop_black*100,\n                          breaks = seq(0, 100, 5),\n                          labels = pop_cat_labels,\n                          ordered_result = TRUE),\n         hisp_disc = cut(prop_hisp*100,\n                         breaks = seq(0, 100, 5),\n                         labels = pop_cat_labels,\n                         ordered_result = TRUE),\n         nhwhite_disc = cut(prop_nhwhite*100,\n                            breaks = seq(0, 100, 5),\n                            labels = pop_cat_labels,\n                            ordered_result = TRUE),\n         asian_disc = cut(prop_asian*100,\n                          breaks = seq(0, 100, 5),\n                          labels = pop_cat_labels,\n                          ordered_result = TRUE)) |&gt;\n  sf::st_transform(crs = 2163)\n\n\n## Now we have\ncounties_sf\n\n## Create the circle-packed version\n## Be patient\ncounty_dorling &lt;- cartogram_dorling(x = counties_sf,\n                                    weight = \"prop_pop\",\n                                    k = 0.2, itermax = 100)\n\n\n## Now draw the maps\n\n## Black\nout_black &lt;- county_dorling |&gt;\n  filter(!str_detect(name, \"Alaska|Hawaii|Puerto|Guam\")) |&gt;\n  ggplot(aes(fill = black_disc)) +\n  geom_sf(color = \"grey30\", size = 0.1) +\n  coord_sf(crs = 2163, datum = NA) +\n  scale_fill_discrete_sequential(palette = \"YlOrBr\",\n                                 na.translate=FALSE) +\n  guides(fill = guide_legend(title.position = \"top\",\n                             label.position = \"bottom\",\n                             nrow = 1)) +\n  labs(\n    subtitle = \"Bubble size corresponds to County Population\",\n    caption = \"Graph: @kjhealy. Source: Census Bureau / American Community Survey\",\n    fill = \"Percent Black by County\") +\n  theme(legend.position = \"top\",\n        legend.spacing.x = unit(0, \"cm\"),\n        legend.title = element_text(size = rel(1.5), face = \"bold\"),\n        legend.text = element_text(size = rel(0.7)),\n        plot.title = element_text(size = rel(1.4), hjust = 0.15))\n\nggsave(\"figures/dorling-bl.png\", out_black, height = 10, width = 12)\n\n## Hispanic\nout_hispanic &lt;- county_dorling |&gt;\n  filter(!str_detect(name, \"Alaska|Hawaii|Puerto|Guam\")) |&gt;\n  ggplot(aes(fill = hisp_disc)) +\n  geom_sf(color = \"grey30\", size = 0.1) +\n  coord_sf(crs = 2163, datum = NA) +\n  scale_fill_discrete_sequential(palette = \"SunsetDark\", na.translate=FALSE) +\n  guides(fill = guide_legend(title.position = \"top\",\n                             label.position = \"bottom\",\n                             nrow = 1,\n  )) +\n  labs(fill = \"Percent Hispanic by County\",\n       subtitle = \"Bubble size corresponds to County Population\",\n       caption = \"Graph: @kjhealy. Source: Census Bureau / American Community Survey\") +\n  theme(legend.position = \"top\",\n        legend.spacing.x = unit(0, \"cm\"),\n        legend.title = element_text(size = rel(1.5), face = \"bold\"),\n        legend.text = element_text(size = rel(0.7)),\n        plot.title = element_text(size = rel(1.4), hjust = 0.15))\n\nggsave(\"figures/dorling-hs.png\", out_hispanic, height = 10, width = 12)\n\n## NH White\nout_white &lt;- county_dorling |&gt;\n  filter(!str_detect(name, \"Alaska|Hawaii|Puerto|Guam\")) |&gt;\n  ggplot(aes(fill = nhwhite_disc)) +\n  geom_sf(color = \"grey30\", size = 0.1) +\n  coord_sf(crs = 2163, datum = NA) +\n  scale_fill_discrete_sequential(palette = \"BluYl\", na.translate=FALSE) +\n  guides(fill = guide_legend(title.position = \"top\",\n                             label.position = \"bottom\",\n                             nrow = 1,\n  )) +\n  labs(fill = \"Percent Non-Hispanic White by County\",\n       subtitle = \"Bubble size corresponds to County Population\",\n       caption = \"Graph: @kjhealy. Source: Census Bureau / American Community Survey\") +\n  theme(legend.position = \"top\",\n        legend.spacing.x = unit(0, \"cm\"),\n        legend.title = element_text(size = rel(1.5), face = \"bold\"),\n        legend.text = element_text(size = rel(0.7)),\n        plot.title = element_text(size = rel(1.4), hjust = 0.15))\n\nggsave(\"figures/dorling-nhw.png\", out_white, height = 10, width = 12)\n\n## Asian\nout_asian &lt;- county_dorling |&gt;\n  filter(!str_detect(name, \"Alaska|Hawaii|Puerto|Guam\")) |&gt;\n  ggplot(aes(fill = asian_disc)) +\n  geom_sf(color = \"grey30\", size = 0.1) +\n  coord_sf(crs = 2163, datum = NA) +\n  scale_fill_discrete_sequential(palette = \"Purple-Ora\", na.translate=FALSE) +\n  guides(fill = guide_legend(title.position = \"top\",\n                             label.position = \"bottom\",\n                             nrow = 1,\n  )) +\n  labs(fill = \"Percent Asian by County\",\n       subtitle = \"Bubble size corresponds to County Population\",\n       caption = \"Graph: @kjhealy. Source: Census Bureau / American Community Survey\") +\n  theme(legend.position = \"top\",\n        legend.spacing.x = unit(0, \"cm\"),\n        legend.title = element_text(size = rel(1.5), face = \"bold\"),\n        legend.text = element_text(size = rel(0.7)),\n        plot.title = element_text(size = rel(1.4), hjust = 0.15))\n\nggsave(\"figures/dorling-asian.png\", out_asian, height = 10, width = 12)</pre></td></tr></table>\n</div>\n</div>\n</div>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://kieranhealy.org/blog/archives/2023/12/06/dorling-cartograms/\"> R on kieranhealy.org</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div> </div>\n</article>",
      "main_text": "Dorling Cartograms\nPosted on\nDecember 6, 2023\nby\nR on kieranhealy.org\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nR on kieranhealy.org\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nI was writing some examples for next semester’s dataviz class and shared one of them—a\nDorling Cartogram\n—on the socials medias. Some people don’t like cartograms, some people do like cartograms; in conclusion, we live in a world of contrasts.\nAlso, some people asked for the code. So here it is, fwiw, after the pictures. These are not the most polished figures, but that is kind of the point, as we go through them in class and\nindoctrinate students in the inflexible ideology of Cultural Marxism\ndiscuss them like reasonable people and so on.\nPercent Black by County\nPercent Non-Hispanic White by County\nPercent Asian by County\nPercent Hispanic by County\nAnd the code:\nr\n1\n  2\n  3\n  4\n  5\n  6\n  7\n  8\n  9\n 10\n 11\n 12\n 13\n 14\n 15\n 16\n 17\n 18\n 19\n 20\n 21\n 22\n 23\n 24\n 25\n 26\n 27\n 28\n 29\n 30\n 31\n 32\n 33\n 34\n 35\n 36\n 37\n 38\n 39\n 40\n 41\n 42\n 43\n 44\n 45\n 46\n 47\n 48\n 49\n 50\n 51\n 52\n 53\n 54\n 55\n 56\n 57\n 58\n 59\n 60\n 61\n 62\n 63\n 64\n 65\n 66\n 67\n 68\n 69\n 70\n 71\n 72\n 73\n 74\n 75\n 76\n 77\n 78\n 79\n 80\n 81\n 82\n 83\n 84\n 85\n 86\n 87\n 88\n 89\n 90\n 91\n 92\n 93\n 94\n 95\n 96\n 97\n 98\n 99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n132\n133\n134\n135\n136\n137\n138\n139\n140\n141\n142\n143\n144\n145\n146\n147\n148\n149\n150\n151\n152\n153\n154\n155\n156\n157\n158\n159\n160\n161\n162\n163\n164\n165\n166\n167\n168\n169\n170\n171\n172\n173\n174\n175\n176\n177\n178\n## Dorling Cartogram example with US Census data\n## Requires you sign up for a free Census API key\n## https://api.census.gov/data/key_signup.html\n##\n\n## Required packages\nlibrary(tidyverse)\nlibrary(tidycensus)\nlibrary(sf)\nlibrary(cartogram)\nlibrary(colorspace)\n\n## Setup\noptions(tigris_use_cache = TRUE)\n\n## Do this\ncensus_api_key(\"YOUR API KEY HERE\")\n## or, to install in your .Rprofile follow the instructions at\n## https://walker-data.com/tidycensus/reference/census_api_key.html\n\npop_names <- tribble(\n  ~varname, ~clean,\n  \"B01003_001\", \"pop\",\n  \"B01001B_001\", \"black\",\n  \"B01001A_001\", \"white\",\n  \"B01001H_001\", \"nh_white\",\n  \"B01001I_001\", \"hispanic\",\n  \"B01001D_001\", \"asian\"\n)\n\n## Get the data\nfips_pop <- get_acs(geography = \"county\",\n                    variables = pop_names$varname,\n                    cache_table = TRUE) |>\n  left_join(pop_names, join_by(variable == varname)) |> \n  mutate(variable = clean) |> \n  select(-clean, -moe) |>\n  pivot_wider(names_from = variable, values_from = estimate) |>\n  rename(fips = GEOID, name = NAME) |>\n  mutate(prop_pop = pop/sum(pop),\n         prop_black = black/pop,\n         prop_hisp = hispanic/pop,\n         prop_white = white/pop,\n         prop_nhwhite = nh_white/pop,\n         prop_asian = asian/pop)\n\nfips_map <- get_acs(geography = \"county\",\n                    variables = \"B01001_001\",\n                    geometry = TRUE,\n                    shift_geo = FALSE,\n                    cache_table = TRUE) |>\n  select(GEOID, NAME, geometry) |>\n  rename(fips = GEOID, name = NAME)\n\npop_cat_labels <- c(\"<5\", as.character(seq(10, 95, 5)), \"100\")\n\ncounties_sf <- fips_map |>\n  left_join(fips_pop, by = c(\"fips\", \"name\")) |>\n  mutate(black_disc = cut(prop_black*100,\n                          breaks = seq(0, 100, 5),\n                          labels = pop_cat_labels,\n                          ordered_result = TRUE),\n         hisp_disc = cut(prop_hisp*100,\n                         breaks = seq(0, 100, 5),\n                         labels = pop_cat_labels,\n                         ordered_result = TRUE),\n         nhwhite_disc = cut(prop_nhwhite*100,\n                            breaks = seq(0, 100, 5),\n                            labels = pop_cat_labels,\n                            ordered_result = TRUE),\n         asian_disc = cut(prop_asian*100,\n                          breaks = seq(0, 100, 5),\n                          labels = pop_cat_labels,\n                          ordered_result = TRUE)) |>\n  sf::st_transform(crs = 2163)\n\n## Now we have\ncounties_sf\n\n## Create the circle-packed version\n## Be patient\ncounty_dorling <- cartogram_dorling(x = counties_sf,\n                                    weight = \"prop_pop\",\n                                    k = 0.2, itermax = 100)\n\n## Now draw the maps\n\n## Black\nout_black <- county_dorling |>\n  filter(!str_detect(name, \"Alaska|Hawaii|Puerto|Guam\")) |>\n  ggplot(aes(fill = black_disc)) +\n  geom_sf(color = \"grey30\", size = 0.1) +\n  coord_sf(crs = 2163, datum = NA) +\n  scale_fill_discrete_sequential(palette = \"YlOrBr\",\n                                 na.translate=FALSE) +\n  guides(fill = guide_legend(title.position = \"top\",\n                             label.position = \"bottom\",\n                             nrow = 1)) +\n  labs(\n    subtitle = \"Bubble size corresponds to County Population\",\n    caption = \"Graph: @kjhealy. Source: Census Bureau / American Community Survey\",\n    fill = \"Percent Black by County\") +\n  theme(legend.position = \"top\",\n        legend.spacing.x = unit(0, \"cm\"),\n        legend.title = element_text(size = rel(1.5), face = \"bold\"),\n        legend.text = element_text(size = rel(0.7)),\n        plot.title = element_text(size = rel(1.4), hjust = 0.15))\n\nggsave(\"figures/dorling-bl.png\", out_black, height = 10, width = 12)\n\n## Hispanic\nout_hispanic <- county_dorling |>\n  filter(!str_detect(name, \"Alaska|Hawaii|Puerto|Guam\")) |>\n  ggplot(aes(fill = hisp_disc)) +\n  geom_sf(color = \"grey30\", size = 0.1) +\n  coord_sf(crs = 2163, datum = NA) +\n  scale_fill_discrete_sequential(palette = \"SunsetDark\", na.translate=FALSE) +\n  guides(fill = guide_legend(title.position = \"top\",\n                             label.position = \"bottom\",\n                             nrow = 1,\n  )) +\n  labs(fill = \"Percent Hispanic by County\",\n       subtitle = \"Bubble size corresponds to County Population\",\n       caption = \"Graph: @kjhealy. Source: Census Bureau / American Community Survey\") +\n  theme(legend.position = \"top\",\n        legend.spacing.x = unit(0, \"cm\"),\n        legend.title = element_text(size = rel(1.5), face = \"bold\"),\n        legend.text = element_text(size = rel(0.7)),\n        plot.title = element_text(size = rel(1.4), hjust = 0.15))\n\nggsave(\"figures/dorling-hs.png\", out_hispanic, height = 10, width = 12)\n\n## NH White\nout_white <- county_dorling |>\n  filter(!str_detect(name, \"Alaska|Hawaii|Puerto|Guam\")) |>\n  ggplot(aes(fill = nhwhite_disc)) +\n  geom_sf(color = \"grey30\", size = 0.1) +\n  coord_sf(crs = 2163, datum = NA) +\n  scale_fill_discrete_sequential(palette = \"BluYl\", na.translate=FALSE) +\n  guides(fill = guide_legend(title.position = \"top\",\n                             label.position = \"bottom\",\n                             nrow = 1,\n  )) +\n  labs(fill = \"Percent Non-Hispanic White by County\",\n       subtitle = \"Bubble size corresponds to County Population\",\n       caption = \"Graph: @kjhealy. Source: Census Bureau / American Community Survey\") +\n  theme(legend.position = \"top\",\n        legend.spacing.x = unit(0, \"cm\"),\n        legend.title = element_text(size = rel(1.5), face = \"bold\"),\n        legend.text = element_text(size = rel(0.7)),\n        plot.title = element_text(size = rel(1.4), hjust = 0.15))\n\nggsave(\"figures/dorling-nhw.png\", out_white, height = 10, width = 12)\n\n## Asian\nout_asian <- county_dorling |>\n  filter(!str_detect(name, \"Alaska|Hawaii|Puerto|Guam\")) |>\n  ggplot(aes(fill = asian_disc)) +\n  geom_sf(color = \"grey30\", size = 0.1) +\n  coord_sf(crs = 2163, datum = NA) +\n  scale_fill_discrete_sequential(palette = \"Purple-Ora\", na.translate=FALSE) +\n  guides(fill = guide_legend(title.position = \"top\",\n                             label.position = \"bottom\",\n                             nrow = 1,\n  )) +\n  labs(fill = \"Percent Asian by County\",\n       subtitle = \"Bubble size corresponds to County Population\",\n       caption = \"Graph: @kjhealy. Source: Census Bureau / American Community Survey\") +\n  theme(legend.position = \"top\",\n        legend.spacing.x = unit(0, \"cm\"),\n        legend.title = element_text(size = rel(1.5), face = \"bold\"),\n        legend.text = element_text(size = rel(0.7)),\n        plot.title = element_text(size = rel(1.4), hjust = 0.15))\n\nggsave(\"figures/dorling-asian.png\", out_asian, height = 10, width = 12)\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nR on kieranhealy.org\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "I was writing some examples for next semester’s dataviz class and shared one of them—a Dorling Cartogram—on the socials medias. Some people don’t like cartograms, some people do like cartograms; in conclusion, we live in a world...",
      "meta_keywords": null,
      "og_description": "I was writing some examples for next semester’s dataviz class and shared one of them—a Dorling Cartogram—on the socials medias. Some people don’t like cartograms, some people do like cartograms; in conclusion, we live in a world...",
      "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
      "og_title": "Dorling Cartograms | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 5.7,
      "sitemap_lastmod": "2023-12-06T23:40:38+00:00",
      "twitter_description": "I was writing some examples for next semester’s dataviz class and shared one of them—a Dorling Cartogram—on the socials medias. Some people don’t like cartograms, some people do like cartograms; in conclusion, we live in a world...",
      "twitter_title": "Dorling Cartograms | R-bloggers",
      "url": "https://www.r-bloggers.com/2023/12/dorling-cartograms/",
      "word_count": 1139
    }
  }
}