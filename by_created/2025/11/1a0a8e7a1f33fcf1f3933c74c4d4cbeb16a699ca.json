{
  "id": "1a0a8e7a1f33fcf1f3933c74c4d4cbeb16a699ca",
  "url": "https://www.r-bloggers.com/2025/01/r-for-seo-part-8-apply-methods-in-r/",
  "created_at_utc": "2025-11-22T19:59:26Z",
  "data": null,
  "raw_original": {
    "uuid": "ac7a38c9-a289-458b-83de-dbb1b0f8389e",
    "created_at": "2025-11-22 19:59:26",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2025/01/r-for-seo-part-8-apply-methods-in-r/",
      "crawled_at": "2025-11-22T10:55:32.053710",
      "external_links": [
        {
          "href": "https://www.ben-johnston.co.uk/r-for-seo-part-8-apply-methods-in-r/",
          "text": "R | Ben Johnston"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "https://www.ben-johnston.co.uk/r-for-seo-part-8-apply-methods-in-r/",
          "text": "R For SEO Part 8: Apply Methods in R"
        },
        {
          "href": "https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/whatsapp?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/copy_link?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/x?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/bluesky?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/share#url=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&%23038;title=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.ben-johnston.co.uk/category/r/r-seo/",
          "text": "R for SEO"
        },
        {
          "href": "https://www.ben-johnston.co.uk/r-for-seo-part-7-loops/",
          "text": "loops"
        },
        {
          "href": "https://www.ben-johnston.co.uk/r-for-seo-part-6-using-apis-in-r/",
          "text": "APIs in R"
        },
        {
          "href": "https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/apply",
          "text": "basic R apply method"
        },
        {
          "href": "https://www.ben-johnston.co.uk/r-for-seo-part-2-packages-google-analytics-search-console/",
          "text": "Google Search Console"
        },
        {
          "href": "https://www.ben-johnston.co.uk/r-for-seo-part-2-packages-google-analytics-search-console/",
          "text": "part 2"
        },
        {
          "href": "https://www.ben-johnston.co.uk/r-for-seo-part-1-basics/",
          "text": "part 1"
        },
        {
          "href": "https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/lapply",
          "text": "Lapply"
        },
        {
          "href": "https://r-coder.com/sapply-function-r/",
          "text": "Sapply"
        },
        {
          "href": "https://www.statology.org/r-mapply/",
          "text": "Mapply"
        },
        {
          "href": "https://www.ben-johnston.co.uk/category/r/r-seo/",
          "text": "R for SEO"
        },
        {
          "href": "https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/whatsapp?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/copy_link?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/x?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/add_to/bluesky?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.addtoany.com/share#url=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&%23038;title=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R",
          "text": null
        },
        {
          "href": "https://www.ben-johnston.co.uk/",
          "text": "Ben Johnston"
        },
        {
          "href": "https://www.ben-johnston.co.uk/r-for-seo-part-8-apply-methods-in-r/",
          "text": "R | Ben Johnston"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "R For SEO Part 8: Apply Methods in R | R-bloggers",
      "images": [
        {
          "alt": "kwCount in R",
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": "kwCount in R",
          "base64": null,
          "src": "https://i2.wp.com/www.ben-johnston.co.uk/wp-content/uploads/2024/08/Screenshot-2024-08-19-164822.png?resize=99%2C41&ssl=1"
        }
      ],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/ben-johnston/",
          "text": "Ben Johnston"
        },
        {
          "href": "https://www.r-bloggers.com/category/r-bloggers/",
          "text": "R bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-389983 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">R For SEO Part 8: Apply Methods in R</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">January 20, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/ben-johnston/\">Ben Johnston</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://www.ben-johnston.co.uk/r-for-seo-part-8-apply-methods-in-r/\"> R | Ben Johnston</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47--><p><a href=\"https://www.ben-johnston.co.uk/r-for-seo-part-8-apply-methods-in-r/\" rel=\"nofollow\" target=\"_blank\">R For SEO Part 8: Apply Methods in R</a></p>\n<p><a class=\"a2a_button_linkedin\" href=\"https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"LinkedIn\"></a><a class=\"a2a_button_whatsapp\" href=\"https://www.addtoany.com/add_to/whatsapp?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"WhatsApp\"></a><a class=\"a2a_button_email\" href=\"https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Email\"></a><a class=\"a2a_button_copy_link\" href=\"https://www.addtoany.com/add_to/copy_link?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Copy Link\"></a><a class=\"a2a_button_x\" href=\"https://www.addtoany.com/add_to/x?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"X\"></a><a class=\"a2a_button_reddit\" href=\"https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Reddit\"></a><a class=\"a2a_button_facebook\" href=\"https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Facebook\"></a><a class=\"a2a_button_bluesky\" href=\"https://www.addtoany.com/add_to/bluesky?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Bluesky\"></a><a class=\"a2a_dd addtoany_share_save addtoany_share\" data-a2a-title=\"R For SEO Part 8: Apply Methods in R\" data-a2a-url=\"https://www.ben-johnston.co.uk/r-for-seo-part-8-apply-methods-in-r/\" href=\"https://www.addtoany.com/share#url=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;%23038;title=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\"></a></p>\n<p>Welcome back again. Now we’re at part eight of my series on <a href=\"https://www.ben-johnston.co.uk/category/r/r-seo/\" rel=\"nofollow\" target=\"_blank\">R for SEO</a> and we’ve been on quite a journey so far, haven’t we? What was originally meant to take me eight weeks has taken several years! Between a pandemic, several jobs, two house-moves, some big shakeups in my personal life and a lot of changes in the marketing ecosystem, it’s been a <em>lot</em>. But today, we’re in the home stretch and we’ll be talking about using the apply family in R.</p>\n<p>Applys are a more “R-centric” way of running functions across a range of data. They’re not entirely dissimilar to <a href=\"https://www.ben-johnston.co.uk/r-for-seo-part-7-loops/\" rel=\"nofollow\" target=\"_blank\">loops</a>, but tend to be a more efficient way to write them and they do come with additional functionality which can be very useful in a number of situations.</p>\n<p>You’ll have seen some of them being used already through this series, particularly when we talked about using <a href=\"https://www.ben-johnston.co.uk/r-for-seo-part-6-using-apis-in-r/\" rel=\"nofollow\" target=\"_blank\">APIs in R</a>. So let’s take a look at the components of the apply family and what they can be used for.</p>\n<p>As always, this is quite a long piece, so do feel free to skip around using the table of contents below and please do sign up for my email list to keep up to date when I publish new content.</p>\n<!-- Mailchimp for WordPress v4.9.21 - https://wordpress.org/plugins/mailchimp-for-wp/ --><form class=\"mc4wp-form mc4wp-form-3535\" data-id=\"3535\" data-name=\"Signup Now\" id=\"mc4wp-form-1\" method=\"post\"><div class=\"mc4wp-form-fields\"><p>\n<input name=\"EMAIL\" placeholder=\"Your email address\" required=\"\" type=\"email\"/>\n</p>\n<p>\n<input type=\"submit\" value=\"Sign up\"/>\n</p></div><label style=\"display: none !important;\">Leave this field empty if you’re human: <input autocomplete=\"off\" name=\"_mc4wp_honeypot\" tabindex=\"-1\" type=\"text\" value=\"\"/></label><input name=\"_mc4wp_timestamp\" type=\"hidden\" value=\"1737380190\"/><input name=\"_mc4wp_form_id\" type=\"hidden\" value=\"3535\"/><input name=\"_mc4wp_form_element_id\" type=\"hidden\" value=\"mc4wp-form-1\"/><div class=\"mc4wp-response\"></div></form><!-- / Mailchimp for WordPress Plugin -->\n<p></p>\n<h2 class=\"wp-block-heading\">What Are Apply Commands In R?</h2>\n<p>R’s apply family essentially allows you to apply a command or function across a range of data. The clue’s in the name, right? While not dissimilar to a loop in concept, there are a number of differences that do often make them a better or simpler choice.</p>\n<p>As with loops, there are a few different variations that we can use. Let’s look at what they are before we get started on how we can use these different R apply methods in SEO work.</p>\n<h3 class=\"wp-block-heading\">The Different Kinds Of Apply Methods In R</h3>\n<p>There are four key applies in the apply family</p>\n<ul class=\"wp-block-list\">\n<li><strong>Apply:</strong> The most basic one. Apply runs across a column in a matrix or dataframe. I generally use this when I want to find the maximum or minimum value of a column or if I’m trying to find the number of times a term is mentioned in a text corpus</li>\n<li><strong>Lapply:</strong> You’ll have seen me use this a couple of times throughout this series and, truthfully, it’s the one I use the most. Lapply applies a function across a list or vector and is great for using functions and API calls</li>\n<li><strong>Sapply:</strong> Similar to lapply, and another one I use quite a bit. Sapply means “simple apply” and tries to simplify the output compared to lapply</li>\n<li><strong>Mapply: </strong>Mapply means “map apply” and is great when you need to use your apply method across multiple datasets or elements</li>\n</ul>\n<p>So now we know what they are, let’s look at how to <em>apply</em> (Ha! I’m a comedic genius!) these to SEO work.</p>\n<h2 class=\"wp-block-heading\">Using R’s Apply Method To Count Keywords On Google Search Console Data</h2>\n<p>The easiest way to show the difference between loops and applys is probably to replicate our loops from the last piece using the different apply methods.</p>\n<p>To use the <a href=\"https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/apply\" rel=\"nofollow\" target=\"_blank\">basic R apply method</a>, let’s rework what we did with our first for loop to count the number of keywords that have 20 or more impressions from our <a data-wpil-monitor-id=\"222\" href=\"https://www.ben-johnston.co.uk/r-for-seo-part-2-packages-google-analytics-search-console/\" rel=\"nofollow\" target=\"_blank\">Google Search Console</a> dataset – you can follow the steps from <a href=\"https://www.ben-johnston.co.uk/r-for-seo-part-2-packages-google-analytics-search-console/\" rel=\"nofollow\" target=\"_blank\">part 2</a> to get that data, or just export from Google Search Console and import it using the read.csv function from <a href=\"https://www.ben-johnston.co.uk/r-for-seo-part-1-basics/\" rel=\"nofollow\" target=\"_blank\">part 1</a>.</p>\n<p>Assuming you’ve named your dataframe gsc, use the following command:</p>\n<pre>kwCount &lt;- sum(apply(gsc[\"Impressions\"], 1, function(x) x &gt;= 20))</pre>\n<p>Now if we investigate our kwCount object in the console, using</p>\n<pre>kwCount</pre>\n<p>We should see the following – your data will be different, and probably much higher than mine.</p>\n<figure class=\"wp-block-image size-full\"><img alt=\"kwCount in R\" class=\"wp-image-3399\" data-lazy-src=\"https://i2.wp.com/www.ben-johnston.co.uk/wp-content/uploads/2024/08/Screenshot-2024-08-19-164822.png?resize=99%2C41&amp;ssl=1\" data-recalc-dims=\"1\" decoding=\"async\" height=\"41\" loading=\"lazy\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" width=\"99\"/><noscript><img alt=\"kwCount in R\" class=\"wp-image-3399\" data-recalc-dims=\"1\" decoding=\"async\" height=\"41\" loading=\"lazy\" src=\"https://i2.wp.com/www.ben-johnston.co.uk/wp-content/uploads/2024/08/Screenshot-2024-08-19-164822.png?resize=99%2C41&amp;ssl=1\" width=\"99\"/></noscript></figure>\n<p>But we did that in one line, compared to the multiple lines of the loop we’d previously used, didn’t we?</p>\n<p>As always, let’s break it down.</p>\n<h3 class=\"wp-block-heading\">Our Apply Command Broken Down</h3>\n<p>Our apply command did what the loop achieved in one line rather than five. That’s interesting. Let’s see how it works.</p>\n<ul class=\"wp-block-list\">\n<li><strong>kwCount &lt;-:</strong> As with all the commands we’ve used throughout the series, we’ve named our object and used &lt;- to tell R we want to keep it and use this particular name</li>\n<li><strong>sum(apply:</strong> We’re invoking the sum command that we’re well familiar with, and then we use apply to apply it to each row or column in our dataset</li>\n<li><strong>gsc[“Impressions”],:</strong> This tells R that we want to use this on our gsc dataset and that we want to focus on the Impressions column</li>\n<li><strong>1:</strong> The number 1 specifies that we want to use this on rows. If we wanted it to be across columns, we’d use 2</li>\n<li><strong>function(x) x &gt;= 20)):</strong> Finally, we’re using a very simple function that we’re applying across the rows to see if the value is greater than or equal to 20</li>\n</ul>\n<p>Pretty handy, right? It gives the same output as our first loop from part 7, but a lot quicker and more efficiently.</p>\n<p>Now let’s take a look at lapply.</p>\n<h2 class=\"wp-block-heading\">Using R’s Lapply On A List or Dataframe</h2>\n<p><a href=\"https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/lapply\" rel=\"nofollow\" target=\"_blank\">Lapply</a> is one of R’s more popular apply methods and one that I use much more heavily than the regular apply command. Lapply runs across a list or vector and is particularly good for using across multiple API calls or URLs, which is naturally, very handy for SEO analysis.</p>\n<p>Let’s take a look at how we can use lapply to replicate our “list” loop from part 7, where we use it to subset our Google Search Console dataset to show data for keywords with 20 or more impressions.</p>\n<p>Again, obviously, we’d use subset from part 1 for this most of the time, but it’s a good first example for using lapply.</p>\n<pre>kw20 &lt;- reduce(lapply(seq_along(gsc$Impressions), function(x) if (gsc$Impressions[x] &gt;= 20) gsc[x, ] else NULL), bind_rows)</pre>\n<p>Here, we’re using the reduce function from the tidyverse to cover do.call(rbind in less code.</p>\n<p>This will give you a dataframe called kw20 which only includes keywords, impressions, clicks and CTR where the impressions are 20 or more.</p>\n<p>Run that in your console and now, as always, let’s break it down.</p>\n<h3 class=\"wp-block-heading\">Our Lapply Command Broken Down</h3>\n<p>Again, we’ve replicated our loop in a smaller amount of code using an apply method – lapply in this case – than we used with the loop.</p>\n<p>Hopefully you’re starting to see the power of the apply family for writing less code but getting the same results. We’ve trimmed it down even further by using the Tidyverse’s reduce function. You’re probably seeing why I never start R without the Tidyverse.</p>\n<p>Let’s take a look at how it works:</p>\n<ul class=\"wp-block-list\">\n<li><strong>kw20 &lt;- reduce(lapply(:</strong> We’re creating an object called kw20 and invoking the Tidyverse’s reduce command before calling lapply. Reduce allows us to bind the output for each row into our output</li>\n<li><strong>seq_along(gsc$Impressions:</strong> As with our previous loop, we’re using seq_along on the Impressions column of our gsc dataset to apply our function across every row</li>\n<li><strong>function(x):</strong> We’re creating our very simple function with the variable x, similar to how we’ve done all the way through this series</li>\n<li><strong>if (gsc$Impressions[x] &gt;= 20) gsc[x, ] else NULL),:</strong> If you cast your mind back to part 5 where we talked about if statements in R, this won’t be too unfamiliar. Our function is a very simple if statement, where we’re seeing if our Impressions value in the specific row of the apply is greater than or equal to 20. If it’s not, the else is returning NULL, which means nothing</li>\n<li><strong>bind_rows):</strong> Finally, we’re using dplyr from the Tidyverse’s bind_rows command to add the column values to the next row in our output dataset</li>\n</ul>\n<p>So there we have it – a really simple lapply command to run a simple function across multiple rows of a dataset.</p>\n<p>Now let’s look at sapply and how it’s similar, but also a little different.</p>\n<h2 class=\"wp-block-heading\">Using R’s Sapply On A List or Dataframe</h2>\n<p><a href=\"https://r-coder.com/sapply-function-r/\" rel=\"nofollow\" target=\"_blank\">Sapply</a> – meaning “Simple apply” can work very similarly to lapply in a lot of instances, but it is focused on simplifying the output into a dataframe or vector, rather than a list. I find that when I use reduce and bind_rows from the Tidyverse, I get better results from lapply than sapply.</p>\n<p>Either way, let’s run through how we can do the same command that we just did on lapply using sapply instead.</p>\n<pre>kw20 &lt;- reduce(sapply(seq_along(gsc$Impressions), \n                                function(x) if (gsc$Impressions[x] &gt;= 20) gsc[x, ], \n                                simplify = FALSE), bind_rows)</pre>\n<p>If this runs the way it should, it’ll give you the same output in kw20 as the lapply command did, but there are some differences in the command that we want to look at.</p>\n<h3 class=\"wp-block-heading\">Our Sapply Command</h3>\n<p>As you’ll see from looking at the code, the command we’ve used here is pretty much exactly the same as out lapply command, with one key difference – we have the following parameter in there:</p>\n<pre>simplify = FALSE</pre>\n<p>Since the core tenet of sapply is to “simply” apply, it tries to simplify outputs to a dataframe. Since we’re already working with a dataframe, we can use simplify = FALSE here, as we don’t need it.</p>\n<p>However, if you’re trying to coerce a list or matrix into something a bit easier to work with, sapply is a great choice. I find myself mostly using it when I’m working across JSON outputs, but for this example, you can see that it works quite nicely in the same way our lapply method did.</p>\n<p>I’m sure you’re seeing plenty of ways that R’s apply family can be used for SEO by now. Let’s take a look at the most complex of the apply methods now – the powerful mapply().</p>\n<h2 class=\"wp-block-heading\">Using R’s Mapply Method</h2>\n<p><a href=\"https://www.statology.org/r-mapply/\" rel=\"nofollow\" target=\"_blank\">Mapply</a> allows you to run apply commands across multiple dataframe elements or vectors and is really handy when you need to do this. It’s a very powerful function and allows you to do some very complex analysis work with very little code. Let’s use a very simple example to identify a difference in our click through rates against a target, using our Google Search Console data.</p>\n<p>Firstly, if you’ve imported your Google Search Console dataset from a CSV export rather than using the API, you’ll need to do a little preparation to remove the percentage character, set the column as a number and divide it by 100. This simple function below will do that:<br/></p>\n<pre>ctrCleanup &lt;- function(x){\n  \n  x &lt;- gsub(\"%\", \"\", x)\n  \n  x &lt;- as.numeric(x) \n  \n  x &lt;- x/100\n  \n}</pre>\n<p>You’ll have seen all of this throughout the series, but let’s break it down anyway:</p>\n<ul class=\"wp-block-list\">\n<li><strong>ctrCleanup &lt;- function(x){:</strong> Our function is called ctrCleanup (catchy, right?) and has an x variable</li>\n<li><strong>x &lt;- gsub(“%”, “”, x):</strong> On x, (our CTR column), we’re running gsub to find and replace the % character with nothing. Removing it, effectively</li>\n<li><strong>x &lt;- as.numeric(x):</strong> Now we’re setting that column as a number rather than the character it was previously since we’ve removed the % character</li>\n<li><strong>x &lt;- x/100:</strong> Finally, we’re dividing it by 100 so we can get our percentage as a decimal</li>\n</ul>\n<p>Run this in your console with the following command:</p>\n<pre>gsc$CTR &lt;- ctrCleanup(gsc$CTR)</pre>\n<p>and you’ll have your CTR column as decimals, ready to work with our mapply command.</p>\n<p>Now we want to define our target CTR. Let’s take 5%.</p>\n<pre>targetCTR &lt;- 0.05</pre>\n<p>Now we’re prepared, let’s run our mapply command.</p>\n<pre>gsc$ctrDiff &lt;- mapply(function(x, y) abs(x - y), gsc$CTR, targetCTR)</pre>\n<p>This will create a new column in our dataset called ctrDiff with the difference between our actual click through rate and our target.</p>\n<h3 class=\"wp-block-heading\">Our Mapply Command Broken Down</h3>\n<p>As always, let’s break it down:</p>\n<ul class=\"wp-block-list\">\n<li><strong>gsc$ctrDiff &lt;- mapply(:</strong> We’re creating a new column called ctrDiff in our gsc dataframe and using mapply to run our function</li>\n<li><strong>function(x, y) abs(x – y): </strong>Our function uses x and y parameters (our two data elements) and uses abs to find the absolute difference between them</li>\n<li><strong>gsc$CTR, targetCTR): </strong>Finally, we’re defining our x and y variables – our actual click through rate from Google Search Console and our target CTR</li>\n</ul>\n<p>Running this will create a new column in gsc and will give you the difference by query from your target CTR. Hopefully it’ll give you some idea of where you need to work on with your SEO efforts. Or maybe not, but at least it gives you an idea of how mapply works!</p>\n<p>So that’s the basics of how the different apply methods in R can work. There’s a common thread to the anatomy of them, isn’t there?</p>\n<p>Let’s look at that now.</p>\n<h2 class=\"wp-block-heading\">The Anatomy of R’s Apply Methods</h2>\n<p>In general, the apply family has a common thread of how they work – a common anatomy. You’ll find yourself working around this as you go further in your R journey, but you’ll generally look at it like so:</p>\n<pre>dataframe &lt;- applyMethod(data, function, extra parameters)</pre>\n<p>It seems a little backwards, doesn’t it? Usually we call our function before the data. Truthfully, I don’t fully know why it’s done this way, but I suspect it’s to do with the fact that we’re defining the data to apply the function to before we start actually applying it. All programming languages have these fun little elements to them, and I think this is one of R’s.</p>\n<p>I think this might actually be the shortest of the posts I’ve written in this series, but don’t let that be an indication of the power of R’s apply family – they are absolutely vital in R programming and an essential element in using <a class=\"wpil_keyword_link\" data-wpil-keyword-link=\"linked\" data-wpil-monitor-id=\"219\" href=\"https://www.ben-johnston.co.uk/category/r/r-seo/\" rel=\"nofollow\" target=\"_blank\" title=\"R for SEO\">R for SEO</a>.</p>\n<p>Until next time, where we’ll be talking about web scraping in R.</p>\n<h3 class=\"wp-block-heading\">Our Code From Today</h3>\n<pre># Install Packages\n\ninstall.packages(\"tidyverse\")\n\nlibrary(tidyverse)\n\n# Read In Data\n\ngsc &lt;- read.csv(\"Queries.csv\", stringsAsFactors = FALSE)\n\n# Apply Methods\n\n## Apply()\n\nkwCount &lt;- sum(apply(gsc[\"Impressions\"], 1, function(x) x &gt;= 20))\n\n## Lapply()\n\nkw20 &lt;- reduce(lapply(seq_along(gsc$Impressions), function(x) if \n                      (gsc$Impressions[x] &gt;= 20) gsc[x, ] else NULL), bind_rows)\n\n## Sapply()\n\nkw20 &lt;- reduce(sapply(seq_along(gsc$Impressions), \n                                function(x) if (gsc$Impressions[x] &gt;= 20) gsc[x, ], \n                                simplify = FALSE), bind_rows)\n\n## Mapply\n\nctrCleanup &lt;- function(x){\n  \n  x &lt;- gsub(\"%\", \"\", x)\n  \n  x &lt;- as.numeric(x) \n  \n  x &lt;- x/100\n  \n}\n\ngsc$CTR &lt;- ctrCleanup(gsc$CTR)\n\ntargetCTR &lt;- 0.05 \n\ngsc$ctrDiff &lt;- mapply(function(x, y) abs(x - y), gsc$CTR, targetCTR)</pre>\n<p><a class=\"a2a_button_linkedin\" href=\"https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"LinkedIn\"></a><a class=\"a2a_button_whatsapp\" href=\"https://www.addtoany.com/add_to/whatsapp?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"WhatsApp\"></a><a class=\"a2a_button_email\" href=\"https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Email\"></a><a class=\"a2a_button_copy_link\" href=\"https://www.addtoany.com/add_to/copy_link?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Copy Link\"></a><a class=\"a2a_button_x\" href=\"https://www.addtoany.com/add_to/x?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"X\"></a><a class=\"a2a_button_reddit\" href=\"https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Reddit\"></a><a class=\"a2a_button_facebook\" href=\"https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Facebook\"></a><a class=\"a2a_button_bluesky\" href=\"https://www.addtoany.com/add_to/bluesky?linkurl=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;linkname=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\" title=\"Bluesky\"></a><a class=\"a2a_dd addtoany_share_save addtoany_share\" data-a2a-title=\"R For SEO Part 8: Apply Methods in R\" data-a2a-url=\"https://www.ben-johnston.co.uk/r-for-seo-part-8-apply-methods-in-r/\" href=\"https://www.addtoany.com/share#url=https%3A%2F%2Fwww.ben-johnston.co.uk%2Fr-for-seo-part-8-apply-methods-in-r%2F&amp;%23038;title=R%20For%20SEO%20Part%208%3A%20Apply%20Methods%20in%20R\" rel=\"nofollow\" target=\"_blank\"></a></p><p>This post was written by Ben Johnston on <a href=\"https://www.ben-johnston.co.uk/\" rel=\"nofollow\" target=\"_blank\">Ben Johnston</a></p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://www.ben-johnston.co.uk/r-for-seo-part-8-apply-methods-in-r/\"> R | Ben Johnston</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
      "main_text": "R For SEO Part 8: Apply Methods in R\nPosted on\nJanuary 20, 2025\nby\nBen Johnston\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nR | Ben Johnston\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nR For SEO Part 8: Apply Methods in R\nWelcome back again. Now we’re at part eight of my series on\nR for SEO\nand we’ve been on quite a journey so far, haven’t we? What was originally meant to take me eight weeks has taken several years! Between a pandemic, several jobs, two house-moves, some big shakeups in my personal life and a lot of changes in the marketing ecosystem, it’s been a\nlot\n. But today, we’re in the home stretch and we’ll be talking about using the apply family in R.\nApplys are a more “R-centric” way of running functions across a range of data. They’re not entirely dissimilar to\nloops\n, but tend to be a more efficient way to write them and they do come with additional functionality which can be very useful in a number of situations.\nYou’ll have seen some of them being used already through this series, particularly when we talked about using\nAPIs in R\n. So let’s take a look at the components of the apply family and what they can be used for.\nAs always, this is quite a long piece, so do feel free to skip around using the table of contents below and please do sign up for my email list to keep up to date when I publish new content.\nLeave this field empty if you’re human:\nWhat Are Apply Commands In R?\nR’s apply family essentially allows you to apply a command or function across a range of data. The clue’s in the name, right? While not dissimilar to a loop in concept, there are a number of differences that do often make them a better or simpler choice.\nAs with loops, there are a few different variations that we can use. Let’s look at what they are before we get started on how we can use these different R apply methods in SEO work.\nThe Different Kinds Of Apply Methods In R\nThere are four key applies in the apply family\nApply:\nThe most basic one. Apply runs across a column in a matrix or dataframe. I generally use this when I want to find the maximum or minimum value of a column or if I’m trying to find the number of times a term is mentioned in a text corpus\nLapply:\nYou’ll have seen me use this a couple of times throughout this series and, truthfully, it’s the one I use the most. Lapply applies a function across a list or vector and is great for using functions and API calls\nSapply:\nSimilar to lapply, and another one I use quite a bit. Sapply means “simple apply” and tries to simplify the output compared to lapply\nMapply:\nMapply means “map apply” and is great when you need to use your apply method across multiple datasets or elements\nSo now we know what they are, let’s look at how to\napply\n(Ha! I’m a comedic genius!) these to SEO work.\nUsing R’s Apply Method To Count Keywords On Google Search Console Data\nThe easiest way to show the difference between loops and applys is probably to replicate our loops from the last piece using the different apply methods.\nTo use the\nbasic R apply method\n, let’s rework what we did with our first for loop to count the number of keywords that have 20 or more impressions from our\nGoogle Search Console\ndataset – you can follow the steps from\npart 2\nto get that data, or just export from Google Search Console and import it using the read.csv function from\npart 1\n.\nAssuming you’ve named your dataframe gsc, use the following command:\nkwCount <- sum(apply(gsc[\"Impressions\"], 1, function(x) x >= 20))\nNow if we investigate our kwCount object in the console, using\nkwCount\nWe should see the following – your data will be different, and probably much higher than mine.\nBut we did that in one line, compared to the multiple lines of the loop we’d previously used, didn’t we?\nAs always, let’s break it down.\nOur Apply Command Broken Down\nOur apply command did what the loop achieved in one line rather than five. That’s interesting. Let’s see how it works.\nkwCount <-:\nAs with all the commands we’ve used throughout the series, we’ve named our object and used <- to tell R we want to keep it and use this particular name\nsum(apply:\nWe’re invoking the sum command that we’re well familiar with, and then we use apply to apply it to each row or column in our dataset\ngsc[“Impressions”],:\nThis tells R that we want to use this on our gsc dataset and that we want to focus on the Impressions column\n1:\nThe number 1 specifies that we want to use this on rows. If we wanted it to be across columns, we’d use 2\nfunction(x) x >= 20)):\nFinally, we’re using a very simple function that we’re applying across the rows to see if the value is greater than or equal to 20\nPretty handy, right? It gives the same output as our first loop from part 7, but a lot quicker and more efficiently.\nNow let’s take a look at lapply.\nUsing R’s Lapply On A List or Dataframe\nLapply\nis one of R’s more popular apply methods and one that I use much more heavily than the regular apply command. Lapply runs across a list or vector and is particularly good for using across multiple API calls or URLs, which is naturally, very handy for SEO analysis.\nLet’s take a look at how we can use lapply to replicate our “list” loop from part 7, where we use it to subset our Google Search Console dataset to show data for keywords with 20 or more impressions.\nAgain, obviously, we’d use subset from part 1 for this most of the time, but it’s a good first example for using lapply.\nkw20 <- reduce(lapply(seq_along(gsc$Impressions), function(x) if (gsc$Impressions[x] >= 20) gsc[x, ] else NULL), bind_rows)\nHere, we’re using the reduce function from the tidyverse to cover do.call(rbind in less code.\nThis will give you a dataframe called kw20 which only includes keywords, impressions, clicks and CTR where the impressions are 20 or more.\nRun that in your console and now, as always, let’s break it down.\nOur Lapply Command Broken Down\nAgain, we’ve replicated our loop in a smaller amount of code using an apply method – lapply in this case – than we used with the loop.\nHopefully you’re starting to see the power of the apply family for writing less code but getting the same results. We’ve trimmed it down even further by using the Tidyverse’s reduce function. You’re probably seeing why I never start R without the Tidyverse.\nLet’s take a look at how it works:\nkw20 <- reduce(lapply(:\nWe’re creating an object called kw20 and invoking the Tidyverse’s reduce command before calling lapply. Reduce allows us to bind the output for each row into our output\nseq_along(gsc$Impressions:\nAs with our previous loop, we’re using seq_along on the Impressions column of our gsc dataset to apply our function across every row\nfunction(x):\nWe’re creating our very simple function with the variable x, similar to how we’ve done all the way through this series\nif (gsc$Impressions[x] >= 20) gsc[x, ] else NULL),:\nIf you cast your mind back to part 5 where we talked about if statements in R, this won’t be too unfamiliar. Our function is a very simple if statement, where we’re seeing if our Impressions value in the specific row of the apply is greater than or equal to 20. If it’s not, the else is returning NULL, which means nothing\nbind_rows):\nFinally, we’re using dplyr from the Tidyverse’s bind_rows command to add the column values to the next row in our output dataset\nSo there we have it – a really simple lapply command to run a simple function across multiple rows of a dataset.\nNow let’s look at sapply and how it’s similar, but also a little different.\nUsing R’s Sapply On A List or Dataframe\nSapply\n– meaning “Simple apply” can work very similarly to lapply in a lot of instances, but it is focused on simplifying the output into a dataframe or vector, rather than a list. I find that when I use reduce and bind_rows from the Tidyverse, I get better results from lapply than sapply.\nEither way, let’s run through how we can do the same command that we just did on lapply using sapply instead.\nkw20 <- reduce(sapply(seq_along(gsc$Impressions), \n                                function(x) if (gsc$Impressions[x] >= 20) gsc[x, ], \n                                simplify = FALSE), bind_rows)\nIf this runs the way it should, it’ll give you the same output in kw20 as the lapply command did, but there are some differences in the command that we want to look at.\nOur Sapply Command\nAs you’ll see from looking at the code, the command we’ve used here is pretty much exactly the same as out lapply command, with one key difference – we have the following parameter in there:\nsimplify = FALSE\nSince the core tenet of sapply is to “simply” apply, it tries to simplify outputs to a dataframe. Since we’re already working with a dataframe, we can use simplify = FALSE here, as we don’t need it.\nHowever, if you’re trying to coerce a list or matrix into something a bit easier to work with, sapply is a great choice. I find myself mostly using it when I’m working across JSON outputs, but for this example, you can see that it works quite nicely in the same way our lapply method did.\nI’m sure you’re seeing plenty of ways that R’s apply family can be used for SEO by now. Let’s take a look at the most complex of the apply methods now – the powerful mapply().\nUsing R’s Mapply Method\nMapply\nallows you to run apply commands across multiple dataframe elements or vectors and is really handy when you need to do this. It’s a very powerful function and allows you to do some very complex analysis work with very little code. Let’s use a very simple example to identify a difference in our click through rates against a target, using our Google Search Console data.\nFirstly, if you’ve imported your Google Search Console dataset from a CSV export rather than using the API, you’ll need to do a little preparation to remove the percentage character, set the column as a number and divide it by 100. This simple function below will do that:\nctrCleanup <- function(x){\n  \n  x <- gsub(\"%\", \"\", x)\n  \n  x <- as.numeric(x) \n  \n  x <- x/100\n  \n}\nYou’ll have seen all of this throughout the series, but let’s break it down anyway:\nctrCleanup <- function(x){:\nOur function is called ctrCleanup (catchy, right?) and has an x variable\nx <- gsub(“%”, “”, x):\nOn x, (our CTR column), we’re running gsub to find and replace the % character with nothing. Removing it, effectively\nx <- as.numeric(x):\nNow we’re setting that column as a number rather than the character it was previously since we’ve removed the % character\nx <- x/100:\nFinally, we’re dividing it by 100 so we can get our percentage as a decimal\nRun this in your console with the following command:\ngsc$CTR <- ctrCleanup(gsc$CTR)\nand you’ll have your CTR column as decimals, ready to work with our mapply command.\nNow we want to define our target CTR. Let’s take 5%.\ntargetCTR <- 0.05\nNow we’re prepared, let’s run our mapply command.\ngsc$ctrDiff <- mapply(function(x, y) abs(x - y), gsc$CTR, targetCTR)\nThis will create a new column in our dataset called ctrDiff with the difference between our actual click through rate and our target.\nOur Mapply Command Broken Down\nAs always, let’s break it down:\ngsc$ctrDiff <- mapply(:\nWe’re creating a new column called ctrDiff in our gsc dataframe and using mapply to run our function\nfunction(x, y) abs(x – y):\nOur function uses x and y parameters (our two data elements) and uses abs to find the absolute difference between them\ngsc$CTR, targetCTR):\nFinally, we’re defining our x and y variables – our actual click through rate from Google Search Console and our target CTR\nRunning this will create a new column in gsc and will give you the difference by query from your target CTR. Hopefully it’ll give you some idea of where you need to work on with your SEO efforts. Or maybe not, but at least it gives you an idea of how mapply works!\nSo that’s the basics of how the different apply methods in R can work. There’s a common thread to the anatomy of them, isn’t there?\nLet’s look at that now.\nThe Anatomy of R’s Apply Methods\nIn general, the apply family has a common thread of how they work – a common anatomy. You’ll find yourself working around this as you go further in your R journey, but you’ll generally look at it like so:\ndataframe <- applyMethod(data, function, extra parameters)\nIt seems a little backwards, doesn’t it? Usually we call our function before the data. Truthfully, I don’t fully know why it’s done this way, but I suspect it’s to do with the fact that we’re defining the data to apply the function to before we start actually applying it. All programming languages have these fun little elements to them, and I think this is one of R’s.\nI think this might actually be the shortest of the posts I’ve written in this series, but don’t let that be an indication of the power of R’s apply family – they are absolutely vital in R programming and an essential element in using\nR for SEO\n.\nUntil next time, where we’ll be talking about web scraping in R.\nOur Code From Today\n# Install Packages\n\ninstall.packages(\"tidyverse\")\n\nlibrary(tidyverse)\n\n# Read In Data\n\ngsc <- read.csv(\"Queries.csv\", stringsAsFactors = FALSE)\n\n# Apply Methods\n\n## Apply()\n\nkwCount <- sum(apply(gsc[\"Impressions\"], 1, function(x) x >= 20))\n\n## Lapply()\n\nkw20 <- reduce(lapply(seq_along(gsc$Impressions), function(x) if \n                      (gsc$Impressions[x] >= 20) gsc[x, ] else NULL), bind_rows)\n\n## Sapply()\n\nkw20 <- reduce(sapply(seq_along(gsc$Impressions), \n                                function(x) if (gsc$Impressions[x] >= 20) gsc[x, ], \n                                simplify = FALSE), bind_rows)\n\n## Mapply\n\nctrCleanup <- function(x){\n  \n  x <- gsub(\"%\", \"\", x)\n  \n  x <- as.numeric(x) \n  \n  x <- x/100\n  \n}\n\ngsc$CTR <- ctrCleanup(gsc$CTR)\n\ntargetCTR <- 0.05 \n\ngsc$ctrDiff <- mapply(function(x, y) abs(x - y), gsc$CTR, targetCTR)\nThis post was written by Ben Johnston on\nBen Johnston\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nR | Ben Johnston\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "R For SEO Part 8: Apply Methods in R Welcome back again. Now we’re at part eight of my series on R for SEO and we’ve been on quite a journey... This post was written by Ben Johnston on Ben Johnston",
      "meta_keywords": null,
      "og_description": "R For SEO Part 8: Apply Methods in R Welcome back again. Now we’re at part eight of my series on R for SEO and we’ve been on quite a journey... This post was written by Ben Johnston on Ben Johnston",
      "og_image": "https://www.ben-johnston.co.uk/wp-content/uploads/2024/08/Screenshot-2024-08-19-164822.png",
      "og_title": "R For SEO Part 8: Apply Methods in R | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 13.3,
      "sitemap_lastmod": null,
      "twitter_description": "R For SEO Part 8: Apply Methods in R Welcome back again. Now we’re at part eight of my series on R for SEO and we’ve been on quite a journey... This post was written by Ben Johnston on Ben Johnston",
      "twitter_title": "R For SEO Part 8: Apply Methods in R | R-bloggers",
      "url": "https://www.r-bloggers.com/2025/01/r-for-seo-part-8-apply-methods-in-r/",
      "word_count": 2662
    }
  }
}