{
  "id": "337e909c2df59651536665b7c3247e3d84452199",
  "url": "https://www.r-bloggers.com/2023/11/cliff-notes-about-the-cli-package/",
  "created_at_utc": "2025-11-17T20:39:04Z",
  "data": null,
  "raw_original": {
    "uuid": "dc56137b-85d7-4ea8-848f-7d6a305d50cf",
    "created_at": "2025-11-17 20:39:04",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2023/11/cliff-notes-about-the-cli-package/",
      "crawled_at": "2025-11-17T09:44:35.236408",
      "external_links": [
        {
          "href": "https://blog.r-hub.io/2023/11/30/cliff-notes-about-cli/",
          "text": "Posts on R-hub blog"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "https://cli.r-lib.org/",
          "text": "cli"
        },
        {
          "href": "https://github.com/r-lib/usethis/pull/1423/files",
          "text": "tidyverse capsule wardrobe"
        },
        {
          "href": "https://www.tidyverse.org/blog/2023/06/spring-cleaning-2023/",
          "text": "upkeep"
        },
        {
          "href": "https://cli.r-lib.org/articles/usethis-ui.html",
          "text": "cli article on the topic"
        },
        {
          "href": "https://cli.r-lib.org/reference/index.html#semantic-cli-elements",
          "text": "semantic elements"
        },
        {
          "href": "https://cli.r-lib.org/reference/inline-markup.html#classes",
          "text": "full list of classes"
        },
        {
          "href": "https://github.com/jonthegeek",
          "text": "Jon Harmon"
        },
        {
          "href": "https://cli.r-lib.org/reference/inline-markup.html#escaping-and-",
          "text": "double them to escape them"
        },
        {
          "href": "https://cli.r-lib.org/reference/pluralization.html",
          "text": "pluralization"
        },
        {
          "href": "https://michaelchirico.github.io/potools/articles/translators.html#plurals",
          "text": "more complex forms of pluralization"
        },
        {
          "href": "https://mastodon.social/@jennybryan@fosstodon.org/110675320334403080",
          "text": "assumes"
        },
        {
          "href": "https://github.com/tidyverse/googlesheets4/blob/fdb187643b324cd607f71cefa133bf49924f6e49/R/utils-ui.R#L1-L16",
          "text": "googlesheets4"
        },
        {
          "href": "https://mastodon.social/@mccarthymg@fosstodon.org/110673498809652527",
          "text": "recommends"
        },
        {
          "href": "https://cli.r-lib.org/articles/cli-config-user.html?q=no#no_color",
          "text": "nocolor standard"
        },
        {
          "href": "https://design.tidyverse.org/spooky-action.html?q=cli#advertise-the-side-effects",
          "text": "tidy design guide"
        },
        {
          "href": "https://pak.r-lib.org/",
          "text": "pak"
        },
        {
          "href": "https://cli.r-lib.org/articles/progress.html",
          "text": "documents how to create them in two articles"
        },
        {
          "href": "https://cli.r-lib.org/articles/progress-advanced.html#non-interactive-r-sessions",
          "text": "article about advanced progress bar topics"
        },
        {
          "href": "https://cli.r-lib.org/reference/cli_abort.html",
          "text": "cli::cli_abort()"
        },
        {
          "href": "https://rdrr.io/r/base/stop.html",
          "text": "stop()"
        },
        {
          "href": "https://style.tidyverse.org/error-messages.html",
          "text": "tidyverse style guide"
        },
        {
          "href": "https://cli.r-lib.org/reference/cli_alert.html",
          "text": "cli::cli_alert()"
        },
        {
          "href": "https://cli.r-lib.org/reference/cli_abort.html",
          "text": "cli::cli_warn()"
        },
        {
          "href": "https://cli.r-lib.org/articles/semantic-cli.html#cli-messages",
          "text": "docs"
        },
        {
          "href": "https://github.com/ropensci/dev_guide/issues/603",
          "text": "discussion"
        },
        {
          "href": "https://rlang.r-lib.org/reference/is_interactive.html",
          "text": "rlang::is_interactive()"
        },
        {
          "href": "https://testthat.r-lib.org/articles/snapshotting.html",
          "text": "snapshot tests"
        },
        {
          "href": "https://cli.r-lib.org/reference/test_that_cli.html",
          "text": "cli::test_that_cli()"
        },
        {
          "href": "https://blog.r-hub.io/2023/11/30/cliff-notes-about-cli/",
          "text": "Posts on R-hub blog"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "Cliff notes about the cli package | R-bloggers",
      "images": [],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/posts-on-r-hub-blog/",
          "text": "Posts on R-hub blog"
        },
        {
          "href": "https://www.r-bloggers.com/category/r-bloggers/",
          "text": "R bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/cdn-cgi/l/email-protection",
          "text": "[email protected]"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-380417 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Cliff notes about the cli package</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">November 29, 2023</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/posts-on-r-hub-blog/\">Posts on R-hub blog</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://blog.r-hub.io/2023/11/30/cliff-notes-about-cli/\"> Posts on R-hub blog</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.9--><p>We’ve both coincidentally dipped our toes in the wonderful world of pretty messaging with <a href=\"https://cli.r-lib.org/\" rel=\"nofollow\" target=\"_blank\">cli</a>.</p>\n<div class=\"highlight\">\n<pre>cli::cli_alert_success(\"marvellous package adopted!\")\n#&gt; ✔ marvellous package adopted!\n</pre>\n</div>\n<p>In this post, we transform the hurdles we encountered in a series of tips so that your own journey might be slightly smoother, and also to encourage you to try out cli in your package!</p>\n<h2 id=\"cli-is-the-thing-for-package-interfaces-now\">cli is the thing for package interfaces now!</h2>\n<p>You can view cli as a domain-specific language (DSL) for command-line interfaces (CLI): Just like tidyverse makes your data pipelines easier to construct and more readable, cli makes your communication producing code simpler to write.</p>\n<p>cli deals with pesky details and we package developers only need to use the high-level interface. Mo has previously got lost in the rabbit hole of making prettier outputs, and thinks noone else should ever have to do that! As an example, text is automatically wrapped to the terminal width.</p>\n<p>cli is truly feature-rich, for instance allowing you to make URLs in messages clickable and code in messages runnable at a click!</p>\n<p>cli is part of the <a href=\"https://github.com/r-lib/usethis/pull/1423/files\" rel=\"nofollow\" target=\"_blank\">tidyverse capsule wardrobe</a>, which shows how important it’s becoming, near other important tools such as withr and rlang.</p>\n<h3 id=\"what-if-you-were-making-pretty-interfaces-with-usethis\">What if you were making pretty interfaces with usethis?</h3>\n<p>Is your package using <code>usethis::ui_</code> functions? If you have time for a bit of <a href=\"https://www.tidyverse.org/blog/2023/06/spring-cleaning-2023/\" rel=\"nofollow\" target=\"_blank\">upkeep</a>, you can do the switch from that to cli by reading and following the <a href=\"https://cli.r-lib.org/articles/usethis-ui.html\" rel=\"nofollow\" target=\"_blank\">cli article on the topic</a>. Do not discover this article <em>well after</em> starting a transition, cough (that’s what happened to Maëlle).</p>\n<h2 id=\"cli-formatting-all-the-curly-braces\">cli formatting: all the curly braces</h2>\n<p>You’ll probably end up calling various cli functions whose names start with <code>cli_</code> to create <a href=\"https://cli.r-lib.org/reference/index.html#semantic-cli-elements\" rel=\"nofollow\" target=\"_blank\">semantic elements</a>: headers, lists, alerts, etc. What do they expect as inputs?</p>\n<p>cli has a glue-like syntax: if there’s an object called say <code>thing</code> and you want to use it in a message, you use <code>{thing}</code>.</p>\n<div class=\"highlight\">\n<pre>thing &lt;- \"a string\"\ncli::cli_li(\"Hey you provided this text: {thing}!\")\n#&gt; • Hey you provided this text: a string!\n</pre>\n</div>\n<p>Then, you can use classes in messages. Classes, like classes in CSS, help format the elements. For instance if <code>thing</code> is a variable, we write:</p>\n<div class=\"highlight\">\n<pre>thing &lt;- \"a string\"\ncli::cli_li(\"Hey you provided this text: {thing} ({.var thing})!\")\n#&gt; • Hey you provided this text: a string (`thing`)!\n</pre>\n</div>\n<p>Curly braces can be nested if you are using a class and glue-like syntax at the same time:</p>\n<div class=\"highlight\">\n<pre>variable_name &lt;- \"blop\"\ncli::cli_li(\"Hey you entered {.var {variable_name}}!\")\n#&gt; • Hey you entered `blop`!\n</pre>\n</div>\n<p>See the <a href=\"https://cli.r-lib.org/reference/inline-markup.html#classes\" rel=\"nofollow\" target=\"_blank\">full list of classes</a> in cli docs. To mention only a few of them (you might notice clickability is a star here…if the terminal supports ANSI hyperlinks to runnable code (for instance, RStudio IDE)):</p>\n<ul>\n<li><code>.run</code> means that the code in the message will be clickable! Best code hints ever!</li>\n<li><code>.help</code> will have a clickable link to a help topic.</li>\n<li><code>.file</code> will have a clickable link to a file.</li>\n<li><code>.obj_type_friendly</code>, for instance <code>{.obj_type_friendly {mtcars}}</code>, prints the object type in, well, a friendly way (thanks to <a href=\"https://github.com/jonthegeek\" rel=\"nofollow\" target=\"_blank\">Jon Harmon</a> for reminding us about this one).</li>\n</ul>\n<p>It’s well worth going through the list of classes at least once.</p>\n<h3 id=\"what-if-my-string-contains-curly-braces\">What if my string contains curly braces?</h3>\n<p>If you want to actually communicate something with curly braces, you’ll need to <a href=\"https://cli.r-lib.org/reference/inline-markup.html#escaping-and-\" rel=\"nofollow\" target=\"_blank\">double them to escape them</a>.</p>\n<h3 id=\"what-about-plural\">What about plural?</h3>\n<p>cli has support for <a href=\"https://cli.r-lib.org/reference/pluralization.html\" rel=\"nofollow\" target=\"_blank\">pluralization</a> (presumably only for 0/1/more than one, not for <a href=\"https://michaelchirico.github.io/potools/articles/translators.html#plurals\" rel=\"nofollow\" target=\"_blank\">more complex forms of pluralization</a>).</p>\n<h3 id=\"how-to-add-a-custom-class--theme\">How to add a custom class / theme</h3>\n<p>How to define a custom class or theme seems to be a bit under-documented at the moment, which is unsurprising as it’s an advanced topic. Jenny Bryan <a href=\"https://mastodon.social/@jennybryan@fosstodon.org/110675320334403080\" rel=\"nofollow\" target=\"_blank\">assumes</a> adding a custom class needs to happen as part of a theme, which she does in <a href=\"https://github.com/tidyverse/googlesheets4/blob/fdb187643b324cd607f71cefa133bf49924f6e49/R/utils-ui.R#L1-L16\" rel=\"nofollow\" target=\"_blank\">googlesheets4</a>. Michael McCarthy <a href=\"https://mastodon.social/@mccarthymg@fosstodon.org/110673498809652527\" rel=\"nofollow\" target=\"_blank\">recommends</a> looking at what cli itself does.</p>\n<h3 id=\"what-about-dark-themes\">What about dark themes?</h3>\n<p>Together, we cover both sides of having dark (Mo) and light (Maëlle) themes in RStudio. It would be easy to assume that this all would not work well on dark theme, but Mo can tell you that it all works seamlessly. The output colors change to be dark friendly! For that reason, user-overrides of colors can be a tricky thing, as you are no longer relying on the excellent tooling of cli to make sure this works in both light and dark mode.</p>\n<p>An user can define their own themes, for instance putting this in their profile to make variables underlined:</p>\n<div class=\"highlight\">\n<pre># This goes in your .Rprofile \noptions(cli.user_theme = list(.var = list(\"text-decoration\" = \"underline\")))\n\n# not needed if the previous line is in your .Rprofile \n# we do this here to expose the effect in this post directly\ncli::start_app() \n\n# Code is underlined!\ncli::cli_text(\"Don't call a variable {.var variable}!\")</pre>\n</div>\n<h3 id=\"how-to-turn-off-colors\">How to turn off colors</h3>\n<p>cli respects the <a href=\"https://cli.r-lib.org/articles/cli-config-user.html?q=no#no_color\" rel=\"nofollow\" target=\"_blank\">nocolor standard</a>, therefore an user can set the environment variable <code>NO_COLOR</code> to any string in order to not get colored output.</p>\n<h2 id=\"cli-for-expressing-what\">cli for expressing what?</h2>\n<h3 id=\"advertise-side-effects\">Advertise side effects</h3>\n<p>One of the things the <code>usethis::</code> functions do so well, it be very verbose of that they are doing.</p>\n<div class=\"highlight\">\n<pre>pkg_dir &lt;- withr::local_tempdir()\nusethis::create_package(pkg_dir, open = FALSE)\n#&gt; ✔ Setting active project to '/tmp/RtmpQikF8J/file44957fa1fa7c'\n#&gt; ✔ Creating 'R/'\n#&gt; ✔ Writing 'DESCRIPTION'\n#&gt; Package: file44957fa1fa7c\n#&gt; Title: What the Package Does (One Line, Title Case)\n#&gt; Version: 0.0.0.9000\n#&gt; Authors@R (parsed):\n#&gt;     * Maëlle Salmon &lt;<a class=\"__cf_email__\" data-cfemail=\"caa7b9a7abafa6a6afb9aba6a7a5a48aada7aba3a6e4a9a5a7\" href=\"/cdn-cgi/l/email-protection\">[email protected]</a>&gt; [cre, aut] (&lt;https://orcid.org/0000-0002-2815-0399&gt;)\n#&gt; Description: What the package does (one paragraph).\n#&gt; License: MIT + file LICENSE\n#&gt; Encoding: UTF-8\n#&gt; Roxygen: list(markdown = TRUE)\n#&gt; RoxygenNote: 7.2.3\n#&gt; ✔ Writing 'NAMESPACE'\n#&gt; ✔ Setting active project to '&lt;no active project&gt;'\n</pre>\n</div>\n<p>This is great information so the user can build an understanding of what a function they ran actually does. This is particularly important for functions that do something with a users settings or file system in some persistent way, as it makes it possible to back-track what has been done and alter it at need. See the the <a href=\"https://design.tidyverse.org/spooky-action.html?q=cli#advertise-the-side-effects\" rel=\"nofollow\" target=\"_blank\">tidy design guide</a> for more information on this subject.</p>\n<h3 id=\"progress\">Progress</h3>\n<p>As seen when installing packages with <a href=\"https://pak.r-lib.org/\" rel=\"nofollow\" target=\"_blank\">pak</a>! Not only does cli support progress bars, it <a href=\"https://cli.r-lib.org/articles/progress.html\" rel=\"nofollow\" target=\"_blank\">documents how to create them in two articles</a>!</p>\n<h4 id=\"how-does-it-look-in-logfiles\">How does it look in logfiles?</h4>\n<p>It’s likely not what you are after for a logfile, as each new update will create another line. The cli output in non-interactive sessions or to file is discussed in the <a href=\"https://cli.r-lib.org/articles/progress-advanced.html#non-interactive-r-sessions\" rel=\"nofollow\" target=\"_blank\">article about advanced progress bar topics</a>.</p>\n<h3 id=\"error-messages\">Error messages</h3>\n<p>You can use <a href=\"https://cli.r-lib.org/reference/cli_abort.html\" rel=\"nofollow\" target=\"_blank\"><code>cli::cli_abort()</code></a> instead of <a href=\"https://rdrr.io/r/base/stop.html\" rel=\"nofollow\" target=\"_blank\"><code>stop()</code></a> for errors, as recommended by the <a href=\"https://style.tidyverse.org/error-messages.html\" rel=\"nofollow\" target=\"_blank\">tidyverse style guide</a>. Note that using this function necessitates your package importing rlang. A neat thing about this (and companions <a href=\"https://cli.r-lib.org/reference/cli_alert.html\" rel=\"nofollow\" target=\"_blank\"><code>cli::cli_alert()</code></a> and <a href=\"https://cli.r-lib.org/reference/cli_abort.html\" rel=\"nofollow\" target=\"_blank\"><code>cli::cli_warn()</code></a>), is that you can construct very complex messages through syntax seen throughout the cli package. For instance, providing a vector of text will create multi-line messages, and giving the elements specific names can turn them into list types.</p>\n<div class=\"highlight\">\n<pre>cli::cli_abort(\n  c(\n    \"This is a complex error message.\",\n    \"The input is missing important things:\",\n    \"*\" = \"important thing 1\", # bullet point\n    \"*\" = \"important thing 2\", # bullet point\n    \"To learn more about these see the {.url www.online.docs}\"\n  )\n)\n#&gt; Error:\n#&gt; ! This is a complex error message.\n#&gt; The input is missing important things:\n#&gt; • important thing 1\n#&gt; • important thing 2\n#&gt; To learn more about these see the &lt;www.online.docs&gt;\n</pre>\n</div>\n<h2 id=\"how-to-make-cli-quiet-or-not\">How to make cli quiet or not</h2>\n<p>You can choose to silence/shush/muffle cli messages!</p>\n<p>For cli functions whose name starts with <code>cli_</code>, see the <a href=\"https://cli.r-lib.org/articles/semantic-cli.html#cli-messages\" rel=\"nofollow\" target=\"_blank\">docs</a>.</p>\n<p>Let’s try an example.</p>\n<div class=\"highlight\">\n<pre>cli::cli_li(\"hello\")\n#&gt; • hello\nrlang::local_options(cli.default_handler = function(msg) invisible(NULL))\ncli::cli_li(\"hello\")</pre>\n</div>\n<p>This can be useful in tests for instance! Who wants to be looking at a wall of cli output when debugging one’s tests.</p>\n<p>For other functions, probably write your own wrapper and make it responsive to an option (rather than arguments in all functions, see <a href=\"https://github.com/ropensci/dev_guide/issues/603\" rel=\"nofollow\" target=\"_blank\">discussion</a>), like what happens in usethis with the <code>usethis.quiet</code> option.</p>\n<p>Speaking of options, let’s remind you about <a href=\"https://rlang.r-lib.org/reference/is_interactive.html\" rel=\"nofollow\" target=\"_blank\"><code>rlang::is_interactive()</code></a> whose output is controllable via the <code>rlang_interactive</code> global option.</p>\n<h3 id=\"how-to-test-cli-output\">How to test cli output</h3>\n<p>You should probably look into <a href=\"https://testthat.r-lib.org/articles/snapshotting.html\" rel=\"nofollow\" target=\"_blank\">snapshot tests</a>, maybe in combination with <a href=\"https://cli.r-lib.org/reference/test_that_cli.html\" rel=\"nofollow\" target=\"_blank\"><code>cli::test_that_cli()</code></a>.</p>\n<h2 id=\"conclusion\">Conclusion</h2>\n<p>In this post we presented what we know about cli: in short, it’s a fantastic package for building informative and pretty command-line interfaces, and its docs are extensive!</p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://blog.r-hub.io/2023/11/30/cliff-notes-about-cli/\"> Posts on R-hub blog</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div> </div>\n</article>",
      "main_text": "Cliff notes about the cli package\nPosted on\nNovember 29, 2023\nby\nPosts on R-hub blog\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nPosts on R-hub blog\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nWe’ve both coincidentally dipped our toes in the wonderful world of pretty messaging with\ncli\n.\ncli::cli_alert_success(\"marvellous package adopted!\")\n#> ✔ marvellous package adopted!\nIn this post, we transform the hurdles we encountered in a series of tips so that your own journey might be slightly smoother, and also to encourage you to try out cli in your package!\ncli is the thing for package interfaces now!\nYou can view cli as a domain-specific language (DSL) for command-line interfaces (CLI): Just like tidyverse makes your data pipelines easier to construct and more readable, cli makes your communication producing code simpler to write.\ncli deals with pesky details and we package developers only need to use the high-level interface. Mo has previously got lost in the rabbit hole of making prettier outputs, and thinks noone else should ever have to do that! As an example, text is automatically wrapped to the terminal width.\ncli is truly feature-rich, for instance allowing you to make URLs in messages clickable and code in messages runnable at a click!\ncli is part of the\ntidyverse capsule wardrobe\n, which shows how important it’s becoming, near other important tools such as withr and rlang.\nWhat if you were making pretty interfaces with usethis?\nIs your package using\nusethis::ui_\nfunctions? If you have time for a bit of\nupkeep\n, you can do the switch from that to cli by reading and following the\ncli article on the topic\n. Do not discover this article\nwell after\nstarting a transition, cough (that’s what happened to Maëlle).\ncli formatting: all the curly braces\nYou’ll probably end up calling various cli functions whose names start with\ncli_\nto create\nsemantic elements\n: headers, lists, alerts, etc. What do they expect as inputs?\ncli has a glue-like syntax: if there’s an object called say\nthing\nand you want to use it in a message, you use\n{thing}\n.\nthing <- \"a string\"\ncli::cli_li(\"Hey you provided this text: {thing}!\")\n#> • Hey you provided this text: a string!\nThen, you can use classes in messages. Classes, like classes in CSS, help format the elements. For instance if\nthing\nis a variable, we write:\nthing <- \"a string\"\ncli::cli_li(\"Hey you provided this text: {thing} ({.var thing})!\")\n#> • Hey you provided this text: a string (`thing`)!\nCurly braces can be nested if you are using a class and glue-like syntax at the same time:\nvariable_name <- \"blop\"\ncli::cli_li(\"Hey you entered {.var {variable_name}}!\")\n#> • Hey you entered `blop`!\nSee the\nfull list of classes\nin cli docs. To mention only a few of them (you might notice clickability is a star here…if the terminal supports ANSI hyperlinks to runnable code (for instance, RStudio IDE)):\n.run\nmeans that the code in the message will be clickable! Best code hints ever!\n.help\nwill have a clickable link to a help topic.\n.file\nwill have a clickable link to a file.\n.obj_type_friendly\n, for instance\n{.obj_type_friendly {mtcars}}\n, prints the object type in, well, a friendly way (thanks to\nJon Harmon\nfor reminding us about this one).\nIt’s well worth going through the list of classes at least once.\nWhat if my string contains curly braces?\nIf you want to actually communicate something with curly braces, you’ll need to\ndouble them to escape them\n.\nWhat about plural?\ncli has support for\npluralization\n(presumably only for 0/1/more than one, not for\nmore complex forms of pluralization\n).\nHow to add a custom class / theme\nHow to define a custom class or theme seems to be a bit under-documented at the moment, which is unsurprising as it’s an advanced topic. Jenny Bryan\nassumes\nadding a custom class needs to happen as part of a theme, which she does in\ngooglesheets4\n. Michael McCarthy\nrecommends\nlooking at what cli itself does.\nWhat about dark themes?\nTogether, we cover both sides of having dark (Mo) and light (Maëlle) themes in RStudio. It would be easy to assume that this all would not work well on dark theme, but Mo can tell you that it all works seamlessly. The output colors change to be dark friendly! For that reason, user-overrides of colors can be a tricky thing, as you are no longer relying on the excellent tooling of cli to make sure this works in both light and dark mode.\nAn user can define their own themes, for instance putting this in their profile to make variables underlined:\n# This goes in your .Rprofile \noptions(cli.user_theme = list(.var = list(\"text-decoration\" = \"underline\")))\n\n# not needed if the previous line is in your .Rprofile \n# we do this here to expose the effect in this post directly\ncli::start_app() \n\n# Code is underlined!\ncli::cli_text(\"Don't call a variable {.var variable}!\")\nHow to turn off colors\ncli respects the\nnocolor standard\n, therefore an user can set the environment variable\nNO_COLOR\nto any string in order to not get colored output.\ncli for expressing what?\nAdvertise side effects\nOne of the things the\nusethis::\nfunctions do so well, it be very verbose of that they are doing.\npkg_dir <- withr::local_tempdir()\nusethis::create_package(pkg_dir, open = FALSE)\n#> ✔ Setting active project to '/tmp/RtmpQikF8J/file44957fa1fa7c'\n#> ✔ Creating 'R/'\n#> ✔ Writing 'DESCRIPTION'\n#> Package: file44957fa1fa7c\n#> Title: What the Package Does (One Line, Title Case)\n#> Version: 0.0.0.9000\n#> Authors@R (parsed):\n#>     * Maëlle Salmon <\n[email protected]\n> [cre, aut] (<https://orcid.org/0000-0002-2815-0399>)\n#> Description: What the package does (one paragraph).\n#> License: MIT + file LICENSE\n#> Encoding: UTF-8\n#> Roxygen: list(markdown = TRUE)\n#> RoxygenNote: 7.2.3\n#> ✔ Writing 'NAMESPACE'\n#> ✔ Setting active project to '<no active project>'\nThis is great information so the user can build an understanding of what a function they ran actually does. This is particularly important for functions that do something with a users settings or file system in some persistent way, as it makes it possible to back-track what has been done and alter it at need. See the the\ntidy design guide\nfor more information on this subject.\nProgress\nAs seen when installing packages with\npak\n! Not only does cli support progress bars, it\ndocuments how to create them in two articles\n!\nHow does it look in logfiles?\nIt’s likely not what you are after for a logfile, as each new update will create another line. The cli output in non-interactive sessions or to file is discussed in the\narticle about advanced progress bar topics\n.\nError messages\nYou can use\ncli::cli_abort()\ninstead of\nstop()\nfor errors, as recommended by the\ntidyverse style guide\n. Note that using this function necessitates your package importing rlang. A neat thing about this (and companions\ncli::cli_alert()\nand\ncli::cli_warn()\n), is that you can construct very complex messages through syntax seen throughout the cli package. For instance, providing a vector of text will create multi-line messages, and giving the elements specific names can turn them into list types.\ncli::cli_abort(\n  c(\n    \"This is a complex error message.\",\n    \"The input is missing important things:\",\n    \"*\" = \"important thing 1\", # bullet point\n    \"*\" = \"important thing 2\", # bullet point\n    \"To learn more about these see the {.url www.online.docs}\"\n  )\n)\n#> Error:\n#> ! This is a complex error message.\n#> The input is missing important things:\n#> • important thing 1\n#> • important thing 2\n#> To learn more about these see the <www.online.docs>\nHow to make cli quiet or not\nYou can choose to silence/shush/muffle cli messages!\nFor cli functions whose name starts with\ncli_\n, see the\ndocs\n.\nLet’s try an example.\ncli::cli_li(\"hello\")\n#> • hello\nrlang::local_options(cli.default_handler = function(msg) invisible(NULL))\ncli::cli_li(\"hello\")\nThis can be useful in tests for instance! Who wants to be looking at a wall of cli output when debugging one’s tests.\nFor other functions, probably write your own wrapper and make it responsive to an option (rather than arguments in all functions, see\ndiscussion\n), like what happens in usethis with the\nusethis.quiet\noption.\nSpeaking of options, let’s remind you about\nrlang::is_interactive()\nwhose output is controllable via the\nrlang_interactive\nglobal option.\nHow to test cli output\nYou should probably look into\nsnapshot tests\n, maybe in combination with\ncli::test_that_cli()\n.\nConclusion\nIn this post we presented what we know about cli: in short, it’s a fantastic package for building informative and pretty command-line interfaces, and its docs are extensive!\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nPosts on R-hub blog\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "We’ve both coincidentally dipped our toes in the wonderful world of pretty messaging with cli. cli::cli_alert_success(\"marvellous package adopted!\") #> ✔ marvellous package adopted! In this post, we transform the hurdles we encountered in a...",
      "meta_keywords": null,
      "og_description": "We’ve both coincidentally dipped our toes in the wonderful world of pretty messaging with cli. cli::cli_alert_success(\"marvellous package adopted!\") #> ✔ marvellous package adopted! In this post, we transform the hurdles we encountered in a...",
      "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
      "og_title": "Cliff notes about the cli package | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 7.7,
      "sitemap_lastmod": "2023-11-30T00:00:00+00:00",
      "twitter_description": "We’ve both coincidentally dipped our toes in the wonderful world of pretty messaging with cli. cli::cli_alert_success(\"marvellous package adopted!\") #> ✔ marvellous package adopted! In this post, we transform the hurdles we encountered in a...",
      "twitter_title": "Cliff notes about the cli package | R-bloggers",
      "url": "https://www.r-bloggers.com/2023/11/cliff-notes-about-the-cli-package/",
      "word_count": 1535
    }
  }
}