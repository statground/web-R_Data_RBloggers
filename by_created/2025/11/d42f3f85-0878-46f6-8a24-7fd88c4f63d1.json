{
  "uuid": "d42f3f85-0878-46f6-8a24-7fd88c4f63d1",
  "created_at": "2025-11-22 19:58:34",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/05/keep-your-r-code-clean-and-consistent-with-air/",
    "crawled_at": "2025-11-22T10:48:45.749463",
    "external_links": [
      {
        "href": "https://ymansiaux.github.io/yohann-data/posts/airformatter/",
        "text": "Yohann's blog"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://marketplace.visualstudio.com/items?itemName=Posit.air-vscode",
        "text": "Air – R Language Support extension"
      },
      {
        "href": "https://github.com/REditorSupport/vscode-R",
        "text": "R extension for VSCode"
      },
      {
        "href": "https://ymansiaux.github.io/yohann-data/posts/airformatter/",
        "text": "Yohann's blog"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Keep your R code clean and consistent with Air | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/yohann-mansiaux/",
        "text": "Yohann Mansiaux"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-392501 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Keep your R code clean and consistent with Air</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">May 18, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/yohann-mansiaux/\">Yohann Mansiaux</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://ymansiaux.github.io/yohann-data/posts/airformatter/\"> Yohann's blog</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<p>Consistent code formatting is a crucial aspect of collaborative development that often gets overlooked. Well-formatted code provides several significant benefits:</p>\n<ul>\n<li><strong>Readability</strong>: Uniform formatting makes code easier to read and understand for everyone</li>\n<li><strong>Maintainability</strong>: Consistent style reduces cognitive load when navigating through code</li>\n<li><strong>Collaboration</strong>: Standardized formatting reduces merge conflicts and makes code reviews more efficient</li>\n</ul>\n<p>Air formatter for R brings these benefits to R codebases with minimal setup effort, helping teams establish and maintain a consistent coding style automatically. While this guide focuses specifically on Air, the principles and benefits apply to any code formatter – the most important factor is having all team members use the same formatting tool with consistent settings.</p>\n<section class=\"level1\" id=\"requirements\">\n<h1>Requirements</h1>\n<ul>\n<li>Air installed</li>\n<li>Depending on your IDE, you may also need to install some extensions (as as VSCode user I had to install the <a href=\"https://marketplace.visualstudio.com/items?itemName=Posit.air-vscode\" rel=\"nofollow\" target=\"_blank\">Air – R Language Support extension</a>).</li>\n<li>To test if the formatter is working, you can use the following command: <code>air format .</code> in a Terminal (<strong>not the R console</strong>) !</li>\n</ul>\n<p>Please read the following resources before starting:</p>\n<ul>\n<li>https://posit-dev.github.io/air/formatter.html</li>\n<li>https://www.tidyverse.org/blog/2025/02/air/</li>\n</ul>\n<p><strong>Warning for VSCode users</strong></p>\n<p>Before using Air I was using the REditorSupport formatter provided with the <a href=\"https://github.com/REditorSupport/vscode-R\" rel=\"nofollow\" target=\"_blank\">R extension for VSCode</a>. Air was not working, because I forgot to edit correctly my <code>settings.json</code> file.</p>\n<p>If you wish Air to be used as your default formatter, please comment or remove the line <code>\"editor.defaultFormatter\": \"REditorSupport.r\"</code> in your <code>settings.json</code> file.</p>\n<pre>  \"[r]\": {\n    // \"editor.defaultFormatter\": \"REditorSupport.r\",\n    \"editor.formatOnSave\": true\n  }\n  \"[rmd]\": {\n    // \"editor.defaultFormatter\": \"REditorSupport.r\",\n    \"editor.formatOnSave\": true\n  }\n  \"[quarto]\": {\n    // \"editor.defaultFormatter\": \"REditorSupport.r\",\n    \"editor.formatOnSave\": true\n  }</pre>\n<p>As set in the <code>settings.json</code> file, Air is used as the default formatter as will be applied on save of any R file. There are other ways to use Air, the pre-commit or the Github Actions workflow.</p>\n</section>\n<section class=\"level1\" id=\"pre-commit-hook\">\n<h1>Pre-commit hook</h1>\n<p>A pre-commit hook is an operation that is performed before a commit is made. If you are a R package developer, you sometimes already have been complaning about a message telling that both README-related files: <code>README.md</code> and <code>README.Rmd</code> must be staged together in a specific commit.</p>\n<p>This pre-commit hook is added automatically to your project when you are using <code>usethis::use_readme_rmd()</code> !</p>\n<section class=\"level2\" id=\"how-to-add-a-pre-commit-hook\">\n<h2 class=\"anchored\" data-anchor-id=\"how-to-add-a-pre-commit-hook\">How to add a pre-commit hook</h2>\n<pre>usethis::use_git_hook(\n  \"pre-commit\",\n  \"air format .\"\n  )</pre>\n<p>This command implies that for each commit you will make, the entire codebase of your project will be reformated.</p>\n<p>Pre-commit hooks are located in a hidden folder of your repository. If you want to take a look at the generated/modified file you must look for the following file (starting from the root of your project): <code>.git/hooks/pre-commit</code></p>\n<p>The pros of pre-commit hooks are:</p>\n<ul>\n<li>Ensures all code is formatted before it’s committed to the repository</li>\n<li>Prevents unformatted code from entering the codebase</li>\n<li>Enforces consistent code style across the project</li>\n</ul>\n<p>The cons of pre-commit hooks are:</p>\n<ul>\n<li>They are local to each developer’s machine and must be set up individually</li>\n<li>Can be bypassed with <code>git commit --no-verify</code> if a developer chooses to</li>\n<li>May slow down the commit process for large codebases</li>\n<li>Requires Air to be installed on each developer’s machine</li>\n<li>If formatting rules change, all developers need to update their local setup</li>\n</ul>\n<p>If you are already using the option <code>\"editor.formatOnSave\": true</code>, the pre-commit hook might be useless (except for the first time you will be using it, by formatting the entire codebase), and you might be more interested in using the Github Actions workflow !</p>\n</section>\n</section>\n<section class=\"level1\" id=\"using-github-actions\">\n<h1>Using Github Actions</h1>\n<p>In the <code>main</code> branch of a project I want to have only “bullet-proof” code, i.e a code in which the <code>devtools::check()</code> returns no error, no warning, no note. Each time I’m opening a Pull Request from a branch to the main branch, I run a Github Action which calls <code>devtools::check()</code>. I allow merging the proposed code only if this Github Action pass.</p>\n<p>To ensure that the merged code has also the expected format, I’ve completed my Github Action yaml configuration file to call the Air formatter on my codebase only if the <code>devtools::check()</code> was successful.</p>\n<p>This very convenient when you are working with other colleagues on the same project, with potentially different IDE, to ensure the code format is the same between everyone and hence to avoid merge conflicts because of formatting.</p>\n<p>Contrary to pre-commit hooks which are “computer-specific”, Github Actions workflow will be run remotely, ensuring that any modification to the code formatter settings will be applied to any code submitted to the main codebase !</p>\n<p>To use this Github Actions workflow, please create the following folder: <code>.github/workflow/</code> and add the following in a <code>.yaml</code> file.</p>\n<pre># Workflow derived from https://github.com/posit-dev/setup-air/tree/main/examples\non:\n  pull_request:\n    branches: [main, master]\n\nname: check_and_formatting.yml\n\npermissions:\n  contents: write\n\njobs:\n  R-CMD-check:\n    runs-on: ${{ matrix.config.os }}\n\n    name: ${{ matrix.config.os }} (${{ matrix.config.r }})\n\n    strategy:\n      fail-fast: false\n      matrix:\n        config:\n          - { os: ubuntu-latest, r: \"release\" }\n\n    env:\n      GITHUB_PAT: ${{ secrets.GH_TOKEN }}\n      R_KEEP_PKG_SOURCE: yes\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: r-lib/actions/setup-pandoc@v2\n\n      - uses: quarto-dev/quarto-actions/setup@v2\n\n      - uses: r-lib/actions/setup-r@v2\n        with:\n          r-version: ${{ matrix.config.r }}\n          http-user-agent: ${{ matrix.config.http-user-agent }}\n          use-public-rspm: true\n\n      - uses: r-lib/actions/setup-r-dependencies@v2\n        with:\n          extra-packages: any::rcmdcheck\n          needs: check\n\n      - uses: r-lib/actions/check-r-package@v2\n        with:\n          upload-snapshots: true\n          build_args: 'c(\"--no-manual\",\"--compact-vignettes=gs+qpdf\")'\n\n  format-check:\n    name: format-check\n    needs: R-CMD-check\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install\n        uses: posit-dev/setup-air@v1\n\n      - name: Check\n        run: air format .\n\n      - name: Commit changes\n        run: |\n          git config --global user.name \"github-actions[bot]\"\n          git config --global user.email \"github-actions[bot]@users.noreply.github.com\"\n          git add .\n          git diff --cached --quiet || git commit -m \"style: auto-format code via air format\"\n\n      - name: Push changes\n        if: github.event_name == 'pull_request' &amp;&amp; github.head_ref != ''\n        run: |\n          git pull --rebase origin ${{ github.head_ref }}\n          git push origin HEAD:${{ github.head_ref }}</pre>\n</section>\n<section class=\"level1\" id=\"conclusion\">\n<h1>Conclusion</h1>\n<p>Implementing automated code formatting with Air provides immediate benefits for both individual developers and teams. Whether you choose to use the formatter through your IDE, pre-commit hooks, or GitHub Actions, the result is the same: consistently formatted code that’s easier to read, maintain, and collaborate on.</p>\n<p>By incorporating Air into your workflow:</p>\n<ul>\n<li>You eliminate time-consuming style discussions and manual formatting</li>\n<li>Your codebase maintains a consistent style regardless of who contributes</li>\n<li>Code reviews can focus on substance rather than style</li>\n<li>New team members can quickly adapt to your project’s conventions</li>\n</ul>\n<p>Don’t hesitate to ask me any question about this workflow or any idea of improvement !</p>\n</section>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://ymansiaux.github.io/yohann-data/posts/airformatter/\"> Yohann's blog</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Keep your R code clean and consistent with Air\nPosted on\nMay 18, 2025\nby\nYohann Mansiaux\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nYohann's blog\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nConsistent code formatting is a crucial aspect of collaborative development that often gets overlooked. Well-formatted code provides several significant benefits:\nReadability\n: Uniform formatting makes code easier to read and understand for everyone\nMaintainability\n: Consistent style reduces cognitive load when navigating through code\nCollaboration\n: Standardized formatting reduces merge conflicts and makes code reviews more efficient\nAir formatter for R brings these benefits to R codebases with minimal setup effort, helping teams establish and maintain a consistent coding style automatically. While this guide focuses specifically on Air, the principles and benefits apply to any code formatter – the most important factor is having all team members use the same formatting tool with consistent settings.\nRequirements\nAir installed\nDepending on your IDE, you may also need to install some extensions (as as VSCode user I had to install the\nAir – R Language Support extension\n).\nTo test if the formatter is working, you can use the following command:\nair format .\nin a Terminal (\nnot the R console\n) !\nPlease read the following resources before starting:\nhttps://posit-dev.github.io/air/formatter.html\nhttps://www.tidyverse.org/blog/2025/02/air/\nWarning for VSCode users\nBefore using Air I was using the REditorSupport formatter provided with the\nR extension for VSCode\n. Air was not working, because I forgot to edit correctly my\nsettings.json\nfile.\nIf you wish Air to be used as your default formatter, please comment or remove the line\n\"editor.defaultFormatter\": \"REditorSupport.r\"\nin your\nsettings.json\nfile.\n\"[r]\": {\n    // \"editor.defaultFormatter\": \"REditorSupport.r\",\n    \"editor.formatOnSave\": true\n  }\n  \"[rmd]\": {\n    // \"editor.defaultFormatter\": \"REditorSupport.r\",\n    \"editor.formatOnSave\": true\n  }\n  \"[quarto]\": {\n    // \"editor.defaultFormatter\": \"REditorSupport.r\",\n    \"editor.formatOnSave\": true\n  }\nAs set in the\nsettings.json\nfile, Air is used as the default formatter as will be applied on save of any R file. There are other ways to use Air, the pre-commit or the Github Actions workflow.\nPre-commit hook\nA pre-commit hook is an operation that is performed before a commit is made. If you are a R package developer, you sometimes already have been complaning about a message telling that both README-related files:\nREADME.md\nand\nREADME.Rmd\nmust be staged together in a specific commit.\nThis pre-commit hook is added automatically to your project when you are using\nusethis::use_readme_rmd()\n!\nHow to add a pre-commit hook\nusethis::use_git_hook(\n  \"pre-commit\",\n  \"air format .\"\n  )\nThis command implies that for each commit you will make, the entire codebase of your project will be reformated.\nPre-commit hooks are located in a hidden folder of your repository. If you want to take a look at the generated/modified file you must look for the following file (starting from the root of your project):\n.git/hooks/pre-commit\nThe pros of pre-commit hooks are:\nEnsures all code is formatted before it’s committed to the repository\nPrevents unformatted code from entering the codebase\nEnforces consistent code style across the project\nThe cons of pre-commit hooks are:\nThey are local to each developer’s machine and must be set up individually\nCan be bypassed with\ngit commit --no-verify\nif a developer chooses to\nMay slow down the commit process for large codebases\nRequires Air to be installed on each developer’s machine\nIf formatting rules change, all developers need to update their local setup\nIf you are already using the option\n\"editor.formatOnSave\": true\n, the pre-commit hook might be useless (except for the first time you will be using it, by formatting the entire codebase), and you might be more interested in using the Github Actions workflow !\nUsing Github Actions\nIn the\nmain\nbranch of a project I want to have only “bullet-proof” code, i.e a code in which the\ndevtools::check()\nreturns no error, no warning, no note. Each time I’m opening a Pull Request from a branch to the main branch, I run a Github Action which calls\ndevtools::check()\n. I allow merging the proposed code only if this Github Action pass.\nTo ensure that the merged code has also the expected format, I’ve completed my Github Action yaml configuration file to call the Air formatter on my codebase only if the\ndevtools::check()\nwas successful.\nThis very convenient when you are working with other colleagues on the same project, with potentially different IDE, to ensure the code format is the same between everyone and hence to avoid merge conflicts because of formatting.\nContrary to pre-commit hooks which are “computer-specific”, Github Actions workflow will be run remotely, ensuring that any modification to the code formatter settings will be applied to any code submitted to the main codebase !\nTo use this Github Actions workflow, please create the following folder:\n.github/workflow/\nand add the following in a\n.yaml\nfile.\n# Workflow derived from https://github.com/posit-dev/setup-air/tree/main/examples\non:\n  pull_request:\n    branches: [main, master]\n\nname: check_and_formatting.yml\n\npermissions:\n  contents: write\n\njobs:\n  R-CMD-check:\n    runs-on: ${{ matrix.config.os }}\n\n    name: ${{ matrix.config.os }} (${{ matrix.config.r }})\n\n    strategy:\n      fail-fast: false\n      matrix:\n        config:\n          - { os: ubuntu-latest, r: \"release\" }\n\n    env:\n      GITHUB_PAT: ${{ secrets.GH_TOKEN }}\n      R_KEEP_PKG_SOURCE: yes\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - uses: r-lib/actions/setup-pandoc@v2\n\n      - uses: quarto-dev/quarto-actions/setup@v2\n\n      - uses: r-lib/actions/setup-r@v2\n        with:\n          r-version: ${{ matrix.config.r }}\n          http-user-agent: ${{ matrix.config.http-user-agent }}\n          use-public-rspm: true\n\n      - uses: r-lib/actions/setup-r-dependencies@v2\n        with:\n          extra-packages: any::rcmdcheck\n          needs: check\n\n      - uses: r-lib/actions/check-r-package@v2\n        with:\n          upload-snapshots: true\n          build_args: 'c(\"--no-manual\",\"--compact-vignettes=gs+qpdf\")'\n\n  format-check:\n    name: format-check\n    needs: R-CMD-check\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install\n        uses: posit-dev/setup-air@v1\n\n      - name: Check\n        run: air format .\n\n      - name: Commit changes\n        run: |\n          git config --global user.name \"github-actions[bot]\"\n          git config --global user.email \"github-actions[bot]@users.noreply.github.com\"\n          git add .\n          git diff --cached --quiet || git commit -m \"style: auto-format code via air format\"\n\n      - name: Push changes\n        if: github.event_name == 'pull_request' && github.head_ref != ''\n        run: |\n          git pull --rebase origin ${{ github.head_ref }}\n          git push origin HEAD:${{ github.head_ref }}\nConclusion\nImplementing automated code formatting with Air provides immediate benefits for both individual developers and teams. Whether you choose to use the formatter through your IDE, pre-commit hooks, or GitHub Actions, the result is the same: consistently formatted code that’s easier to read, maintain, and collaborate on.\nBy incorporating Air into your workflow:\nYou eliminate time-consuming style discussions and manual formatting\nYour codebase maintains a consistent style regardless of who contributes\nCode reviews can focus on substance rather than style\nNew team members can quickly adapt to your project’s conventions\nDon’t hesitate to ask me any question about this workflow or any idea of improvement !\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nYohann's blog\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "Consistent code formatting is a crucial aspect of collaborative development that often gets overlooked. Well-formatted code provides several significant benefits: Readability: Uniform formatting makes code easier to read and understand for ever...",
    "meta_keywords": null,
    "og_description": "Consistent code formatting is a crucial aspect of collaborative development that often gets overlooked. Well-formatted code provides several significant benefits: Readability: Uniform formatting makes code easier to read and understand for ever...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Keep your R code clean and consistent with Air | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 6.4,
    "sitemap_lastmod": null,
    "twitter_description": "Consistent code formatting is a crucial aspect of collaborative development that often gets overlooked. Well-formatted code provides several significant benefits: Readability: Uniform formatting makes code easier to read and understand for ever...",
    "twitter_title": "Keep your R code clean and consistent with Air | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/05/keep-your-r-code-clean-and-consistent-with-air/",
    "word_count": 1277
  }
}