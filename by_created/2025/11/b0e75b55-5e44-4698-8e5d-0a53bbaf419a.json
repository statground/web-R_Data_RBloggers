{
  "uuid": "b0e75b55-5e44-4698-8e5d-0a53bbaf419a",
  "created_at": "2025-11-22 19:58:08",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/07/bioconductor-and-ggplot2-4-0-0-whats-changing-and-how-to-prepare/",
    "crawled_at": "2025-11-22T10:45:54.728415",
    "external_links": [
      {
        "href": "https://blog.bioconductor.org/posts/2025-07-07-ggplot2-update/",
        "text": "Bioconductor community blog"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://chat.bioconductor.org/",
        "text": "Zulip"
      },
      {
        "href": "https://www.tidyverse.org/blog/2024/11/s7-0-2-0/",
        "text": "tidyverse blog post"
      },
      {
        "href": "https://rconsortium.github.io/S7/index.html",
        "text": "R Consortium’s S7 site"
      },
      {
        "href": "https://github.com/tidyverse/ggplot2/issues",
        "text": "github.com/tidyverse/ggplot2/issues"
      },
      {
        "href": "https://github.com/teunbrand",
        "text": "@teunbrandon GitHub"
      },
      {
        "href": "https://chat.bioconductor.org/",
        "text": "Bioconductor Zulip"
      },
      {
        "href": "https://github.com/tidyverse/ggplot2/issues/6498",
        "text": "#6498"
      },
      {
        "href": "https://github.com/tidyverse/ggplot2/issues/6505",
        "text": "#6505"
      },
      {
        "href": "https://github.com/tidyverse/ggplot2/issues/6504",
        "text": "#6504"
      },
      {
        "href": "https://github.com/tidyverse/ggplot2/issues/6507",
        "text": "#6507"
      },
      {
        "href": "https://github.com/tidyverse/ggplot2/issues/6515",
        "text": "#6515"
      },
      {
        "href": "https://github.com/tidyverse/ggplot2/issues",
        "text": "ggplot2 issues page"
      },
      {
        "href": "https://chat.bioconductor.org/",
        "text": "Bioconductor Zulip"
      },
      {
        "href": "https://chat.bioconductor.org/",
        "text": "Bioconductor Zulip"
      },
      {
        "href": "https://bioconductor.org/about/release-announcements/",
        "text": "Bioconductor has two scheduled releases"
      },
      {
        "href": "https://github.com/teunbrand",
        "text": "Teun van den Brand"
      },
      {
        "href": "https://creativecommons.org/licenses/by/4.0/",
        "text": "Creative Commons CC-BY-4.0 License"
      },
      {
        "href": "https://opensource.org/licenses/BSD-3-Clause",
        "text": "BSD 3-Clause License"
      },
      {
        "href": "https://blog.bioconductor.org/posts/2025-07-07-ggplot2-update/",
        "text": "Bioconductor community blog"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Bioconductor and ggplot2 4.0.0: What’s Changing and How to Prepare | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/",
        "text": null
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/cdn-cgi/l/email-protection",
        "text": "[email protected]"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-Bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-393859 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Bioconductor and ggplot2 4.0.0: What’s Changing and How to Prepare</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">July 6, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/\"></a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://blog.bioconductor.org/posts/2025-07-07-ggplot2-update/\"> Bioconductor community blog</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<section class=\"level1\" id=\"introduction\">\n<h1>Introduction</h1>\n<p>A major update to <code>ggplot2</code> (version 4.0.0) is expected around <strong>mid-to-late July 2025</strong>. It brings a significant internal change, replacing most of the S3 backend with the newer S7 object system. While this improves long-term maintainability and extensibility, it may break Bioconductor packages that depend on <code>ggplot2</code>, especially those that customise how plots are built or styled. Packages that use <code>ggplot2</code> for typical plotting tasks, such as creating plots with <code>ggplot()</code> and <code>geom_*()</code>, are unlikely to be affected.</p>\n<section class=\"level2\" id=\"tldr\">\n<h2 class=\"anchored\" data-anchor-id=\"tldr\">TL;DR</h2>\n<ul>\n<li><code>ggplot2</code> 4.0.0 is a major internal update switching to S7 classes</li>\n<li>Some Bioconductor packages may break, especially those customising <code>ggplot</code> themes/geoms</li>\n<li>Only affects plotting – statistical or modelling functions remain unchanged</li>\n<li>If you’re a user, hold off updating ggplot2 until your packages are confirmed to work</li>\n<li>If you’re a developer, test now using <code>pak::pak(\"tidyverse/ggplot2\")</code> to prepare before release</li>\n<li>Questions or issues? Join us on <a href=\"https://chat.bioconductor.org/\" rel=\"nofollow\" target=\"_blank\">Zulip</a></li>\n</ul>\n</section>\n<section class=\"level2\" id=\"whats-changing\">\n<h2 class=\"anchored\" data-anchor-id=\"whats-changing\">What’s Changing?</h2>\n<p>The 4.0.0 release of <code>ggplot2</code> introduces a major internal refactor: S3 classes are being migrated to the new S7 system. While most users won’t notice the difference, some packages rely on how <code>ggplot2</code> is built internally, for example, by modifying its themes, geoms, or using helper functions. These packages (e.g. <code>ComplexUpset</code>, <code>ggtree</code>, <code>plotly</code>) may break if that internal structure changes.</p>\n<p>Some issues may be minor, like test failures, while others may cause runtime errors. Either way, this is a good time to review your usage.</p>\n</section>\n<section class=\"level2\" id=\"why-s7\">\n<h2 class=\"anchored\" data-anchor-id=\"why-s7\">Why S7?</h2>\n<p>S7 is a new object-oriented system in R that makes packages more robust, predictable, and easier to extend. It gives developers better tools for managing complex code, but switching to it can affect packages that rely on how things used to work under the old system (S3).</p>\n<p>It offers:</p>\n<ul>\n<li>Formal class and method definitions<br/>\n</li>\n<li>Limited multiple dispatch<br/>\n</li>\n<li>Cleaner support for interoperability<br/>\n</li>\n<li>Greater consistency across packages</li>\n</ul>\n<p>S7 is being developed by the R Consortium’s OOP Working Group, with contributors from R Core, Bioconductor, Posit, and others.</p>\n<p>Learn more in the <a href=\"https://www.tidyverse.org/blog/2024/11/s7-0-2-0/\" rel=\"nofollow\" target=\"_blank\">tidyverse blog post</a> and on the <a href=\"https://rconsortium.github.io/S7/index.html\" rel=\"nofollow\" target=\"_blank\">R Consortium’s S7 site</a>.</p>\n</section>\n<section class=\"level2\" id=\"for-developers\">\n<h2 class=\"anchored\" data-anchor-id=\"for-developers\">For Developers</h2>\n<section class=\"level3\" id=\"what-developers-should-do-now\">\n<h3 class=\"anchored\" data-anchor-id=\"what-developers-should-do-now\">What Developers Should Do Now</h3>\n<p>You can test your package against the development version of <code>ggplot2</code> using:</p>\n<pre># install.packages(\"pak\")\npak::pak(\"tidyverse/ggplot2\")</pre>\n<p>We recommend testing in an isolated environment using <code>{renv}</code> to avoid unexpected interactions with your existing packages.</p>\n<p>If you find issues:</p>\n<ul>\n<li>Report a bug: <a href=\"https://github.com/tidyverse/ggplot2/issues\" rel=\"nofollow\" target=\"_blank\">github.com/tidyverse/ggplot2/issues</a><br/>\n</li>\n<li>Tag <a href=\"https://github.com/teunbrand\" rel=\"nofollow\" target=\"_blank\"><span class=\"citation\" data-cites=\"teunbrand\">@teunbrand</span> on GitHub</a> if you’d like input from the <code>ggplot2</code> team</li>\n<li>Discuss with the Bioconductor community: Post in <a href=\"https://chat.bioconductor.org/\" rel=\"nofollow\" target=\"_blank\">Bioconductor Zulip</a> or email the <code><a class=\"__cf_email__\" data-cfemail=\"7012191f135d141506151c30025d00021f1a1513045e1f0217\" href=\"/cdn-cgi/l/email-protection\">[email protected]</a></code> mailing list</li>\n</ul>\n</section>\n<section class=\"level3\" id=\"common-issues-already-reported\">\n<h3 class=\"anchored\" data-anchor-id=\"common-issues-already-reported\">Common Issues Already Reported</h3>\n<p>These are specific breakages already reported on the <code>ggplot2</code> GitHub:</p>\n<ul>\n<li><strong>Class checks</strong>: Tests relying on exact class structures like <code>class(p)</code> or <code>expect_type(p, \"list\")</code> may now fail. Instead, use <code>expect_true(is_ggplot(p))</code> or <code>expect_s3_class(p, \"ggplot\")</code> for compatibility. See <a href=\"https://github.com/tidyverse/ggplot2/issues/6498\" rel=\"nofollow\" target=\"_blank\">#6498</a>.</li>\n<li><strong>Label handling</strong>: Labels are now stricter and constructed later in the build step. Use <code>get_labs()</code> in tests, and avoid unnamed or duplicate arguments in <code>labs()</code>. See <a href=\"https://github.com/tidyverse/ggplot2/issues/6505\" rel=\"nofollow\" target=\"_blank\">#6505</a>.</li>\n<li><strong>Custom + methods</strong>: Packages defining custom + operators (e.g. <code>+.gg</code>) may need to revise their implementation, especially with mixed S3/S7 class use. See <a href=\"https://github.com/tidyverse/ggplot2/issues/6504\" rel=\"nofollow\" target=\"_blank\">#6504</a>.</li>\n<li><strong>Invalid element properties</strong>: With S7 class adoption, element constructors like <code>element_text()</code> now enforce stricter type checks (e.g. no TRUE for family, no decimal colours). Fix the incorrect properties in your package. See <a href=\"https://github.com/tidyverse/ggplot2/issues/6507\" rel=\"nofollow\" target=\"_blank\">#6507</a>.</li>\n<li><strong>S3 method consistency</strong>: Generics like <code>ggplot_build()</code> and <code>ggplot_add()</code> now include <code>...</code> Your methods must include it too, even if unused, to avoid warnings. See <a href=\"https://github.com/tidyverse/ggplot2/issues/6515\" rel=\"nofollow\" target=\"_blank\">#6515</a>.</li>\n</ul>\n<p>These are evolving, if something looks broken, it’s worth checking the <a href=\"https://github.com/tidyverse/ggplot2/issues\" rel=\"nofollow\" target=\"_blank\">ggplot2 issues page</a> for updates before opening a new one.</p>\n<p>The Bioconductor core team has also been running automated tests on a subset of packages to help spot issues early. Due to resource constraints, this currently covers only a portion of the ecosystem, so it’s still important for developers to test their own packages.</p>\n</section>\n<section class=\"level3\" id=\"how-bioconductor-packages-may-be-affected\">\n<h3 class=\"anchored\" data-anchor-id=\"how-bioconductor-packages-may-be-affected\">How Bioconductor Packages May Be Affected</h3>\n<p>We’ve compiled a list of packages in Bioconductor 3.21 that declare <code>ggplot2</code> in <code>Depends</code>, <code>Imports</code>, or <code>Suggests</code>:</p>\n<div class=\"cell\">\n<details class=\"code-fold\">\n<summary>Code</summary>\n<pre>library(BiocManager)\nlibrary(tidyverse)\nlibrary(reactable)\n\nrepos &lt;- repositories(version = \"3.21\")\nbioc_repos &lt;- repos[grepl(\"BioC\", names(repos))]\ndb &lt;- available.packages(contrib.url(bioc_repos))\n\npkg_df &lt;- as_tibble(db) %&gt;%\n  mutate(\n    ggplot2_usage = case_when(\n      grepl(\"ggplot2\", Depends) ~ \"Depends\",\n      grepl(\"ggplot2\", Imports) ~ \"Imports\",\n      grepl(\"ggplot2\", Suggests) ~ \"Suggests\",\n      TRUE ~ NA_character_\n    )\n  ) %&gt;%\n  filter(!is.na(ggplot2_usage)) %&gt;%\n  select(Package, ggplot2_usage) %&gt;%\n  arrange(Package)\n\nreactable(\n  pkg_df,\n  searchable = TRUE,\n  filterable = TRUE,\n  columns = list(\n    Package = colDef(name = \"Package\"),\n    ggplot2_usage = colDef(name = \"ggplot2 Usage\")\n  ),\n  defaultSorted = \"Package\",\n  striped = TRUE,\n  bordered = TRUE,\n  highlight = TRUE,\n  defaultPageSize = 20,\n  showPageSizeOptions = TRUE,\n  compact = TRUE\n)</pre>\n</details>\n<div class=\"cell-output-display\">\n<div class=\"reactable html-widget html-fill-item\" id=\"htmlwidget-eaa43efe94552c7a6103\" style=\"width:auto;height:auto;\"></div>\n\n</div>\n</div>\n<p><strong>Note:</strong> Not all of these packages will be equally affected. In fact, many Bioconductor packages use <code>ggplot2</code> in straightforward ways (e.g. to create standard plots using <code>ggplot()</code> and <code>geom_*()</code>), which are unlikely to break. The packages most at risk are those that define custom geoms, themes, or modify internal <code>ggplot2</code> behaviour.</p>\n<p>A total of 985 packages in Bioconductor 3.21 declare <code>ggplot2</code> as a dependency: 91 in <code>Depends</code>, 722 in <code>Imports</code>, and 172 in <code>Suggests</code>.</p>\n<p>Packages listed under <code>Depends</code> or <code>Imports</code> are more likely to use <code>ggplot2</code> in their main functionality, so users and developers may see breakages. Those listed under <code>Suggests</code> typically only use <code>ggplot2</code> in optional examples or vignettes, and may not be affected unless those features are run.</p>\n<p>Developers of these packages have already been notified through the Bioconductor Zulip, the bioc-devel mailing list, and direct outreach on GitHub. Teun van den Brand from the <code>ggplot2</code> team has been contacting affected maintainers, and several packages have already been patched or are in progress.</p>\n</section>\n<section class=\"level3\" id=\"lessons-from-the-community-practical-tips\">\n<h3 class=\"anchored\" data-anchor-id=\"lessons-from-the-community-practical-tips\">Lessons from the Community: Practical Tips</h3>\n<p>Many developers have already been testing their packages and sharing their findings in the <a href=\"https://chat.bioconductor.org/\" rel=\"nofollow\" target=\"_blank\">Bioconductor Zulip</a>. These discussions have surfaced some practical tips and patterns to watch for, useful whether you’re maintaining a package or trying to understand why something might have broken:</p>\n<ul>\n<li><strong>Tests relying on internal structure may fail.</strong> Avoid checks like <code>class(p)</code> or <code>expect_type(p, \"list\")</code>. Use <code>expect_s3_class()</code> or helper functions like <code>is_ggplot()</code> instead.</li>\n<li><strong>Theme customisation is safer with best practices.</strong> Build from a base theme using <code>%+replace%</code>, and avoid storing theme objects in compiled code.</li>\n<li><strong>Related packages matter.</strong> Updating packages like <code>patchwork</code> or <code>plotly</code> may help if your code uses them alongside <code>ggplot2</code>.</li>\n<li><strong>Make your package easy to find and fix.</strong> Ensure your <code>DESCRIPTION</code> includes <code>URL</code> and <code>BugReports</code> fields so others can locate your repo or report issues.</li>\n</ul>\n<p>You can follow the discussion in the <a href=\"https://chat.bioconductor.org/\" rel=\"nofollow\" target=\"_blank\">Bioconductor Zulip</a> topic: <em>Notifying Bioc maintainers (ggplot2 S7 reverse deps)</em>.</p>\n</section>\n</section>\n<section class=\"level2\" id=\"for-users\">\n<h2 class=\"anchored\" data-anchor-id=\"for-users\">For Users</h2>\n<section class=\"level3\" id=\"why-this-might-break-your-code\">\n<h3 class=\"anchored\" data-anchor-id=\"why-this-might-break-your-code\">Why This Might Break Your Code</h3>\n<p><a href=\"https://bioconductor.org/about/release-announcements/\" rel=\"nofollow\" target=\"_blank\">Bioconductor has two scheduled releases</a> a year, and those versions are mostly fixed once released. But CRAN packages like <code>ggplot2</code> update more frequently, and those updates can occasionally break Bioconductor packages, especially if you install the new version before Bioconductor packages have had a chance to adapt. In some cases, developers can patch their packages within the current Bioconductor release. But that’s not always possible, it depends on the issue and whether the maintainer has time and capacity to update quickly.</p>\n<p>This <code>ggplot2</code> update doesn’t mean your whole installation will break. In most cases, only some plotting functionality might stop working, or plots may look different e.g. missing labels or themes.</p>\n</section>\n<section class=\"level3\" id=\"what-you-can-do\">\n<h3 class=\"anchored\" data-anchor-id=\"what-you-can-do\">What You Can Do</h3>\n<p>If you use <code>ggplot2</code>, either directly or via a Bioconductor package, this update may affect you.</p>\n<p>Breakages can happen if you:</p>\n<ul>\n<li>Run <code>update.packages()</code><br/>\n</li>\n<li>Install a CRAN or GitHub package that pulls in the new <code>ggplot2</code><br/>\n</li>\n<li>Use a package manager like <code>{pak}</code> that updates dependencies automatically</li>\n</ul>\n<p><strong>To avoid disruptions</strong>:</p>\n<ul>\n<li><strong>Hold off updating <code>ggplot2</code> until you’ve tested that it works with your code and the packages you use.</strong></li>\n<li><strong>You can already test with the development version, see below.</strong></li>\n</ul>\n<p>If your code is working as expected, you don’t need to act immediately. But testing ahead of the CRAN release can give you confidence that everything will continue working once <code>ggplot2</code> 4.0.0 is out.</p>\n</section>\n<section class=\"level3\" id=\"how-to-check-if-youre-affected\">\n<h3 class=\"anchored\" data-anchor-id=\"how-to-check-if-youre-affected\">How to Check If You’re Affected</h3>\n<p>The development version of ggplot2 (4.0.0) is already available for testing using {pak}. The CRAN release is expected mid-to-late July. If you’re not sure whether to update once it’s out, here’s how you can test your current setup ahead of time.</p>\n<ul>\n<li>Create a temporary or isolated environment using <code>{renv}</code></li>\n<li>Install the development version of <code>ggplot2</code>:</li>\n</ul>\n<div class=\"cell\">\n<pre>install.packages(\"pak\")\npak::pak(\"tidyverse/ggplot2\")</pre>\n</div>\n<ul>\n<li>Re-run your code and check that plots appear as expected</li>\n</ul>\n<p>If something breaks, you can always roll back, or just hold off updating until patches are released.</p>\n</section>\n<section class=\"level3\" id=\"tools-to-help\">\n<h3 class=\"anchored\" data-anchor-id=\"tools-to-help\">Tools to Help</h3>\n<p>To manage versions and avoid surprises:</p>\n<ul>\n<li><p>Use <code>{renv}</code> to snapshot your current setup:</p>\n<pre># Create a reproducible project setup\nrenv::init()\nrenv::snapshot()</pre></li>\n<li><p>When updating, use:</p>\n<pre>update.packages(ask = TRUE)</pre></li>\n</ul>\n<p>and consider skipping <code>ggplot2</code> if you’re unsure.</p>\n</section>\n</section>\n<section class=\"level2\" id=\"final-notes\">\n<h2 class=\"anchored\" data-anchor-id=\"final-notes\">Final Notes</h2>\n<p>Thanks to everyone who has tested, reported, or patched packages ahead of this release. Special thanks to <a href=\"https://github.com/teunbrand\" rel=\"nofollow\" target=\"_blank\">Teun van den Brand</a> and the <code>ggplot2</code> team for their proactive and open collaboration with the Bioconductor community.</p>\n<p>If you maintain a package using <code>ggplot2</code> and haven’t tested it yet, testing now can help your users, and save others from running into the same issues.</p>\n<p>Not a developer? Reporting even small glitches after updating ggplot2 can still be useful, if the issue isn’t already known. Before posting, it’s worth checking if the problem has been reported on the package’s GitHub or discussed in Bioconductor Zulip. If it has, you can add a comment or emoji reaction to help signal it’s affecting others too. That kind of input helps maintainers prioritise and can save time for everyone.</p>\n<p>Fixes may take time to propagate, especially with so many interdependent packages, and most Bioconductor maintainers contributing alongside full academic workloads. But progress is steady, and made easier when people flag issues early.</p>\n<p>Big changes like this aren’t always smooth, but open communication goes a long way. Whether you’re maintaining a package, reporting a bug, or just keeping an eye out, it all helps. Thanks for reading, and for being part of this collaborative process.</p>\n<!-- -->\n</section>\n</section>\n<p>\n© 2025 Bioconductor. Content is published under <a href=\"https://creativecommons.org/licenses/by/4.0/\" rel=\"nofollow\" target=\"_blank\">Creative Commons CC-BY-4.0 License</a> for the text and <a href=\"https://opensource.org/licenses/BSD-3-Clause\" rel=\"nofollow\" target=\"_blank\">BSD 3-Clause License</a> for any code. | <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\" target=\"_blank\">R-Bloggers</a>\n</p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://blog.bioconductor.org/posts/2025-07-07-ggplot2-update/\"> Bioconductor community blog</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Bioconductor and ggplot2 4.0.0: What’s Changing and How to Prepare\nPosted on\nJuly 6, 2025\nby\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nBioconductor community blog\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nIntroduction\nA major update to\nggplot2\n(version 4.0.0) is expected around\nmid-to-late July 2025\n. It brings a significant internal change, replacing most of the S3 backend with the newer S7 object system. While this improves long-term maintainability and extensibility, it may break Bioconductor packages that depend on\nggplot2\n, especially those that customise how plots are built or styled. Packages that use\nggplot2\nfor typical plotting tasks, such as creating plots with\nggplot()\nand\ngeom_*()\n, are unlikely to be affected.\nTL;DR\nggplot2\n4.0.0 is a major internal update switching to S7 classes\nSome Bioconductor packages may break, especially those customising\nggplot\nthemes/geoms\nOnly affects plotting – statistical or modelling functions remain unchanged\nIf you’re a user, hold off updating ggplot2 until your packages are confirmed to work\nIf you’re a developer, test now using\npak::pak(\"tidyverse/ggplot2\")\nto prepare before release\nQuestions or issues? Join us on\nZulip\nWhat’s Changing?\nThe 4.0.0 release of\nggplot2\nintroduces a major internal refactor: S3 classes are being migrated to the new S7 system. While most users won’t notice the difference, some packages rely on how\nggplot2\nis built internally, for example, by modifying its themes, geoms, or using helper functions. These packages (e.g.\nComplexUpset\n,\nggtree\n,\nplotly\n) may break if that internal structure changes.\nSome issues may be minor, like test failures, while others may cause runtime errors. Either way, this is a good time to review your usage.\nWhy S7?\nS7 is a new object-oriented system in R that makes packages more robust, predictable, and easier to extend. It gives developers better tools for managing complex code, but switching to it can affect packages that rely on how things used to work under the old system (S3).\nIt offers:\nFormal class and method definitions\nLimited multiple dispatch\nCleaner support for interoperability\nGreater consistency across packages\nS7 is being developed by the R Consortium’s OOP Working Group, with contributors from R Core, Bioconductor, Posit, and others.\nLearn more in the\ntidyverse blog post\nand on the\nR Consortium’s S7 site\n.\nFor Developers\nWhat Developers Should Do Now\nYou can test your package against the development version of\nggplot2\nusing:\n# install.packages(\"pak\")\npak::pak(\"tidyverse/ggplot2\")\nWe recommend testing in an isolated environment using\n{renv}\nto avoid unexpected interactions with your existing packages.\nIf you find issues:\nReport a bug:\ngithub.com/tidyverse/ggplot2/issues\nTag\n@teunbrand\non GitHub\nif you’d like input from the\nggplot2\nteam\nDiscuss with the Bioconductor community: Post in\nBioconductor Zulip\nor email the\n[email protected]\nmailing list\nCommon Issues Already Reported\nThese are specific breakages already reported on the\nggplot2\nGitHub:\nClass checks\n: Tests relying on exact class structures like\nclass(p)\nor\nexpect_type(p, \"list\")\nmay now fail. Instead, use\nexpect_true(is_ggplot(p))\nor\nexpect_s3_class(p, \"ggplot\")\nfor compatibility. See\n#6498\n.\nLabel handling\n: Labels are now stricter and constructed later in the build step. Use\nget_labs()\nin tests, and avoid unnamed or duplicate arguments in\nlabs()\n. See\n#6505\n.\nCustom + methods\n: Packages defining custom + operators (e.g.\n+.gg\n) may need to revise their implementation, especially with mixed S3/S7 class use. See\n#6504\n.\nInvalid element properties\n: With S7 class adoption, element constructors like\nelement_text()\nnow enforce stricter type checks (e.g. no TRUE for family, no decimal colours). Fix the incorrect properties in your package. See\n#6507\n.\nS3 method consistency\n: Generics like\nggplot_build()\nand\nggplot_add()\nnow include\n...\nYour methods must include it too, even if unused, to avoid warnings. See\n#6515\n.\nThese are evolving, if something looks broken, it’s worth checking the\nggplot2 issues page\nfor updates before opening a new one.\nThe Bioconductor core team has also been running automated tests on a subset of packages to help spot issues early. Due to resource constraints, this currently covers only a portion of the ecosystem, so it’s still important for developers to test their own packages.\nHow Bioconductor Packages May Be Affected\nWe’ve compiled a list of packages in Bioconductor 3.21 that declare\nggplot2\nin\nDepends\n,\nImports\n, or\nSuggests\n:\nCode\nlibrary(BiocManager)\nlibrary(tidyverse)\nlibrary(reactable)\n\nrepos <- repositories(version = \"3.21\")\nbioc_repos <- repos[grepl(\"BioC\", names(repos))]\ndb <- available.packages(contrib.url(bioc_repos))\n\npkg_df <- as_tibble(db) %>%\n  mutate(\n    ggplot2_usage = case_when(\n      grepl(\"ggplot2\", Depends) ~ \"Depends\",\n      grepl(\"ggplot2\", Imports) ~ \"Imports\",\n      grepl(\"ggplot2\", Suggests) ~ \"Suggests\",\n      TRUE ~ NA_character_\n    )\n  ) %>%\n  filter(!is.na(ggplot2_usage)) %>%\n  select(Package, ggplot2_usage) %>%\n  arrange(Package)\n\nreactable(\n  pkg_df,\n  searchable = TRUE,\n  filterable = TRUE,\n  columns = list(\n    Package = colDef(name = \"Package\"),\n    ggplot2_usage = colDef(name = \"ggplot2 Usage\")\n  ),\n  defaultSorted = \"Package\",\n  striped = TRUE,\n  bordered = TRUE,\n  highlight = TRUE,\n  defaultPageSize = 20,\n  showPageSizeOptions = TRUE,\n  compact = TRUE\n)\nNote:\nNot all of these packages will be equally affected. In fact, many Bioconductor packages use\nggplot2\nin straightforward ways (e.g. to create standard plots using\nggplot()\nand\ngeom_*()\n), which are unlikely to break. The packages most at risk are those that define custom geoms, themes, or modify internal\nggplot2\nbehaviour.\nA total of 985 packages in Bioconductor 3.21 declare\nggplot2\nas a dependency: 91 in\nDepends\n, 722 in\nImports\n, and 172 in\nSuggests\n.\nPackages listed under\nDepends\nor\nImports\nare more likely to use\nggplot2\nin their main functionality, so users and developers may see breakages. Those listed under\nSuggests\ntypically only use\nggplot2\nin optional examples or vignettes, and may not be affected unless those features are run.\nDevelopers of these packages have already been notified through the Bioconductor Zulip, the bioc-devel mailing list, and direct outreach on GitHub. Teun van den Brand from the\nggplot2\nteam has been contacting affected maintainers, and several packages have already been patched or are in progress.\nLessons from the Community: Practical Tips\nMany developers have already been testing their packages and sharing their findings in the\nBioconductor Zulip\n. These discussions have surfaced some practical tips and patterns to watch for, useful whether you’re maintaining a package or trying to understand why something might have broken:\nTests relying on internal structure may fail.\nAvoid checks like\nclass(p)\nor\nexpect_type(p, \"list\")\n. Use\nexpect_s3_class()\nor helper functions like\nis_ggplot()\ninstead.\nTheme customisation is safer with best practices.\nBuild from a base theme using\n%+replace%\n, and avoid storing theme objects in compiled code.\nRelated packages matter.\nUpdating packages like\npatchwork\nor\nplotly\nmay help if your code uses them alongside\nggplot2\n.\nMake your package easy to find and fix.\nEnsure your\nDESCRIPTION\nincludes\nURL\nand\nBugReports\nfields so others can locate your repo or report issues.\nYou can follow the discussion in the\nBioconductor Zulip\ntopic:\nNotifying Bioc maintainers (ggplot2 S7 reverse deps)\n.\nFor Users\nWhy This Might Break Your Code\nBioconductor has two scheduled releases\na year, and those versions are mostly fixed once released. But CRAN packages like\nggplot2\nupdate more frequently, and those updates can occasionally break Bioconductor packages, especially if you install the new version before Bioconductor packages have had a chance to adapt. In some cases, developers can patch their packages within the current Bioconductor release. But that’s not always possible, it depends on the issue and whether the maintainer has time and capacity to update quickly.\nThis\nggplot2\nupdate doesn’t mean your whole installation will break. In most cases, only some plotting functionality might stop working, or plots may look different e.g. missing labels or themes.\nWhat You Can Do\nIf you use\nggplot2\n, either directly or via a Bioconductor package, this update may affect you.\nBreakages can happen if you:\nRun\nupdate.packages()\nInstall a CRAN or GitHub package that pulls in the new\nggplot2\nUse a package manager like\n{pak}\nthat updates dependencies automatically\nTo avoid disruptions\n:\nHold off updating\nggplot2\nuntil you’ve tested that it works with your code and the packages you use.\nYou can already test with the development version, see below.\nIf your code is working as expected, you don’t need to act immediately. But testing ahead of the CRAN release can give you confidence that everything will continue working once\nggplot2\n4.0.0 is out.\nHow to Check If You’re Affected\nThe development version of ggplot2 (4.0.0) is already available for testing using {pak}. The CRAN release is expected mid-to-late July. If you’re not sure whether to update once it’s out, here’s how you can test your current setup ahead of time.\nCreate a temporary or isolated environment using\n{renv}\nInstall the development version of\nggplot2\n:\ninstall.packages(\"pak\")\npak::pak(\"tidyverse/ggplot2\")\nRe-run your code and check that plots appear as expected\nIf something breaks, you can always roll back, or just hold off updating until patches are released.\nTools to Help\nTo manage versions and avoid surprises:\nUse\n{renv}\nto snapshot your current setup:\n# Create a reproducible project setup\nrenv::init()\nrenv::snapshot()\nWhen updating, use:\nupdate.packages(ask = TRUE)\nand consider skipping\nggplot2\nif you’re unsure.\nFinal Notes\nThanks to everyone who has tested, reported, or patched packages ahead of this release. Special thanks to\nTeun van den Brand\nand the\nggplot2\nteam for their proactive and open collaboration with the Bioconductor community.\nIf you maintain a package using\nggplot2\nand haven’t tested it yet, testing now can help your users, and save others from running into the same issues.\nNot a developer? Reporting even small glitches after updating ggplot2 can still be useful, if the issue isn’t already known. Before posting, it’s worth checking if the problem has been reported on the package’s GitHub or discussed in Bioconductor Zulip. If it has, you can add a comment or emoji reaction to help signal it’s affecting others too. That kind of input helps maintainers prioritise and can save time for everyone.\nFixes may take time to propagate, especially with so many interdependent packages, and most Bioconductor maintainers contributing alongside full academic workloads. But progress is steady, and made easier when people flag issues early.\nBig changes like this aren’t always smooth, but open communication goes a long way. Whether you’re maintaining a package, reporting a bug, or just keeping an eye out, it all helps. Thanks for reading, and for being part of this collaborative process.\n© 2025 Bioconductor. Content is published under\nCreative Commons CC-BY-4.0 License\nfor the text and\nBSD 3-Clause License\nfor any code. |\nR-Bloggers\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nBioconductor community blog\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "Introduction A major update to ggplot2 (version 4.0.0) is expected around mid-to-late July 2025. It brings a significant internal change, replacing most of the S3 backend with the newer S7 object system. While this improves long-term maintainability and extensibility, it may break Bioconductor packages that depend on ggplot2, especially those that customise how plots are built or styled. Packages that use ggplot2 for typical plotting tasks, such as creating plots with ggplot() and geom_*(), are unlikely to be affected. TL;DR ggplot2 4.0.0 is a major internal update switching to S7 classes Some Bioconductor packages may break, especially those customising ggplot themes/geoms Only affects plotting - statistical or modelling functions remain unchanged If you’re a user, hold off updating ggplot2 until your packages are confirmed to work If you’re a developer, test now using pak::pak(\"tidyverse/ggplot2\") to prepare before release Questions or issues? Join us on Zulip What’s Changing? The 4.0.0 release of ggplot2 introduces a major internal refactor: S3 classes are being migrated to the new S7 system. While most users won’t notice the difference, some packages rely on how ggplot2 is built internally, for example, by modifying its themes, geoms, or using helper functions. These packages (e.g. ComplexUpset, ggtree, plotly) may break if that internal structure changes. Some issues may be minor, like test failures, while others may cause runtime errors. Either way, this is a good time to review your usage. Why S7? S7 is a new object-oriented system in R that makes packages more robust, predictable, and easier to extend. It gives developers better tools for managing complex code, but switching to it can affect packages that rely on how things used to work under the old system (S3). It offers: Formal class and method definitions Limited multiple dispatch Cleaner support for interoperability Greater consistency across packages S7 is being developed by the R Consortium’s OOP Working Group, with contributors from R Core, Bioconductor, Posit, and others. Learn more in the tidyverse blog post and on the R Consortium’s S7 site. For Developers What Developers Should Do Now You can test your package against the development version of ggplot2 using: # install.packages(\"pak\") pak::pak(\"tidyverse/ggplot2\") We recommend testing in an isolated environment using {renv} to avoid unexpected interactions with your existing packages. If you find issues: Report a bug: github.com/tidyverse/ggplot2/issues Tag @teunbrand on GitHub if you’d like input from the ggplot2 team Discuss with the Bioconductor community: Post in Bioconductor Zulip or email the bioc-devel@r-project.org mailing list Common Issues Already Reported These are specific breakages already reported on the ggplot2 GitHub: Class checks: Tests relying on exact class structures like class(p) or expect_type(p, \"list\") may now fail. Instead, use expect_true(is_ggplot(p)) or expect_s3_class(p, \"ggplot\") for compatibility. See #6498. Label handling: Labels are now stricter and constructed later in the build step. Use get_labs() in tests, and avoid unnamed or duplicate arguments in labs(). See #6505. Custom + methods: Packages defining custom + operators (e.g. +.gg) may need to revise their implementation, especially with mixed S3/S7 class use. See #6504. Invalid element properties: With S7 class adoption, element constructors like element_text() now enforce stricter type checks (e.g. no TRUE for family, no decimal colours). Fix the incorrect properties in your package. See #6507. S3 method consistency: Generics like ggplot_build() and ggplot_add() now include ... Your methods must include it too, even if unused, to avoid warnings. See #6515. These are evolving, if something looks broken, it’s worth checking the ggplot2 issues page for updates before opening a new one. The Bioconductor core team has also been running automated tests on a subset of packages to help spot issues early. Due to resource constraints, this currently covers only a portion of the ecosystem, so it’s still important for developers to test their own packages. How Bioconductor Packages May Be Affected We’ve compiled a list of packages in Bioconductor 3.21 that declare ggplot2 in Depends, Imports, or Suggests: Code library(BiocManager) library(tidyverse) library(reactable) repos % arrange(Package) reactable( pkg_df, searchable = TRUE, filterable = TRUE, columns = list( Package = colDef(name = \"Package\"), ggplot2_usage = colDef(name = \"ggplot2 Usage\") ), defaultSorted = \"Package\", striped = TRUE, bordered = TRUE, highlight = TRUE, defaultPageSize = 20, showPageSizeOptions = TRUE, compact = TRUE ) Note: Not all of these packages will be equally affected. In fact, many Bioconductor packages use ggplot2 in straightforward ways (e.g. to create standard plots using ggplot() and geom_*()), which are unlikely to break. The packages most at risk are those that define custom geoms, themes, or modify internal ggplot2 behaviour. A total of 985 packages in Bioconductor 3.21 declare ggplot2 as a dependency: 91 in Depends, 722 in Imports, and 172 in Suggests. Packages listed under Depends or Imports are more likely to use ggplot2 in their main functionality, so users and developers may see breakages. Those listed under Suggests typically only use ggplot2 in optional examples or vignettes, and may not be affected unless those features are run. Developers of these packages have already been notified through the Bioconductor Zulip, the bioc-devel mailing list, and direct outreach on GitHub. Teun van den Brand from the ggplot2 team has been contacting affected maintainers, and several packages have already been patched or are in progress. Lessons from the Community: Practical Tips Many developers have already been testing their packages and sharing their findings in the Bioconductor Zulip. These discussions have surfaced some practical tips and patterns to watch for, useful whether you’re maintaining a package or trying to understand why something might have broken: Tests relying on internal structure may fail. Avoid checks like class(p) or expect_type(p, \"list\"). Use expect_s3_class() or helper functions like is_ggplot() instead. Theme customisation is safer with best practices. Build from a base theme using %+replace%, and avoid storing theme objects in compiled code. Related packages matter. Updating packages like patchwork or plotly may help if your code uses them alongside ggplot2. Make your package easy to find and fix. Ensure your DESCRIPTION includes URL and BugReports fields so others can locate your repo or report issues. You can follow the discussion in the Bioconductor Zulip topic: Notifying Bioc maintainers (ggplot2 S7 reverse deps). For Users Why This Might Break Your Code Bioconductor has two scheduled releases a year, and those versions are mostly fixed once released. But CRAN packages like ggplot2 update more frequently, and those updates can occasionally break Bioconductor packages, especially if you install the new version before Bioconductor packages have had a chance to adapt. In some cases, developers can patch their packages within the current Bioconductor release. But that’s not always possible, it depends on the issue and whether the maintainer has time and capacity to update quickly. This ggplot2 update doesn’t mean your whole installation will break. In most cases, only some plotting functionality might stop working, or plots may look different e.g. missing labels or themes. What You Can Do If you use ggplot2, either directly or via a Bioconductor package, this update may affect you. Breakages can happen if you: Run update.packages() Install a CRAN or GitHub package that pulls in the new ggplot2 Use a package manager like {pak} that updates dependencies automatically To avoid disruptions: Hold off updating ggplot2 until you’ve tested that it works with your code and the packages you use. You can already test with the development version, see below. If your code is working as expected, you don’t need to act immediately. But testing ahead of the CRAN release can give you confidence that everything will continue working once ggplot2 4.0.0 is out. How to Check If You’re Affected The development version of ggplot2 (4.0.0) is already available for testing using {pak}. The CRAN release is expected mid-to-late July. If you’re not sure whether to update once it’s out, here’s how you can test your current setup ahead of time. Create a temporary or isolated environment using {renv} Install the development version of ggplot2: install.packages(\"pak\") pak::pak(\"tidyverse/ggplot2\") Re-run your code and check that plots appear as expected If something breaks, you can always roll back, or just hold off updating until patches are released. Tools to Help To manage versions and avoid surprises: Use {renv} to snapshot your current setup: # Create a reproducible project setup renv::init() renv::snapshot() When updating, use: update.packages(ask = TRUE) and consider skipping ggplot2 if you’re unsure. Final Notes Thanks to everyone who has tested, reported, or patched packages ahead of this release. Special thanks to Teun van den Brand and the ggplot2 team for their proactive and open collaboration with the Bioconductor community. If you maintain a package using ggplot2 and haven’t tested it yet, testing now can help your users, and save others from running into the same issues. Not a developer? Reporting even small glitches after updating ggplot2 can still be useful, if the issue isn’t already known. Before posting, it’s worth checking if the problem has been reported on the package’s GitHub or discussed in Bioconductor Zulip. If it has, you can add a comment or emoji reaction to help signal it’s affecting others too. That kind of input helps maintainers prioritise and can save time for everyone. Fixes may take time to propagate, especially with so many interdependent packages, and most Bioconductor maintainers contributing alongside full academic workloads. But progress is steady, and made easier when people flag issues early. Big changes like this aren’t always smooth, but open communication goes a long way. Whether you’re maintaining a package, reporting a bug, or just keeping an eye out, it all helps. Thanks for reading, and for being part of this collaborative process. © 2025 Bioconductor. Content is published under Creative Commons CC-BY-4.0 License for the text and BSD 3-Clause License for any code. | R-Bloggers",
    "meta_keywords": null,
    "og_description": "Introduction A major update to ggplot2 (version 4.0.0) is expected around mid-to-late July 2025. It brings a significant internal change, replacing most of the S3 backend with the newer S7 object system. While this improves long-term maintainability and extensibility, it may break Bioconductor packages that depend on ggplot2, especially those that customise how plots are built or styled. Packages that use ggplot2 for typical plotting tasks, such as creating plots with ggplot() and geom_*(), are unlikely to be affected. TL;DR ggplot2 4.0.0 is a major internal update switching to S7 classes Some Bioconductor packages may break, especially those customising ggplot themes/geoms Only affects plotting - statistical or modelling functions remain unchanged If you’re a user, hold off updating ggplot2 until your packages are confirmed to work If you’re a developer, test now using pak::pak(\"tidyverse/ggplot2\") to prepare before release Questions or issues? Join us on Zulip What’s Changing? The 4.0.0 release of ggplot2 introduces a major internal refactor: S3 classes are being migrated to the new S7 system. While most users won’t notice the difference, some packages rely on how ggplot2 is built internally, for example, by modifying its themes, geoms, or using helper functions. These packages (e.g. ComplexUpset, ggtree, plotly) may break if that internal structure changes. Some issues may be minor, like test failures, while others may cause runtime errors. Either way, this is a good time to review your usage. Why S7? S7 is a new object-oriented system in R that makes packages more robust, predictable, and easier to extend. It gives developers better tools for managing complex code, but switching to it can affect packages that rely on how things used to work under the old system (S3). It offers: Formal class and method definitions Limited multiple dispatch Cleaner support for interoperability Greater consistency across packages S7 is being developed by the R Consortium’s OOP Working Group, with contributors from R Core, Bioconductor, Posit, and others. Learn more in the tidyverse blog post and on the R Consortium’s S7 site. For Developers What Developers Should Do Now You can test your package against the development version of ggplot2 using: # install.packages(\"pak\") pak::pak(\"tidyverse/ggplot2\") We recommend testing in an isolated environment using {renv} to avoid unexpected interactions with your existing packages. If you find issues: Report a bug: github.com/tidyverse/ggplot2/issues Tag @teunbrand on GitHub if you’d like input from the ggplot2 team Discuss with the Bioconductor community: Post in Bioconductor Zulip or email the bioc-devel@r-project.org mailing list Common Issues Already Reported These are specific breakages already reported on the ggplot2 GitHub: Class checks: Tests relying on exact class structures like class(p) or expect_type(p, \"list\") may now fail. Instead, use expect_true(is_ggplot(p)) or expect_s3_class(p, \"ggplot\") for compatibility. See #6498. Label handling: Labels are now stricter and constructed later in the build step. Use get_labs() in tests, and avoid unnamed or duplicate arguments in labs(). See #6505. Custom + methods: Packages defining custom + operators (e.g. +.gg) may need to revise their implementation, especially with mixed S3/S7 class use. See #6504. Invalid element properties: With S7 class adoption, element constructors like element_text() now enforce stricter type checks (e.g. no TRUE for family, no decimal colours). Fix the incorrect properties in your package. See #6507. S3 method consistency: Generics like ggplot_build() and ggplot_add() now include ... Your methods must include it too, even if unused, to avoid warnings. See #6515. These are evolving, if something looks broken, it’s worth checking the ggplot2 issues page for updates before opening a new one. The Bioconductor core team has also been running automated tests on a subset of packages to help spot issues early. Due to resource constraints, this currently covers only a portion of the ecosystem, so it’s still important for developers to test their own packages. How Bioconductor Packages May Be Affected We’ve compiled a list of packages in Bioconductor 3.21 that declare ggplot2 in Depends, Imports, or Suggests: Code library(BiocManager) library(tidyverse) library(reactable) repos % arrange(Package) reactable( pkg_df, searchable = TRUE, filterable = TRUE, columns = list( Package = colDef(name = \"Package\"), ggplot2_usage = colDef(name = \"ggplot2 Usage\") ), defaultSorted = \"Package\", striped = TRUE, bordered = TRUE, highlight = TRUE, defaultPageSize = 20, showPageSizeOptions = TRUE, compact = TRUE ) Note: Not all of these packages will be equally affected. In fact, many Bioconductor packages use ggplot2 in straightforward ways (e.g. to create standard plots using ggplot() and geom_*()), which are unlikely to break. The packages most at risk are those that define custom geoms, themes, or modify internal ggplot2 behaviour. A total of 985 packages in Bioconductor 3.21 declare ggplot2 as a dependency: 91 in Depends, 722 in Imports, and 172 in Suggests. Packages listed under Depends or Imports are more likely to use ggplot2 in their main functionality, so users and developers may see breakages. Those listed under Suggests typically only use ggplot2 in optional examples or vignettes, and may not be affected unless those features are run. Developers of these packages have already been notified through the Bioconductor Zulip, the bioc-devel mailing list, and direct outreach on GitHub. Teun van den Brand from the ggplot2 team has been contacting affected maintainers, and several packages have already been patched or are in progress. Lessons from the Community: Practical Tips Many developers have already been testing their packages and sharing their findings in the Bioconductor Zulip. These discussions have surfaced some practical tips and patterns to watch for, useful whether you’re maintaining a package or trying to understand why something might have broken: Tests relying on internal structure may fail. Avoid checks like class(p) or expect_type(p, \"list\"). Use expect_s3_class() or helper functions like is_ggplot() instead. Theme customisation is safer with best practices. Build from a base theme using %+replace%, and avoid storing theme objects in compiled code. Related packages matter. Updating packages like patchwork or plotly may help if your code uses them alongside ggplot2. Make your package easy to find and fix. Ensure your DESCRIPTION includes URL and BugReports fields so others can locate your repo or report issues. You can follow the discussion in the Bioconductor Zulip topic: Notifying Bioc maintainers (ggplot2 S7 reverse deps). For Users Why This Might Break Your Code Bioconductor has two scheduled releases a year, and those versions are mostly fixed once released. But CRAN packages like ggplot2 update more frequently, and those updates can occasionally break Bioconductor packages, especially if you install the new version before Bioconductor packages have had a chance to adapt. In some cases, developers can patch their packages within the current Bioconductor release. But that’s not always possible, it depends on the issue and whether the maintainer has time and capacity to update quickly. This ggplot2 update doesn’t mean your whole installation will break. In most cases, only some plotting functionality might stop working, or plots may look different e.g. missing labels or themes. What You Can Do If you use ggplot2, either directly or via a Bioconductor package, this update may affect you. Breakages can happen if you: Run update.packages() Install a CRAN or GitHub package that pulls in the new ggplot2 Use a package manager like {pak} that updates dependencies automatically To avoid disruptions: Hold off updating ggplot2 until you’ve tested that it works with your code and the packages you use. You can already test with the development version, see below. If your code is working as expected, you don’t need to act immediately. But testing ahead of the CRAN release can give you confidence that everything will continue working once ggplot2 4.0.0 is out. How to Check If You’re Affected The development version of ggplot2 (4.0.0) is already available for testing using {pak}. The CRAN release is expected mid-to-late July. If you’re not sure whether to update once it’s out, here’s how you can test your current setup ahead of time. Create a temporary or isolated environment using {renv} Install the development version of ggplot2: install.packages(\"pak\") pak::pak(\"tidyverse/ggplot2\") Re-run your code and check that plots appear as expected If something breaks, you can always roll back, or just hold off updating until patches are released. Tools to Help To manage versions and avoid surprises: Use {renv} to snapshot your current setup: # Create a reproducible project setup renv::init() renv::snapshot() When updating, use: update.packages(ask = TRUE) and consider skipping ggplot2 if you’re unsure. Final Notes Thanks to everyone who has tested, reported, or patched packages ahead of this release. Special thanks to Teun van den Brand and the ggplot2 team for their proactive and open collaboration with the Bioconductor community. If you maintain a package using ggplot2 and haven’t tested it yet, testing now can help your users, and save others from running into the same issues. Not a developer? Reporting even small glitches after updating ggplot2 can still be useful, if the issue isn’t already known. Before posting, it’s worth checking if the problem has been reported on the package’s GitHub or discussed in Bioconductor Zulip. If it has, you can add a comment or emoji reaction to help signal it’s affecting others too. That kind of input helps maintainers prioritise and can save time for everyone. Fixes may take time to propagate, especially with so many interdependent packages, and most Bioconductor maintainers contributing alongside full academic workloads. But progress is steady, and made easier when people flag issues early. Big changes like this aren’t always smooth, but open communication goes a long way. Whether you’re maintaining a package, reporting a bug, or just keeping an eye out, it all helps. Thanks for reading, and for being part of this collaborative process. © 2025 Bioconductor. Content is published under Creative Commons CC-BY-4.0 License for the text and BSD 3-Clause License for any code. | R-Bloggers",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Bioconductor and ggplot2 4.0.0: What’s Changing and How to Prepare | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 9.3,
    "sitemap_lastmod": null,
    "twitter_description": "Introduction A major update to ggplot2 (version 4.0.0) is expected around mid-to-late July 2025. It brings a significant internal change, replacing most of the S3 backend with the newer S7 object system. While this improves long-term maintainability and extensibility, it may break Bioconductor packages that depend on ggplot2, especially those that customise how plots are built or styled. Packages that use ggplot2 for typical plotting tasks, such as creating plots with ggplot() and geom_*(), are unlikely to be affected. TL;DR ggplot2 4.0.0 is a major internal update switching to S7 classes Some Bioconductor packages may break, especially those customising ggplot themes/geoms Only affects plotting - statistical or modelling functions remain unchanged If you’re a user, hold off updating ggplot2 until your packages are confirmed to work If you’re a developer, test now using pak::pak(\"tidyverse/ggplot2\") to prepare before release Questions or issues? Join us on Zulip What’s Changing? The 4.0.0 release of ggplot2 introduces a major internal refactor: S3 classes are being migrated to the new S7 system. While most users won’t notice the difference, some packages rely on how ggplot2 is built internally, for example, by modifying its themes, geoms, or using helper functions. These packages (e.g. ComplexUpset, ggtree, plotly) may break if that internal structure changes. Some issues may be minor, like test failures, while others may cause runtime errors. Either way, this is a good time to review your usage. Why S7? S7 is a new object-oriented system in R that makes packages more robust, predictable, and easier to extend. It gives developers better tools for managing complex code, but switching to it can affect packages that rely on how things used to work under the old system (S3). It offers: Formal class and method definitions Limited multiple dispatch Cleaner support for interoperability Greater consistency across packages S7 is being developed by the R Consortium’s OOP Working Group, with contributors from R Core, Bioconductor, Posit, and others. Learn more in the tidyverse blog post and on the R Consortium’s S7 site. For Developers What Developers Should Do Now You can test your package against the development version of ggplot2 using: # install.packages(\"pak\") pak::pak(\"tidyverse/ggplot2\") We recommend testing in an isolated environment using {renv} to avoid unexpected interactions with your existing packages. If you find issues: Report a bug: github.com/tidyverse/ggplot2/issues Tag @teunbrand on GitHub if you’d like input from the ggplot2 team Discuss with the Bioconductor community: Post in Bioconductor Zulip or email the bioc-devel@r-project.org mailing list Common Issues Already Reported These are specific breakages already reported on the ggplot2 GitHub: Class checks: Tests relying on exact class structures like class(p) or expect_type(p, \"list\") may now fail. Instead, use expect_true(is_ggplot(p)) or expect_s3_class(p, \"ggplot\") for compatibility. See #6498. Label handling: Labels are now stricter and constructed later in the build step. Use get_labs() in tests, and avoid unnamed or duplicate arguments in labs(). See #6505. Custom + methods: Packages defining custom + operators (e.g. +.gg) may need to revise their implementation, especially with mixed S3/S7 class use. See #6504. Invalid element properties: With S7 class adoption, element constructors like element_text() now enforce stricter type checks (e.g. no TRUE for family, no decimal colours). Fix the incorrect properties in your package. See #6507. S3 method consistency: Generics like ggplot_build() and ggplot_add() now include ... Your methods must include it too, even if unused, to avoid warnings. See #6515. These are evolving, if something looks broken, it’s worth checking the ggplot2 issues page for updates before opening a new one. The Bioconductor core team has also been running automated tests on a subset of packages to help spot issues early. Due to resource constraints, this currently covers only a portion of the ecosystem, so it’s still important for developers to test their own packages. How Bioconductor Packages May Be Affected We’ve compiled a list of packages in Bioconductor 3.21 that declare ggplot2 in Depends, Imports, or Suggests: Code library(BiocManager) library(tidyverse) library(reactable) repos % arrange(Package) reactable( pkg_df, searchable = TRUE, filterable = TRUE, columns = list( Package = colDef(name = \"Package\"), ggplot2_usage = colDef(name = \"ggplot2 Usage\") ), defaultSorted = \"Package\", striped = TRUE, bordered = TRUE, highlight = TRUE, defaultPageSize = 20, showPageSizeOptions = TRUE, compact = TRUE ) Note: Not all of these packages will be equally affected. In fact, many Bioconductor packages use ggplot2 in straightforward ways (e.g. to create standard plots using ggplot() and geom_*()), which are unlikely to break. The packages most at risk are those that define custom geoms, themes, or modify internal ggplot2 behaviour. A total of 985 packages in Bioconductor 3.21 declare ggplot2 as a dependency: 91 in Depends, 722 in Imports, and 172 in Suggests. Packages listed under Depends or Imports are more likely to use ggplot2 in their main functionality, so users and developers may see breakages. Those listed under Suggests typically only use ggplot2 in optional examples or vignettes, and may not be affected unless those features are run. Developers of these packages have already been notified through the Bioconductor Zulip, the bioc-devel mailing list, and direct outreach on GitHub. Teun van den Brand from the ggplot2 team has been contacting affected maintainers, and several packages have already been patched or are in progress. Lessons from the Community: Practical Tips Many developers have already been testing their packages and sharing their findings in the Bioconductor Zulip. These discussions have surfaced some practical tips and patterns to watch for, useful whether you’re maintaining a package or trying to understand why something might have broken: Tests relying on internal structure may fail. Avoid checks like class(p) or expect_type(p, \"list\"). Use expect_s3_class() or helper functions like is_ggplot() instead. Theme customisation is safer with best practices. Build from a base theme using %+replace%, and avoid storing theme objects in compiled code. Related packages matter. Updating packages like patchwork or plotly may help if your code uses them alongside ggplot2. Make your package easy to find and fix. Ensure your DESCRIPTION includes URL and BugReports fields so others can locate your repo or report issues. You can follow the discussion in the Bioconductor Zulip topic: Notifying Bioc maintainers (ggplot2 S7 reverse deps). For Users Why This Might Break Your Code Bioconductor has two scheduled releases a year, and those versions are mostly fixed once released. But CRAN packages like ggplot2 update more frequently, and those updates can occasionally break Bioconductor packages, especially if you install the new version before Bioconductor packages have had a chance to adapt. In some cases, developers can patch their packages within the current Bioconductor release. But that’s not always possible, it depends on the issue and whether the maintainer has time and capacity to update quickly. This ggplot2 update doesn’t mean your whole installation will break. In most cases, only some plotting functionality might stop working, or plots may look different e.g. missing labels or themes. What You Can Do If you use ggplot2, either directly or via a Bioconductor package, this update may affect you. Breakages can happen if you: Run update.packages() Install a CRAN or GitHub package that pulls in the new ggplot2 Use a package manager like {pak} that updates dependencies automatically To avoid disruptions: Hold off updating ggplot2 until you’ve tested that it works with your code and the packages you use. You can already test with the development version, see below. If your code is working as expected, you don’t need to act immediately. But testing ahead of the CRAN release can give you confidence that everything will continue working once ggplot2 4.0.0 is out. How to Check If You’re Affected The development version of ggplot2 (4.0.0) is already available for testing using {pak}. The CRAN release is expected mid-to-late July. If you’re not sure whether to update once it’s out, here’s how you can test your current setup ahead of time. Create a temporary or isolated environment using {renv} Install the development version of ggplot2: install.packages(\"pak\") pak::pak(\"tidyverse/ggplot2\") Re-run your code and check that plots appear as expected If something breaks, you can always roll back, or just hold off updating until patches are released. Tools to Help To manage versions and avoid surprises: Use {renv} to snapshot your current setup: # Create a reproducible project setup renv::init() renv::snapshot() When updating, use: update.packages(ask = TRUE) and consider skipping ggplot2 if you’re unsure. Final Notes Thanks to everyone who has tested, reported, or patched packages ahead of this release. Special thanks to Teun van den Brand and the ggplot2 team for their proactive and open collaboration with the Bioconductor community. If you maintain a package using ggplot2 and haven’t tested it yet, testing now can help your users, and save others from running into the same issues. Not a developer? Reporting even small glitches after updating ggplot2 can still be useful, if the issue isn’t already known. Before posting, it’s worth checking if the problem has been reported on the package’s GitHub or discussed in Bioconductor Zulip. If it has, you can add a comment or emoji reaction to help signal it’s affecting others too. That kind of input helps maintainers prioritise and can save time for everyone. Fixes may take time to propagate, especially with so many interdependent packages, and most Bioconductor maintainers contributing alongside full academic workloads. But progress is steady, and made easier when people flag issues early. Big changes like this aren’t always smooth, but open communication goes a long way. Whether you’re maintaining a package, reporting a bug, or just keeping an eye out, it all helps. Thanks for reading, and for being part of this collaborative process. © 2025 Bioconductor. Content is published under Creative Commons CC-BY-4.0 License for the text and BSD 3-Clause License for any code. | R-Bloggers",
    "twitter_title": "Bioconductor and ggplot2 4.0.0: What’s Changing and How to Prepare | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/07/bioconductor-and-ggplot2-4-0-0-whats-changing-and-how-to-prepare/",
    "word_count": 1867
  }
}