{
  "uuid": "9aca33ef-7d7b-4ae4-8850-da552eacd30f",
  "created_at": "2025-11-17 20:39:17",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2023/11/choropleth/",
    "crawled_at": "2025-11-17T09:57:13.863386",
    "external_links": [
      {
        "href": "https://r.iresmi.net/posts/2023/choropleth/index.html",
        "text": "r.iresmi.net"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://flic.kr/p/2a9GEKB",
        "text": null
      },
      {
        "href": "https://30daymapchallenge.com/",
        "text": "30DayMapChallenge"
      },
      {
        "href": "https://r.iresmi.net/#category=30DayMapChallenge",
        "text": "previously"
      },
      {
        "href": "https://stats.agriculture.gouv.fr/cartostat/",
        "text": "2020 census"
      },
      {
        "href": "https://r.iresmi.net/posts/2023/choropleth/index.html",
        "text": "r.iresmi.net"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Choropleth | R-bloggers",
    "images": [
      {
        "alt": "A photo of Solutré-Pouilly, France",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "A photo of Solutré-Pouilly, France",
        "base64": null,
        "src": "https://i2.wp.com/r.iresmi.net/posts/2023/choropleth/images/44074370265_629e89fb7e_c.jpg?w=578&ssl=1"
      },
      {
        "alt": "Map of Specialization of agricultural production in France in 2020",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "Map of Specialization of agricultural production in France in 2020",
        "base64": null,
        "src": "https://i2.wp.com/r.iresmi.net/posts/2023/choropleth/index_files/figure-html/fig-map-1.png?w=578&ssl=1"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/michael/",
        "text": "Michael"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-379975 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Choropleth</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">November 13, 2023</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/michael/\">Michael</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://r.iresmi.net/posts/2023/choropleth/index.html\"> r.iresmi.net</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<div class=\"quarto-figure quarto-figure-center\">\n<figure class=\"figure\">\n<p><a href=\"https://flic.kr/p/2a9GEKB\" rel=\"nofollow\" target=\"_blank\"><img alt=\"A photo of Solutré-Pouilly, France\" class=\"img-fluid figure-img\" data-lazy-src=\"https://i2.wp.com/r.iresmi.net/posts/2023/choropleth/images/44074370265_629e89fb7e_c.jpg?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"A photo of Solutré-Pouilly, France\" class=\"img-fluid figure-img\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/r.iresmi.net/posts/2023/choropleth/images/44074370265_629e89fb7e_c.jpg?w=578&amp;ssl=1\"/></noscript></a></p>\n<figcaption class=\"figure-caption\">Vineyards in Burgundy – CC-BY-ND by x1klima</figcaption>\n</figure>\n</div>\n<p>Day 13 of <a href=\"https://30daymapchallenge.com/\" rel=\"nofollow\" target=\"_blank\">30DayMapChallenge</a>: « Choropleth » (<a href=\"https://r.iresmi.net/#category=30DayMapChallenge\" rel=\"nofollow\" target=\"_blank\">previously</a>).</p>\n<p>Using the French <a href=\"https://stats.agriculture.gouv.fr/cartostat/\" rel=\"nofollow\" target=\"_blank\">2020 census</a> to map the specialization of agricultural production by commune.</p>\n<div class=\"cell\">\n<pre>library(tidyverse)\nlibrary(sf)\nlibrary(janitor)\nlibrary(ggspatial)\nlibrary(glue)\n\n# final projection\nproj &lt;- \"EPSG:3035\"\n\n# Data: No direct URL\n# https://stats.agriculture.gouv.fr/cartostat/#c=indicator&amp;i=otex_2020_1.otefdd20&amp;t=A02&amp;view=map11\n# -&gt; Spécialisation de la production agricole en 2020 (12 postes)\n# TABLEAU &gt; ACTION &gt; EXPORTER\notex &lt;- read_csv2(\"data.csv\", skip = 2) |&gt; \n  clean_names()\n\n# classification\n# https://agreste.agriculture.gouv.fr/agreste-web/methodon/N.1/!searchurl/listeTypeMethodon/\n# Can you believe it? PDF only :-(\ncodes &lt;- tribble(\n  ~otefda, ~color,           ~orientation,\n  \"1516\", \"lightgoldenrod1\", \"Field crops\",\n  \"2829\", \"lightskyblue\",    \"Market gardening or\\nhorticulture\",\n  \"3500\", \"darkorchid\",      \"Viticulture\",\n  \"3900\", \"deeppink3\",       \"Fruit crops or\\nother permanent crops\",\n  \"4500\", \"dodgerblue3\",     \"Dairy cattle\",\n  \"4600\", \"firebrick3\",      \"Cattle breeding and\\nmeat production\",\n  \"4700\", \"darkseagreen2\",   \"Combined dairy cattle,\\nbreeding and meat production\",\n  \"4800\", \"darkolivegreen4\", \"Sheep and/or goats and/or\\nother herbivores\",\n  \"5074\", \"hotpink\",         \"Pigs and/or poultry\",\n  \"6184\", \"lightsalmon4\",    \"Polyculture and/or\\nmixed farming\",\n  \"9000\", \"snow3\",           \"Not classified\") |&gt;\n  mutate(orientation = fct_reorder(orientation, otefda))</pre>\n</div>\n<div class=\"cell\" data-hash=\"index_cache/html/unnamed-chunk-2_c19c022b5b9a337fd5b8940514c5055d\">\n<pre># 2020 communes polygon data in GeoJSON\n# From https://www.data.gouv.fr/fr/datasets/contours-des-communes-de-france-simplifie-avec-regions-et-departement-doutre-mer-rapproches/\n# no need to download and unzip with gdal virtual filesystems\ncom &lt;- read_sf(\"/vsizip/vsicurl/https://static.data.gouv.fr/resources/contours-des-communes-de-france-simplifie-avec-regions-et-departement-doutre-mer-rapproches/20201115-140349/a-com2020-geojson.zip\") |&gt; \n  st_transform(proj)</pre>\n</div>\n<div class=\"cell\">\n<pre>com |&gt; \n  left_join(otex, join_by(codgeo == code)) |&gt; \n  left_join(codes, join_by(specialisation_de_la_production_agricole_en_2020_12_postes == otefda)) |&gt; \n  ggplot() +\n  geom_sf(aes(fill = orientation), linewidth = 0) + \n  scale_fill_manual(name = \"OTEX\",\n                    values = codes |&gt;\n                               select(orientation, color) |&gt; \n                               deframe()) +\n  labs(title = \"Specialization of agricultural production\",\n       subtitle = \"France 2020, by commune\",\n       caption = glue(\"{st_crs(proj)$Name} - Overseas France not to scale\n                      Data: Agreste RA 2020\n                      Basemap: IGN Admin Express 2020, Icem7\n                      https://r.iresmi.net/ {Sys.Date()}\")) +\n  annotation_scale(height = unit(1, \"mm\"), bar_cols = c(\"white\", \"grey\")) +\n  theme_void() +\n  theme(plot.margin = margin(0, .3, 0.1, .3, \"cm\"),\n        plot.caption = element_text(size = 6), \n        legend.text = element_text(size = 7),\n        plot.background = element_rect(color = NA, fill = \"white\"))</pre>\n<div class=\"cell-output-display\">\n<div class=\"quarto-figure quarto-figure-center anchored\" id=\"fig-map\">\n<figure class=\"figure\">\n<p><img alt=\"Map of Specialization of agricultural production in France in 2020\" class=\"img-fluid figure-img\" data-lazy-src=\"https://i2.wp.com/r.iresmi.net/posts/2023/choropleth/index_files/figure-html/fig-map-1.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" style=\"width:100.0%\"/><noscript><img alt=\"Map of Specialization of agricultural production in France in 2020\" class=\"img-fluid figure-img\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/r.iresmi.net/posts/2023/choropleth/index_files/figure-html/fig-map-1.png?w=578&amp;ssl=1\" style=\"width:100.0%\"/></noscript></p>\n<figcaption class=\"figure-caption\">Figure 1: Specialization of agricultural production</figcaption>\n</figure>\n</div>\n</div>\n</div>\n<!-- -->\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://r.iresmi.net/posts/2023/choropleth/index.html\"> r.iresmi.net</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div> </div>\n</article>",
    "main_text": "Choropleth\nPosted on\nNovember 13, 2023\nby\nMichael\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nr.iresmi.net\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nVineyards in Burgundy – CC-BY-ND by x1klima\nDay 13 of\n30DayMapChallenge\n: « Choropleth » (\npreviously\n).\nUsing the French\n2020 census\nto map the specialization of agricultural production by commune.\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(janitor)\nlibrary(ggspatial)\nlibrary(glue)\n\n# final projection\nproj <- \"EPSG:3035\"\n\n# Data: No direct URL\n# https://stats.agriculture.gouv.fr/cartostat/#c=indicator&i=otex_2020_1.otefdd20&t=A02&view=map11\n# -> Spécialisation de la production agricole en 2020 (12 postes)\n# TABLEAU > ACTION > EXPORTER\notex <- read_csv2(\"data.csv\", skip = 2) |> \n  clean_names()\n\n# classification\n# https://agreste.agriculture.gouv.fr/agreste-web/methodon/N.1/!searchurl/listeTypeMethodon/\n# Can you believe it? PDF only :-(\ncodes <- tribble(\n  ~otefda, ~color,           ~orientation,\n  \"1516\", \"lightgoldenrod1\", \"Field crops\",\n  \"2829\", \"lightskyblue\",    \"Market gardening or\\nhorticulture\",\n  \"3500\", \"darkorchid\",      \"Viticulture\",\n  \"3900\", \"deeppink3\",       \"Fruit crops or\\nother permanent crops\",\n  \"4500\", \"dodgerblue3\",     \"Dairy cattle\",\n  \"4600\", \"firebrick3\",      \"Cattle breeding and\\nmeat production\",\n  \"4700\", \"darkseagreen2\",   \"Combined dairy cattle,\\nbreeding and meat production\",\n  \"4800\", \"darkolivegreen4\", \"Sheep and/or goats and/or\\nother herbivores\",\n  \"5074\", \"hotpink\",         \"Pigs and/or poultry\",\n  \"6184\", \"lightsalmon4\",    \"Polyculture and/or\\nmixed farming\",\n  \"9000\", \"snow3\",           \"Not classified\") |>\n  mutate(orientation = fct_reorder(orientation, otefda))\n# 2020 communes polygon data in GeoJSON\n# From https://www.data.gouv.fr/fr/datasets/contours-des-communes-de-france-simplifie-avec-regions-et-departement-doutre-mer-rapproches/\n# no need to download and unzip with gdal virtual filesystems\ncom <- read_sf(\"/vsizip/vsicurl/https://static.data.gouv.fr/resources/contours-des-communes-de-france-simplifie-avec-regions-et-departement-doutre-mer-rapproches/20201115-140349/a-com2020-geojson.zip\") |> \n  st_transform(proj)\ncom |> \n  left_join(otex, join_by(codgeo == code)) |> \n  left_join(codes, join_by(specialisation_de_la_production_agricole_en_2020_12_postes == otefda)) |> \n  ggplot() +\n  geom_sf(aes(fill = orientation), linewidth = 0) + \n  scale_fill_manual(name = \"OTEX\",\n                    values = codes |>\n                               select(orientation, color) |> \n                               deframe()) +\n  labs(title = \"Specialization of agricultural production\",\n       subtitle = \"France 2020, by commune\",\n       caption = glue(\"{st_crs(proj)$Name} - Overseas France not to scale\n                      Data: Agreste RA 2020\n                      Basemap: IGN Admin Express 2020, Icem7\n                      https://r.iresmi.net/ {Sys.Date()}\")) +\n  annotation_scale(height = unit(1, \"mm\"), bar_cols = c(\"white\", \"grey\")) +\n  theme_void() +\n  theme(plot.margin = margin(0, .3, 0.1, .3, \"cm\"),\n        plot.caption = element_text(size = 6), \n        legend.text = element_text(size = 7),\n        plot.background = element_rect(color = NA, fill = \"white\"))\nFigure 1: Specialization of agricultural production\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nr.iresmi.net\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "Vineyards in Burgundy – CC-BY-ND by x1klima Day 13 of 30DayMapChallenge: « Choropleth » (previously). Using the French 2020 census to map the specialization of agricultural production by commune. library(tidyverse) library(sf...",
    "meta_keywords": null,
    "og_description": "Vineyards in Burgundy – CC-BY-ND by x1klima Day 13 of 30DayMapChallenge: « Choropleth » (previously). Using the French 2020 census to map the specialization of agricultural production by commune. library(tidyverse) library(sf...",
    "og_image": "https://r.iresmi.net/posts/2023/choropleth/images/44074370265_629e89fb7e_c.jpg",
    "og_title": "Choropleth | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 2.4,
    "sitemap_lastmod": "2023-11-13T07:00:00+00:00",
    "twitter_description": "Vineyards in Burgundy – CC-BY-ND by x1klima Day 13 of 30DayMapChallenge: « Choropleth » (previously). Using the French 2020 census to map the specialization of agricultural production by commune. library(tidyverse) library(sf...",
    "twitter_title": "Choropleth | R-bloggers",
    "url": "https://www.r-bloggers.com/2023/11/choropleth/",
    "word_count": 489
  }
}