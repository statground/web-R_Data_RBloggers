{"raw_json": {"article_author": null, "article_headline": null, "article_modified": null, "article_published": null, "article_section": null, "article_tags": null, "canonical_url": "https://www.r-bloggers.com/2009/10/aggreate-electoral-targeting-with-r/", "crawled_at": "2025-11-17T10:20:16.407765", "external_links": [{"href": "http://offensivepolitics.net/blog/2009/10/aggreate-electoral-targeting-with-r/", "text": "Offensive Politics"}, {"href": "http://r-posts.com/", "text": "here"}, {"href": "http://www.ncec.org/", "text": "National Committee for an Effective Congress"}, {"href": "http://www.nrcc.org/", "text": "National Republican Congressional Committee"}, {"href": "http://www.emilyslist.org/", "text": "EMILY’s List"}, {"href": "http://home.nra.org/", "text": "National Rifle Association"}, {"href": "https://www.amazon.com/Campaign-Craft-Praeger-Political-Communication/dp/0275990044/", "text": "Campaign Craft"}, {"href": "https://www.amazon.com/Campaign-Manager-Running-Winning-Elections/dp/0813344514/", "text": "The Campaign Manager"}, {"href": "http://delegatebob.com/", "text": "Bob Marshall"}, {"href": "http://www.johnbell2009.com/", "text": "John Bell"}, {"href": "http://cran.r-project.org/doc/manuals/R-intro.html", "text": "Introduction to R"}, {"href": "https://www.r-project.org/", "text": "R project homepage"}, {"href": "http://www.sbe.virginia.gov/cms/Election_Information/Election_Results/Index.html", "text": "Virginia State Board of Elections"}, {"href": "https://www.r-project.org/", "text": "R homepage"}, {"href": "http://offensivepolitics.net/R/aggpol-latest.zip", "text": "For Windows"}, {"href": "http://cran.r-project.org/doc/manuals/R-admin.html#Installing-packages", "text": "R Manual"}, {"href": "http://had.co.nz/plyr/", "text": "plyr"}, {"href": "http://had.co.nz/ggplot2/", "text": "ggplot2"}, {"href": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/variables1.png", "text": null}, {"href": "http://cran.r-project.org/web/packages/pscl/index.html", "text": "pscl"}, {"href": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct1.png", "text": null}, {"href": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-hist1.png", "text": null}, {"href": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color1.png", "text": null}, {"href": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/current-registration-hist1.png", "text": null}, {"href": "https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size1.png", "text": null}, {"href": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size-label1.png", "text": null}, {"href": "https://twitter.com/offpol/", "text": "on twitter"}, {"href": "http://offensivepolitics.net/blog/2009/10/aggreate-electoral-targeting-with-r/", "text": "Offensive Politics"}, {"href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers", "text": "daily e-mail updates"}, {"href": "https://www.r-project.org/", "text": "R"}, {"href": "https://www.r-users.com/", "text": "Click here if you're looking to post or find an R/data-science job"}, {"href": "http://r-posts.com/", "text": "here"}], "h1_title": "R-bloggers", "html_title": "Aggreate electoral targeting with R | R-bloggers", "images": [{"alt": "HD#013 major party percentages", "base64": null, "src": "https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/turnout-by-year-by-seat1.png?w=578"}, {"alt": "HD#013 major party percentages", "base64": null, "src": "https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/turnout-by-year-by-seat1.png?w=578"}, {"alt": "variables", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/variables1.png?w=450"}, {"alt": "variables", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/variables1.png?w=450"}, {"alt": "dem-vote-share-by-precinct", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct1.png?w=450"}, {"alt": "dem-vote-share-by-precinct", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct1.png?w=450"}, {"alt": "dem-vote-share-by-precinct-hist", "base64": null, "src": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-hist1.png?w=450"}, {"alt": "dem-vote-share-by-precinct-hist", "base64": null, "src": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-hist1.png?w=450"}, {"alt": "dem-vote-share-by-precinct-scatter-color", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color1.png?w=450"}, {"alt": "dem-vote-share-by-precinct-scatter-color", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color1.png?w=450"}, {"alt": "Current registration histogram", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/current-registration-hist1.png?w=450"}, {"alt": "Current registration histogram", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/current-registration-hist1.png?w=450"}, {"alt": "Democratic vote share by Turnout %", "base64": null, "src": "https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size1.png?w=450"}, {"alt": "Democratic vote share by Turnout %", "base64": null, "src": "https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size1.png?w=450"}, {"alt": "dem-vote-share-by-precinct-scatter-color-size-label", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size-label1.png?w=450"}, {"alt": "dem-vote-share-by-precinct-scatter-color-size-label", "base64": null, "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size-label1.png?w=450"}], "internal_links": [{"href": "https://www.r-bloggers.com/author/jjh/", "text": "jjh"}, {"href": "https://www.r-bloggers.com/category/r-bloggers/", "text": "R bloggers"}, {"href": "https://www.r-bloggers.com/category/uncategorized/", "text": "Uncategorized"}, {"href": "https://www.r-bloggers.com/", "text": "R-bloggers"}, {"href": "https://www.r-bloggers.com/contact-us/", "text": "here"}, {"href": "https://www.r-bloggers.com/add-your-blog/", "text": "click here"}, {"href": "https://www.r-bloggers.com/cdn-cgi/l/email-protection#0b6161634b646d6d6e6578627d6e7b6467627f62687825656e7f", "text": "[email protected]"}, {"href": "https://www.r-bloggers.com/wp-content/uploads/2009/10/aggpol-latest.tar1.gz", "text": "For Unix-style"}, {"href": "https://www.r-bloggers.com/cdn-cgi/l/email-protection#80eaeae8c0efe6e6e5eef3e9f6e5f0efece9f4e9e3f3aeeee5f4", "text": "[email protected]"}, {"href": "https://www.r-bloggers.com/", "text": "R-bloggers.com"}, {"href": "https://www.r-bloggers.com/how-to-learn-r-2/", "text": "learning R"}, {"href": "https://www.r-bloggers.com/add-your-blog/", "text": "click here"}, {"href": "https://www.r-bloggers.com/tag/r/", "text": "R"}, {"href": "https://www.r-bloggers.com/tag/targeting/", "text": "targeting"}, {"href": "https://www.r-bloggers.com/tag/uncategorized/", "text": "Uncategorized"}, {"href": "https://www.r-bloggers.com/tag/virginia-house-of-delegates/", "text": "Virginia House of Delegates"}], "lang": "en-US", "main_html": "<article class=\"post-48849 post type-post status-publish format-standard hentry category-r-bloggers category-uncategorized tag-r tag-targeting tag-uncategorized tag-virginia-house-of-delegates\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Aggreate electoral targeting with R</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">October 22, 2009</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/jjh/\">jjh</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a>, <a href=\"https://www.r-bloggers.com/category/uncategorized/\" rel=\"category tag\">Uncategorized</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"http://offensivepolitics.net/blog/2009/10/aggreate-electoral-targeting-with-r/\"> Offensive Politics</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0--><h2>Introduction</h2>\n<p>Electoral targeting is the process of quantifying the partisan bias of a single voter or subset of voters in a geographic region. Bias can be calculated using an individual’s demographic and voting behavior or by aggregating results from an entire election precinct. Targeting is traditionally performed by national committees (e.g., <a href=\"http://www.ncec.org/\" rel=\"nofollow\" target=\"_blank\">National Committee for an Effective Congress</a>, <a href=\"http://www.nrcc.org/\" rel=\"nofollow\" target=\"_blank\">National Republican Congressional Committee</a>), state political parties, interest groups (e.g., <a href=\"http://www.emilyslist.org/\" rel=\"nofollow\" target=\"_blank\">EMILY’s List</a>, <a href=\"http://home.nra.org/\" rel=\"nofollow\" target=\"_blank\">National Rifle Association</a>), or campaign consultants. Targeting data is consumed by campaign managers and analysts, and it is used along with polling data to build strategy, direct resources, and project electoral outcomes. </p>\n<p>While aggregate electoral targeting can build a sophisticated picture of a district, the mathematics behind targeting are very simple. Targeting can be performed by anyone with previous electoral data, and calculations can be done using 3×5 note cards, with simple spreadsheets, or high-end software packages like SPSS. The targeting methods discussed in this post are taken from academic publications on electioneering: <a href=\"https://www.amazon.com/Campaign-Craft-Praeger-Political-Communication/dp/0275990044/\" rel=\"nofollow\" target=\"_blank\">Campaign Craft</a> (Burton, Shea 2006) and <a href=\"https://www.amazon.com/Campaign-Manager-Running-Winning-Elections/dp/0813344514/\" rel=\"nofollow\" target=\"_blank\">The Campaign Manager</a> (Shaw, 2004). </p>\n<p>Although targeting data is usually usually inexpensive or free, a down-ballot campaign or a primary challenger might not have the connections or support of a PAC or party to obtain the data. In these cases, a campaign will probably purchase one of the books listed above to perform its own analysis. Even an established campaign may run its own analysis, possibly to test different turnout theories or to integrate additional data. This post is directed towards these groups.</p>\n<p>Together, we will assume the role of campaign consultant and perform an aggregate electoral analysis on the 13th House of Delegates seat (HOD#13) in the Commonwealth of Virginia. In HOD#13, the 18-year Republican incumbent <a href=\"http://delegatebob.com/\" rel=\"nofollow\" target=\"_blank\">Bob Marshall</a> is being challenged by Democrat <a href=\"http://www.johnbell2009.com/\" rel=\"nofollow\" target=\"_blank\">John Bell</a>. This analysis will compute and visualize turnout, partisan bias, and a precinct ranking based on projected turnout and historical Democratic support. </p>\n<p>The analysis of HOD#13 will be performed using R, an open-source computing platform. R is free, extensible, and interactive, making it an ideal platform for experimentation. The R package <b>aggpol</b> was created specifically for this tutorial, and it contains all the data and operations required to execute an aggregate electoral analysis. Readers can execute the provided R code to reproduce the analysis or simply follow along to learn how it was performed. Readers unfamiliar with R should read <a href=\"http://cran.r-project.org/doc/manuals/R-intro.html\" rel=\"nofollow\" target=\"_blank\">Introduction to R</a>, which is available on the <a href=\"https://www.r-project.org/\" rel=\"nofollow\" target=\"_blank\">R project homepage</a>.</p>\n<p>The electoral and registration data used were compiled from the <a href=\"http://www.sbe.virginia.gov/cms/Election_Information/Election_Results/Index.html\" rel=\"nofollow\" target=\"_blank\">Virginia State Board of Elections</a> using several custom written parsers and two different PDF-to-text engines. Please contact me for source data or more information at: <a href=\"/cdn-cgi/l/email-protection#0b6161634b646d6d6e6578627d6e7b6467627f62687825656e7f\" rel=\"nofollow\" target=\"_blank\"><span class=\"__cf_email__\" data-cfemail=\"e8828280a8878e8e8d869b819e8d988784819c818b9bc6868d9c\">[email protected]</span></a>. </p>\n<h2>Prerequisites</h2>\n<p>This section only applies to readers interested in recreating the analysis and graphics produced in this tutorial. To completely recreate this analysis you will need the following: </p>\n<ol>\n<li>The latest version of the R statistical computing environment. Binaries, source, and installation instructions can be downloaded from <a href=\"https://www.r-project.org/\" rel=\"nofollow\" target=\"_blank\">R homepage</a>. </li>\n<li>Additional R packages. This analysis requires several packages that provide additional functionality on top of the existing R system. Install the appropriate R environment for your system and run the program.\n<ul> <b>plyr</b>, <b>ggplot2</b>, <b>RColorBrewer</b>. To install these packages execute the following in your R environment:\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n</pre></td><td class=\"code\"><pre>install.packages(c(\"plyr\", \"RColorBrewer\", \"ggplot2\"))</pre></td></tr></table></div>\n</ul>\n<ul>Next you’ll need to install the <b>aggpol</b> package for calculating aggregate political statistics. You will need to download the latest version: <a href=\"https://www.r-bloggers.com/wp-content/uploads/2009/10/aggpol-latest.tar1.gz\" rel=\"nofollow\" target=\"_blank\">For Unix-style</a> systems or <a href=\"http://offensivepolitics.net/R/aggpol-latest.zip\" rel=\"nofollow\" target=\"_blank\">For Windows</a> systems. Installation of local packages is detailed in the <a href=\"http://cran.r-project.org/doc/manuals/R-admin.html#Installing-packages\" rel=\"nofollow\" target=\"_blank\">R Manual</a> on package installation.\n\t</ul></li>\n</ol>\n<h2>Getting Started</h2>\n<p>Now that the prerequisites are installed we can get started with our data analysis. Start up your R environment and load the required libraries by typing in the following commands:</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n3\n4\n</pre></td><td class=\"code\"><pre>library(plyr)\nlibrary(aggpol)\nlibrary(ggplot2)\nlibrary(RColorBrewer)</pre></td></tr></table></div>\n<p>We need to attach the VAHOD data set that comes with <b>aggpol</b>. This data set contains precinct-level electoral returns for state and federal elections in the Commonwealth of Virginia from 2001 to 2008. Since we are focusing on HOD#13, we’ll need to select just the records that have to do with that seat.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n</pre></td><td class=\"code\"><pre>data(VAHOD)\nhd013 &lt;- vahod[which(vahod$seat == \"HD-013\"),]</pre></td></tr></table></div>\n<p>The data set contains precinct-level electoral results for the following races: U.S. President, U.S.Senate, U.S.House of Representatives, Virginia Governor, Senate of Virginia, and Virginia House of Delegates. This breadth of electoral returns allows us to build a very detailed profile of the partisan bias of a district. </p>\n<p>We will first determine the historical partisanship in HOD#13. Since partisanship can fluctuate over the years and different seats have different turnout expectations, we’ll first need to see the major party support for every seat in each election for precincts in HOD#13. We can use the <b>historical.election.summary</b> function from the <b>aggpol</b> package to group the precinct results into district results, and then break them down by seat and year.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n</pre></td><td class=\"code\"><pre>esum &lt;- historical.election.summary(hd013)</pre></td></tr></table></div>\n<p><b><i>esum</i></b> now contains: </p>\n<table>\n<tr>\n<th>.</th>\n<th>year</th>\n<th>district_type</th>\n<th>total.turnout</th>\n<th>rep.turnout</th>\n<th>rep.turnout.percent</th>\n<th>dem.turnout</th>\n<th>dem.turnout.percent</th>\n<th>oth.turnout</th>\n<th>oth.turnout.percent</th>\n</tr>\n<tr>\n<td>1</td>\n<td>2001</td>\n<td>GV</td>\n<td>5527</td>\n<td>3266</td>\n<td>0.5909</td>\n<td>2207</td>\n<td>0.3993</td>\n<td>54</td>\n<td>0.0097</td>\n</tr>\n<tr>\n<td>2</td>\n<td>2001</td>\n<td>HD</td>\n<td>5399</td>\n<td>3475</td>\n<td>0.6436</td>\n<td>1924</td>\n<td>0.3563</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>3</td>\n<td>2001</td>\n<td>LG</td>\n<td>5432</td>\n<td>3291</td>\n<td>0.6058</td>\n<td>2025</td>\n<td>0.3727</td>\n<td>116</td>\n<td>0.0213</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2003</td>\n<td>HD</td>\n<td>10299</td>\n<td>10103</td>\n<td>0.9809</td>\n<td>110</td>\n<td>0.0106</td>\n<td>86</td>\n<td>0.0083</td>\n</tr>\n<tr>\n<td colspan=\"6\">13 more lines…</td></tr>\n</table>\n<p>We now have major-party turnout for every election in our data set. To best visualize the results we’ll build a bar graph comparing major-party turnout in each seat over time. We first need to transpose the election summary object (<b><i>esum</i></b>) from a summary format to an observation format, one line per distinct year+district+party. The <a href=\"http://had.co.nz/plyr/\" rel=\"nofollow\" target=\"_blank\">plyr</a> package makes this task extremely simple.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n3\n</pre></td><td class=\"code\"><pre>elx &lt;- ddply(esum,c(\"year\", \"district_type\"), function(x) \n  rbind(  data.frame(party=\"REP\",turnout=x$rep.turnout.percent),\n  data.frame(party=\"DEM\",turnout=x$dem.turnout.percent)))</pre></td></tr></table></div>\n<p>We will now use the powerful <a href=\"http://had.co.nz/ggplot2/\" rel=\"nofollow\" target=\"_blank\">ggplot2</a> package to view the Republican and Democratic support for each election, in each seat, for our subset:</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n3\n4\n</pre></td><td class=\"code\"><pre>ggplot(elx,aes(year,turnout,fill=factor(party))) + \n  geom_bar(stat=\"identity\") + \n  facet_wrap(~district_type,scales=\"free_x\") + \n  scale_fill_brewer(palette=\"Set1\")</pre></td></tr></table></div>\n<p>Result:<br/>\n<img alt=\"HD#013 major party percentages\" border=\"1\" class=\"jetpack-lazy-image\" data-lazy-src=\"https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/turnout-by-year-by-seat1.png?w=578&amp;is-pending-load=1\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/turnout-by-year-by-seat1.png?w=578\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\"/><noscript><img alt=\"HD#013 major party percentages\" border=\"1\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/turnout-by-year-by-seat1.png?w=578\"/></noscript></p>\n<p>This graphic gives us a decent understanding of district-level electoral trends. For U.S. federal elections (figs.: PVP, USH, USS), we can see a distinct drop in Republican support moving towards 2008; the results for U.S. House (USH) and U.S. Senate (USS), in particular, show a strong increase in Democratic support. This growth correlates to statewide trends that resulted in the election of two Democratic Senators representing Virginia for the first time since 1970. General Democratic gains notwithstanding, the House of Delegates (fig.: HD) results aren’t as promising for a Democratic challenger. The incumbent Del. Marshall saw more than 60% support in three of the last four elections and saw no challenger at all in 2003. While the district may be trending more Democratic over time, the voters of HOD#13 are obviously big fans of Del. Marshall. </p>\n<p>Now that we understand the historical partisanship of this district we need to understand historical turnout, allowing us to project of the number of votes required to win. We will utilize the <b>historical.turnout.summary</b> function from the <b>aggpol</b> package to produce a summary of turnout for this district.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n</pre></td><td class=\"code\"><pre>historical.turnout.summary(hd013, district.type=\"HD\", district.number=\"013\", years=c(2001,2003,2005,2007))</pre></td></tr></table></div>\n<table>\n<tr>\n<th>.</th>\n<th>year</th>\n<th>total.turnout</th>\n<th>total.registration</th>\n</tr>\n<tr>\n<td>1</td>\n<td>2001</td>\n<td>5399</td>\n<td>13275</td>\n</tr>\n<tr>\n<td>2</td>\n<td>2003</td>\n<td>10031</td>\n<td>45769</td>\n</tr>\n<tr>\n<td>3</td>\n<td>2005</td>\n<td>23592</td>\n<td>62497</td>\n</tr>\n<tr>\n<td>4</td>\n<td>2007</td>\n<td>26110</td>\n<td>78028</td>\n</tr>\n</table>\n<p>Looking at this table one can see some data collection problems in the 2001 HD elections. In recent years, precincts belonged to only one House of Delegates seat, but in 2001 and somewhat less so in 2003 some precincts are split and some have duplicate names and now information on how to allocate results from different races to precincts. The turnout numbers are slightly affected by these problems, but the <b>aggpol</b> attempts to correct this by substituting alternate years or even races if possible. </p>\n<p>The take away from from the previous table is that turnout for the last four House of Delegates elections has hovered around 30%. This makes some political sense,  because Virginia holds state elections in odd-numbered years with no federal elections to drive up turnout. This leaves a lot of registered voters to be activated, but we need to delve down to the precinct level to find them.</p>\n<p>We use the <b>district.analyze</b> function of <b>aggpol</b> to aggregate all electoral results into a summary for each precinct.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n</pre></td><td class=\"code\"><pre>hd013s &lt;- district.analyze(hd013)</pre></td></tr></table></div>\n<p><b><i>hd013s</i></b> is a data frame with columns calculated for every precinct; several values for each major party and other values for the precinct as a whole. Those statistics are:</p>\n<ul>\n<li><b>Aggregate base partisan vote</b> – The lowest non-zero turnout for a major party, in all electoral years. </li>\n<li><b>Average Party Performance</b> – The average percentage of the vote a party receives in the closest 3 elections in recent years.</li>\n<li><b>Swing vote</b> – The part of the electorate not included in the aggregate base partisan vote.</li>\n<li><b>Soft-partisan vote</b> – The average worst a party has performed, minus the actual worst.</li>\n<li><b>Toss-up</b> – The portion of the electorate not included in the Aggregate base or soft-base partisan vote.</li>\n<li><b>Partisan base</b> – The combined aggregate-base and soft-partisan vote for each major party.</li>\n<li><b>Partisan swing</b> – The combined major party swing vote.</li>\n<li><b>Projected turnout</b> – The portion of the electorate that is projected to turn out given previous turnout and current registration data.</li>\n</ul>\n<p>These variables can be visualized with the following graphic, adapted –along with definitions above– from Campaign Craft (Burton, Shea). </p>\n<p><a href=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/variables1.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"variables\" class=\"aligncenter size-full wp-image-161 jetpack-lazy-image\" data-lazy-src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/variables1.png?w=450&amp;is-pending-load=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/variables1.png?w=450\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"variables\"/><noscript><img alt=\"variables\" class=\"aligncenter size-full wp-image-161\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/variables1.png?w=450\" title=\"variables\"/></noscript></a></p>\n<p>The actual columns in the data frame returned from <b>from district.analyze</b> are:</p>\n<ul>\n<li><b>proj.turnout.percent</b> – The projected turnout percent of for a hypothetical next election. </li>\n<li><b>proj.turnout.count</b> –  The projected number of voters who will turn out for a hypothetical next election. </li>\n<li><b>current.reg</b> – Current number of registered voters in a precinct. </li>\n<li><b>partisan.base</b> – The combined aggregate-base and soft-partisan vote for both major parties ( Partisan base ). </li>\n<li><b>partisan.swing</b> – All non-base voters (1.0 – partisan.base).</li>\n<li><b>tossup</b> – The portion of the electorate not in the base or soft support of either major party.</li>\n<li><b>app.rep</b> – The average party performance of a Republican candidate in this precinct.</li>\n<li><b>base.rep</b> – The aggregate base partisan vote for a Republican candidate in this precinct.</li>\n<li><b>soft.rep</b> – The soft partisan vote for a Republican candidate in this precinct.</li>\n<li><b>app.dem</b> – The average party performance of a Democratic candidate in this precinct.</li>\n<li><b>base.dem</b> – The aggregate base partisan vote for a Democratic candidate in this precinct.</li>\n<li><b>soft.dem</b> – The soft partisan vote for a Democratic candidate in this precinct.</li>\n<li><b>partisan.rep</b> – Combination of aggregate base and soft vote percentages for the Republican.</li>\n<li><b>partisan.dem</b> – Combination of aggregate base and soft vote percentages for the Democrat.</li>\n</ul>\n<p>The most useful statistic above is the Average Party Performance (APP), which is an average of major-party turnout in the 3 closest recent elections. The APP describes supporter levels for a best-case scenario in a close election. We’ve already calculated the APP of each major party (<b><i>app.dem</i></b>, <b><i>app.rep</i></b>), but when a race doesn’t have a third party candidate what we’ll usually visualize is the share of the combined partisan performance that each party receives. We’ll add these variables to our summary data frame generated previously, one for each major party.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n</pre></td><td class=\"code\"><pre>hd013s$dem.share &lt;- hd013s$app.dem/(hd013s$app.dem+hd013s$app.rep)\nhd013s$rep.share &lt;- hd013s$app.rep/(hd013s$app.dem+hd013s$app.rep)</pre></td></tr></table></div>\n<p>Now that we have the APP and partisan vote share for each party, we can visualize the precinct-level terrain for the Democratic challenger Mr. Bell. This visualization should show us the democratic support for each precinct and give us an idea whinc precincts could be competitive. We’ll produce this visualization using a density plot + 1d histogram, adapted from the seatsVotes plot in the <a href=\"http://cran.r-project.org/web/packages/pscl/index.html\" rel=\"nofollow\" target=\"_blank\">pscl</a> package. We’ll also draw a cut-line down the 50% vote mark to to help find competitive precincts.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n3\n4\n</pre></td><td class=\"code\"><pre>qplot(dem.share, data=hd013s, geom=c(\"density\",\"rug\"),\n    xlab=\"Dem Vote Share\",\n    main=\"Democratic vote share, by precinct\")  + \n  geom_vline(xintercept=.50)</pre></td></tr></table></div>\n<p><a href=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct1.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"dem-vote-share-by-precinct\" class=\"aligncenter size-full wp-image-164 jetpack-lazy-image\" data-lazy-src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct1.png?w=450&amp;is-pending-load=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct1.png?w=450\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"dem-vote-share-by-precinct\"/><noscript><img alt=\"dem-vote-share-by-precinct\" class=\"aligncenter size-full wp-image-164\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct1.png?w=450\" title=\"dem-vote-share-by-precinct\"/></noscript></a></p>\n<p>We can see a lot of precincts are between 48% and 53% Democratic, which means those precincts could potentially go for either candidate. We need to classify these results into something more solid. Let’s say precincts with less than 48% Democratic share are Safe Republican, 48-52% are Tossup, and greater than 52% are Safe Democrat. This is a simple representation but can be refined later. We’ll add a seat classification to our data frame using  the <b>cut</b> function:</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n</pre></td><td class=\"code\"><pre>hd013s$cl &lt;- cut(hd013s$dem.share, breaks=c(0,.48,.52,1), labels=c(\"Safe Rep\", \"Tossup\", \"Safe Dem\"))</pre></td></tr></table></div>\n<p>Now we need to visualize how many precincts fall into which classification, using a histogram this time instead of a density curve.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n3\n4\n5\n</pre></td><td class=\"code\"><pre>ggplot(hd013s, aes(x=dem.share)) + \n  geom_bar(aes(fill=cl),binwidth=0.01) + \n  scale_fill_brewer(\"Precinct Rating\", palette=\"RdYlBu\") + \n  scale_x_continuous(\"Democratic Vote Share\") + \n  scale_y_continuous(\"Frequency\")</pre></td></tr></table></div>\n<p><a href=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-hist1.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"dem-vote-share-by-precinct-hist\" class=\"aligncenter size-full wp-image-165 jetpack-lazy-image\" data-lazy-src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-hist1.png?w=450&amp;is-pending-load=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-hist1.png?w=450\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"dem-vote-share-by-precinct-hist\"/><noscript><img alt=\"dem-vote-share-by-precinct-hist\" class=\"aligncenter size-full wp-image-165\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-hist1.png?w=450\" title=\"dem-vote-share-by-precinct-hist\"/></noscript></a></p>\n<p>From the histogram we see that not only does a Republican candidate enjoy more “Safe” precincts, but even the majority of the tossup precincts have less than 50% Democratic share. While the precinct breakdown looks bad, a Democratic win in this district is theoretically possible if these tossup precincts are held. A Democratic candidate will face a tough challenge, so the next step will be identifying Democratic and Democrat-leaning precincts to target. </p>\n<p>To make this target precinct list we’ll need a method to prioritize the precincts so that we can reach the most persuadable voters while spending the least resources. A popular method to  identify a precinct as high-value is to sort precincts by lowest projected turnout with highest Democratic vote share. Lower turnout means there are registered voters waiting to be convinced to show up, and high Democratic vote share means more of those voters will be Democrats. </p>\n<p>Since we measured both of these values (turnout%, democratic vote share), it is very easy to order our data by turnout (ascending) and democratic average party performance (descending) using R.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n</pre></td><td class=\"code\"><pre>hd013s[order(hd013s$proj.turnout.percent,-hd013s$app.dem),c(1:2,20:21),]</pre></td></tr></table></div>\n<table>\n<tr>\n<th></th>\n<th>precinct_name</th>\n<th>proj.turnout.percent</th>\n<th>dem.share</th>\n<th>rep.share</th>\n</tr>\n<tr>\n<td>25</td>\n<td>153 – 409 – SUDLEY NORTH</td>\n<td>0.1959</td>\n<td>0.5105</td>\n<td>0.4894</td>\n</tr>\n<tr>\n<td>27</td>\n<td>153 – 411 – MULLEN</td>\n<td>0.2218</td>\n<td>0.5026</td>\n<td>0.4973</td>\n</tr>\n<tr>\n<td>4</td>\n<td>107 – 111 – BRIAR WOODS</td>\n<td>0.2256</td>\n<td>0.4837</td>\n<td>0.5162</td>\n</tr>\n<tr>\n<td>6</td>\n<td>107 – 212 – CLAUDE MOORE PARK</td>\n<td>0.2279</td>\n<td>0.5285</td>\n<td>0.4714</td>\n</tr>\n<tr>\n<td>26</td>\n<td>153 – 410 – MOUNTAIN VIEW</td>\n<td>0.2319</td>\n<td>0.4945</td>\n<td>0.5054</td>\n</tr>\n<tr>\n<td>16</td>\n<td>153 – 110 – BUCKLAND MILLS</td>\n<td>0.2448</td>\n<td>0.4891</td>\n<td>0.5108</td>\n</tr>\n<tr>\n<td>13</td>\n<td>153 – 106 – ELLIS</td>\n<td>0.2475</td>\n<td>0.5038</td>\n<td>0.4961</td>\n</tr>\n<tr>\n<td>5</td>\n<td>107 – 112 – FREEDOM</td>\n<td>0.2509</td>\n<td>0.5028</td>\n<td>0.4971</td>\n</tr>\n<tr>\n<td>15</td>\n<td>153 – 108 – VICTORY</td>\n<td>0.2645</td>\n<td>0.5005</td>\n<td>0.4994</td>\n</tr>\n<tr>\n<td>24</td>\n<td>153 – 408 – GLENKIRK</td>\n<td>0.2837</td>\n<td>0.4998</td>\n<td>0.5001</td>\n</tr>\n<tr>\n<td>1</td>\n<td>107 – 106 – EAGLE RIDGE</td>\n<td>0.2856</td>\n<td>0.4992</td>\n<td>0.5007</td>\n</tr>\n<tr>\n<td>18</td>\n<td>153 – 112 – CEDAR POINT</td>\n<td>0.2876</td>\n<td>0.4855</td>\n<td>0.5144</td>\n</tr>\n<tr>\n<td>14</td>\n<td>153 – 107 – MARSTELLER</td>\n<td>0.3067</td>\n<td>0.4775</td>\n<td>0.5224</td>\n</tr>\n<tr>\n<td>3</td>\n<td>107 – 109 – HUTCHISON</td>\n<td>0.3168</td>\n<td>0.4857</td>\n<td>0.5142</td>\n</tr>\n<tr>\n<td>2</td>\n<td>107 – 108 – MERCER</td>\n<td>0.3281</td>\n<td>0.5034</td>\n<td>0.4965</td>\n</tr>\n<tr>\n<td>17</td>\n<td>153 – 111 – BRISTOW RUN</td>\n<td>0.3324</td>\n<td>0.4822</td>\n<td>0.5177</td>\n</tr>\n<tr>\n<td>23</td>\n<td>153 – 406 – ALVEY</td>\n<td>0.3460</td>\n<td>0.4736</td>\n<td>0.5263</td>\n</tr>\n<tr>\n<td>21</td>\n<td>153 – 402 – BATTLEFIELD</td>\n<td>0.3546</td>\n<td>0.4323</td>\n<td>0.5676</td>\n</tr>\n<tr>\n<td>10</td>\n<td>153 – 102 – BENNETT</td>\n<td>0.3896</td>\n<td>0.4959</td>\n<td>0.5040</td>\n</tr>\n<tr>\n<td>19</td>\n<td>153 – 209 – WOODBINE</td>\n<td>0.4014</td>\n<td>0.4651</td>\n<td>0.5348</td>\n</tr>\n<tr>\n<td>7</td>\n<td>107 – 307 – MIDDLEBURG</td>\n<td>0.4043</td>\n<td>0.4953</td>\n<td>0.5046</td>\n</tr>\n<tr>\n<td>9</td>\n<td>153 – 101 – BRENTSVILLE</td>\n<td>0.4180</td>\n<td>0.4904</td>\n<td>0.5095</td>\n</tr>\n<tr>\n<td>22</td>\n<td>153 – 403 – BULL RUN</td>\n<td>0.4226</td>\n<td>0.4860</td>\n<td>0.5139</td>\n</tr>\n<tr>\n<td>20</td>\n<td>153 – 401 – EVERGREEN</td>\n<td>0.4283</td>\n<td>0.5006</td>\n<td>0.4993</td>\n</tr>\n<tr>\n<td>12</td>\n<td>153 – 104 – NOKESVILLE</td>\n<td>0.4537</td>\n<td>0.4960</td>\n<td>0.5039</td>\n</tr>\n<tr>\n<td>11</td>\n<td>153 – 103 – BUCKHALL</td>\n<td>0.4636</td>\n<td>0.4773</td>\n<td>0.5226</td>\n</tr>\n<tr>\n<td>8</td>\n<td>107 – 309 – ALDIE</td>\n<td>0.4687</td>\n<td>0.4881</td>\n<td>0.5118</td>\n</tr>\n</table>\n<p>This sorted list is our critical intelligence to finding persuadable voters, but we need a better way to visualize the output. Since we have two scalar variables (turnout %, democratic vote share) we can use a scatter plot with the Democratic vote share on the Y axis and Turnout % on the X. We’ll also color each precinct with its seat classification we defined earlier (Safe Republican, Tossup, Safe Democrat):</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n3\n</pre></td><td class=\"code\"><pre>ggplot(aes(x=proj.turnout.percent, y=dem.share), data=hd013s) + \n  geom_point(aes(colour=cl,title=\"a\")) + \n  labs(x=\"Projected Turnout %\", y=\"Democratic Vote Share %\",colour=\"Seat Type\")</pre></td></tr></table></div>\n<p><a href=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color1.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"dem-vote-share-by-precinct-scatter-color\" class=\"aligncenter size-full wp-image-166 jetpack-lazy-image\" data-lazy-src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color1.png?w=450&amp;is-pending-load=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color1.png?w=450\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"dem-vote-share-by-precinct-scatter-color\"/><noscript><img alt=\"dem-vote-share-by-precinct-scatter-color\" class=\"aligncenter size-full wp-image-166\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color1.png?w=450\" title=\"dem-vote-share-by-precinct-scatter-color\"/></noscript></a></p>\n<p>This chart echoes what we’ve seen previously: the Democratic challenger faces an uphill battle, but there is room for a win. We see a single “Safe Democract” precinct with very low turnout, and five “Safe Republican” precincts that run the board in turnout. Given the high number of “Tossup” precincts, and the fact that they run the gamut as far as turnout is concerned, we’ll need to incorporate additional information into our prioritization. If we also rank precincts by current voter registration, we can focus on precincts where we stand to gain the most ground. </p>\n<p>Before we continue, we need to make sure there is enough difference in precinct-to-precinct registration to have an impact. Let’s look at some statistics for the current registration in this district.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n</pre></td><td class=\"code\"><pre>mean(hd013s$current.reg)\nsd(hd013s$current.reg)</pre></td></tr></table></div>\n<table>\n<tr>\n<th>.</th>\n</tr>\n<tr>\n<td>2970.111</td>\n</tr>\n<tr>\n<td>1014.072</td>\n</tr>\n</table>\n<p>There are on average 2,970 current registered voters in each precinct, but the standard deviation is 1,014 voters. A standard deviation that high tells us we need to take into account registration if we want to focus on the precincts with 4000 people and not 1000 people. A histogram of current registration will help us clarify this finding:</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n</pre></td><td class=\"code\"><pre>qplot(current.reg, data=hd013s, geom=\"bar\",binwidth=500,xlab=\"Current Registration\") + \n  scale_y_continuous(\"Frequency\")</pre></td></tr></table></div>\n<p><a href=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/current-registration-hist1.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"Current registration histogram\" class=\"size-full wp-image-169 jetpack-lazy-image\" data-lazy-src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/current-registration-hist1.png?w=450&amp;is-pending-load=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/current-registration-hist1.png?w=450\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"Current registration histogram\"/><noscript><img alt=\"Current registration histogram\" class=\"size-full wp-image-169\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/current-registration-hist1.png?w=450\" title=\"Current registration histogram\"/></noscript></a></p>\n<p>The standard deviation was correct: we see some very small precincts and some large precincts, but the majority are somewhere in the 2000-4000 range. The difference looks to be large enough to include current registration in our ranking.</p>\n<p>We need to look at the Democratic Vote Share vs Turnout % scatter plot again, but with the points scaled to the current precinct registration.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n</pre></td><td class=\"code\"><pre>qplot(proj.turnout.percent,dem.share,size=current.reg, data=hd013s,colour=cl)+ \n  labs(x=\"Projected Turnout %\", y=\"Democratic Vote Share %\",colour=\"Seat Type\",size=\"Current Registration\")</pre></td></tr></table></div>\n<div class=\"wp-caption aligncenter\" id=\"attachment_170\" style=\"width: 681px\"><a href=\"https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size1.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"Democratic vote share by Turnout %\" class=\"size-full wp-image-170 jetpack-lazy-image\" data-lazy-src=\"https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size1.png?w=450&amp;is-pending-load=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size1.png?w=450\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"Democratic vote share by Turnout %\"/><noscript><img alt=\"Democratic vote share by Turnout %\" class=\"size-full wp-image-170\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i2.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size1.png?w=450\" title=\"Democratic vote share by Turnout %\"/></noscript></a><p class=\"wp-caption-text\">Democratic vote share by Turnout %</p></div>\n<p>This plot is almost complete and ready to be analyzed. The last job is to label the points with ther precinct names. Our current <b>precinct_name</b> variable is actually a unique identifier with a FIPS county code, a precinct code, and a name, and it is too long for a point label. We’ll shrink it down to just the name and then we’ll recreate the scatter plot with the label:</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n3\n4\n5\n6\n7\n</pre></td><td class=\"code\"><pre># replace the fips code and precinct number w/ an empty string\nhd013s$precinct.label &lt;- sub(\"^[0-9]+ - [0-9]+ - \",'',as.character(hd013s$precinct_name))\n# plot the previous graph again but this time use precinct.label as the label\nggplot(hd013s, aes(x=proj.turnout.percent, y=dem.share,label=precinct.label)) + \n  geom_point(aes(colour=cl,size=current.reg)) + \n  geom_text(size=2.5,vjust=1.5,angle=25) + \n  labs(x=\"Projected Turnout %\", y=\"Democratic Vote Share %\",colour=\"Seat Type\",size=\"Current Registration\")</pre></td></tr></table></div>\n<p><a href=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size-label1.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"dem-vote-share-by-precinct-scatter-color-size-label\" class=\"aligncenter size-full wp-image-171 jetpack-lazy-image\" data-lazy-src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size-label1.png?w=450&amp;is-pending-load=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size-label1.png?w=450\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"dem-vote-share-by-precinct-scatter-color-size-label\"/><noscript><img alt=\"dem-vote-share-by-precinct-scatter-color-size-label\" class=\"aligncenter size-full wp-image-171\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/10/dem-vote-share-by-precinct-scatter-color-size-label1.png?w=450\" title=\"dem-vote-share-by-precinct-scatter-color-size-label\"/></noscript></a></p>\n<p>From the chart we can see that a Democrat in the HD#013 will want to focus contact efforts on the precincts in the upper-left hand corner of the plot and will want to target larger precincts before smaller. Integrating the current registration into our previous sort command leaves us with the following sort order:</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n</pre></td><td class=\"code\"><pre>hd013s[order(hd013s$proj.turnout.percent,-hd013s$app.dem,hd013s$current.reg),c(1:2,4,20:22),]</pre></td></tr></table></div>\n<table>\n<tr>\n<th></th>\n<th>precinct_name</th>\n<th>proj.turnout.percent</th>\n<th>current.reg</th>\n<th>dem.share</th>\n<th>rep.share</th>\n<th>cl</th>\n</tr>\n<tr>\n<td>25</td>\n<td>153 – 409 – SUDLEY NORTH</td>\n<td>0.1959</td>\n<td>2497</td>\n<td>0.5105</td>\n<td>0.4894</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>27</td>\n<td>153 – 411 – MULLEN</td>\n<td>0.2218</td>\n<td>3555</td>\n<td>0.5026</td>\n<td>0.4973</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>4</td>\n<td>107 – 111 – BRIAR WOODS</td>\n<td>0.2256</td>\n<td>2288</td>\n<td>0.4837</td>\n<td>0.5162</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>6</td>\n<td>107 – 212 – CLAUDE MOORE PARK</td>\n<td>0.2279</td>\n<td>3115</td>\n<td>0.5285</td>\n<td>0.4714</td>\n<td>Safe Dem</td>\n</tr>\n<tr>\n<td>26</td>\n<td>153 – 410 – MOUNTAIN VIEW</td>\n<td>0.2319</td>\n<td>3749</td>\n<td>0.4945</td>\n<td>0.5054</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>16</td>\n<td>153 – 110 – BUCKLAND MILLS</td>\n<td>0.2448</td>\n<td>3646</td>\n<td>0.4891</td>\n<td>0.5108</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>13</td>\n<td>153 – 106 – ELLIS</td>\n<td>0.2475</td>\n<td>1303</td>\n<td>0.5038</td>\n<td>0.4961</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>5</td>\n<td>107 – 112 – FREEDOM</td>\n<td>0.2509</td>\n<td>3929</td>\n<td>0.5028</td>\n<td>0.4971</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>15</td>\n<td>153 – 108 – VICTORY</td>\n<td>0.2645</td>\n<td>4874</td>\n<td>0.5005</td>\n<td>0.4994</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>24</td>\n<td>153 – 408 – GLENKIRK</td>\n<td>0.2837</td>\n<td>2175</td>\n<td>0.4998</td>\n<td>0.5001</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>1</td>\n<td>107 – 106 – EAGLE RIDGE</td>\n<td>0.2856</td>\n<td>2531</td>\n<td>0.4992</td>\n<td>0.5007</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>18</td>\n<td>153 – 112 – CEDAR POINT</td>\n<td>0.2876</td>\n<td>3497</td>\n<td>0.4855</td>\n<td>0.5144</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>14</td>\n<td>153 – 107 – MARSTELLER</td>\n<td>0.3067</td>\n<td>3669</td>\n<td>0.4775</td>\n<td>0.5224</td>\n<td>Safe Rep</td>\n</tr>\n<tr>\n<td>3</td>\n<td>107 – 109 – HUTCHISON</td>\n<td>0.3168</td>\n<td>3722</td>\n<td>0.4857</td>\n<td>0.5142</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>2</td>\n<td>107 – 108 – MERCER</td>\n<td>0.3281</td>\n<td>3229</td>\n<td>0.5034</td>\n<td>0.4965</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>17</td>\n<td>153 – 111 – BRISTOW RUN</td>\n<td>0.3324</td>\n<td>3031</td>\n<td>0.4822</td>\n<td>0.5177</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>23</td>\n<td>153 – 406 – ALVEY</td>\n<td>0.3460</td>\n<td>4403</td>\n<td>0.4736</td>\n<td>0.5263</td>\n<td>Safe Rep</td>\n</tr>\n<tr>\n<td>21</td>\n<td>153 – 402 – BATTLEFIELD</td>\n<td>0.3546</td>\n<td>3851</td>\n<td>0.4323</td>\n<td>0.5676</td>\n<td>Safe Rep</td>\n</tr>\n<tr>\n<td>10</td>\n<td>153 – 102 – BENNETT</td>\n<td>0.3896</td>\n<td>4440</td>\n<td>0.4959</td>\n<td>0.5040</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>19</td>\n<td>153 – 209 – WOODBINE</td>\n<td>0.4014</td>\n<td>2406</td>\n<td>0.4651</td>\n<td>0.5348</td>\n<td>Safe Rep</td>\n</tr>\n<tr>\n<td>7</td>\n<td>107 – 307 – MIDDLEBURG</td>\n<td>0.4043</td>\n<td>1239</td>\n<td>0.4953</td>\n<td>0.5046</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>9</td>\n<td>153 – 101 – BRENTSVILLE</td>\n<td>0.4180</td>\n<td>1708</td>\n<td>0.4904</td>\n<td>0.5095</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>22</td>\n<td>153 – 403 – BULL RUN</td>\n<td>0.4226</td>\n<td>3111</td>\n<td>0.4860</td>\n<td>0.5139</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>20</td>\n<td>153 – 401 – EVERGREEN</td>\n<td>0.4283</td>\n<td>2535</td>\n<td>0.5006</td>\n<td>0.4993</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>12</td>\n<td>153 – 104 – NOKESVILLE</td>\n<td>0.4537</td>\n<td>2501</td>\n<td>0.4960</td>\n<td>0.5039</td>\n<td>Tossup</td>\n</tr>\n<tr>\n<td>11</td>\n<td>153 – 103 – BUCKHALL</td>\n<td>0.4636</td>\n<td>2287</td>\n<td>0.4773</td>\n<td>0.5226</td>\n<td>Safe Rep</td>\n</tr>\n<tr>\n<td>8</td>\n<td>107 – 309 – ALDIE</td>\n<td>0.4687</td>\n<td>902</td>\n<td>0.4881</td>\n<td>0.5118</td>\n<td>Tossup</td>\n</tr>\n</table>\n<p>Now that we have our ranking, we can figure out how much each precinct might offer. Let’s first see the number of votes required to win the seat, the number of votes we’re projected to receive given the calculated APP, previous turnout, and current registration. The <b>district.summary</b> function will provide us will all this information:</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n</pre></td><td class=\"code\"><pre>district.summary(hd013s)[,c(1,2,9,10,11)]</pre></td></tr></table></div>\n<table>\n<th>\n<td>current.reg</td>\n<td>proj.turnout.count</td>\n<td>votes.to.win</td>\n<td>proj.turnout.rep</td>\n<td>proj.turnout.dem</td>\n</th>\n<tr>\n<td>1</td>\n<td>80193</td>\n<td>25401</td>\n<td>12701.5</td>\n<td>12499</td>\n<td>12074</td>\n</tr>\n</table>\n<p>We can see that the projected turnout (<b><i>proj.turnout.count</i></b>) is about 25,401, so the votes projected to win this district is only 12,702. Using the  Democratic APP, we can project Democratic turnout at 12,074, so we need to find 628 votes to win. How do we find these votes? </p>\n<p>Lets go back to our sorted precinct list and take the top 30% and call them our <b><i>target.precincts</i></b>.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n</pre></td><td class=\"code\"><pre>sorted.precincts &lt;- hd013s[order(hd013s$proj.turnout.percent,-hd013s$app.dem,hd013s$current.reg),]\ntarget.precincts &lt;- sorted.precincts[1:(nrow(sorted.precincts)/3),]</pre></td></tr></table></div>\n<p>We’ve got our target list, and we know we need 628 votes from them to bring our total to 50% + 1. Adding a small buffer to that number, we’ll take 640 target votes and allocate them across our target precincts, proportional to the number of registered voters in the precinct. Hopefully, this will set more realistic goals for larger and smaller precincts.</p>\n<div class=\"wp_syntax\"><table><tr><td class=\"line_numbers\"><pre>1\n2\n3\n</pre></td><td class=\"code\"><pre>target.precincts$inc &lt;- as.integer(640 * target.precincts$current.reg/sum(target.precincts$current.reg))\n \ntarget.precincts[,c(2,3,17,23,18,20:22,24)]</pre></td></tr></table></div>\n<table>\n<tr>\n<th>precinct.label</th>\n<th>proj.turnout.percent</th>\n<th>proj.turnout.count</th>\n<th>proj.turnout.dem</th>\n<th>proj.turnout.rep</th>\n<th>dem.share</th>\n<th>rep.share</th>\n<th>cl</th>\n<th>inc</th>\n</tr>\n<tr>\n<td>SUDLEY NORTH</td>\n<td>0.1959</td>\n<td>489</td>\n<td>248</td>\n<td>238</td>\n<td>0.5105</td>\n<td>0.4894</td>\n<td>Tossup</td>\n<td>55</td>\n</tr>\n<tr>\n<td>MULLEN</td>\n<td>0.2218</td>\n<td>788</td>\n<td>391</td>\n<td>387</td>\n<td>0.5026</td>\n<td>0.4973</td>\n<td>Tossup</td>\n<td>78</td>\n</tr>\n<tr>\n<td>BRIAR WOODS</td>\n<td>0.2256</td>\n<td>516</td>\n<td>243</td>\n<td>259</td>\n<td>0.4837</td>\n<td>0.5162</td>\n<td>Tossup</td>\n<td>50</td>\n</tr>\n<tr>\n<td>CLAUDE MOORE PARK</td>\n<td>0.2279</td>\n<td>709</td>\n<td>366</td>\n<td>326</td>\n<td>0.5285</td>\n<td>0.4714</td>\n<td>Safe Dem</td>\n<td>68</td>\n</tr>\n<tr>\n<td>MOUNTAIN VIEW</td>\n<td>0.2319</td>\n<td>869</td>\n<td>427</td>\n<td>437</td>\n<td>0.4945</td>\n<td>0.5054</td>\n<td>Tossup</td>\n<td>82</td>\n</tr>\n<tr>\n<td>BUCKLAND MILLS</td>\n<td>0.2448</td>\n<td>892</td>\n<td>431</td>\n<td>450</td>\n<td>0.4891</td>\n<td>0.5108</td>\n<td>Tossup</td>\n<td>80</td>\n</tr>\n<tr>\n<td>ELLIS</td>\n<td>0.2475</td>\n<td>322</td>\n<td>160</td>\n<td>158</td>\n<td>0.5038</td>\n<td>0.4961</td>\n<td>Tossup</td>\n<td>28</td>\n</tr>\n<tr>\n<td>FREEDOM</td>\n<td>0.2509</td>\n<td>986</td>\n<td>492</td>\n<td>487</td>\n<td>0.5028</td>\n<td>0.4971</td>\n<td>Tossup</td>\n<td>86</td>\n</tr>\n<tr>\n<td>VICTORY</td>\n<td>0.2645</td>\n<td>1289</td>\n<td>638</td>\n<td>637</td>\n<td>0.5005</td>\n<td>0.4994</td>\n<td>Tossup</td>\n<td>107</td>\n</tr>\n</table>\n<p>The final column in the result is the target increase for that precinct (column: ‘inc’). With this information in hand the campaign field operations can devise a contact strategy to bring these voters to the polls on election day. </p>\n<h2>Conclusion</h2>\n<p>Playing the role of campaign consultant, we have analyzed previous electoral outcomes in the 13th seat of the House of Delegates in Virginia. We have shown how a Democratic candidate can leverage increasing Democratic support and low turnout to make this race competitive. We have also created a precinct targeting methodology that provides a high-level blueprint for resources planning. The analysis we performed performed is very standard, but using R makes our methodology unique. A down-ballot or primary-challenger campaign taking advantage of this methodology will spend less money and can experiment more on their targeting, potentially leading them to a win.</p>\n<p>Are you a Democrat running for the Virginia House of Delegates who would like to see the same data for your race? Or, are you a Democratic congressional candidate preparing for the 2010 cycle? Contact me at <a href=\"/cdn-cgi/l/email-protection#80eaeae8c0efe6e6e5eef3e9f6e5f0efece9f4e9e3f3aeeee5f4\" rel=\"nofollow\" target=\"_blank\"><span class=\"__cf_email__\" data-cfemail=\"a1cbcbc9e1cec7c7c4cfd2c8d7c4d1cecdc8d5c8c2d28fcfc4d5\">[email protected]</span></a> for robust targeting data or other analysis.</p>\n<p>Follow Offensive Politics <a href=\"https://twitter.com/offpol/\" rel=\"nofollow\" target=\"_blank\">on twitter</a></p>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://offensivepolitics.net/blog/2009/10/aggreate-electoral-targeting-with-r/\"> Offensive Politics</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n<div class=\"post-tags clearfix\"><ul><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/r/\" rel=\"tag\">R</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/targeting/\" rel=\"tag\">targeting</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/uncategorized/\" rel=\"tag\">Uncategorized</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/virginia-house-of-delegates/\" rel=\"tag\">Virginia House of Delegates</a></li></ul></div></article>", "main_text": "Aggreate electoral targeting with R\nPosted on\nOctober 22, 2009\nby\njjh\nin\nR bloggers\n,\nUncategorized\n| 0 Comments\n[This article was first published on\nOffensive Politics\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nIntroduction\nElectoral targeting is the process of quantifying the partisan bias of a single voter or subset of voters in a geographic region. Bias can be calculated using an individual’s demographic and voting behavior or by aggregating results from an entire election precinct. Targeting is traditionally performed by national committees (e.g.,\nNational Committee for an Effective Congress\n,\nNational Republican Congressional Committee\n), state political parties, interest groups (e.g.,\nEMILY’s List\n,\nNational Rifle Association\n), or campaign consultants. Targeting data is consumed by campaign managers and analysts, and it is used along with polling data to build strategy, direct resources, and project electoral outcomes.\nWhile aggregate electoral targeting can build a sophisticated picture of a district, the mathematics behind targeting are very simple. Targeting can be performed by anyone with previous electoral data, and calculations can be done using 3×5 note cards, with simple spreadsheets, or high-end software packages like SPSS. The targeting methods discussed in this post are taken from academic publications on electioneering:\nCampaign Craft\n(Burton, Shea 2006) and\nThe Campaign Manager\n(Shaw, 2004).\nAlthough targeting data is usually usually inexpensive or free, a down-ballot campaign or a primary challenger might not have the connections or support of a PAC or party to obtain the data. In these cases, a campaign will probably purchase one of the books listed above to perform its own analysis. Even an established campaign may run its own analysis, possibly to test different turnout theories or to integrate additional data. This post is directed towards these groups.\nTogether, we will assume the role of campaign consultant and perform an aggregate electoral analysis on the 13th House of Delegates seat (HOD#13) in the Commonwealth of Virginia. In HOD#13, the 18-year Republican incumbent\nBob Marshall\nis being challenged by Democrat\nJohn Bell\n. This analysis will compute and visualize turnout, partisan bias, and a precinct ranking based on projected turnout and historical Democratic support.\nThe analysis of HOD#13 will be performed using R, an open-source computing platform. R is free, extensible, and interactive, making it an ideal platform for experimentation. The R package\naggpol\nwas created specifically for this tutorial, and it contains all the data and operations required to execute an aggregate electoral analysis. Readers can execute the provided R code to reproduce the analysis or simply follow along to learn how it was performed. Readers unfamiliar with R should read\nIntroduction to R\n, which is available on the\nR project homepage\n.\nThe electoral and registration data used were compiled from the\nVirginia State Board of Elections\nusing several custom written parsers and two different PDF-to-text engines. Please contact me for source data or more information at:\n[email protected]\n.\nPrerequisites\nThis section only applies to readers interested in recreating the analysis and graphics produced in this tutorial. To completely recreate this analysis you will need the following:\nThe latest version of the R statistical computing environment. Binaries, source, and installation instructions can be downloaded from\nR homepage\n.\nAdditional R packages. This analysis requires several packages that provide additional functionality on top of the existing R system. Install the appropriate R environment for your system and run the program.\nplyr\n,\nggplot2\n,\nRColorBrewer\n. To install these packages execute the following in your R environment:\n1\ninstall.packages(c(\"plyr\", \"RColorBrewer\", \"ggplot2\"))\nNext you’ll need to install the\naggpol\npackage for calculating aggregate political statistics. You will need to download the latest version:\nFor Unix-style\nsystems or\nFor Windows\nsystems. Installation of local packages is detailed in the\nR Manual\non package installation.\nGetting Started\nNow that the prerequisites are installed we can get started with our data analysis. Start up your R environment and load the required libraries by typing in the following commands:\n1\n2\n3\n4\nlibrary(plyr)\nlibrary(aggpol)\nlibrary(ggplot2)\nlibrary(RColorBrewer)\nWe need to attach the VAHOD data set that comes with\naggpol\n. This data set contains precinct-level electoral returns for state and federal elections in the Commonwealth of Virginia from 2001 to 2008. Since we are focusing on HOD#13, we’ll need to select just the records that have to do with that seat.\n1\n2\ndata(VAHOD)\nhd013 <- vahod[which(vahod$seat == \"HD-013\"),]\nThe data set contains precinct-level electoral results for the following races: U.S. President, U.S.Senate, U.S.House of Representatives, Virginia Governor, Senate of Virginia, and Virginia House of Delegates. This breadth of electoral returns allows us to build a very detailed profile of the partisan bias of a district.\nWe will first determine the historical partisanship in HOD#13. Since partisanship can fluctuate over the years and different seats have different turnout expectations, we’ll first need to see the major party support for every seat in each election for precincts in HOD#13. We can use the\nhistorical.election.summary\nfunction from the\naggpol\npackage to group the precinct results into district results, and then break them down by seat and year.\n1\nesum <- historical.election.summary(hd013)\nesum\nnow contains:\n.\nyear\ndistrict_type\ntotal.turnout\nrep.turnout\nrep.turnout.percent\ndem.turnout\ndem.turnout.percent\noth.turnout\noth.turnout.percent\n1\n2001\nGV\n5527\n3266\n0.5909\n2207\n0.3993\n54\n0.0097\n2\n2001\nHD\n5399\n3475\n0.6436\n1924\n0.3563\n0\n0\n3\n2001\nLG\n5432\n3291\n0.6058\n2025\n0.3727\n116\n0.0213\n4\n2003\nHD\n10299\n10103\n0.9809\n110\n0.0106\n86\n0.0083\n13 more lines…\nWe now have major-party turnout for every election in our data set. To best visualize the results we’ll build a bar graph comparing major-party turnout in each seat over time. We first need to transpose the election summary object (\nesum\n) from a summary format to an observation format, one line per distinct year+district+party. The\nplyr\npackage makes this task extremely simple.\n1\n2\n3\nelx <- ddply(esum,c(\"year\", \"district_type\"), function(x) \n  rbind(  data.frame(party=\"REP\",turnout=x$rep.turnout.percent),\n  data.frame(party=\"DEM\",turnout=x$dem.turnout.percent)))\nWe will now use the powerful\nggplot2\npackage to view the Republican and Democratic support for each election, in each seat, for our subset:\n1\n2\n3\n4\nggplot(elx,aes(year,turnout,fill=factor(party))) + \n  geom_bar(stat=\"identity\") + \n  facet_wrap(~district_type,scales=\"free_x\") + \n  scale_fill_brewer(palette=\"Set1\")\nResult:\nThis graphic gives us a decent understanding of district-level electoral trends. For U.S. federal elections (figs.: PVP, USH, USS), we can see a distinct drop in Republican support moving towards 2008; the results for U.S. House (USH) and U.S. Senate (USS), in particular, show a strong increase in Democratic support. This growth correlates to statewide trends that resulted in the election of two Democratic Senators representing Virginia for the first time since 1970. General Democratic gains notwithstanding, the House of Delegates (fig.: HD) results aren’t as promising for a Democratic challenger. The incumbent Del. Marshall saw more than 60% support in three of the last four elections and saw no challenger at all in 2003. While the district may be trending more Democratic over time, the voters of HOD#13 are obviously big fans of Del. Marshall.\nNow that we understand the historical partisanship of this district we need to understand historical turnout, allowing us to project of the number of votes required to win. We will utilize the\nhistorical.turnout.summary\nfunction from the\naggpol\npackage to produce a summary of turnout for this district.\n1\nhistorical.turnout.summary(hd013, district.type=\"HD\", district.number=\"013\", years=c(2001,2003,2005,2007))\n.\nyear\ntotal.turnout\ntotal.registration\n1\n2001\n5399\n13275\n2\n2003\n10031\n45769\n3\n2005\n23592\n62497\n4\n2007\n26110\n78028\nLooking at this table one can see some data collection problems in the 2001 HD elections. In recent years, precincts belonged to only one House of Delegates seat, but in 2001 and somewhat less so in 2003 some precincts are split and some have duplicate names and now information on how to allocate results from different races to precincts. The turnout numbers are slightly affected by these problems, but the\naggpol\nattempts to correct this by substituting alternate years or even races if possible.\nThe take away from from the previous table is that turnout for the last four House of Delegates elections has hovered around 30%. This makes some political sense,  because Virginia holds state elections in odd-numbered years with no federal elections to drive up turnout. This leaves a lot of registered voters to be activated, but we need to delve down to the precinct level to find them.\nWe use the\ndistrict.analyze\nfunction of\naggpol\nto aggregate all electoral results into a summary for each precinct.\n1\nhd013s <- district.analyze(hd013)\nhd013s\nis a data frame with columns calculated for every precinct; several values for each major party and other values for the precinct as a whole. Those statistics are:\nAggregate base partisan vote\n– The lowest non-zero turnout for a major party, in all electoral years.\nAverage Party Performance\n– The average percentage of the vote a party receives in the closest 3 elections in recent years.\nSwing vote\n– The part of the electorate not included in the aggregate base partisan vote.\nSoft-partisan vote\n– The average worst a party has performed, minus the actual worst.\nToss-up\n– The portion of the electorate not included in the Aggregate base or soft-base partisan vote.\nPartisan base\n– The combined aggregate-base and soft-partisan vote for each major party.\nPartisan swing\n– The combined major party swing vote.\nProjected turnout\n– The portion of the electorate that is projected to turn out given previous turnout and current registration data.\nThese variables can be visualized with the following graphic, adapted –along with definitions above– from Campaign Craft (Burton, Shea).\nThe actual columns in the data frame returned from\nfrom district.analyze\nare:\nproj.turnout.percent\n– The projected turnout percent of for a hypothetical next election.\nproj.turnout.count\n–  The projected number of voters who will turn out for a hypothetical next election.\ncurrent.reg\n– Current number of registered voters in a precinct.\npartisan.base\n– The combined aggregate-base and soft-partisan vote for both major parties ( Partisan base ).\npartisan.swing\n– All non-base voters (1.0 – partisan.base).\ntossup\n– The portion of the electorate not in the base or soft support of either major party.\napp.rep\n– The average party performance of a Republican candidate in this precinct.\nbase.rep\n– The aggregate base partisan vote for a Republican candidate in this precinct.\nsoft.rep\n– The soft partisan vote for a Republican candidate in this precinct.\napp.dem\n– The average party performance of a Democratic candidate in this precinct.\nbase.dem\n– The aggregate base partisan vote for a Democratic candidate in this precinct.\nsoft.dem\n– The soft partisan vote for a Democratic candidate in this precinct.\npartisan.rep\n– Combination of aggregate base and soft vote percentages for the Republican.\npartisan.dem\n– Combination of aggregate base and soft vote percentages for the Democrat.\nThe most useful statistic above is the Average Party Performance (APP), which is an average of major-party turnout in the 3 closest recent elections. The APP describes supporter levels for a best-case scenario in a close election. We’ve already calculated the APP of each major party (\napp.dem\n,\napp.rep\n), but when a race doesn’t have a third party candidate what we’ll usually visualize is the share of the combined partisan performance that each party receives. We’ll add these variables to our summary data frame generated previously, one for each major party.\n1\n2\nhd013s$dem.share <- hd013s$app.dem/(hd013s$app.dem+hd013s$app.rep)\nhd013s$rep.share <- hd013s$app.rep/(hd013s$app.dem+hd013s$app.rep)\nNow that we have the APP and partisan vote share for each party, we can visualize the precinct-level terrain for the Democratic challenger Mr. Bell. This visualization should show us the democratic support for each precinct and give us an idea whinc precincts could be competitive. We’ll produce this visualization using a density plot + 1d histogram, adapted from the seatsVotes plot in the\npscl\npackage. We’ll also draw a cut-line down the 50% vote mark to to help find competitive precincts.\n1\n2\n3\n4\nqplot(dem.share, data=hd013s, geom=c(\"density\",\"rug\"),\n    xlab=\"Dem Vote Share\",\n    main=\"Democratic vote share, by precinct\")  + \n  geom_vline(xintercept=.50)\nWe can see a lot of precincts are between 48% and 53% Democratic, which means those precincts could potentially go for either candidate. We need to classify these results into something more solid. Let’s say precincts with less than 48% Democratic share are Safe Republican, 48-52% are Tossup, and greater than 52% are Safe Democrat. This is a simple representation but can be refined later. We’ll add a seat classification to our data frame using  the\ncut\nfunction:\n1\nhd013s$cl <- cut(hd013s$dem.share, breaks=c(0,.48,.52,1), labels=c(\"Safe Rep\", \"Tossup\", \"Safe Dem\"))\nNow we need to visualize how many precincts fall into which classification, using a histogram this time instead of a density curve.\n1\n2\n3\n4\n5\nggplot(hd013s, aes(x=dem.share)) + \n  geom_bar(aes(fill=cl),binwidth=0.01) + \n  scale_fill_brewer(\"Precinct Rating\", palette=\"RdYlBu\") + \n  scale_x_continuous(\"Democratic Vote Share\") + \n  scale_y_continuous(\"Frequency\")\nFrom the histogram we see that not only does a Republican candidate enjoy more “Safe” precincts, but even the majority of the tossup precincts have less than 50% Democratic share. While the precinct breakdown looks bad, a Democratic win in this district is theoretically possible if these tossup precincts are held. A Democratic candidate will face a tough challenge, so the next step will be identifying Democratic and Democrat-leaning precincts to target.\nTo make this target precinct list we’ll need a method to prioritize the precincts so that we can reach the most persuadable voters while spending the least resources. A popular method to  identify a precinct as high-value is to sort precincts by lowest projected turnout with highest Democratic vote share. Lower turnout means there are registered voters waiting to be convinced to show up, and high Democratic vote share means more of those voters will be Democrats.\nSince we measured both of these values (turnout%, democratic vote share), it is very easy to order our data by turnout (ascending) and democratic average party performance (descending) using R.\n1\nhd013s[order(hd013s$proj.turnout.percent,-hd013s$app.dem),c(1:2,20:21),]\nprecinct_name\nproj.turnout.percent\ndem.share\nrep.share\n25\n153 – 409 – SUDLEY NORTH\n0.1959\n0.5105\n0.4894\n27\n153 – 411 – MULLEN\n0.2218\n0.5026\n0.4973\n4\n107 – 111 – BRIAR WOODS\n0.2256\n0.4837\n0.5162\n6\n107 – 212 – CLAUDE MOORE PARK\n0.2279\n0.5285\n0.4714\n26\n153 – 410 – MOUNTAIN VIEW\n0.2319\n0.4945\n0.5054\n16\n153 – 110 – BUCKLAND MILLS\n0.2448\n0.4891\n0.5108\n13\n153 – 106 – ELLIS\n0.2475\n0.5038\n0.4961\n5\n107 – 112 – FREEDOM\n0.2509\n0.5028\n0.4971\n15\n153 – 108 – VICTORY\n0.2645\n0.5005\n0.4994\n24\n153 – 408 – GLENKIRK\n0.2837\n0.4998\n0.5001\n1\n107 – 106 – EAGLE RIDGE\n0.2856\n0.4992\n0.5007\n18\n153 – 112 – CEDAR POINT\n0.2876\n0.4855\n0.5144\n14\n153 – 107 – MARSTELLER\n0.3067\n0.4775\n0.5224\n3\n107 – 109 – HUTCHISON\n0.3168\n0.4857\n0.5142\n2\n107 – 108 – MERCER\n0.3281\n0.5034\n0.4965\n17\n153 – 111 – BRISTOW RUN\n0.3324\n0.4822\n0.5177\n23\n153 – 406 – ALVEY\n0.3460\n0.4736\n0.5263\n21\n153 – 402 – BATTLEFIELD\n0.3546\n0.4323\n0.5676\n10\n153 – 102 – BENNETT\n0.3896\n0.4959\n0.5040\n19\n153 – 209 – WOODBINE\n0.4014\n0.4651\n0.5348\n7\n107 – 307 – MIDDLEBURG\n0.4043\n0.4953\n0.5046\n9\n153 – 101 – BRENTSVILLE\n0.4180\n0.4904\n0.5095\n22\n153 – 403 – BULL RUN\n0.4226\n0.4860\n0.5139\n20\n153 – 401 – EVERGREEN\n0.4283\n0.5006\n0.4993\n12\n153 – 104 – NOKESVILLE\n0.4537\n0.4960\n0.5039\n11\n153 – 103 – BUCKHALL\n0.4636\n0.4773\n0.5226\n8\n107 – 309 – ALDIE\n0.4687\n0.4881\n0.5118\nThis sorted list is our critical intelligence to finding persuadable voters, but we need a better way to visualize the output. Since we have two scalar variables (turnout %, democratic vote share) we can use a scatter plot with the Democratic vote share on the Y axis and Turnout % on the X. We’ll also color each precinct with its seat classification we defined earlier (Safe Republican, Tossup, Safe Democrat):\n1\n2\n3\nggplot(aes(x=proj.turnout.percent, y=dem.share), data=hd013s) + \n  geom_point(aes(colour=cl,title=\"a\")) + \n  labs(x=\"Projected Turnout %\", y=\"Democratic Vote Share %\",colour=\"Seat Type\")\nThis chart echoes what we’ve seen previously: the Democratic challenger faces an uphill battle, but there is room for a win. We see a single “Safe Democract” precinct with very low turnout, and five “Safe Republican” precincts that run the board in turnout. Given the high number of “Tossup” precincts, and the fact that they run the gamut as far as turnout is concerned, we’ll need to incorporate additional information into our prioritization. If we also rank precincts by current voter registration, we can focus on precincts where we stand to gain the most ground.\nBefore we continue, we need to make sure there is enough difference in precinct-to-precinct registration to have an impact. Let’s look at some statistics for the current registration in this district.\n1\n2\nmean(hd013s$current.reg)\nsd(hd013s$current.reg)\n.\n2970.111\n1014.072\nThere are on average 2,970 current registered voters in each precinct, but the standard deviation is 1,014 voters. A standard deviation that high tells us we need to take into account registration if we want to focus on the precincts with 4000 people and not 1000 people. A histogram of current registration will help us clarify this finding:\n1\n2\nqplot(current.reg, data=hd013s, geom=\"bar\",binwidth=500,xlab=\"Current Registration\") + \n  scale_y_continuous(\"Frequency\")\nThe standard deviation was correct: we see some very small precincts and some large precincts, but the majority are somewhere in the 2000-4000 range. The difference looks to be large enough to include current registration in our ranking.\nWe need to look at the Democratic Vote Share vs Turnout % scatter plot again, but with the points scaled to the current precinct registration.\n1\n2\nqplot(proj.turnout.percent,dem.share,size=current.reg, data=hd013s,colour=cl)+ \n  labs(x=\"Projected Turnout %\", y=\"Democratic Vote Share %\",colour=\"Seat Type\",size=\"Current Registration\")\nDemocratic vote share by Turnout %\nThis plot is almost complete and ready to be analyzed. The last job is to label the points with ther precinct names. Our current\nprecinct_name\nvariable is actually a unique identifier with a FIPS county code, a precinct code, and a name, and it is too long for a point label. We’ll shrink it down to just the name and then we’ll recreate the scatter plot with the label:\n1\n2\n3\n4\n5\n6\n7\n# replace the fips code and precinct number w/ an empty string\nhd013s$precinct.label <- sub(\"^[0-9]+ - [0-9]+ - \",'',as.character(hd013s$precinct_name))\n# plot the previous graph again but this time use precinct.label as the label\nggplot(hd013s, aes(x=proj.turnout.percent, y=dem.share,label=precinct.label)) + \n  geom_point(aes(colour=cl,size=current.reg)) + \n  geom_text(size=2.5,vjust=1.5,angle=25) + \n  labs(x=\"Projected Turnout %\", y=\"Democratic Vote Share %\",colour=\"Seat Type\",size=\"Current Registration\")\nFrom the chart we can see that a Democrat in the HD#013 will want to focus contact efforts on the precincts in the upper-left hand corner of the plot and will want to target larger precincts before smaller. Integrating the current registration into our previous sort command leaves us with the following sort order:\n1\nhd013s[order(hd013s$proj.turnout.percent,-hd013s$app.dem,hd013s$current.reg),c(1:2,4,20:22),]\nprecinct_name\nproj.turnout.percent\ncurrent.reg\ndem.share\nrep.share\ncl\n25\n153 – 409 – SUDLEY NORTH\n0.1959\n2497\n0.5105\n0.4894\nTossup\n27\n153 – 411 – MULLEN\n0.2218\n3555\n0.5026\n0.4973\nTossup\n4\n107 – 111 – BRIAR WOODS\n0.2256\n2288\n0.4837\n0.5162\nTossup\n6\n107 – 212 – CLAUDE MOORE PARK\n0.2279\n3115\n0.5285\n0.4714\nSafe Dem\n26\n153 – 410 – MOUNTAIN VIEW\n0.2319\n3749\n0.4945\n0.5054\nTossup\n16\n153 – 110 – BUCKLAND MILLS\n0.2448\n3646\n0.4891\n0.5108\nTossup\n13\n153 – 106 – ELLIS\n0.2475\n1303\n0.5038\n0.4961\nTossup\n5\n107 – 112 – FREEDOM\n0.2509\n3929\n0.5028\n0.4971\nTossup\n15\n153 – 108 – VICTORY\n0.2645\n4874\n0.5005\n0.4994\nTossup\n24\n153 – 408 – GLENKIRK\n0.2837\n2175\n0.4998\n0.5001\nTossup\n1\n107 – 106 – EAGLE RIDGE\n0.2856\n2531\n0.4992\n0.5007\nTossup\n18\n153 – 112 – CEDAR POINT\n0.2876\n3497\n0.4855\n0.5144\nTossup\n14\n153 – 107 – MARSTELLER\n0.3067\n3669\n0.4775\n0.5224\nSafe Rep\n3\n107 – 109 – HUTCHISON\n0.3168\n3722\n0.4857\n0.5142\nTossup\n2\n107 – 108 – MERCER\n0.3281\n3229\n0.5034\n0.4965\nTossup\n17\n153 – 111 – BRISTOW RUN\n0.3324\n3031\n0.4822\n0.5177\nTossup\n23\n153 – 406 – ALVEY\n0.3460\n4403\n0.4736\n0.5263\nSafe Rep\n21\n153 – 402 – BATTLEFIELD\n0.3546\n3851\n0.4323\n0.5676\nSafe Rep\n10\n153 – 102 – BENNETT\n0.3896\n4440\n0.4959\n0.5040\nTossup\n19\n153 – 209 – WOODBINE\n0.4014\n2406\n0.4651\n0.5348\nSafe Rep\n7\n107 – 307 – MIDDLEBURG\n0.4043\n1239\n0.4953\n0.5046\nTossup\n9\n153 – 101 – BRENTSVILLE\n0.4180\n1708\n0.4904\n0.5095\nTossup\n22\n153 – 403 – BULL RUN\n0.4226\n3111\n0.4860\n0.5139\nTossup\n20\n153 – 401 – EVERGREEN\n0.4283\n2535\n0.5006\n0.4993\nTossup\n12\n153 – 104 – NOKESVILLE\n0.4537\n2501\n0.4960\n0.5039\nTossup\n11\n153 – 103 – BUCKHALL\n0.4636\n2287\n0.4773\n0.5226\nSafe Rep\n8\n107 – 309 – ALDIE\n0.4687\n902\n0.4881\n0.5118\nTossup\nNow that we have our ranking, we can figure out how much each precinct might offer. Let’s first see the number of votes required to win the seat, the number of votes we’re projected to receive given the calculated APP, previous turnout, and current registration. The\ndistrict.summary\nfunction will provide us will all this information:\n1\ndistrict.summary(hd013s)[,c(1,2,9,10,11)]\ncurrent.reg\nproj.turnout.count\nvotes.to.win\nproj.turnout.rep\nproj.turnout.dem\n1\n80193\n25401\n12701.5\n12499\n12074\nWe can see that the projected turnout (\nproj.turnout.count\n) is about 25,401, so the votes projected to win this district is only 12,702. Using the  Democratic APP, we can project Democratic turnout at 12,074, so we need to find 628 votes to win. How do we find these votes?\nLets go back to our sorted precinct list and take the top 30% and call them our\ntarget.precincts\n.\n1\n2\nsorted.precincts <- hd013s[order(hd013s$proj.turnout.percent,-hd013s$app.dem,hd013s$current.reg),]\ntarget.precincts <- sorted.precincts[1:(nrow(sorted.precincts)/3),]\nWe’ve got our target list, and we know we need 628 votes from them to bring our total to 50% + 1. Adding a small buffer to that number, we’ll take 640 target votes and allocate them across our target precincts, proportional to the number of registered voters in the precinct. Hopefully, this will set more realistic goals for larger and smaller precincts.\n1\n2\n3\ntarget.precincts$inc <- as.integer(640 * target.precincts$current.reg/sum(target.precincts$current.reg))\n \ntarget.precincts[,c(2,3,17,23,18,20:22,24)]\nprecinct.label\nproj.turnout.percent\nproj.turnout.count\nproj.turnout.dem\nproj.turnout.rep\ndem.share\nrep.share\ncl\ninc\nSUDLEY NORTH\n0.1959\n489\n248\n238\n0.5105\n0.4894\nTossup\n55\nMULLEN\n0.2218\n788\n391\n387\n0.5026\n0.4973\nTossup\n78\nBRIAR WOODS\n0.2256\n516\n243\n259\n0.4837\n0.5162\nTossup\n50\nCLAUDE MOORE PARK\n0.2279\n709\n366\n326\n0.5285\n0.4714\nSafe Dem\n68\nMOUNTAIN VIEW\n0.2319\n869\n427\n437\n0.4945\n0.5054\nTossup\n82\nBUCKLAND MILLS\n0.2448\n892\n431\n450\n0.4891\n0.5108\nTossup\n80\nELLIS\n0.2475\n322\n160\n158\n0.5038\n0.4961\nTossup\n28\nFREEDOM\n0.2509\n986\n492\n487\n0.5028\n0.4971\nTossup\n86\nVICTORY\n0.2645\n1289\n638\n637\n0.5005\n0.4994\nTossup\n107\nThe final column in the result is the target increase for that precinct (column: ‘inc’). With this information in hand the campaign field operations can devise a contact strategy to bring these voters to the polls on election day.\nConclusion\nPlaying the role of campaign consultant, we have analyzed previous electoral outcomes in the 13th seat of the House of Delegates in Virginia. We have shown how a Democratic candidate can leverage increasing Democratic support and low turnout to make this race competitive. We have also created a precinct targeting methodology that provides a high-level blueprint for resources planning. The analysis we performed performed is very standard, but using R makes our methodology unique. A down-ballot or primary-challenger campaign taking advantage of this methodology will spend less money and can experiment more on their targeting, potentially leading them to a win.\nAre you a Democrat running for the Virginia House of Delegates who would like to see the same data for your race? Or, are you a Democratic congressional candidate preparing for the 2010 cycle? Contact me at\n[email protected]\nfor robust targeting data or other analysis.\nFollow Offensive Politics\non twitter\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nOffensive Politics\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nR\ntargeting\nUncategorized\nVirginia House of Delegates", "meta_description": "Aggregate electoral targeting is the process of determining the likely hood of a citizen choosing to vote turnout), and which candidate that person is most likely to vote for (partisan bias) in a given race using historical turnout and partisan bias. The output from this targeting allows a campaign to project the likely number of voters, what percentages their candidate is likely to receive, and even the general geographic locations of supporters.", "meta_keywords": "r,targeting,uncategorized,virginia house of delegates", "og_description": "Aggregate electoral targeting is the process of determining the likely hood of a citizen choosing to vote turnout), and which candidate that person is most likely to vote for (partisan bias) in a given race using historical turnout and partisan bias. The output from this targeting allows a campaign to project the likely number of voters, what percentages their candidate is likely to receive, and even the general geographic locations of supporters.", "og_image": "https://www.r-bloggers.com/wp-content/uploads/2009/10/turnout-by-year-by-seat1.png", "og_title": "Aggreate electoral targeting with R | R-bloggers", "raw_jsonld_article": null, "reading_time_min": 22.4, "sitemap_lastmod": "2011-05-11T21:25:11+00:00", "twitter_description": "Aggregate electoral targeting is the process of determining the likely hood of a citizen choosing to vote turnout), and which candidate that person is most likely to vote for (partisan bias) in a given race using historical turnout and partisan bias. The output from this targeting allows a campaign to project the likely number of voters, what percentages their candidate is likely to receive, and even the general geographic locations of supporters.", "twitter_title": "Aggreate electoral targeting with R | R-bloggers", "url": "https://www.r-bloggers.com/2009/10/aggreate-electoral-targeting-with-r/", "word_count": 4471}}