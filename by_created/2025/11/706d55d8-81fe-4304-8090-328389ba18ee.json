{
  "uuid": "706d55d8-81fe-4304-8090-328389ba18ee",
  "created_at": "2025-11-17 20:38:57",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2023/12/adaptive-asset-allocation-replication/",
    "crawled_at": "2025-11-17T09:38:04.202614",
    "external_links": [
      {
        "href": "https://blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/",
        "text": "R on FOSS Trading"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2328254",
        "text": "“Adaptive Asset Allocation: A\nPrimer”"
      },
      {
        "href": "https://cran.r-project.org/package=PerformanceAnalytics",
        "text": "PerformanceAnalytics"
      },
      {
        "href": "https://blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/adaptive-asset-allocation-replication.R",
        "text": "adaptive-asset-allocation-replication.R"
      },
      {
        "href": "https://blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/returns.rds",
        "text": "returns.rds"
      },
      {
        "href": "https://cran.r-project.org/package=FRAPO",
        "text": "FRAPO"
      },
      {
        "href": "https://en.wikipedia.org/wiki/Modern_portfolio_theory",
        "text": "modern portfolio\ntheory"
      },
      {
        "href": "https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2328254",
        "text": "Adaptive Asset Allocation: A\nPrimer"
      },
      {
        "href": "https://blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/",
        "text": "R on FOSS Trading"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Adaptive Asset Allocation Replication | R-bloggers",
    "images": [
      {
        "alt": null,
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/equal_weight-1.png?w=578&ssl=1"
      },
      {
        "alt": null,
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/equal_risk-1.png?w=578&ssl=1"
      },
      {
        "alt": null,
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/top5_momo_eq_weight-1.png?w=578&ssl=1"
      },
      {
        "alt": null,
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/top_momo_eq_risk-1.png?w=578&ssl=1"
      },
      {
        "alt": null,
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i1.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/top_momo_min_var-1.png?w=578&ssl=1"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/r-on-foss-trading/",
        "text": "R on FOSS Trading"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-380731 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Adaptive Asset Allocation Replication</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">December 8, 2023</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/r-on-foss-trading/\">R on FOSS Trading</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/\"> R on FOSS Trading</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.9--><!-- raw HTML omitted -->\n<!-- raw HTML omitted -->\n<p>The paper, <a href=\"https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2328254\" rel=\"nofollow\" target=\"_blank\">“Adaptive Asset Allocation: A\nPrimer”</a>\nby Adam Butler, Mike Philbrick, Rodrigo Gordillo, and David Varadi\naddresses flaws in the traditional application of Modern Portfolio\nTheory related to Strategic Asset Allocation. It shows that estimating\nreturn and (co)variance parameters over shorter time horizons are\nsuperior to estimates over long-term horizons because parameter\nestimates vary substantially over time. Longer-term estimates do not\naccount for this variability in the short-term. They propose an Adaptive\nAsset Allocation portfolio construction methodology that uses the new\nparameter estimates to substantially improve performance relative to\nStrategic Asset Allocation.</p>\n<h1 id=\"data\">Data</h1>\n<p>The original paper creates portfolios from 10 major global asset classes\nusing data between 1995 and 2014. It uses ETFs when possible, and uses\npassive no-load mutual funds, underlying indexes, and no-load active\nmutual funds as proxies for asset class returns prior to ETF inception.\nThe paper doesn’t list the actual instruments used at each point in\ntime, so this post attempts to replicate their described methodology\nusing publicly available data.</p>\n<p>The table below shows the asset class, instruments, and time horizons\nused for each asset class in this replication. The data start in late\n1997 instead of 1995 as in the original paper. Returns in this analysis\nare adjusted for splits and dividends.</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th style=\"text-align:left\">ETF</th>\n<th style=\"text-align:left\">ETF Start</th>\n<th style=\"text-align:left\">Fund</th>\n<th style=\"text-align:left\">Fund Start</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">US Equity</td>\n<td style=\"text-align:left\">VTI</td>\n<td style=\"text-align:left\">2001-05</td>\n<td style=\"text-align:left\">VTSMX</td>\n<td style=\"text-align:left\">1992-04</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">European Equity</td>\n<td style=\"text-align:left\">VGK</td>\n<td style=\"text-align:left\">2005-03</td>\n<td style=\"text-align:left\">VEURX</td>\n<td style=\"text-align:left\">1990-06</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Japanese Equity</td>\n<td style=\"text-align:left\">EWJ</td>\n<td style=\"text-align:left\">1996-03</td>\n<td style=\"text-align:left\">FJPNX</td>\n<td style=\"text-align:left\">1992-12</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Emerging Market Equity</td>\n<td style=\"text-align:left\">EEM</td>\n<td style=\"text-align:left\">2003-04</td>\n<td style=\"text-align:left\">VEIEX</td>\n<td style=\"text-align:left\">1994-12</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">US Real Estate</td>\n<td style=\"text-align:left\">ICF</td>\n<td style=\"text-align:left\">2001-02</td>\n<td style=\"text-align:left\">VGSIX</td>\n<td style=\"text-align:left\">1996-05</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">International Real Estate</td>\n<td style=\"text-align:left\">RWX</td>\n<td style=\"text-align:left\">2006-12</td>\n<td style=\"text-align:left\">XRFIX</td>\n<td style=\"text-align:left\">1997-09</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Intermediate Term Treasury</td>\n<td style=\"text-align:left\">IEF</td>\n<td style=\"text-align:left\">2002-07</td>\n<td style=\"text-align:left\">VFITX</td>\n<td style=\"text-align:left\">1991-12</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Long Term Treasury</td>\n<td style=\"text-align:left\">TLT</td>\n<td style=\"text-align:left\">2002-07</td>\n<td style=\"text-align:left\">VUSTX</td>\n<td style=\"text-align:left\">1986-12</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Commodities</td>\n<td style=\"text-align:left\">DBC</td>\n<td style=\"text-align:left\">2006-02</td>\n<td style=\"text-align:left\">QRACX</td>\n<td style=\"text-align:left\">1997-03</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Gold</td>\n<td style=\"text-align:left\">GLD</td>\n<td style=\"text-align:left\">2004-11</td>\n<td style=\"text-align:left\">SGGDX</td>\n<td style=\"text-align:left\">1993-08</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"replication\">Replication</h1>\n<p>This analysis attempts to replicate all 5 portfolios in the original\npaper.</p>\n<ol>\n<li>Equal weight of all asset classes</li>\n<li>Equal risk contribution of all asset classes</li>\n<li>Equal weight of highest momentum asset classes</li>\n<li>Equal risk contribution of highest momentum asset classes</li>\n<li>Minimum variance of highest momentum asset classes</li>\n</ol>\n<p>The original paper showed results as a monthly series. The\n<code>to_monthly_returns()</code> function converts the strategy returns from daily\nto monthly. The <code>strat_summary()</code> function uses the\n<a href=\"https://cran.r-project.org/package=PerformanceAnalytics\" rel=\"nofollow\" target=\"_blank\">PerformanceAnalytics</a>\npackage to calculate summary statistics to compare with the original\npaper. The file\n<a href=\"https://blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/adaptive-asset-allocation-replication.R\" rel=\"nofollow\" target=\"_blank\">adaptive-asset-allocation-replication.R</a>\ncontains all the code used in this analysis, and the\n<a href=\"https://blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/returns.rds\" rel=\"nofollow\" target=\"_blank\">returns.rds</a> function contains the data.</p>\n<h3 id=\"1-equal-weight-portfolio-of-all-asset-classes\">1. Equal weight portfolio of all asset classes</h3>\n<p>The baseline example assumes no knowledge of expected relative asset\nclass performance, risk, or correlation. The results below are based on\na portfolio that holds each asset class in equal weight and is\nrebalanced monthly. The table compares the results of this replication\nwith the original results. Some of the difference in results are due to\nthe different instruments and time frames used for the analysis. Despite\nthe differences in the data between the two approaches, the results are\nvery similar.</p>\n<p>The <code>returns_equal_weight</code> object contains the portfolio returns for\neach day. Then we convert those returns to monthly and evaluate the\nportfolio results.</p>\n<!-- raw HTML omitted -->\n<pre>returns_equal_weight &lt;- as.xts(apply(returns, 1, mean))\nmonthly_returns &lt;- to_monthly_returns(returns_equal_weight)\n\ntitle &lt;- \"All Assets - Equal Weight\"\nstats &lt;- strat_summary(monthly_returns, title,\n                       original_results = c(0.081, 0.112, 0.72, -0.392))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\n</pre><p><img alt=\"\" data-lazy-src=\"https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/equal_weight-1.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/equal_weight-1.png?w=578&amp;ssl=1\"/></noscript></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th style=\"text-align:right\">Replication</th>\n<th style=\"text-align:right\">Original</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Annualized Return</td>\n<td style=\"text-align:right\">0.079</td>\n<td style=\"text-align:right\">0.081</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Std Dev</td>\n<td style=\"text-align:right\">0.115</td>\n<td style=\"text-align:right\">0.112</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Sharpe (Rf=0%)</td>\n<td style=\"text-align:right\">0.684</td>\n<td style=\"text-align:right\">0.720</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Worst Drawdown</td>\n<td style=\"text-align:right\">-0.377</td>\n<td style=\"text-align:right\">-0.392</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"2-equal-risk-contribution-using-all-asset-classes\">2. Equal risk contribution using all asset classes</h3>\n<p>The next portfolio assumes the investor has some knowledge of each\nasset’s risk, but still no knowledge of relative performance or\ncorrelations. So each asset in this portfolio is given a weight\nproportional to its relative risk, and each asset contributes the same\namount of risk to the overall portfolio. That way no asset’s risk will\ndominate the risk of the overall portfolio.</p>\n<p>The <code>portf_equal_risk()</code> estimates the equal risk contribution portfolio\nusing the <code>PERC()</code> function from the\n<a href=\"https://cran.r-project.org/package=FRAPO\" rel=\"nofollow\" target=\"_blank\">FRAPO</a> package. It calculates\nthe portfolio weights at the end of month using estimated portfolio risk\nfrom the returns over the last 60 days. Then those weights are used to\ncalculate the portfolio returns for the following month.</p>\n<!-- raw HTML omitted -->\n<pre>returns_equal_risk &lt;- portf_equal_risk(returns, 120, 60)\nmonthly_returns &lt;- to_monthly_returns(returns_equal_risk)\n\ntitle &lt;- \"All Assets - Equal Risk Contribution\"\nstats &lt;- strat_summary(monthly_returns, title,\n                       original_results = c(0.085, 0.086, 0.99, -0.242))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\n</pre><p><img alt=\"\" data-lazy-src=\"https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/equal_risk-1.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/equal_risk-1.png?w=578&amp;ssl=1\"/></noscript></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th style=\"text-align:right\">Replication</th>\n<th style=\"text-align:right\">Original</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Annualized Return</td>\n<td style=\"text-align:right\">0.086</td>\n<td style=\"text-align:right\">0.085</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Std Dev</td>\n<td style=\"text-align:right\">0.073</td>\n<td style=\"text-align:right\">0.086</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Sharpe (Rf=0%)</td>\n<td style=\"text-align:right\">1.177</td>\n<td style=\"text-align:right\">0.990</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Worst Drawdown</td>\n<td style=\"text-align:right\">-0.142</td>\n<td style=\"text-align:right\">-0.242</td>\n</tr>\n</tbody>\n</table>\n<p>In this case, the replicated results are better than the original\nresults. The data differences and the method used to estimate the equal\nrisk contribution portfolio weights are the most likely explanation for\nthe differences in the replicated results.</p>\n<h3 id=\"3-equal-weight-portfolio-of-highest-momentum-asset-classes\">3. Equal weight portfolio of highest momentum asset classes</h3>\n<p>The next portfolio assumes the investor has some knowledge of each\nasset’s returns, but still no knowledge of risk or correlations. The\noriginal paper uses momentum to estimate each asset’s returns because\nmomentum (also known as long-term memory) is a well-known property of\nfinancial market returns. Assets that have increased (decreased) in\nprice are likely to continue increasing (decreasing) in price in the\nnext period. Academic research shows that instruments with higher\n(lower) momentum over the past 1-12 months exhibits better (worse)\nperformance over short-term future periods. See the original paper for a\ndescription of some reasons why momentum exists in financial markets.</p>\n<p>The estimates of each asset’s returns are based on 6-month momentum\n(approximately 120 days). Momentum is re-estimated every month and only\nthe top 5 assets are included in the portfolio, rather than including\nevery asset in the portfolio. Note that this doesn’t mean every asset\nincluded in the portfolio has a positive return over the 6-month period.\nAll of them could have negative returns over the period, in which case\nthe 5 assets with the smallest losses would be included in the\nportfolio. Each of the top 5 assets included in the portfolio are held\nwith equal weight.</p>\n<!-- raw HTML omitted -->\n<pre>returns_momentum_equal_weight &lt;- portf_top_momentum(returns, 5, 120)\nmonthly_returns &lt;- to_monthly_returns(returns_momentum_equal_weight)\n\ntitle &lt;- \"Top 5 Assets by 6-month Momentum - Equal Weight\"\nstats &lt;- strat_summary(monthly_returns, title,\n                       original_results = c(0.130, 0.110, 1.17, -0.217))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\n</pre><p><img alt=\"\" data-lazy-src=\"https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/top5_momo_eq_weight-1.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/top5_momo_eq_weight-1.png?w=578&amp;ssl=1\"/></noscript></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th style=\"text-align:right\">Replication</th>\n<th style=\"text-align:right\">Original</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Annualized Return</td>\n<td style=\"text-align:right\">0.142</td>\n<td style=\"text-align:right\">0.130</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Std Dev</td>\n<td style=\"text-align:right\">0.114</td>\n<td style=\"text-align:right\">0.110</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Sharpe (Rf=0%)</td>\n<td style=\"text-align:right\">1.243</td>\n<td style=\"text-align:right\">1.170</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Worst Drawdown</td>\n<td style=\"text-align:right\">-0.199</td>\n<td style=\"text-align:right\">-0.217</td>\n</tr>\n</tbody>\n</table>\n<p>The replicated results have slightly better returns and maximum\ndrawdown, but similar standard deviation. That said, the results are\nsimilar enough to suggest this analysis replicates the approach\naccurately.</p>\n<h3 id=\"4-equal-risk-contribution-portfolio-of-highest-momentum-asset-classes\">4. Equal risk contribution portfolio of highest momentum asset classes</h3>\n<p>The previous two portfolios estimated asset weights using either\nrisk-based or momentum-based weights. This next portfolio combines\nestimates of momentum-based performance and accounts for asset class\nrisk differences. It includes the top 5 asset classes based on 6-month\nreturns and weights them using the <code>estimate_equal_risk_portf()</code>\nfunction defined earlier. Recall that the function weights each asset\nclass so they each contribute the same amount of risk to the portfolio.\nNote that the asset volatilities are calculated on 60 days\n(approximately 3 months) of returns while the momentum is based on 120\ndays (approximately 6 months).</p>\n<!-- raw HTML omitted -->\n<pre>returns_top_momentum_equal_risk &lt;-\n    portf_top_momentum_equal_risk(returns, 5, 120, 60)\nmonthly_returns &lt;- to_monthly_returns(returns_top_momentum_equal_risk)\n\ntitle &lt;- \"Top 5 Assets by 6-month Momentum - Equal Risk Contribution\"\nstats &lt;- strat_summary(monthly_returns, title,\n                       original_results = c(0.140, 0.099, 1.41, -0.148))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\n</pre><p><img alt=\"\" data-lazy-src=\"https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/top_momo_eq_risk-1.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/top_momo_eq_risk-1.png?w=578&amp;ssl=1\"/></noscript></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th style=\"text-align:right\">Replication</th>\n<th style=\"text-align:right\">Original</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Annualized Return</td>\n<td style=\"text-align:right\">0.137</td>\n<td style=\"text-align:right\">0.140</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Std Dev</td>\n<td style=\"text-align:right\">0.102</td>\n<td style=\"text-align:right\">0.099</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Sharpe (Rf=0%)</td>\n<td style=\"text-align:right\">1.335</td>\n<td style=\"text-align:right\">1.410</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Worst Drawdown</td>\n<td style=\"text-align:right\">-0.119</td>\n<td style=\"text-align:right\">-0.148</td>\n</tr>\n</tbody>\n</table>\n<p>The original and replicated results for this portfolio are very similar.\nNote that in the original paper this portfolio’s overall return\nincreased to 14.0% versus 13.0% for the momentum-based equal weight\nportfolio, but the replicated results were more similar (14.2% versus\n13.7%). Again, the data differences and portfolio weight estimation\ndifferences likely cause differences in the results. Also, an\nun-scientific comparison of the two cumulative return graphs suggests\nsome difference may be due to performance in 2012, when the replicated\nresults have a significant drawdown while the original results showed\npositive performance.</p>\n<h3 id=\"5-minimum-variance-portfolio-of-highest-momentum-asset-classes\">5. Minimum variance portfolio of highest momentum asset classes</h3>\n<p>The final portfolio takes the above concepts and adds correlation\nestimates to the portfolio optimization. The previous portfolios only\naccounted for the relative risk between the asset classes, but not the\ncorrelation between the assets’ returns. This portfolio accounts for the\ncorrelations between asset classes by finding the minimum variance\nportfolio using <a href=\"https://en.wikipedia.org/wiki/Modern_portfolio_theory\" rel=\"nofollow\" target=\"_blank\">modern portfolio\ntheory</a>. The\nasset selection for these portfolios in the original paper differ\nslightly from the previous portfolios. Instead of taking the top 5\nassets with the highest momentum, the original paper selects “assets\nwith above average 6-month momentum”. So it’s not clear how many assets\nare held in the portfolio each month.</p>\n<!-- raw HTML omitted -->\n<pre>returns_momentum_min_var &lt;-\n    portf_top_momentum_min_var(returns, 5, 120, 60)\nmonthly_returns &lt;- to_monthly_returns(returns_momentum_min_var)\n\ntitle &lt;- \"Assets With Above Average 6-month Momentum - Minimum Variance\"\nstats &lt;- strat_summary(monthly_returns, title,\n                       original_results = c(0.150, 0.094, 1.60, -0.088))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\n</pre><p><img alt=\"\" data-lazy-src=\"https://i1.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/top_momo_min_var-1.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"\" data-recalc-dims=\"1\" src=\"https://i1.wp.com/blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/top_momo_min_var-1.png?w=578&amp;ssl=1\"/></noscript></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\"></th>\n<th style=\"text-align:right\">Replication</th>\n<th style=\"text-align:right\">Original</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Annualized Return</td>\n<td style=\"text-align:right\">0.137</td>\n<td style=\"text-align:right\">0.150</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Std Dev</td>\n<td style=\"text-align:right\">0.103</td>\n<td style=\"text-align:right\">0.094</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Annualized Sharpe (Rf=0%)</td>\n<td style=\"text-align:right\">1.330</td>\n<td style=\"text-align:right\">1.600</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Worst Drawdown</td>\n<td style=\"text-align:right\">-0.102</td>\n<td style=\"text-align:right\">-0.088</td>\n</tr>\n</tbody>\n</table>\n<p>The replicated results still show worse performance than the original\nresults, which also seems to be related to performance during 2012. The\nreplicated results also do not show significant improvement relative to\nthe top 5 momentum equal risk portfolio like the original paper shows.</p>\n<h1 id=\"conclusion\">Conclusion</h1>\n<p>Despite using returns from different instruments in the same asset\nclasses, over a slightly different time period, this analysis closely\nreplicates the results from <a href=\"https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2328254\" rel=\"nofollow\" target=\"_blank\">Adaptive Asset Allocation: A\nPrimer</a>.\nThe differences in the data sets seem to create a significant difference\nin performance during 2012, but otherwise produce similar results on\nmonthly data.</p>\n<p>I’ll investigate the out-of-sample performance of this strategy in a\nfuture post. Thanks for reading!</p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/\"> R on FOSS Trading</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div> </div>\n</article>",
    "main_text": "Adaptive Asset Allocation Replication\nPosted on\nDecember 8, 2023\nby\nR on FOSS Trading\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nR on FOSS Trading\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nThe paper,\n“Adaptive Asset Allocation: A\nPrimer”\nby Adam Butler, Mike Philbrick, Rodrigo Gordillo, and David Varadi\naddresses flaws in the traditional application of Modern Portfolio\nTheory related to Strategic Asset Allocation. It shows that estimating\nreturn and (co)variance parameters over shorter time horizons are\nsuperior to estimates over long-term horizons because parameter\nestimates vary substantially over time. Longer-term estimates do not\naccount for this variability in the short-term. They propose an Adaptive\nAsset Allocation portfolio construction methodology that uses the new\nparameter estimates to substantially improve performance relative to\nStrategic Asset Allocation.\nData\nThe original paper creates portfolios from 10 major global asset classes\nusing data between 1995 and 2014. It uses ETFs when possible, and uses\npassive no-load mutual funds, underlying indexes, and no-load active\nmutual funds as proxies for asset class returns prior to ETF inception.\nThe paper doesn’t list the actual instruments used at each point in\ntime, so this post attempts to replicate their described methodology\nusing publicly available data.\nThe table below shows the asset class, instruments, and time horizons\nused for each asset class in this replication. The data start in late\n1997 instead of 1995 as in the original paper. Returns in this analysis\nare adjusted for splits and dividends.\nETF\nETF Start\nFund\nFund Start\nUS Equity\nVTI\n2001-05\nVTSMX\n1992-04\nEuropean Equity\nVGK\n2005-03\nVEURX\n1990-06\nJapanese Equity\nEWJ\n1996-03\nFJPNX\n1992-12\nEmerging Market Equity\nEEM\n2003-04\nVEIEX\n1994-12\nUS Real Estate\nICF\n2001-02\nVGSIX\n1996-05\nInternational Real Estate\nRWX\n2006-12\nXRFIX\n1997-09\nIntermediate Term Treasury\nIEF\n2002-07\nVFITX\n1991-12\nLong Term Treasury\nTLT\n2002-07\nVUSTX\n1986-12\nCommodities\nDBC\n2006-02\nQRACX\n1997-03\nGold\nGLD\n2004-11\nSGGDX\n1993-08\nReplication\nThis analysis attempts to replicate all 5 portfolios in the original\npaper.\nEqual weight of all asset classes\nEqual risk contribution of all asset classes\nEqual weight of highest momentum asset classes\nEqual risk contribution of highest momentum asset classes\nMinimum variance of highest momentum asset classes\nThe original paper showed results as a monthly series. The\nto_monthly_returns()\nfunction converts the strategy returns from daily\nto monthly. The\nstrat_summary()\nfunction uses the\nPerformanceAnalytics\npackage to calculate summary statistics to compare with the original\npaper. The file\nadaptive-asset-allocation-replication.R\ncontains all the code used in this analysis, and the\nreturns.rds\nfunction contains the data.\n1. Equal weight portfolio of all asset classes\nThe baseline example assumes no knowledge of expected relative asset\nclass performance, risk, or correlation. The results below are based on\na portfolio that holds each asset class in equal weight and is\nrebalanced monthly. The table compares the results of this replication\nwith the original results. Some of the difference in results are due to\nthe different instruments and time frames used for the analysis. Despite\nthe differences in the data between the two approaches, the results are\nvery similar.\nThe\nreturns_equal_weight\nobject contains the portfolio returns for\neach day. Then we convert those returns to monthly and evaluate the\nportfolio results.\nreturns_equal_weight <- as.xts(apply(returns, 1, mean))\nmonthly_returns <- to_monthly_returns(returns_equal_weight)\n\ntitle <- \"All Assets - Equal Weight\"\nstats <- strat_summary(monthly_returns, title,\n                       original_results = c(0.081, 0.112, 0.72, -0.392))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\nReplication\nOriginal\nAnnualized Return\n0.079\n0.081\nAnnualized Std Dev\n0.115\n0.112\nAnnualized Sharpe (Rf=0%)\n0.684\n0.720\nWorst Drawdown\n-0.377\n-0.392\n2. Equal risk contribution using all asset classes\nThe next portfolio assumes the investor has some knowledge of each\nasset’s risk, but still no knowledge of relative performance or\ncorrelations. So each asset in this portfolio is given a weight\nproportional to its relative risk, and each asset contributes the same\namount of risk to the overall portfolio. That way no asset’s risk will\ndominate the risk of the overall portfolio.\nThe\nportf_equal_risk()\nestimates the equal risk contribution portfolio\nusing the\nPERC()\nfunction from the\nFRAPO\npackage. It calculates\nthe portfolio weights at the end of month using estimated portfolio risk\nfrom the returns over the last 60 days. Then those weights are used to\ncalculate the portfolio returns for the following month.\nreturns_equal_risk <- portf_equal_risk(returns, 120, 60)\nmonthly_returns <- to_monthly_returns(returns_equal_risk)\n\ntitle <- \"All Assets - Equal Risk Contribution\"\nstats <- strat_summary(monthly_returns, title,\n                       original_results = c(0.085, 0.086, 0.99, -0.242))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\nReplication\nOriginal\nAnnualized Return\n0.086\n0.085\nAnnualized Std Dev\n0.073\n0.086\nAnnualized Sharpe (Rf=0%)\n1.177\n0.990\nWorst Drawdown\n-0.142\n-0.242\nIn this case, the replicated results are better than the original\nresults. The data differences and the method used to estimate the equal\nrisk contribution portfolio weights are the most likely explanation for\nthe differences in the replicated results.\n3. Equal weight portfolio of highest momentum asset classes\nThe next portfolio assumes the investor has some knowledge of each\nasset’s returns, but still no knowledge of risk or correlations. The\noriginal paper uses momentum to estimate each asset’s returns because\nmomentum (also known as long-term memory) is a well-known property of\nfinancial market returns. Assets that have increased (decreased) in\nprice are likely to continue increasing (decreasing) in price in the\nnext period. Academic research shows that instruments with higher\n(lower) momentum over the past 1-12 months exhibits better (worse)\nperformance over short-term future periods. See the original paper for a\ndescription of some reasons why momentum exists in financial markets.\nThe estimates of each asset’s returns are based on 6-month momentum\n(approximately 120 days). Momentum is re-estimated every month and only\nthe top 5 assets are included in the portfolio, rather than including\nevery asset in the portfolio. Note that this doesn’t mean every asset\nincluded in the portfolio has a positive return over the 6-month period.\nAll of them could have negative returns over the period, in which case\nthe 5 assets with the smallest losses would be included in the\nportfolio. Each of the top 5 assets included in the portfolio are held\nwith equal weight.\nreturns_momentum_equal_weight <- portf_top_momentum(returns, 5, 120)\nmonthly_returns <- to_monthly_returns(returns_momentum_equal_weight)\n\ntitle <- \"Top 5 Assets by 6-month Momentum - Equal Weight\"\nstats <- strat_summary(monthly_returns, title,\n                       original_results = c(0.130, 0.110, 1.17, -0.217))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\nReplication\nOriginal\nAnnualized Return\n0.142\n0.130\nAnnualized Std Dev\n0.114\n0.110\nAnnualized Sharpe (Rf=0%)\n1.243\n1.170\nWorst Drawdown\n-0.199\n-0.217\nThe replicated results have slightly better returns and maximum\ndrawdown, but similar standard deviation. That said, the results are\nsimilar enough to suggest this analysis replicates the approach\naccurately.\n4. Equal risk contribution portfolio of highest momentum asset classes\nThe previous two portfolios estimated asset weights using either\nrisk-based or momentum-based weights. This next portfolio combines\nestimates of momentum-based performance and accounts for asset class\nrisk differences. It includes the top 5 asset classes based on 6-month\nreturns and weights them using the\nestimate_equal_risk_portf()\nfunction defined earlier. Recall that the function weights each asset\nclass so they each contribute the same amount of risk to the portfolio.\nNote that the asset volatilities are calculated on 60 days\n(approximately 3 months) of returns while the momentum is based on 120\ndays (approximately 6 months).\nreturns_top_momentum_equal_risk <-\n    portf_top_momentum_equal_risk(returns, 5, 120, 60)\nmonthly_returns <- to_monthly_returns(returns_top_momentum_equal_risk)\n\ntitle <- \"Top 5 Assets by 6-month Momentum - Equal Risk Contribution\"\nstats <- strat_summary(monthly_returns, title,\n                       original_results = c(0.140, 0.099, 1.41, -0.148))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\nReplication\nOriginal\nAnnualized Return\n0.137\n0.140\nAnnualized Std Dev\n0.102\n0.099\nAnnualized Sharpe (Rf=0%)\n1.335\n1.410\nWorst Drawdown\n-0.119\n-0.148\nThe original and replicated results for this portfolio are very similar.\nNote that in the original paper this portfolio’s overall return\nincreased to 14.0% versus 13.0% for the momentum-based equal weight\nportfolio, but the replicated results were more similar (14.2% versus\n13.7%). Again, the data differences and portfolio weight estimation\ndifferences likely cause differences in the results. Also, an\nun-scientific comparison of the two cumulative return graphs suggests\nsome difference may be due to performance in 2012, when the replicated\nresults have a significant drawdown while the original results showed\npositive performance.\n5. Minimum variance portfolio of highest momentum asset classes\nThe final portfolio takes the above concepts and adds correlation\nestimates to the portfolio optimization. The previous portfolios only\naccounted for the relative risk between the asset classes, but not the\ncorrelation between the assets’ returns. This portfolio accounts for the\ncorrelations between asset classes by finding the minimum variance\nportfolio using\nmodern portfolio\ntheory\n. The\nasset selection for these portfolios in the original paper differ\nslightly from the previous portfolios. Instead of taking the top 5\nassets with the highest momentum, the original paper selects “assets\nwith above average 6-month momentum”. So it’s not clear how many assets\nare held in the portfolio each month.\nreturns_momentum_min_var <-\n    portf_top_momentum_min_var(returns, 5, 120, 60)\nmonthly_returns <- to_monthly_returns(returns_momentum_min_var)\n\ntitle <- \"Assets With Above Average 6-month Momentum - Minimum Variance\"\nstats <- strat_summary(monthly_returns, title,\n                       original_results = c(0.150, 0.094, 1.60, -0.088))\ncharts.PerformanceSummary(monthly_returns, main = title, wealth.index = TRUE)\nReplication\nOriginal\nAnnualized Return\n0.137\n0.150\nAnnualized Std Dev\n0.103\n0.094\nAnnualized Sharpe (Rf=0%)\n1.330\n1.600\nWorst Drawdown\n-0.102\n-0.088\nThe replicated results still show worse performance than the original\nresults, which also seems to be related to performance during 2012. The\nreplicated results also do not show significant improvement relative to\nthe top 5 momentum equal risk portfolio like the original paper shows.\nConclusion\nDespite using returns from different instruments in the same asset\nclasses, over a slightly different time period, this analysis closely\nreplicates the results from\nAdaptive Asset Allocation: A\nPrimer\n.\nThe differences in the data sets seem to create a significant difference\nin performance during 2012, but otherwise produce similar results on\nmonthly data.\nI’ll investigate the out-of-sample performance of this strategy in a\nfuture post. Thanks for reading!\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nR on FOSS Trading\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "The paper, “Adaptive Asset Allocation: A Primer” by Adam Butler, Mike Philbrick, Rodrigo Gordillo, and David Varadi addresses flaws in the traditional application of Modern Portfolio Theory related to Strategic Asset Allocation. It shows ...",
    "meta_keywords": null,
    "og_description": "The paper, “Adaptive Asset Allocation: A Primer” by Adam Butler, Mike Philbrick, Rodrigo Gordillo, and David Varadi addresses flaws in the traditional application of Modern Portfolio Theory related to Strategic Asset Allocation. It shows ...",
    "og_image": "https://blog.fosstrading.com/2023/12/adaptive-asset-allocation-replication/equal_weight-1.png",
    "og_title": "Adaptive Asset Allocation Replication | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 9.3,
    "sitemap_lastmod": "2023-12-08T18:00:00+00:00",
    "twitter_description": "The paper, “Adaptive Asset Allocation: A Primer” by Adam Butler, Mike Philbrick, Rodrigo Gordillo, and David Varadi addresses flaws in the traditional application of Modern Portfolio Theory related to Strategic Asset Allocation. It shows ...",
    "twitter_title": "Adaptive Asset Allocation Replication | R-bloggers",
    "url": "https://www.r-bloggers.com/2023/12/adaptive-asset-allocation-replication/",
    "word_count": 1862
  }
}