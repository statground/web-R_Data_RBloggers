{
  "id": "f656c42c9cbbd5e18990163183e2c1b5287fed86",
  "url": "https://www.r-bloggers.com/2023/11/mapping-the-ancient-world-a-digital-odyssey-through-ptolemys-geography/",
  "created_at_utc": "2025-11-17T20:39:14Z",
  "data": null,
  "raw_original": {
    "uuid": "56853815-b3cf-43a2-aba1-990282f77f4e",
    "created_at": "2025-11-17 20:39:14",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2023/11/mapping-the-ancient-world-a-digital-odyssey-through-ptolemys-geography/",
      "crawled_at": "2025-11-17T09:55:50.858359",
      "external_links": [
        {
          "href": "https://lucidmanager.org/data-science/mapping-ptolemy-geography/",
          "text": "Having Fun and Creating Value With the R Language on Lucid Manager"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "https://en.wikipedia.org/wiki/Geography_(Ptolemy)",
          "text": "Geography"
        },
        {
          "href": "https://babel.hathitrust.org/cgi/pt?id=mdp.39015022717592&seq=7",
          "text": "textual versions"
        },
        {
          "href": "https://github.com/pprevos/geography/",
          "text": "geography"
        },
        {
          "href": "https://topostext.org/work/209",
          "text": "ToposText"
        },
        {
          "href": "https://ggplot2.tidyverse.org/reference/geom_map.html",
          "text": "ggplot2 mapping geometry"
        },
        {
          "href": "https://www.openculture.com/2021/03/why-every-world-map-is-wrong.html",
          "text": "every world map we have ever produced is essentially wrong"
        },
        {
          "href": "https://lucidmanager.org/data-science/mapping-antipodes/",
          "text": "antipodes"
        },
        {
          "href": "https://lucidmanager.org/data-science/mapping-ptolemy-geography/",
          "text": "Having Fun and Creating Value With the R Language on Lucid Manager"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "Mapping the Ancient World: A Digital Odyssey through Ptolemy’s Geography | R-bloggers",
      "images": [
        {
          "alt": "Extract from Ptolemy's Geography (Nobbe edition, 1843)",
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": "Extract from Ptolemy's Geography (Nobbe edition, 1843)",
          "base64": null,
          "src": "https://i2.wp.com/lucidmanager.org/images/geography/ptolemy-extract.jpg?w=450&ssl=1"
        },
        {
          "alt": "Mapping Ptolemaic coordinates on a modern map",
          "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
          "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
        },
        {
          "alt": "Mapping Ptolemaic coordinates on a modern map",
          "base64": null,
          "src": "https://i0.wp.com/lucidmanager.org/images/geography/ptolemaeus-geography-ii-vi.png?w=578&ssl=1"
        }
      ],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/peter-prevos/",
          "text": "Peter Prevos"
        },
        {
          "href": "https://www.r-bloggers.com/category/r-bloggers/",
          "text": "R bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "As seen on R Bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-381379 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Mapping the Ancient World: A Digital Odyssey through Ptolemy’s Geography</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">November 16, 2023</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/peter-prevos/\">Peter Prevos</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://lucidmanager.org/data-science/mapping-ptolemy-geography/\"> Having Fun and Creating Value With the R Language on Lucid Manager</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<p>\nIn the chronicles of cartographic history, few works have captivated the imagination, such as Claudius Ptolemy's “<a href=\"https://en.wikipedia.org/wiki/Geography_(Ptolemy)\" rel=\"nofollow\" target=\"_blank\">Geography</a>“. This monumental second-century creation is the oldest fully preserved theoretical treatise on cartography, written almost 2000 years ago. This article discusses Mapping Ptolemy's Geography with <em>ggplot2</em>.</p>\n<p>\nHis cartography is not just a collection of maps of the known world in Hellenic times. Ptolemy also provides latitudes and longitudes with fantastic accuracy. Interestingly, he wrote that the best way to store geographic information is as a collection of numbers because copying maps leads to distortions over time. Thus, he created one of the world's first geographic information systems. His book contains the locations of thousands of towns, rivers, mountains and other points of interest.</p>\n<p>\nUnfortunately, no freely available database of these coordinates exists in electronic format, but there are some <a href=\"https://babel.hathitrust.org/cgi/pt?id=mdp.39015022717592&amp;seq=7\" rel=\"nofollow\" target=\"_blank\">textual versions</a>, such as the example below.</p>\n<figure>\n<img alt=\"Extract from Ptolemy's Geography (Nobbe edition, 1843)\" data-lazy-src=\"https://i2.wp.com/lucidmanager.org/images/geography/ptolemy-extract.jpg?w=450&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" title=\"Extract from Ptolemy's Geography (Nobbe edition, 1843)\"/><noscript><img alt=\"Extract from Ptolemy's Geography (Nobbe edition, 1843)\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/lucidmanager.org/images/geography/ptolemy-extract.jpg?w=450&amp;ssl=1\" title=\"Extract from Ptolemy's Geography (Nobbe edition, 1843)\"/></noscript>\n<figcaption>\nExtract from Ptolemy's Geography (Nobbe edition, 1843).\n</figcaption>\n</figure>\n<p>\nI thus set forth to scrape these sources and create a Ptolemaic geographic database. The code and data for this project are available on GitHub.</p>\n<p>\n<a alt=\"Download geography from GitHub\" href=\"https://github.com/pprevos/geography/\" title=\"Download geography from GitHub\">\n<button class=\"button is-medium is-primary\">\n<span class=\"icon is-large\">\n<i class=\"fab fa-github\"></i>\n</span>\n<span style=\"font-family: monospace\">geography</span>\n</button>\n</a>\n</p>\n<div class=\"outline-2\" id=\"outline-container-headline-1\">\n<h2 id=\"headline-1\">\nObtaining the Data\n</h2>\n<div class=\"outline-text-2\" id=\"outline-text-headline-1\">\n<p>The process begins with the scraping of Ptolemy’s text from <a href=\"https://topostext.org/work/209\" rel=\"nofollow\" target=\"_blank\">ToposText</a>, which is a treasure trove of classical literature. This website contains an almost complete transcription of Ptolemy's tome. I saved the webpage to disk to prevent hitting the ToposText server too often. The source data is available on the Github repo in RDS format.</p>\n<p>\nThe website provides an accurate transcription of a large portion of Ptolemy's work. Some typographical quirks and curious coordinates were standardised using regular expressions.</p>\n<div class=\"src src-r\">\n<pre>  library(stringr)\n  library(dplyr)\n  library(ggplot2)\n\n  # library(rvest)\n  # Scrape the website and save it to disk\n  #\n  # url &lt;- \"https://topostext.org/work/209\"\n  #\n  # raw_html &lt;- read_html(url) %&gt;%\n  #     html_nodes(\"p\") %&gt;%\n  #     html_text()\n  # saveRDS(raw_html, \"topostext.org-work-209.rds\")\n\n  raw &lt;- readRDS(\"topostext.org-work-209.rds\")\n\n  # Fix issues and typos\n  raw &lt;- str_replace_all(raw, \"\\\\. equator\", \"0°0\") # Equator\n  raw &lt;- str_replace_all(raw, \"0°0 and\", \"0°0'\")\n  raw &lt;- str_replace_all(raw, \"(\\\\d+.\\\\d+') S \", \"-\\\\1\") # Southern hemisphere\n  raw &lt;- str_replace_all(raw, \"(\\\\d) c\", \"\\\\1'\")\n  raw &lt;- str_replace_all(raw, \"(\\\\d) d\", \"\\\\1' \\\\.\")\n  raw &lt;- str_replace_all(raw, \"(\\\\d) e\", \"\\\\1' \\\\.\")\n  raw &lt;- str_replace_all(raw, \"5°00' . 3°00\", \"45°15\") # Estimated lat\n  raw &lt;- str_replace_all(raw, \"4°00' . 3°00\", \"43°00\") # Estimated lat\n  raw &lt;- str_replace_all(raw, \"(\\\\d+)'(\\\\d+)\", \"\\\\1°\\\\2\")\n  raw &lt;- str_replace_all(raw, \"(Elateia . 51°38' )\", \"\\\\1. 38°15'\")\n  raw &lt;- str_replace_all(raw, \"(Kambyses)'\", \"\\\\1\")\n  raw &lt;- str_replace_all(raw, \"(Libison)'\", \"\\\\1\")</pre>\n</div>\n<p>\nThe script then loops through all paragraphs that include coordinates and extracts the place names, longitude and latitude in degrees and minutes.</p>\n<div class=\"src src-r\">\n<pre>  # Detect place names and coordinates\n  locs &lt;- str_split(raw[str_detect(raw, \"°|º\")], \"'\")\n\n  p_regex &lt;- \"\\\\b[A-Za-z ,:\\\\-]+\\\\b\"\n  c_regex &lt;- \"(-?[0-9]{1,3}[°|º][0-9]{1,3})\"\n\n  place &lt;- vector()\n  lon_raw &lt;- vector()\n  lat_raw &lt;- vector()\n  i &lt;- 1\n\n  for (j in seq_along(locs)) {\n    t &lt;- unlist(locs[j])\n    n &lt;- ceiling(sum(str_detect(t,  \"°|º\")) / 2)\n    k &lt;- i + (n - 1)\n    place[i:k] &lt;- str_extract(t, p_regex)[(1:n) * 2 + - 1]\n    lon_txt &lt;- unlist(str_extract_all(t[(1:n) * 2 + - 1], c_regex))\n    lat_txt &lt;- unlist(str_extract_all(t[(1:n) * 2], c_regex))\n    if (length(lat_txt) == 0) lat_txt &lt;- NA\n    if (length(lon_txt) != n) stop(j)\n    lon_raw[i:k] &lt;- lon_txt\n    lat_raw[i:k] &lt;- lat_txt\n    i &lt;- i + n\n    j &lt;- j + 1\n  }</pre>\n</div>\n<p>\nThe next phase creates a table of coordinates by converting the coordinates into numeric values and cleaning the place names. The degrees and minutes of longitude and latitude are stored in separate variables. Regular expressions split the geographic coordinates (e.g. 14°20' . 54°30') into four numbers (14, 20, 54, 30).</p>\n<div class=\"src src-r\">\n<pre>  # Generate data frame\n  extract_nums &lt;- function(x, regex) {\n    as.numeric(unlist(str_extract_all(x, regex)))\n  }\n\n  d_regex &lt;- \"(-?[0-9]+)(?=°|º)\"\n  m_regex &lt;- \"(?&lt;=°|º)([0-9]+)\"\n\n  locations &lt;- tibble(place, lon_raw, lat_raw) %&gt;%\n    mutate(lon = extract_nums(lon_raw, d_regex),\n           lon_min = extract_nums(lon_raw, m_regex),\n           lat = extract_nums(lat_raw, d_regex),\n           lat_min = extract_nums(lat_raw, m_regex),\n           place = str_squish(place),\n           place = str_to_sentence(place)) %&gt;%\n    select(placename = place, 4:7)</pre>\n</div>\n<p>\nThe table of place names and their coordinates is available on the GitHub repository.</p>\n</div>\n</div>\n<div class=\"outline-2\" id=\"outline-container-headline-2\">\n<h2 id=\"headline-2\">\nMapping Ptolemy's Geography\n</h2>\n<div class=\"outline-text-2\" id=\"outline-text-headline-2\">\n<p>The visualisation was realised through the <a href=\"https://ggplot2.tidyverse.org/reference/geom_map.html\" rel=\"nofollow\" target=\"_blank\">ggplot2 mapping geometry</a>. Ptolemy's ancient world is reborn; its cities and landmarks emerge from the mists of time on this digital canvas.</p>\n<p>\nThis map uses the Conic projection, similar to one of the projections used by Ptolemy himself. This projection distorts the southern part of Africa slightly.</p>\n<p>\nThe longitudes are corrected to better match them with modern coordinates. Ptolemy used the Canary Islands as the zero meridian of his coordinate system, which is 18 degrees west of the Greenwich meridian. Research also shows that Ptolemy's longitudes are stretched by a factor of 1.428.</p>\n<p>\nPtolemy's work might seem full of mistakes from our modern perspective, but in fact, <a href=\"https://www.openculture.com/2021/03/why-every-world-map-is-wrong.html\" rel=\"nofollow\" target=\"_blank\">every world map we have ever produced is essentially wrong</a>. Turning a globe into a two-dimensional object always results in distortions, no matter how hard you try.</p>\n<figure>\n<img alt=\"Mapping Ptolemaic coordinates on a modern map\" data-lazy-src=\"https://i0.wp.com/lucidmanager.org/images/geography/ptolemaeus-geography-ii-vi.png?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" title=\"Mapping Ptolemaic coordinates on a modern map\"/><noscript><img alt=\"Mapping Ptolemaic coordinates on a modern map\" data-recalc-dims=\"1\" src=\"https://i0.wp.com/lucidmanager.org/images/geography/ptolemaeus-geography-ii-vi.png?w=578&amp;ssl=1\" title=\"Mapping Ptolemaic coordinates on a modern map\"/></noscript>\n<figcaption>\nMapping Ptolemaic coordinates on a modern map.\n</figcaption>\n</figure>\n<div class=\"src src-r\">\n<pre># Visualise\nworld &lt;- map_data(\"world\")\n\nggplot() +\n    geom_map(data = world, map = world,\n             aes(long, lat, map_id = region),\n            fill = \"darkgreen\", colour = \"lightgrey\", linewidth = .1) + \n    geom_point(data = locations,\n               aes(x = (lon + lon_min / 60 - 18) / 1.428,\n                   y = (lat + lat_min / 60)),\n               col = \"orange\", alpha = 0.7, size = .1) +\n    scale_x_continuous(limits = c(-15, 70)) +\n    scale_y_continuous(limits = c(-10, 60)) +\n    coord_map(projection = \"conic\", lat0 = 37) +\n    labs(title = \"Ptolemaeus, Geography (II-VI)\",\n         subtitle = \"Longitude correction: 0.7(lon - 18)\",\n         caption = \"Source: topostext.org/work/209\",\n         x = NULL, y = NULL) + \n    theme_minimal(base_size = 8) +\n    theme(panel.background = element_rect(fill = \"lightblue\", colour = NA))</pre>\n</div>\n<p>\nPtolemy knew the Earth was spherical – a fact established by Greek philosophers well before his time. In his <em>Geographic</em>, Ptolemy provides a cornucopia of coordinates, illustrating the known world from Britain to Southeast Asia and from the northern reaches of Scandinavia to below the equator. But their knowledge only covered a small part of the whole globe. </p>\n<p>\nThe Greeks blended mythology, philosophy, and early scientific speculation to theorise what lies beyond the world they mapped. They imagined a vast, unending ocean encircling the world. Beyond Oceanus, some thought, might be other worlds or unknown lands. The concept of \"<a href=\"https://lucidmanager.org/data-science/mapping-antipodes/\" rel=\"nofollow\" target=\"_blank\">antipodes</a>\" was also bandied about - these are  places where people's feet are directly opposite to ours. Though the existence of such lands or peoples was often debated or outright denied.</p>\n<p>\n<a href=\"https://www.r-bloggers.com/\" title=\"Proudly associated with R-Bloggers\">\n<button class=\"button is-link is-medium\">\n<span class=\"icon is-large\">\n<i class=\"fab fa-r-project\"></i>\n</span>\n<span>As seen on R Bloggers</span>\n</button>\n</a>\n</p>\n</div>\n</div>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://lucidmanager.org/data-science/mapping-ptolemy-geography/\"> Having Fun and Creating Value With the R Language on Lucid Manager</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div> </div>\n</article>",
      "main_text": "Mapping the Ancient World: A Digital Odyssey through Ptolemy’s Geography\nPosted on\nNovember 16, 2023\nby\nPeter Prevos\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nHaving Fun and Creating Value With the R Language on Lucid Manager\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nIn the chronicles of cartographic history, few works have captivated the imagination, such as Claudius Ptolemy's “\nGeography\n“. This monumental second-century creation is the oldest fully preserved theoretical treatise on cartography, written almost 2000 years ago. This article discusses Mapping Ptolemy's Geography with\nggplot2\n.\nHis cartography is not just a collection of maps of the known world in Hellenic times. Ptolemy also provides latitudes and longitudes with fantastic accuracy. Interestingly, he wrote that the best way to store geographic information is as a collection of numbers because copying maps leads to distortions over time. Thus, he created one of the world's first geographic information systems. His book contains the locations of thousands of towns, rivers, mountains and other points of interest.\nUnfortunately, no freely available database of these coordinates exists in electronic format, but there are some\ntextual versions\n, such as the example below.\nExtract from Ptolemy's Geography (Nobbe edition, 1843).\nI thus set forth to scrape these sources and create a Ptolemaic geographic database. The code and data for this project are available on GitHub.\ngeography\nObtaining the Data\nThe process begins with the scraping of Ptolemy’s text from\nToposText\n, which is a treasure trove of classical literature. This website contains an almost complete transcription of Ptolemy's tome. I saved the webpage to disk to prevent hitting the ToposText server too often. The source data is available on the Github repo in RDS format.\nThe website provides an accurate transcription of a large portion of Ptolemy's work. Some typographical quirks and curious coordinates were standardised using regular expressions.\nlibrary(stringr)\n  library(dplyr)\n  library(ggplot2)\n\n  # library(rvest)\n  # Scrape the website and save it to disk\n  #\n  # url <- \"https://topostext.org/work/209\"\n  #\n  # raw_html <- read_html(url) %>%\n  #     html_nodes(\"p\") %>%\n  #     html_text()\n  # saveRDS(raw_html, \"topostext.org-work-209.rds\")\n\n  raw <- readRDS(\"topostext.org-work-209.rds\")\n\n  # Fix issues and typos\n  raw <- str_replace_all(raw, \"\\\\. equator\", \"0°0\") # Equator\n  raw <- str_replace_all(raw, \"0°0 and\", \"0°0'\")\n  raw <- str_replace_all(raw, \"(\\\\d+.\\\\d+') S \", \"-\\\\1\") # Southern hemisphere\n  raw <- str_replace_all(raw, \"(\\\\d) c\", \"\\\\1'\")\n  raw <- str_replace_all(raw, \"(\\\\d) d\", \"\\\\1' \\\\.\")\n  raw <- str_replace_all(raw, \"(\\\\d) e\", \"\\\\1' \\\\.\")\n  raw <- str_replace_all(raw, \"5°00' . 3°00\", \"45°15\") # Estimated lat\n  raw <- str_replace_all(raw, \"4°00' . 3°00\", \"43°00\") # Estimated lat\n  raw <- str_replace_all(raw, \"(\\\\d+)'(\\\\d+)\", \"\\\\1°\\\\2\")\n  raw <- str_replace_all(raw, \"(Elateia . 51°38' )\", \"\\\\1. 38°15'\")\n  raw <- str_replace_all(raw, \"(Kambyses)'\", \"\\\\1\")\n  raw <- str_replace_all(raw, \"(Libison)'\", \"\\\\1\")\nThe script then loops through all paragraphs that include coordinates and extracts the place names, longitude and latitude in degrees and minutes.\n# Detect place names and coordinates\n  locs <- str_split(raw[str_detect(raw, \"°|º\")], \"'\")\n\n  p_regex <- \"\\\\b[A-Za-z ,:\\\\-]+\\\\b\"\n  c_regex <- \"(-?[0-9]{1,3}[°|º][0-9]{1,3})\"\n\n  place <- vector()\n  lon_raw <- vector()\n  lat_raw <- vector()\n  i <- 1\n\n  for (j in seq_along(locs)) {\n    t <- unlist(locs[j])\n    n <- ceiling(sum(str_detect(t,  \"°|º\")) / 2)\n    k <- i + (n - 1)\n    place[i:k] <- str_extract(t, p_regex)[(1:n) * 2 + - 1]\n    lon_txt <- unlist(str_extract_all(t[(1:n) * 2 + - 1], c_regex))\n    lat_txt <- unlist(str_extract_all(t[(1:n) * 2], c_regex))\n    if (length(lat_txt) == 0) lat_txt <- NA\n    if (length(lon_txt) != n) stop(j)\n    lon_raw[i:k] <- lon_txt\n    lat_raw[i:k] <- lat_txt\n    i <- i + n\n    j <- j + 1\n  }\nThe next phase creates a table of coordinates by converting the coordinates into numeric values and cleaning the place names. The degrees and minutes of longitude and latitude are stored in separate variables. Regular expressions split the geographic coordinates (e.g. 14°20' . 54°30') into four numbers (14, 20, 54, 30).\n# Generate data frame\n  extract_nums <- function(x, regex) {\n    as.numeric(unlist(str_extract_all(x, regex)))\n  }\n\n  d_regex <- \"(-?[0-9]+)(?=°|º)\"\n  m_regex <- \"(?<=°|º)([0-9]+)\"\n\n  locations <- tibble(place, lon_raw, lat_raw) %>%\n    mutate(lon = extract_nums(lon_raw, d_regex),\n           lon_min = extract_nums(lon_raw, m_regex),\n           lat = extract_nums(lat_raw, d_regex),\n           lat_min = extract_nums(lat_raw, m_regex),\n           place = str_squish(place),\n           place = str_to_sentence(place)) %>%\n    select(placename = place, 4:7)\nThe table of place names and their coordinates is available on the GitHub repository.\nMapping Ptolemy's Geography\nThe visualisation was realised through the\nggplot2 mapping geometry\n. Ptolemy's ancient world is reborn; its cities and landmarks emerge from the mists of time on this digital canvas.\nThis map uses the Conic projection, similar to one of the projections used by Ptolemy himself. This projection distorts the southern part of Africa slightly.\nThe longitudes are corrected to better match them with modern coordinates. Ptolemy used the Canary Islands as the zero meridian of his coordinate system, which is 18 degrees west of the Greenwich meridian. Research also shows that Ptolemy's longitudes are stretched by a factor of 1.428.\nPtolemy's work might seem full of mistakes from our modern perspective, but in fact,\nevery world map we have ever produced is essentially wrong\n. Turning a globe into a two-dimensional object always results in distortions, no matter how hard you try.\nMapping Ptolemaic coordinates on a modern map.\n# Visualise\nworld <- map_data(\"world\")\n\nggplot() +\n    geom_map(data = world, map = world,\n             aes(long, lat, map_id = region),\n            fill = \"darkgreen\", colour = \"lightgrey\", linewidth = .1) + \n    geom_point(data = locations,\n               aes(x = (lon + lon_min / 60 - 18) / 1.428,\n                   y = (lat + lat_min / 60)),\n               col = \"orange\", alpha = 0.7, size = .1) +\n    scale_x_continuous(limits = c(-15, 70)) +\n    scale_y_continuous(limits = c(-10, 60)) +\n    coord_map(projection = \"conic\", lat0 = 37) +\n    labs(title = \"Ptolemaeus, Geography (II-VI)\",\n         subtitle = \"Longitude correction: 0.7(lon - 18)\",\n         caption = \"Source: topostext.org/work/209\",\n         x = NULL, y = NULL) + \n    theme_minimal(base_size = 8) +\n    theme(panel.background = element_rect(fill = \"lightblue\", colour = NA))\nPtolemy knew the Earth was spherical – a fact established by Greek philosophers well before his time. In his\nGeographic\n, Ptolemy provides a cornucopia of coordinates, illustrating the known world from Britain to Southeast Asia and from the northern reaches of Scandinavia to below the equator. But their knowledge only covered a small part of the whole globe.\nThe Greeks blended mythology, philosophy, and early scientific speculation to theorise what lies beyond the world they mapped. They imagined a vast, unending ocean encircling the world. Beyond Oceanus, some thought, might be other worlds or unknown lands. The concept of \"\nantipodes\n\" was also bandied about - these are  places where people's feet are directly opposite to ours. Though the existence of such lands or peoples was often debated or outright denied.\nAs seen on R Bloggers\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nHaving Fun and Creating Value With the R Language on Lucid Manager\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "In the chronicles of cartographic history, few works have captivated the imagination, such as Claudius Ptolemy's \"Geography\". This monumental second-century creation is the oldest fully preserved theoretical treatise on cartography, written almost 2000 years ago. This article discusses Mapping Ptolemy's Geography with ggplot2. His cartography is not just a collection of maps of the known world in Hellenic times. Ptolemy also provides latitudes and longitudes with fantastic accuracy. Interestingly, he wrote that the best way to store geographic information is as a collection of numbers because copying maps leads to distortions over time. Thus, he created one of the world's first geographic information systems. His book contains the locations of thousands of towns, rivers, mountains and other points of interest. Unfortunately, no freely available database of these coordinates exists in electronic format, but there are some textual versions, such as the example below. Extract from Ptolemy's Geography (Nobbe edition, 1843). I thus set forth to scrape these sources and create a Ptolemaic geographic database. The code and data for this project are available on GitHub. geography Obtaining the Data The process begins with the scraping of Ptolemy’s text from ToposText, which is a treasure trove of classical literature. This website contains an almost complete transcription of Ptolemy's tome. I saved the webpage to disk to prevent hitting the ToposText server too often. The source data is available on the Github repo in RDS format. The website provides an accurate transcription of a large portion of Ptolemy's work. Some typographical quirks and curious coordinates were standardised using regular expressions. library(stringr) library(dplyr) library(ggplot2) # library(rvest) # Scrape the website and save it to disk # # url % # html_text() # saveRDS(raw_html, \"topostext.org-work-209.rds\") raw",
      "meta_keywords": null,
      "og_description": "In the chronicles of cartographic history, few works have captivated the imagination, such as Claudius Ptolemy's \"Geography\". This monumental second-century creation is the oldest fully preserved theoretical treatise on cartography, written almost 2000 years ago. This article discusses Mapping Ptolemy's Geography with ggplot2. His cartography is not just a collection of maps of the known world in Hellenic times. Ptolemy also provides latitudes and longitudes with fantastic accuracy. Interestingly, he wrote that the best way to store geographic information is as a collection of numbers because copying maps leads to distortions over time. Thus, he created one of the world's first geographic information systems. His book contains the locations of thousands of towns, rivers, mountains and other points of interest. Unfortunately, no freely available database of these coordinates exists in electronic format, but there are some textual versions, such as the example below. Extract from Ptolemy's Geography (Nobbe edition, 1843). I thus set forth to scrape these sources and create a Ptolemaic geographic database. The code and data for this project are available on GitHub. geography Obtaining the Data The process begins with the scraping of Ptolemy’s text from ToposText, which is a treasure trove of classical literature. This website contains an almost complete transcription of Ptolemy's tome. I saved the webpage to disk to prevent hitting the ToposText server too often. The source data is available on the Github repo in RDS format. The website provides an accurate transcription of a large portion of Ptolemy's work. Some typographical quirks and curious coordinates were standardised using regular expressions. library(stringr) library(dplyr) library(ggplot2) # library(rvest) # Scrape the website and save it to disk # # url % # html_text() # saveRDS(raw_html, \"topostext.org-work-209.rds\") raw",
      "og_image": "https://lucidmanager.org/images/geography/ptolemy-extract.jpg",
      "og_title": "Mapping the Ancient World: A Digital Odyssey through Ptolemy’s Geography | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 6,
      "sitemap_lastmod": "2023-11-17T00:00:00+00:00",
      "twitter_description": "In the chronicles of cartographic history, few works have captivated the imagination, such as Claudius Ptolemy's \"Geography\". This monumental second-century creation is the oldest fully preserved theoretical treatise on cartography, written almost 2000 years ago. This article discusses Mapping Ptolemy's Geography with ggplot2. His cartography is not just a collection of maps of the known world in Hellenic times. Ptolemy also provides latitudes and longitudes with fantastic accuracy. Interestingly, he wrote that the best way to store geographic information is as a collection of numbers because copying maps leads to distortions over time. Thus, he created one of the world's first geographic information systems. His book contains the locations of thousands of towns, rivers, mountains and other points of interest. Unfortunately, no freely available database of these coordinates exists in electronic format, but there are some textual versions, such as the example below. Extract from Ptolemy's Geography (Nobbe edition, 1843). I thus set forth to scrape these sources and create a Ptolemaic geographic database. The code and data for this project are available on GitHub. geography Obtaining the Data The process begins with the scraping of Ptolemy’s text from ToposText, which is a treasure trove of classical literature. This website contains an almost complete transcription of Ptolemy's tome. I saved the webpage to disk to prevent hitting the ToposText server too often. The source data is available on the Github repo in RDS format. The website provides an accurate transcription of a large portion of Ptolemy's work. Some typographical quirks and curious coordinates were standardised using regular expressions. library(stringr) library(dplyr) library(ggplot2) # library(rvest) # Scrape the website and save it to disk # # url % # html_text() # saveRDS(raw_html, \"topostext.org-work-209.rds\") raw",
      "twitter_title": "Mapping the Ancient World: A Digital Odyssey through Ptolemy’s Geography | R-bloggers",
      "url": "https://www.r-bloggers.com/2023/11/mapping-the-ancient-world-a-digital-odyssey-through-ptolemys-geography/",
      "word_count": 1199
    }
  }
}