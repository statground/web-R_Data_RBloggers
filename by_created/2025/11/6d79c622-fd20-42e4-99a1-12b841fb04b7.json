{
  "uuid": "6d79c622-fd20-42e4-99a1-12b841fb04b7",
  "created_at": "2025-11-17 20:39:16",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2023/11/defibrillator-from-osm/",
    "crawled_at": "2025-11-17T09:56:31.306673",
    "external_links": [
      {
        "href": "https://r.iresmi.net/posts/2023/osm_aed/index.html",
        "text": "r.iresmi.net"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://flic.kr/p/GEgxS6",
        "text": null
      },
      {
        "href": "https://30daymapchallenge.com/",
        "text": "30DayMapChallenge"
      },
      {
        "href": "https://r.iresmi.net/#category=30DayMapChallenge",
        "text": "previously"
      },
      {
        "href": "https://en.wikipedia.org/wiki/Automated_external_defibrillator",
        "text": "AED"
      },
      {
        "href": "https://en.wikipedia.org/wiki/Auvergne-Rh%C3%B4ne-Alpes",
        "text": "Auvergne-Rhône-Alpes"
      },
      {
        "href": "https://wiki.openstreetmap.org/wiki/Overpass_API",
        "text": "Overpass API"
      },
      {
        "href": "https://r.iresmi.net/posts/2023/osm_aed/index.html",
        "text": "r.iresmi.net"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Defibrillator from OSM | R-bloggers",
    "images": [
      {
        "alt": "A photo of flowers in the shape of hearts",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "A photo of flowers in the shape of hearts",
        "base64": null,
        "src": "https://i1.wp.com/r.iresmi.net/posts/2023/osm_aed/images/26687331437_e2137be56e_c.jpg?w=578&ssl=1"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/michael/",
        "text": "Michael"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-380061 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Defibrillator from OSM</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">November 15, 2023</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/michael/\">Michael</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://r.iresmi.net/posts/2023/osm_aed/index.html\"> r.iresmi.net</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.9-->\n<div class=\"quarto-figure quarto-figure-center\">\n<figure class=\"figure\">\n<p><a href=\"https://flic.kr/p/GEgxS6\" rel=\"nofollow\" target=\"_blank\"><img alt=\"A photo of flowers in the shape of hearts\" class=\"img-fluid figure-img\" data-lazy-src=\"https://i1.wp.com/r.iresmi.net/posts/2023/osm_aed/images/26687331437_e2137be56e_c.jpg?w=578&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"A photo of flowers in the shape of hearts\" class=\"img-fluid figure-img\" data-recalc-dims=\"1\" src=\"https://i1.wp.com/r.iresmi.net/posts/2023/osm_aed/images/26687331437_e2137be56e_c.jpg?w=578&amp;ssl=1\"/></noscript></a></p>\n<figcaption class=\"figure-caption\">Bleeding Heart – CC-BY by Theo Crazzolara</figcaption>\n</figure>\n</div>\n<p>Day 15 of <a href=\"https://30daymapchallenge.com/\" rel=\"nofollow\" target=\"_blank\">30DayMapChallenge</a>: « OpenStreetMap » (<a href=\"https://r.iresmi.net/#category=30DayMapChallenge\" rel=\"nofollow\" target=\"_blank\">previously</a>).</p>\n<p>Using data from OSM we’ll make a web map of defibrillators (<a href=\"https://en.wikipedia.org/wiki/Automated_external_defibrillator\" rel=\"nofollow\" target=\"_blank\">AED</a>) in <a href=\"https://en.wikipedia.org/wiki/Auvergne-Rh%C3%B4ne-Alpes\" rel=\"nofollow\" target=\"_blank\">Auvergne-Rhône-Alpes</a>.</p>\n<div class=\"cell\">\n<pre>library(tidyverse)\nlibrary(sf)\nlibrary(osmdata)\nlibrary(glue)\nlibrary(leaflet)\nlibrary(htmltools)</pre>\n</div>\n<p>We send an <a href=\"https://wiki.openstreetmap.org/wiki/Overpass_API\" rel=\"nofollow\" target=\"_blank\">Overpass API</a> query with {osmdata}:</p>\n<div class=\"cell\">\n<pre># France regions\n# See https://r.iresmi.net/posts/2021/simplifying_polygons_layers/ for the data\nfr &lt;- read_sf(\"~/data/adminexpress/adminexpress_cog_simpl_000_2022.gpkg\", layer = \"region\") |&gt; \n  filter(insee_reg &gt; \"06\")\n\n# Get and cache OSM data for France\nif (!file.exists(\"aed.rds\")) {\n  aed &lt;- opq(st_bbox(fr), osm_types = \"node\", timeout = 6000) |&gt;\n    add_osm_features(features = c(\n      '\"emergency\"=\"defibrillator\"')) |&gt; \n    osmdata_sf() |&gt; \n    pluck(\"osm_points\") |&gt; \n    st_join(fr, left = FALSE) |&gt; \n    write_rds(\"aed.rds\")\n} else {\n  aed &lt;- read_rds(\"aed.rds\")\n}</pre>\n</div>\n<section class=\"level2\" id=\"automated-external-defibrillator-in-aura\">\n<h2 class=\"anchored\" data-anchor-id=\"automated-external-defibrillator-in-aura\">Automated external defibrillator in AURA</h2>\n<div class=\"cell\">\n<pre>icons &lt;- awesomeIcons(\n  library = \"fa\",\n  icon = \"heart\",\n  markerColor = \"white\",\n  iconColor = \"darkgreen\")\n\n# Just keep the region data\naed |&gt; \n  st_join(fr |&gt; \n            filter(insee_reg == 84),\n          left = FALSE) |&gt; \n  leaflet(options = leafletOptions(preferCanvas = TRUE)) |&gt; \n  addTiles() |&gt; \n  addAwesomeMarkers(\n    clusterOptions = markerClusterOptions(),\n    icon = icons,\n    popup = ~glue(\"\n    &lt;table&gt;\n      &lt;tr&gt;&lt;th style='font-weight:bold'&gt;localisation&lt;/th&gt;\n          &lt;td&gt;{htmlEscape(coalesce(`defibrillator:location:fr`, `defibrillator:location`))}&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;intérieur&lt;/th&gt;&lt;td&gt;{htmlEscape(coalesce(indoor, `indoor:description`))}&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;niveau&lt;/th&gt;&lt;td&gt;{htmlEscape(level)}&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;accès&lt;/th&gt;&lt;td&gt;{htmlEscape(access)}&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;horaires&lt;/th&gt;&lt;td&gt;{htmlEscape(opening_hours)}&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;opérateur&lt;/th&gt;&lt;td&gt;{htmlEscape(operator)}&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;tél.&lt;/th&gt;&lt;td&gt;{htmlEscape(phone)}&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;réf.&lt;/th&gt;&lt;td&gt;{htmlEscape(`ref:FR:GeoDAE`)}&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;particularité&lt;/th&gt;&lt;td&gt;{htmlEscape(defibrillator)}&lt;/td&gt;&lt;/tr&gt;\n      &lt;tr&gt;&lt;th&gt;description&lt;/th&gt;&lt;td&gt;{htmlEscape(coalesce(`description:fr`, description))}&lt;/td&gt;&lt;/tr&gt;\n    &lt;/table&gt;\")) </pre>\n<div class=\"quarto-figure quarto-figure-center anchored\" id=\"fig-map\">\n<figure class=\"figure\">\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-c86cc9a8830fa458f9c7\" style=\"width:100%;height:464px;\"></div>\n</figure></div></div></section>\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://r.iresmi.net/posts/2023/osm_aed/index.html\"> r.iresmi.net</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div> </div>\n</article>",
    "main_text": "Defibrillator from OSM\nPosted on\nNovember 15, 2023\nby\nMichael\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nr.iresmi.net\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nBleeding Heart – CC-BY by Theo Crazzolara\nDay 15 of\n30DayMapChallenge\n: « OpenStreetMap » (\npreviously\n).\nUsing data from OSM we’ll make a web map of defibrillators (\nAED\n) in\nAuvergne-Rhône-Alpes\n.\nlibrary(tidyverse)\nlibrary(sf)\nlibrary(osmdata)\nlibrary(glue)\nlibrary(leaflet)\nlibrary(htmltools)\nWe send an\nOverpass API\nquery with {osmdata}:\n# France regions\n# See https://r.iresmi.net/posts/2021/simplifying_polygons_layers/ for the data\nfr <- read_sf(\"~/data/adminexpress/adminexpress_cog_simpl_000_2022.gpkg\", layer = \"region\") |> \n  filter(insee_reg > \"06\")\n\n# Get and cache OSM data for France\nif (!file.exists(\"aed.rds\")) {\n  aed <- opq(st_bbox(fr), osm_types = \"node\", timeout = 6000) |>\n    add_osm_features(features = c(\n      '\"emergency\"=\"defibrillator\"')) |> \n    osmdata_sf() |> \n    pluck(\"osm_points\") |> \n    st_join(fr, left = FALSE) |> \n    write_rds(\"aed.rds\")\n} else {\n  aed <- read_rds(\"aed.rds\")\n}\nAutomated external defibrillator in AURA\nicons <- awesomeIcons(\n  library = \"fa\",\n  icon = \"heart\",\n  markerColor = \"white\",\n  iconColor = \"darkgreen\")\n\n# Just keep the region data\naed |> \n  st_join(fr |> \n            filter(insee_reg == 84),\n          left = FALSE) |> \n  leaflet(options = leafletOptions(preferCanvas = TRUE)) |> \n  addTiles() |> \n  addAwesomeMarkers(\n    clusterOptions = markerClusterOptions(),\n    icon = icons,\n    popup = ~glue(\"\n    <table>\n      <tr><th style='font-weight:bold'>localisation</th>\n          <td>{htmlEscape(coalesce(`defibrillator:location:fr`, `defibrillator:location`))}</td></tr>\n      <tr><th>intérieur</th><td>{htmlEscape(coalesce(indoor, `indoor:description`))}</td></tr>\n      <tr><th>niveau</th><td>{htmlEscape(level)}</td></tr>\n      <tr><th>accès</th><td>{htmlEscape(access)}</td></tr>\n      <tr><th>horaires</th><td>{htmlEscape(opening_hours)}</td></tr>\n      <tr><th>opérateur</th><td>{htmlEscape(operator)}</td></tr>\n      <tr><th>tél.</th><td>{htmlEscape(phone)}</td></tr>\n      <tr><th>réf.</th><td>{htmlEscape(`ref:FR:GeoDAE`)}</td></tr>\n      <tr><th>particularité</th><td>{htmlEscape(defibrillator)}</td></tr>\n      <tr><th>description</th><td>{htmlEscape(coalesce(`description:fr`, description))}</td></tr>\n    </table>\"))\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nr.iresmi.net\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "Bleeding Heart – CC-BY by Theo Crazzolara Day 15 of 30DayMapChallenge: « OpenStreetMap » (previously). Using data from OSM we’ll make a web map of defibrillators (AED) in Auvergne-Rhône-Alpes. library(tidyverse) library(sf) library(osmdata) library(glue) library(leaflet) library(htmltools) We send an Overpass API query with {osmdata}: # France regions # See https://r.iresmi.net/posts/2021/simplifying_polygons_layers/ for the data fr filter(insee_reg > \"06\") # Get and cache OSM data for France if (!file.exists(\"aed.rds\")) { aed add_osm_features(features = c( '\"emergency\"=\"defibrillator\"')) |> osmdata_sf() |> pluck(\"osm_points\") |> st_join(fr, left = FALSE) |> write_rds(\"aed.rds\") } else { aed filter(insee_reg == 84), left = FALSE) |> leaflet(options = leafletOptions(preferCanvas = TRUE)) |> addTiles() |> addAwesomeMarkers( clusterOptions = markerClusterOptions(), icon = icons, popup = ~glue(\" localisation {htmlEscape(coalesce(`defibrillator:location:fr`, `defibrillator:location`))} intérieur{htmlEscape(coalesce(indoor, `indoor:description`))} niveau{htmlEscape(level)} accès{htmlEscape(access)} horaires{htmlEscape(opening_hours)} opérateur{htmlEscape(operator)} tél.{htmlEscape(phone)} réf.{htmlEscape(`ref:FR:GeoDAE`)} particularité{htmlEscape(defibrillator)} description{htmlEscape(coalesce(`description:fr`, description))} \")) Figure 1: Defibrillator in AURA",
    "meta_keywords": null,
    "og_description": "Bleeding Heart – CC-BY by Theo Crazzolara Day 15 of 30DayMapChallenge: « OpenStreetMap » (previously). Using data from OSM we’ll make a web map of defibrillators (AED) in Auvergne-Rhône-Alpes. library(tidyverse) library(sf) library(osmdata) library(glue) library(leaflet) library(htmltools) We send an Overpass API query with {osmdata}: # France regions # See https://r.iresmi.net/posts/2021/simplifying_polygons_layers/ for the data fr filter(insee_reg > \"06\") # Get and cache OSM data for France if (!file.exists(\"aed.rds\")) { aed add_osm_features(features = c( '\"emergency\"=\"defibrillator\"')) |> osmdata_sf() |> pluck(\"osm_points\") |> st_join(fr, left = FALSE) |> write_rds(\"aed.rds\") } else { aed filter(insee_reg == 84), left = FALSE) |> leaflet(options = leafletOptions(preferCanvas = TRUE)) |> addTiles() |> addAwesomeMarkers( clusterOptions = markerClusterOptions(), icon = icons, popup = ~glue(\" localisation {htmlEscape(coalesce(`defibrillator:location:fr`, `defibrillator:location`))} intérieur{htmlEscape(coalesce(indoor, `indoor:description`))} niveau{htmlEscape(level)} accès{htmlEscape(access)} horaires{htmlEscape(opening_hours)} opérateur{htmlEscape(operator)} tél.{htmlEscape(phone)} réf.{htmlEscape(`ref:FR:GeoDAE`)} particularité{htmlEscape(defibrillator)} description{htmlEscape(coalesce(`description:fr`, description))} \")) Figure 1: Defibrillator in AURA",
    "og_image": "https://r.iresmi.net/posts/2023/osm_aed/images/26687331437_e2137be56e_c.jpg",
    "og_title": "Defibrillator from OSM | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 2,
    "sitemap_lastmod": "2023-11-15T15:00:00+00:00",
    "twitter_description": "Bleeding Heart – CC-BY by Theo Crazzolara Day 15 of 30DayMapChallenge: « OpenStreetMap » (previously). Using data from OSM we’ll make a web map of defibrillators (AED) in Auvergne-Rhône-Alpes. library(tidyverse) library(sf) library(osmdata) library(glue) library(leaflet) library(htmltools) We send an Overpass API query with {osmdata}: # France regions # See https://r.iresmi.net/posts/2021/simplifying_polygons_layers/ for the data fr filter(insee_reg > \"06\") # Get and cache OSM data for France if (!file.exists(\"aed.rds\")) { aed add_osm_features(features = c( '\"emergency\"=\"defibrillator\"')) |> osmdata_sf() |> pluck(\"osm_points\") |> st_join(fr, left = FALSE) |> write_rds(\"aed.rds\") } else { aed filter(insee_reg == 84), left = FALSE) |> leaflet(options = leafletOptions(preferCanvas = TRUE)) |> addTiles() |> addAwesomeMarkers( clusterOptions = markerClusterOptions(), icon = icons, popup = ~glue(\" localisation {htmlEscape(coalesce(`defibrillator:location:fr`, `defibrillator:location`))} intérieur{htmlEscape(coalesce(indoor, `indoor:description`))} niveau{htmlEscape(level)} accès{htmlEscape(access)} horaires{htmlEscape(opening_hours)} opérateur{htmlEscape(operator)} tél.{htmlEscape(phone)} réf.{htmlEscape(`ref:FR:GeoDAE`)} particularité{htmlEscape(defibrillator)} description{htmlEscape(coalesce(`description:fr`, description))} \")) Figure 1: Defibrillator in AURA",
    "twitter_title": "Defibrillator from OSM | R-bloggers",
    "url": "https://www.r-bloggers.com/2023/11/defibrillator-from-osm/",
    "word_count": 401
  }
}