{
  "uuid": "5982405e-62f6-4966-90e1-00095bb70f1e",
  "created_at": "2025-11-22 19:59:16",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/02/book-review-pandas-workout/",
    "crawled_at": "2025-11-22T10:54:14.138522",
    "external_links": [
      {
        "href": "https://jcarroll.com.au/2025/02/13/book-review-pandas-workout/",
        "text": "rstats on Irregularly Scheduled Programming"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://mng.bz/0GVW",
        "text": "Pandas Workout"
      },
      {
        "href": "https://github.com/HIBio/benchlingapi",
        "text": "a wrapper"
      },
      {
        "href": "https://mng.bz/0GVW",
        "text": "Pandas Workout"
      },
      {
        "href": "https://www.manning.com/books/beyond-spreadsheets-with-r",
        "text": "Beyond Spreadsheets with R"
      },
      {
        "href": "https://jvns.ca/til/pip-install---user-can-override-system-libraries/",
        "text": "pipnow tries"
      },
      {
        "href": "https://gist.github.com/jvns/3f3da9a557bfff478f6f0145f1b6b52f",
        "text": "messing up our global package availability"
      },
      {
        "href": "https://docs.astral.sh/uv/",
        "text": "uvas an alternative topip"
      },
      {
        "href": "https://www.adelaidezoo.com.au/giant-panda-debut/",
        "text": "imported some pandas"
      },
      {
        "href": "http://mng.bz/8rzg",
        "text": "http://mng.bz/8rzg"
      },
      {
        "href": "https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.round.html",
        "text": "documentation forpd.Series.round"
      },
      {
        "href": "https://note.nkmk.me/en/python-pandas-round-decimal/",
        "text": "answer myself"
      },
      {
        "href": "https://github.com/jonocarroll/charcuterie",
        "text": "my own “character vector” class"
      },
      {
        "href": "https://github.com/reuven/pandas-workout",
        "text": "taxi-passenger-count.csv"
      },
      {
        "href": "https://livebook.manning.com/forum?product=lerner2&p=1&page=1",
        "text": "Manning’s discussion forum"
      },
      {
        "href": "https://archive.org/details/statisticalmodel00john/page/n13/mode/2up",
        "text": "S in 1992"
      },
      {
        "href": "https://docs.rs/polars/latest/polars/",
        "text": "Polars in Rust"
      },
      {
        "href": "https://tidierorg.github.io/TidierData.jl/latest/",
        "text": "Tidier.jl in Julia"
      },
      {
        "href": "https://github.com/mchav/dataframe",
        "text": "dataframe in Haskell"
      },
      {
        "href": "https://github.com/alex-hhh/data-frame",
        "text": "data-frame in Racket"
      },
      {
        "href": "https://fosstodon.org/@jonocarroll",
        "text": "Mastodon"
      },
      {
        "href": "https://jcarroll.com.au/2025/02/13/book-review-pandas-workout/",
        "text": "rstats on Irregularly Scheduled Programming"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Book Review – Pandas Workout | R-bloggers",
    "images": [
      {
        "alt": null,
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i0.wp.com/jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/snakes.jpg?w=450&ssl=1"
      },
      {
        "alt": "import pandas",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "import pandas",
        "base64": null,
        "src": "https://i2.wp.com/jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/pandas.jpg?w=450&ssl=1"
      },
      {
        "alt": "oh no!",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "oh no!",
        "base64": null,
        "src": "https://i1.wp.com/jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/ohno.jpg?w=300&ssl=1"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/jonathan-carroll/",
        "text": "Jonathan Carroll"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-390552 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Book Review – Pandas Workout</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">February 12, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/jonathan-carroll/\">Jonathan Carroll</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://jcarroll.com.au/2025/02/13/book-review-pandas-workout/\"> rstats on Irregularly Scheduled Programming</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47--><p><img data-lazy-src=\"https://i0.wp.com/jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/snakes.jpg?w=450&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img data-recalc-dims=\"1\" src=\"https://i0.wp.com/jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/snakes.jpg?w=450&amp;ssl=1\"/></noscript></p>\n<p>Python seems to be everywhere these days, and I’m really into learning languages,\nso it should come as no surprise that I’m learning a lot of Python. This post\nserves as a review of <a href=\"https://mng.bz/0GVW\" rel=\"nofollow\" target=\"_blank\">Pandas Workout</a> as well as a\n‘first impression’ review of the Pandas approach to data.</p>\n<p>I am not entirely unfamiliar with Python, but I haven’t really had to do anything\nserious with a lot of data in the way that I do with R. {dplyr} and friends make\nworking with rectangular data so clean and simple; why would I want anything else?</p>\n<p>I recently needed to work with an API that would return some tabular data – it\nenables programmatic communication with a system containing a lot of data, and the\nonly wrapper I could find for it was in Python (and not all that well documented).\nI’ve built <a href=\"https://github.com/HIBio/benchlingapi\" rel=\"nofollow\" target=\"_blank\">a wrapper</a> for a very similar\nsystem myself using {httr} in R but I didn’t necessarily want to go through all\nof that again. “Fine, I’ll use Python” I said, and promptly realised that I wasn’t\nfamiliar with how to rectangle the resulting data.</p>\n<p>Around the same time as the API needed wrapping I was fortunate enough to be asked\nto review the book <a href=\"https://mng.bz/0GVW\" rel=\"nofollow\" target=\"_blank\">Pandas Workout</a> written by\nReuven Lerner, from Manning Publications. I really enjoy books from Manning – I\npublished my own book\n<a href=\"https://www.manning.com/books/beyond-spreadsheets-with-r\" rel=\"nofollow\" target=\"_blank\">Beyond Spreadsheets with R</a>\nwith them and I’m grateful for their DRM-free offerings across a wide range of\ntech topics. What a perfect opportunity! I will note that apart from receiving a\ndigital copy of the book to review, I was not otherwise paid or compensated for\nthis review. If I’m reviewing a book, it’s an honest review.</p>\n<p>As I’m entirely unfamiliar with Pandas but know enough Python to keep my head above\nwater, this seemed like a good chance to review both at the same time; how well\ndoes this book provide an introduction to Pandas for a newcomer?</p>\n<p>The subtitle of the book is “200 Exercises to Strengthen Your Data Analysis Skills”\nand it delivers on the ‘exercises’ part, providing real-world data import/cleaning\ntasks that go well beyond a <code>mtcars</code> dataset.</p>\n<p>I’m halfway through the book, and I’m actually following the exercises by typing out\nmy own solutions in a python file and/or the REPL – “you learn with your hands, not\nyour eyes”.</p>\n<p>The first problem, since this is python, is getting Pandas to work with a script,\nwhich means dealing with environments, since <a href=\"https://jvns.ca/til/pip-install---user-can-override-system-libraries/\" rel=\"nofollow\" target=\"_blank\"><code>pip</code> now tries</a>\nto prevent us from <a href=\"https://gist.github.com/jvns/3f3da9a557bfff478f6f0145f1b6b52f\" rel=\"nofollow\" target=\"_blank\">messing up our global package availability</a>.</p>\n<p>I figured this was a good time to try out <a href=\"https://docs.astral.sh/uv/\" rel=\"nofollow\" target=\"_blank\"><code>uv</code> as an alternative to <code>pip</code></a> and as far as I can tell, this worked well. I\ndon’t have expectations that Pandas Workout should have guided me through any of\nthe “get Python environments working” parts as it does assume Python knowledge,\nbut the author mentions using <code>pip install pandas</code> which doesn’t really cut it\n(though plausibly did at the time of writing, April 2024).\nApart from that, it’s just a matter of</p>\n<pre>import pandas as pd</pre>\n<p>(and all of the Python code in this post is generated from the code blocks thanks\nto {reticulate} and its virtualenv support).</p>\n<p>There’s a joke to be made here about my home city Adelaide and the fact that we\nhave once again <a href=\"https://www.adelaidezoo.com.au/giant-panda-debut/\" rel=\"nofollow\" target=\"_blank\">imported some pandas</a>.</p>\n<div class=\"float\">\n<img alt=\"import pandas\" data-lazy-src=\"https://i2.wp.com/jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/pandas.jpg?w=450&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"import pandas\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/pandas.jpg?w=450&amp;ssl=1\"/></noscript>\n<div class=\"figcaption\">import pandas</div>\n</div>\n<p>Chapter 1 walks through using the <code>Series</code> data type, which for an R user is most\nsimilar to a regular vector, except that there isn’t a strict restriction on the\n‘singular’ type of the elements; if you provide a mixture of types the resulting\n<code>Series</code> will have <code>dtype: object</code>. This is, I suspect, a necessity, given that\nPython doesn’t have the ‘classed NA’ values that R uses – all of the elements of</p>\n<pre>x &lt;- c(1L, NA, 3L)</pre>\n<p>are the same class (‘type’); integer, including the missing value</p>\n<pre>x[2]\n## [1] NA\nclass(x[2])\n## [1] \"integer\"</pre>\n<p>which is actually <code>NA_integer_</code>. <code>pd.Series([1, pd.NA, 3])</code> still produces\n<code>dtype: object</code>, and can’t be converted to <code>np.int8</code>.</p>\n<p>The first real annoyance comes when describing how indexing works in Pandas vs\nregular Python; the endpoint of the <code>s.loc[]</code> syntax is “up to and including”\nwhereas Python would usually use “up to and <strong>not</strong> including”. There’s reasons,\nbut things like this are good to keep in the back of one’s mind whenever someone\ncomplains that “R is confusing/inconsistent”. With that said, it’s called out in\nPandas Workout with some concrete examples, so it shouldn’t be a gotcha.</p>\n<p>Where an inconsistency isn’t so well handled is when mentioning rounding of values;\nPandas Workout suggests</p>\n<blockquote>\n<p>“Be sure to read the documentation for the round method (<a class=\"uri\" href=\"http://mng.bz/8rzg\" rel=\"nofollow\" target=\"_blank\">http://mng.bz/8rzg</a>)\nto understand its arguments and how it handles numbers like 15 and 75.</p>\n</blockquote>\n<p>which points to the\n<a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.round.html\" rel=\"nofollow\" target=\"_blank\">documentation for <code>pd.Series.round</code></a>\nbut that makes no mention of how these halfway values are handled - I dug up the\n<a href=\"https://note.nkmk.me/en/python-pandas-round-decimal/\" rel=\"nofollow\" target=\"_blank\">answer myself</a> and Pandas\ndoes “banker’s rounding” taking half-values to evens. Trying this out myself\nalso demonstrates this</p>\n<pre>pd.Series([0.2, 0.5, 1.5, 2.5, 3.5]).round()\n## 0    0.0\n## 1    0.0\n## 2    2.0\n## 3    2.0\n## 4    4.0\n## dtype: float64</pre>\n<p>Incidentally, this is the same for R</p>\n<pre>round(c(0.2, 0.5, 1.5, 2.5, 3.5))\n## [1] 0 0 2 2 4</pre>\n<p>Some additional <code>Series</code> gotchas are detailed, including the fact that while this\nmonstrosity works in Python</p>\n<pre>'1' + '2' + '3' + '4'\n## '1234'</pre>\n<p>and this does not</p>\n<pre>sum(['1', '2', '3', '4'])\n## TypeError: unsupported operand type(s) for +: 'int' and 'str'</pre>\n<p>this one does in fact work</p>\n<pre>pd.Series(['1', '2', '3', '4']).sum()\n## '1234'</pre>\n<p>The similarities between R’s (named) vectors and Pandas’ <code>Series</code> help me to grasp\nwhat I might want to do with these, but there are some distinct differences in\nhow the ‘index’/‘name’ part is handled; In R the names <em>can</em> be repeated, although\nthat makes it very difficult to extract elements based on names</p>\n<pre>x &lt;- c(a = 1, b = 2, a = 3, d = 4)\nx\n## a b a d \n## 1 2 3 4\nnames(x)\n## [1] \"a\" \"b\" \"a\" \"d\"\nx[\"a\"]\n## a \n## 1</pre>\n<p>whereas in Pandas the index can be repeated and extracting with a repeated value\nactually returns all the relevant values</p>\n<pre>x = pd.Series([1, 2, 3, 4], index=list('abad'))\nx\n## a    1\n## b    2\n## a    3\n## d    4\n## dtype: int64\nx.loc['a']\n## a    1\n## a    3\n## dtype: int64</pre>\n<p>which means that <code>x.loc[z]</code> is essentially <code>x[names(x) == z]</code></p>\n<pre>x[names(x) == \"a\"]\n## a a \n## 1 3</pre>\n<p>As a sidenote, that “use a list as a series of characters” bit is going to take\nme a while to get used to, but I see the value of it. One of my big regrets about\nR is that strings are <em>not</em> vectors of characters; something I worked around by\nmaking <a href=\"https://github.com/jonocarroll/charcuterie\" rel=\"nofollow\" target=\"_blank\">my own “character vector” class</a>.</p>\n<p>What really blew my mind was the behaviour around adding two <code>Series</code> with overlapping\nindexes; the comparison is explicitly based on the index, so <code>'a'</code> matches to <code>'a'</code> and\n<code>'d'</code> matches to <code>'d'</code> regardless of where they appear in the <code>Series</code></p>\n<pre>s1 = pd.Series([10, 20, 30, 40], index=list('abcd'))\ns1\n## a    10\n## b    20\n## c    30\n## d    40\n## dtype: int64\ns2 = pd.Series([100, 200, 300, 400], index=list('dcba'))\ns2\n## d    100\n## c    200\n## b    300\n## a    400\n## dtype: int64\ns1+s2\n## a    410\n## b    320\n## c    230\n## d    140\n## dtype: int64</pre>\n<p>This seems like such an obvious choice - I had to double check what happens in R\nand a worried look started to creep across my face</p>\n<pre>s1 = c(a = 10, b = 20, c = 30, d = 40)\ns1\n##  a  b  c  d \n## 10 20 30 40\ns2 = c(d = 100, c = 200, b = 300, a = 400)\ns2\n##   d   c   b   a \n## 100 200 300 400\ns1 + s2\n##   a   b   c   d \n## 110 220 330 440</pre>\n<div class=\"float\">\n<img alt=\"oh no!\" data-lazy-src=\"https://i1.wp.com/jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/ohno.jpg?w=300&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\"/><noscript><img alt=\"oh no!\" data-recalc-dims=\"1\" src=\"https://i1.wp.com/jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/ohno.jpg?w=300&amp;ssl=1\"/></noscript>\n<div class=\"figcaption\">oh no!</div>\n</div>\n<p>R just ignores the names entirely. If I <em>wanted</em> the same behaviour, I’d need to\ndo the aligning myself</p>\n<pre>s1[order(names(s1))] + s2[order(names(s2))]\n##   a   b   c   d \n## 410 320 230 140</pre>\n<p>Closing out the chapter is a set of exercises using some real data. There is a\nlink to that data on the book website, but that location is not mentioned in the\nbook itself, which isn’t ideal. There is a hyperlink in the PDF version</p>\n<blockquote>\n<p>The data is in the file <a href=\"https://github.com/reuven/pandas-workout\" rel=\"nofollow\" target=\"_blank\">taxi-passenger-count.csv</a>, available along with the other data files used in this course.</p>\n</blockquote>\n<p>but that points to a repository of the <em>exercises</em>, not the data. I presume the\nprint version lacks a way for the reader to find this data. These sort of\nmistakes happen - I noted some of them on <a href=\"https://livebook.manning.com/forum?product=lerner2&amp;p=1&amp;page=1\" rel=\"nofollow\" target=\"_blank\">Manning’s discussion forum</a> but did not\nhear back from the author about any of them yet.</p>\n<p>It’s worth mentioning that while the data is from the real world and has genuine\n‘problems’ that one would experience when performing an analysis, the data is a\nsingle zip file comprising a whopping 852MB download, which might be a bit much\nfor some people.</p>\n<p>Chapter 2 naturally moves on to <code>DataFrame</code>s; rectangular structures constructed\nas a combination of multiple <code>Series</code> (though the only mention along those lines\nseems to be a throwaway comment to that effect).</p>\n<p>The humble ‘Data Frame’ (<code>data.frame</code>) in R is a core data type. I’m not entirely\nclear on the history, but they were present in R’s predecessor language <a href=\"https://archive.org/details/statisticalmodel00john/page/n13/mode/2up\" rel=\"nofollow\" target=\"_blank\">S in 1992</a> and\nlikely even earlier. Nowadays, lots of Data Frame implementations exist for the\npurpose of rectangling - and slicing thereof - including <a href=\"https://docs.rs/polars/latest/polars/\" rel=\"nofollow\" target=\"_blank\">Polars in Rust</a>, <a href=\"https://tidierorg.github.io/TidierData.jl/latest/\" rel=\"nofollow\" target=\"_blank\">Tidier.jl in Julia</a>, <a href=\"https://github.com/mchav/dataframe\" rel=\"nofollow\" target=\"_blank\">dataframe in Haskell</a>, <a href=\"https://github.com/alex-hhh/data-frame\" rel=\"nofollow\" target=\"_blank\">data-frame in Racket</a>, and I’m sure many others. This\nstructure resembles a database table and operations on these tend to mimic SQL\nsyntax - think filter, select, join, etc…</p>\n<p>In R, I know that <code>data.frame</code> is <em>explicitly</em> a “list of vectors all of the\nsame length” but that seems to be glossed over here in favor of “you know about\ntables - this is similar”. The constructor examples show either a list of lists\nor a list of dicts, and that’s perhaps because a list of <code>Series</code> objects doesn’t\ndo what I expect</p>\n<pre>a = pd.Series([1, 2, 3])\nb = pd.Series([4, 5, 6])\npd.DataFrame([a, b])\n##    0  1  2\n## 0  1  2  3\n## 1  4  5  6</pre>\n<p>The resulting <code>DataFrame</code> is created row-wise, which is enough of a headache in R,\nlet alone the differences here depending on how the object is created.</p>\n<p>There are apparently a handful of ways one <em>can</em> do this, but they’re not\nmentioned in the book</p>\n<pre>a = pd.Series([1, 2, 3])\nb = pd.Series([4, 5, 6])\n\npd.DataFrame({'a':a, 'b':b})\n##    a  b\n## 0  1  4\n## 1  2  5\n## 2  3  6\npd.DataFrame(dict(a=a, b=b))\n##    a  b\n## 0  1  4\n## 1  2  5\n## 2  3  6\npd.concat([a, b], axis=1, keys=list('ab'))\n##    a  b\n## 0  1  4\n## 1  2  5\n## 2  3  6</pre>\n<p>I was also curious about what happens if they <em>aren’t</em> the same length</p>\n<pre>a = pd.Series([1, 2, 3])\nb = pd.Series([4, 5, 6, 7])\n\npd.DataFrame({'a':a, 'b':b})\n##      a  b\n## 0  1.0  4\n## 1  2.0  5\n## 2  3.0  6\n## 3  NaN  7</pre>\n<p>The inserted <code>NaN</code> is perhaps potentially surprising; R bails out of trying to\nconstruct such an object</p>\n<pre>a &lt;- c(1, 2, 3)\nb &lt;- c(4, 5, 6, 7)\n\ndata.frame(a, b)\n## Error in data.frame(a, b): arguments imply differing number of rows: 3, 4</pre>\n<p>except when it tries to be clever by recycling some values, with often\nsurprising results…</p>\n<pre>a &lt;- 1:3\nb &lt;- 4:9\n\ndata.frame(a, b)\n##   a b\n## 1 1 4\n## 2 2 5\n## 3 3 6\n## 4 1 7\n## 5 2 8\n## 6 3 9</pre>\n<p>The various methods for subsetting rows and columns mostly makes sense coming from\nR, although it will still take me some time to get used to seeing things like</p>\n<pre>df[list('bcd')]</pre>\n<p>to extract the columns labelled <code>'b'</code>, <code>'c'</code>, and <code>'d'</code>. One thing I noticed here\nwas that there was only one axis specified for extraction here (column) and while\nthe same thing works in R, e.g.</p>\n<pre>m &lt;- head(mtcars)\nm[c(\"cyl\", \"mpg\", \"wt\")]\n##                   cyl  mpg    wt\n## Mazda RX4           6 21.0 2.620\n## Mazda RX4 Wag       6 21.0 2.875\n## Datsun 710          4 22.8 2.320\n## Hornet 4 Drive      6 21.4 3.215\n## Hornet Sportabout   8 18.7 3.440\n## Valiant             6 18.1 3.460</pre>\n<p>the absence of a note about it was probably an oversight. In R, if the vector\nspecifying the selection contains any missing values (NA) then an error is\ntriggered</p>\n<pre>m[c(\"cyl\", NA, \"wt\")]\n## Error in `[.data.frame`(m, c(\"cyl\", NA, \"wt\")): undefined columns selected</pre>\n<p>This is confusing, for sure. R is fine with us selecting missing rows</p>\n<pre>m[c(1, NA, 3), ]\n##             mpg cyl disp  hp drat   wt  qsec vs am gear carb\n## Mazda RX4  21.0   6  160 110 3.90 2.62 16.46  0  1    4    4\n## NA           NA  NA   NA  NA   NA   NA    NA NA NA   NA   NA\n## Datsun 710 22.8   4  108  93 3.85 2.32 18.61  1  1    4    1</pre>\n<p>but not missing columns</p>\n<pre>m[1:3, c(1, NA, 3)]\n## Error in `[.data.frame`(m, 1:3, c(1, NA, 3)): undefined columns selected</pre>\n<p>So, what about Pandas? The fact that <code>x[cols]</code> works to select columns, but\nselecting rows requires <code>x.loc[rows, cols]</code> is a bit ugly, in my opinion, and\nthere are parallels here with the mess of R’s <code>drop=TRUE</code> argument which results in\na vector rather than a <code>data.frame</code> when only a single dimension is selected.</p>\n<pre>x = pd.DataFrame({'a':a, 'b':b})\nx\n##      a  b\n## 0  1.0  4\n## 1  2.0  5\n## 2  3.0  6\n## 3  NaN  7\nx['a']\n## 0    1.0\n## 1    2.0\n## 2    3.0\n## 3    NaN\n## Name: a, dtype: float64\nx.loc[:, 'a']\n## 0    1.0\n## 1    2.0\n## 2    3.0\n## 3    NaN\n## Name: a, dtype: float64\nx.loc[1:2, ['a', 'b']]\n##      a  b\n## 1  2.0  5\n## 2  3.0  6\nx.loc[1:2, ['a', pd.NA]]\n## KeyError: '[&lt;NA&gt;] not in index'</pre>\n<p>One powerful but dangerous feature of {dplyr} (and some parts of base R) is\nNon-Standard Evaluation (NSE) which enables a ‘shortcut’ in writing out expressions\nfor filtering or selecting data in a <code>data.frame</code>. Essentially, the user can\nuse column names as variables and they are translated as such within the function,\nso rather than writing out</p>\n<pre>filter(mydataframe, mydataframe$a &gt; 300 &amp; mydataframe$w %% 2 == 1)</pre>\n<p>one can use the column names ‘a’ and ‘w’ as if they were defined as variables</p>\n<pre>filter(mydataframe, a &gt; 300 &amp; w %% 2 == 1)</pre>\n<p>This is handy, but of course has some sharp edges. I have mixed feelings about\nfinding the equivalent in Pandas in the form of <code>df.query</code>. This takes an SQL-like\nstatement and similarly treats columns as variables, but in this case the entire\nthing is provided as a string</p>\n<pre>df.query('v &gt; 300 &amp; w % 2 == 1')</pre>\n<p>I imagine this is incompatible with any language-server features, though the\nmetaprogramming-enjoying part of me does wonder if it makes building up these\nexpressions programatically a little easier.</p>\n<p>Another gotcha mentioned in this section is the fact that Pandas makes internal\ncopies of data, and produces an interesting warning</p>\n<pre>df = pd.DataFrame(\n    {'a': [10, 50, 90],\n     'b': [20, 60, 100],\n     'c': [30, 70, 110],\n     'd': [40, 80, 120]},\n     index = list('xyz'))\ndf[df['b'] &gt; 30]['b'] = 0\ndf\n## &lt;string&gt;:1: SettingWithCopyWarning: \n## A value is trying to be set on a copy of a slice from a DataFrame.\n## Try using .loc[row_indexer,col_indexer] = value instead\n## \n## See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy</pre>\n<p>(with the value not being set to 0).</p>\n<p>This is reminiscent of SQL ‘views’ into data - and not being able to modify\nthose - and that seems like a useful feature, but it again makes me wonder what\nhappens in R…</p>\n<pre>df &lt;- data.frame(a = c(10, 50, 90),\n                 b = c(20, 60, 100),\n                 c = c(30, 70, 110), \n                 d = c(40, 80, 120), \n                 row.names = c(\"x\", \"y\", \"z\"))\ndfo &lt;- df\ndf\n##    a   b   c   d\n## x 10  20  30  40\n## y 50  60  70  80\n## z 90 100 110 120</pre>\n<p>The following updates all of the <code>b</code> column because as we saw above, just\nspecifying a single selector restricts the columns, so since <code>df$b &gt; 30</code> is\n<code>c(FALSE, TRUE, TRUE)</code> the intermediate subset is just the second and third\ncolumns (“b” and “c”) after which we select the “b” column and assign the value\nof <code>0</code> to all elements. No actual filtering of rows has occurred here, and the\nentire column in the full data is updated</p>\n<pre>df[df$b &gt; 30][\"b\"] &lt;- 0 \ndf\n##    a b   c   d\n## x 10 0  30  40\n## y 50 0  70  80\n## z 90 0 110 120</pre>\n<p>Equivalently, <code>[][[\"b\"]]</code> or <code>[]$b</code>.</p>\n<p>In order to select rows for which <code>b &gt; 30</code> this needs to <code>df[df$b &gt; 30, ]</code> (with\na comma), and this updates just the relevant slice (again in the full data)</p>\n<pre>df &lt;- dfo\ndf[df$b &gt; 30, ]$b &lt;- 0 \ndf\n##    a  b   c   d\n## x 10 20  30  40\n## y 50  0  70  80\n## z 90  0 110 120</pre>\n<p>and this works just fine in R, despite the fact that we have explicitly subset\nthe data prior to selecting a column, and assigned a value to that subset.</p>\n<p>Maybe that warning isn’t a bad thing at all - such subsets are done regularly in\nR, and there’s no memory issues with doing so (it’s well-defined in terms of <code>[.&lt;-</code>)\nbut I can see why it’s confusing.</p>\n<p>Chapter 3 details importing and exporting data, and it’s here that I start to see\nhow much has been rolled into Pandas - things that are spread across several R\npackages.</p>\n<p>I’m familiar with scraping HTML tables from websites in R - there are many base\npackages which can read from a URL, and several ways to convert the resulting\ndata into a rectangle such as a <code>data.frame</code>, but Pandas surprises me with\n<code>pd.read_html(url)</code> which returns a list of <code>DataFrame</code>s, one for each table on a\nwebpage. Trying this out, it works quite nicely</p>\n<pre>url = 'https://en.wikipedia.org/wiki/R_(programming_language)#Version_names'\ntabs = pd.read_html(url)[1]\nx=tabs.loc[:,['Version', 'Name', 'Release date']]\nx\n##     Version                      Name Release date\n## 0     4.4.2            Pile of Leaves   2024-10-31\n## 1     4.4.1        Race for Your Life   2024-06-14\n## 2     4.4.0                 Puppy Cup   2024-04-24\n## 3     4.3.3           Angel Food Cake   2024-02-29\n## 4     4.3.2                 Eye Holes   2023-10-31\n## 5     4.3.1             Beagle Scouts   2023-06-16\n## 6     4.3.0          Already Tomorrow   2023-04-21\n## 7     4.2.3          Shortstop Beagle   2023-03-15\n## 8     4.2.2     Innocent and Trusting   2022-10-31\n## 9     4.2.1         Funny-Looking Kid   2022-06-23\n## 10    4.2.0     Vigorous Calisthenics   2022-04-22\n## 11    4.1.3               One Push-Up   2022-03-10\n## 12    4.1.2               Bird Hippie   2021-11-01\n## 13    4.1.1               Kick Things   2021-08-10\n## 14    4.1.0           Camp Pontanezen   2021-05-18\n## 15    4.0.5           Shake and Throw   2021-03-31\n## 16    4.0.4         Lost Library Book   2021-02-15\n## 17    4.0.3   Bunny-Wunnies Freak Out   2020-10-10\n## 18    4.0.2          Taking Off Again   2020-06-22\n## 19    4.0.1            See Things Now   2020-06-06\n## 20    4.0.0                 Arbor Day   2020-04-24\n## 21    3.6.3      Holding the Windsock   2020-02-29\n## 22    3.6.2     Dark and Stormy Night   2019-12-12\n## 23    3.6.1        Action of the Toes   2019-07-05\n## 24    3.6.0        Planting of a Tree   2019-04-26\n## 25    3.5.3               Great Truth   2019-03-11\n## 26    3.5.2           Eggshell Igloos   2018-12-20\n## 27    3.5.1             Feather Spray   2018-07-02\n## 28    3.5.0            Joy in Playing   2018-04-23\n## 29    3.4.4        Someone to Lean On   2018-03-15\n## 30    3.4.3          Kite-Eating Tree   2017-11-30\n## 31    3.4.2              Short Summer   2017-09-28\n## 32    3.4.1             Single Candle   2017-06-30\n## 33    3.4.0       You Stupid Darkness   2017-04-21\n## 34    3.3.3             Another Canoe   2017-03-06\n## 35    3.3.2     Sincere Pumpkin Patch   2016-10-31\n## 36    3.3.1          Bug in Your Hair   2016-06-21\n## 37    3.3.0    Supposedly Educational   2016-05-03\n## 38    3.2.5  Very, Very Secure Dishes   2016-04-11\n## 39    3.2.4        Very Secure Dishes   2016-03-11\n## 40    3.2.3     Wooden Christmas-Tree   2015-12-10\n## 41    3.2.2               Fire Safety   2015-08-14\n## 42    3.2.1    World-Famous Astronaut   2015-06-18\n## 43    3.2.0       Full of Ingredients   2015-04-16\n## 44    3.1.3           Smooth Sidewalk   2015-03-09\n## 45    3.1.2            Pumpkin Helmet   2014-10-31\n## 46    3.1.1             Sock it to Me   2014-07-10\n## 47    3.1.0              Spring Dance   2014-04-10\n## 48    3.0.3                Warm Puppy   2014-03-06\n## 49    3.0.2           Frisbee Sailing   2013-09-25\n## 50    3.0.1                Good Sport   2013-05-16\n## 51    3.0.0             Masked Marvel   2013-04-03\n## 52   2.15.3          Security Blanket   2013-03-01\n## 53   2.15.2            Trick or Treat   2012-10-26\n## 54   2.15.1      Roasted Marshmallows   2012-06-22\n## 55   2.15.0             Easter Beagle   2012-03-30\n## 56   2.14.2       Gift-Getting Season   2012-02-29\n## 57   2.14.1       December Snowflakes   2011-12-22\n## 58   2.14.0             Great Pumpkin   2011-10-31\n## 59  r-devel   Unsuffered Consequences          NaN</pre>\n<p>I’m all too familiar with issues of nested tables and data that doesn’t rectangle\nso easily, but for this simple example it worked well, I think.</p>\n<p>Chapter 4 covers indexes and again the idea of repeated values comes into play. The\nlong-standing issue that the {tibble} team have with rownames comes to mind - I\nlike being able to name both axes of the data and hate that {tibble} is opposed\nto them - so it’s extra surprising to have a Data Frame where the ‘row’ labels\ncan repeat. What’s more, the index can be hierarchical as a multi-index. With the\nexample from above, splitting the version into a multi-index is interesting</p>\n<pre>v=x.Version.str.split('.', expand=True)\nv.columns=['major', 'minor', 'patch']\nxv=pd.concat([x, v], axis=1)\nxv=xv.set_index(['major','minor','patch'])\nxv.head(25)\n##                   Version                     Name Release date\n## major minor patch                                              \n## 4     4     2       4.4.2           Pile of Leaves   2024-10-31\n##             1       4.4.1       Race for Your Life   2024-06-14\n##             0       4.4.0                Puppy Cup   2024-04-24\n##       3     3       4.3.3          Angel Food Cake   2024-02-29\n##             2       4.3.2                Eye Holes   2023-10-31\n##             1       4.3.1            Beagle Scouts   2023-06-16\n##             0       4.3.0         Already Tomorrow   2023-04-21\n##       2     3       4.2.3         Shortstop Beagle   2023-03-15\n##             2       4.2.2    Innocent and Trusting   2022-10-31\n##             1       4.2.1        Funny-Looking Kid   2022-06-23\n##             0       4.2.0    Vigorous Calisthenics   2022-04-22\n##       1     3       4.1.3              One Push-Up   2022-03-10\n##             2       4.1.2              Bird Hippie   2021-11-01\n##             1       4.1.1              Kick Things   2021-08-10\n##             0       4.1.0          Camp Pontanezen   2021-05-18\n##       0     5       4.0.5          Shake and Throw   2021-03-31\n##             4       4.0.4        Lost Library Book   2021-02-15\n##             3       4.0.3  Bunny-Wunnies Freak Out   2020-10-10\n##             2       4.0.2         Taking Off Again   2020-06-22\n##             1       4.0.1           See Things Now   2020-06-06\n##             0       4.0.0                Arbor Day   2020-04-24\n## 3     6     3       3.6.3     Holding the Windsock   2020-02-29\n##             2       3.6.2    Dark and Stormy Night   2019-12-12\n##             1       3.6.1       Action of the Toes   2019-07-05\n##             0       3.6.0       Planting of a Tree   2019-04-26</pre>\n<p>This does mean that I can extract all of the 4.3.x series releases</p>\n<pre>xv.loc[('4', '3')]\n## &lt;string&gt;:1: PerformanceWarning: indexing past lexsort depth may impact performance.\n##       Version              Name Release date\n## patch                                       \n## 3       4.3.3   Angel Food Cake   2024-02-29\n## 2       4.3.2         Eye Holes   2023-10-31\n## 1       4.3.1     Beagle Scouts   2023-06-16\n## 0       4.3.0  Already Tomorrow   2023-04-21</pre>\n<p>Getting the x.x.0 releases is a little messier, requiring <code>slice(None)</code></p>\n<pre>xv.loc[(slice(None), slice(None), '0')] \n##             Version                    Name Release date\n## major minor                                             \n## 4     4       4.4.0               Puppy Cup   2024-04-24\n##       3       4.3.0        Already Tomorrow   2023-04-21\n##       2       4.2.0   Vigorous Calisthenics   2022-04-22\n##       1       4.1.0         Camp Pontanezen   2021-05-18\n##       0       4.0.0               Arbor Day   2020-04-24\n## 3     6       3.6.0      Planting of a Tree   2019-04-26\n##       5       3.5.0          Joy in Playing   2018-04-23\n##       4       3.4.0     You Stupid Darkness   2017-04-21\n##       3       3.3.0  Supposedly Educational   2016-05-03\n##       2       3.2.0     Full of Ingredients   2015-04-16\n##       1       3.1.0            Spring Dance   2014-04-10\n##       0       3.0.0           Masked Marvel   2013-04-03\n## 2     15     2.15.0           Easter Beagle   2012-03-30\n##       14     2.14.0           Great Pumpkin   2011-10-31</pre>\n<p>and while this was interesting to achieve, a filter would probably be better</p>\n<pre>xv=pd.concat([x, v], axis=1)\nxv.query('patch == \"0\"')\n##    Version                    Name Release date major minor patch\n## 2    4.4.0               Puppy Cup   2024-04-24     4     4     0\n## 6    4.3.0        Already Tomorrow   2023-04-21     4     3     0\n## 10   4.2.0   Vigorous Calisthenics   2022-04-22     4     2     0\n## 14   4.1.0         Camp Pontanezen   2021-05-18     4     1     0\n## 20   4.0.0               Arbor Day   2020-04-24     4     0     0\n## 24   3.6.0      Planting of a Tree   2019-04-26     3     6     0\n## 28   3.5.0          Joy in Playing   2018-04-23     3     5     0\n## 33   3.4.0     You Stupid Darkness   2017-04-21     3     4     0\n## 37   3.3.0  Supposedly Educational   2016-05-03     3     3     0\n## 43   3.2.0     Full of Ingredients   2015-04-16     3     2     0\n## 47   3.1.0            Spring Dance   2014-04-10     3     1     0\n## 51   3.0.0           Masked Marvel   2013-04-03     3     0     0\n## 55  2.15.0           Easter Beagle   2012-03-30     2    15     0\n## 58  2.14.0           Great Pumpkin   2011-10-31     2    14     0</pre>\n<p>I believe <em>that</em> is the {tibble} team’s argument - that a filter is more suitable,\nbut I stand by the fact that selecting rows with names which don’t need to be\n<em>in</em> the data itself is a useful approach.</p>\n<p>This chapter also introduces pivot tables in the form of</p>\n<pre>df.pivot_table(index, columns, values, aggfunc)</pre>\n<p>the equivalent of which in {dplyr} is <code>dplyr::summarise()</code> or <code>dplyr::count()</code>.\nWay back when I started learning R I recall finding it odd that the (often useful)\nname “pivot table” rarely came up in R documentation, which is a bit of a shame.\nI used them <em>all the time</em> in Excel.</p>\n<pre>xv.pivot_table(index='major', \n               columns='minor', \n               values='patch', \n               aggfunc='count', \n               fill_value=0)\n## minor  0  1  14  15  2  3  4  5  6\n## major                             \n## 2      0  0   3   4  0  0  0  0  0\n## 3      4  4   0   0  6  4  5  4  4\n## 4      6  4   0   0  4  4  3  0  0</pre>\n<p>My major complaint here is that the function is passed as a string - Y U NO use\nfirst class functions???</p>\n<p>My notes for Chapter 5 (Cleaning Data) only involve the fact that <code>pd.isna</code> and\n<code>pd.isnull</code> are apparently the exact same thing, which is vastly different from R.</p>\n<p>For Chapter 6 (Grouping, joining, and sorting) I have a rekindled annoyance at the\nmixing of methods and attributes driven by the fact that <code>df.transpose()</code> (a method)\nhas an alias <code>df.T</code>. I have enough of a hard time trying to remember whether\nit’s <code>x.len</code> or <code>x.len()</code> or <code>length(x)</code> or whatever.</p>\n<hr/>\n<p>I will continue to make my way through the rest of the book, but figured this\nwas a good point to take stock of how I feel about it and how much I’ve learned.\nI’m already able to work with the API I was trying to and can rectangle the\nresults into something useful, including being able to save those as a CSV or\neven Excel sheet(s).</p>\n<p>Pandas Workout is, in my opinion, a good resource for learning Pandas providing\nyou already know your way around Python and perhaps data analysis in another\nlanguage as well. The minor issues of typos and omissions happen in any book and\nI wouldn’t say any of them are dealbreakers. The book covers a lot of the questions\nI had as I was working through problems - one of the hardest things when trying\nto follow along is having a ‘simple’ question that’s hard to answer yourself. I’ve\nabandoned learning other languages (or at least using specific resources) when I’ve\nhit that point.</p>\n<p>Pandas itself seems like it makes some good choices in terms of <code>Series</code> and <code>DataFrame</code>\nstructures, and when I’m using Python I’ll be sure to load this library and make\nuse of them.</p>\n<p>Comments, improvements, or sharing your experiences are most welcome. I can be found\non <a href=\"https://fosstodon.org/@jonocarroll\" rel=\"nofollow\" target=\"_blank\">Mastodon</a> or use the comments below.</p>\n<br/>\n<details>\n<summary>\n<tt>devtools::session_info()</tt>\n</summary>\n<pre>## ─ Session info ───────────────────────────────────────────────────────────────\n##  setting  value\n##  version  R version 4.4.1 (2024-06-14)\n##  os       macOS Sonoma 14.6\n##  system   aarch64, darwin20\n##  ui       X11\n##  language (EN)\n##  collate  en_US.UTF-8\n##  ctype    en_US.UTF-8\n##  tz       Australia/Adelaide\n##  date     2025-02-13\n##  pandoc   3.2 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/aarch64/ (via rmarkdown)\n## \n## ─ Packages ───────────────────────────────────────────────────────────────────\n##  package     * version    date (UTC) lib source\n##  blogdown      1.19       2024-02-01 [1] CRAN (R 4.4.0)\n##  bookdown      0.41       2024-10-16 [1] CRAN (R 4.4.1)\n##  bslib         0.8.0      2024-07-29 [1] CRAN (R 4.4.0)\n##  cachem        1.1.0      2024-05-16 [1] CRAN (R 4.4.0)\n##  cli           3.6.3      2024-06-21 [1] CRAN (R 4.4.0)\n##  devtools      2.4.5      2022-10-11 [1] CRAN (R 4.4.0)\n##  digest        0.6.37     2024-08-19 [1] CRAN (R 4.4.1)\n##  ellipsis      0.3.2      2021-04-29 [1] CRAN (R 4.4.0)\n##  evaluate      1.0.1      2024-10-10 [1] CRAN (R 4.4.1)\n##  fansi         1.0.6      2023-12-08 [1] CRAN (R 4.4.0)\n##  fastmap       1.2.0      2024-05-15 [1] CRAN (R 4.4.0)\n##  fs            1.6.5      2024-10-30 [1] CRAN (R 4.4.1)\n##  glue          1.8.0      2024-09-30 [1] CRAN (R 4.4.1)\n##  htmltools     0.5.8.1    2024-04-04 [1] CRAN (R 4.4.0)\n##  htmlwidgets   1.6.4      2023-12-06 [1] CRAN (R 4.4.0)\n##  httpuv        1.6.15     2024-03-26 [1] CRAN (R 4.4.0)\n##  jquerylib     0.1.4      2021-04-26 [1] CRAN (R 4.4.0)\n##  jsonlite      1.8.9      2024-09-20 [1] CRAN (R 4.4.1)\n##  knitr         1.48       2024-07-07 [1] CRAN (R 4.4.0)\n##  later         1.4.1      2024-11-27 [1] CRAN (R 4.4.1)\n##  lattice       0.22-6     2024-03-20 [1] CRAN (R 4.4.1)\n##  lifecycle     1.0.4      2023-11-07 [1] CRAN (R 4.4.0)\n##  magrittr      2.0.3      2022-03-30 [1] CRAN (R 4.4.0)\n##  Matrix        1.7-1      2024-10-18 [1] CRAN (R 4.4.1)\n##  memoise       2.0.1      2021-11-26 [1] CRAN (R 4.4.0)\n##  mime          0.12       2021-09-28 [1] CRAN (R 4.4.0)\n##  miniUI        0.1.1.1    2018-05-18 [1] CRAN (R 4.4.0)\n##  pillar        1.9.0      2023-03-22 [1] CRAN (R 4.4.0)\n##  pkgbuild      1.4.5      2024-10-28 [1] CRAN (R 4.4.1)\n##  pkgload       1.4.0      2024-06-28 [1] CRAN (R 4.4.0)\n##  png           0.1-8      2022-11-29 [1] CRAN (R 4.4.0)\n##  profvis       0.4.0      2024-09-20 [1] CRAN (R 4.4.1)\n##  promises      1.3.2      2024-11-28 [1] CRAN (R 4.4.1)\n##  purrr         1.0.2      2023-08-10 [1] CRAN (R 4.4.0)\n##  R6            2.5.1      2021-08-19 [1] CRAN (R 4.4.0)\n##  Rcpp          1.0.13-1   2024-11-02 [1] CRAN (R 4.4.1)\n##  remotes       2.5.0.9000 2024-11-03 [1] Github (r-lib/remotes@5b7eb08)\n##  reticulate    1.40.0     2024-11-15 [1] CRAN (R 4.4.1)\n##  rlang         1.1.4      2024-06-04 [1] CRAN (R 4.4.0)\n##  rmarkdown     2.28       2024-08-17 [1] CRAN (R 4.4.0)\n##  rstudioapi    0.17.1     2024-10-22 [1] CRAN (R 4.4.1)\n##  sass          0.4.9      2024-03-15 [1] CRAN (R 4.4.0)\n##  sessioninfo   1.2.2      2021-12-06 [1] CRAN (R 4.4.0)\n##  shiny         1.9.1      2024-08-01 [1] CRAN (R 4.4.0)\n##  urlchecker    1.0.1      2021-11-30 [1] CRAN (R 4.4.0)\n##  usethis       3.0.0      2024-07-29 [1] CRAN (R 4.4.0)\n##  utf8          1.2.4      2023-10-22 [1] CRAN (R 4.4.0)\n##  vctrs         0.6.5      2023-12-01 [1] CRAN (R 4.4.0)\n##  xfun          0.50.5     2025-01-23 [1] Github (yihui/xfun@116d689)\n##  xtable        1.8-4      2019-04-21 [1] CRAN (R 4.4.0)\n##  yaml          2.3.10     2024-07-26 [1] CRAN (R 4.4.0)\n## \n##  [1] /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library\n## \n## ─ Python configuration ───────────────────────────────────────────────────────\n##  python:         /Users/jono/.virtualenvs/r-reticulate/bin/python\n##  libpython:      /Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/config-3.9-darwin/libpython3.9.dylib\n##  pythonhome:     /Users/jono/.virtualenvs/r-reticulate:/Users/jono/.virtualenvs/r-reticulate\n##  version:        3.9.6 (default, Oct  4 2024, 08:01:31)  [Clang 16.0.0 (clang-1600.0.26.4)]\n##  numpy:          /Users/jono/.virtualenvs/r-reticulate/lib/python3.9/site-packages/numpy\n##  numpy_version:  2.0.2\n##  \n##  NOTE: Python version was forced by use_python() function\n## \n## ──────────────────────────────────────────────────────────────────────────────</pre>\n</details>\n<p><br/></p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://jcarroll.com.au/2025/02/13/book-review-pandas-workout/\"> rstats on Irregularly Scheduled Programming</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Book Review – Pandas Workout\nPosted on\nFebruary 12, 2025\nby\nJonathan Carroll\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nrstats on Irregularly Scheduled Programming\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nPython seems to be everywhere these days, and I’m really into learning languages,\nso it should come as no surprise that I’m learning a lot of Python. This post\nserves as a review of\nPandas Workout\nas well as a\n‘first impression’ review of the Pandas approach to data.\nI am not entirely unfamiliar with Python, but I haven’t really had to do anything\nserious with a lot of data in the way that I do with R. {dplyr} and friends make\nworking with rectangular data so clean and simple; why would I want anything else?\nI recently needed to work with an API that would return some tabular data – it\nenables programmatic communication with a system containing a lot of data, and the\nonly wrapper I could find for it was in Python (and not all that well documented).\nI’ve built\na wrapper\nfor a very similar\nsystem myself using {httr} in R but I didn’t necessarily want to go through all\nof that again. “Fine, I’ll use Python” I said, and promptly realised that I wasn’t\nfamiliar with how to rectangle the resulting data.\nAround the same time as the API needed wrapping I was fortunate enough to be asked\nto review the book\nPandas Workout\nwritten by\nReuven Lerner, from Manning Publications. I really enjoy books from Manning – I\npublished my own book\nBeyond Spreadsheets with R\nwith them and I’m grateful for their DRM-free offerings across a wide range of\ntech topics. What a perfect opportunity! I will note that apart from receiving a\ndigital copy of the book to review, I was not otherwise paid or compensated for\nthis review. If I’m reviewing a book, it’s an honest review.\nAs I’m entirely unfamiliar with Pandas but know enough Python to keep my head above\nwater, this seemed like a good chance to review both at the same time; how well\ndoes this book provide an introduction to Pandas for a newcomer?\nThe subtitle of the book is “200 Exercises to Strengthen Your Data Analysis Skills”\nand it delivers on the ‘exercises’ part, providing real-world data import/cleaning\ntasks that go well beyond a\nmtcars\ndataset.\nI’m halfway through the book, and I’m actually following the exercises by typing out\nmy own solutions in a python file and/or the REPL – “you learn with your hands, not\nyour eyes”.\nThe first problem, since this is python, is getting Pandas to work with a script,\nwhich means dealing with environments, since\npip\nnow tries\nto prevent us from\nmessing up our global package availability\n.\nI figured this was a good time to try out\nuv\nas an alternative to\npip\nand as far as I can tell, this worked well. I\ndon’t have expectations that Pandas Workout should have guided me through any of\nthe “get Python environments working” parts as it does assume Python knowledge,\nbut the author mentions using\npip install pandas\nwhich doesn’t really cut it\n(though plausibly did at the time of writing, April 2024).\nApart from that, it’s just a matter of\nimport pandas as pd\n(and all of the Python code in this post is generated from the code blocks thanks\nto {reticulate} and its virtualenv support).\nThere’s a joke to be made here about my home city Adelaide and the fact that we\nhave once again\nimported some pandas\n.\nimport pandas\nChapter 1 walks through using the\nSeries\ndata type, which for an R user is most\nsimilar to a regular vector, except that there isn’t a strict restriction on the\n‘singular’ type of the elements; if you provide a mixture of types the resulting\nSeries\nwill have\ndtype: object\n. This is, I suspect, a necessity, given that\nPython doesn’t have the ‘classed NA’ values that R uses – all of the elements of\nx <- c(1L, NA, 3L)\nare the same class (‘type’); integer, including the missing value\nx[2]\n## [1] NA\nclass(x[2])\n## [1] \"integer\"\nwhich is actually\nNA_integer_\n.\npd.Series([1, pd.NA, 3])\nstill produces\ndtype: object\n, and can’t be converted to\nnp.int8\n.\nThe first real annoyance comes when describing how indexing works in Pandas vs\nregular Python; the endpoint of the\ns.loc[]\nsyntax is “up to and including”\nwhereas Python would usually use “up to and\nnot\nincluding”. There’s reasons,\nbut things like this are good to keep in the back of one’s mind whenever someone\ncomplains that “R is confusing/inconsistent”. With that said, it’s called out in\nPandas Workout with some concrete examples, so it shouldn’t be a gotcha.\nWhere an inconsistency isn’t so well handled is when mentioning rounding of values;\nPandas Workout suggests\n“Be sure to read the documentation for the round method (\nhttp://mng.bz/8rzg\n)\nto understand its arguments and how it handles numbers like 15 and 75.\nwhich points to the\ndocumentation for\npd.Series.round\nbut that makes no mention of how these halfway values are handled - I dug up the\nanswer myself\nand Pandas\ndoes “banker’s rounding” taking half-values to evens. Trying this out myself\nalso demonstrates this\npd.Series([0.2, 0.5, 1.5, 2.5, 3.5]).round()\n## 0    0.0\n## 1    0.0\n## 2    2.0\n## 3    2.0\n## 4    4.0\n## dtype: float64\nIncidentally, this is the same for R\nround(c(0.2, 0.5, 1.5, 2.5, 3.5))\n## [1] 0 0 2 2 4\nSome additional\nSeries\ngotchas are detailed, including the fact that while this\nmonstrosity works in Python\n'1' + '2' + '3' + '4'\n## '1234'\nand this does not\nsum(['1', '2', '3', '4'])\n## TypeError: unsupported operand type(s) for +: 'int' and 'str'\nthis one does in fact work\npd.Series(['1', '2', '3', '4']).sum()\n## '1234'\nThe similarities between R’s (named) vectors and Pandas’\nSeries\nhelp me to grasp\nwhat I might want to do with these, but there are some distinct differences in\nhow the ‘index’/‘name’ part is handled; In R the names\ncan\nbe repeated, although\nthat makes it very difficult to extract elements based on names\nx <- c(a = 1, b = 2, a = 3, d = 4)\nx\n## a b a d \n## 1 2 3 4\nnames(x)\n## [1] \"a\" \"b\" \"a\" \"d\"\nx[\"a\"]\n## a \n## 1\nwhereas in Pandas the index can be repeated and extracting with a repeated value\nactually returns all the relevant values\nx = pd.Series([1, 2, 3, 4], index=list('abad'))\nx\n## a    1\n## b    2\n## a    3\n## d    4\n## dtype: int64\nx.loc['a']\n## a    1\n## a    3\n## dtype: int64\nwhich means that\nx.loc[z]\nis essentially\nx[names(x) == z]\nx[names(x) == \"a\"]\n## a a \n## 1 3\nAs a sidenote, that “use a list as a series of characters” bit is going to take\nme a while to get used to, but I see the value of it. One of my big regrets about\nR is that strings are\nnot\nvectors of characters; something I worked around by\nmaking\nmy own “character vector” class\n.\nWhat really blew my mind was the behaviour around adding two\nSeries\nwith overlapping\nindexes; the comparison is explicitly based on the index, so\n'a'\nmatches to\n'a'\nand\n'd'\nmatches to\n'd'\nregardless of where they appear in the\nSeries\ns1 = pd.Series([10, 20, 30, 40], index=list('abcd'))\ns1\n## a    10\n## b    20\n## c    30\n## d    40\n## dtype: int64\ns2 = pd.Series([100, 200, 300, 400], index=list('dcba'))\ns2\n## d    100\n## c    200\n## b    300\n## a    400\n## dtype: int64\ns1+s2\n## a    410\n## b    320\n## c    230\n## d    140\n## dtype: int64\nThis seems like such an obvious choice - I had to double check what happens in R\nand a worried look started to creep across my face\ns1 = c(a = 10, b = 20, c = 30, d = 40)\ns1\n##  a  b  c  d \n## 10 20 30 40\ns2 = c(d = 100, c = 200, b = 300, a = 400)\ns2\n##   d   c   b   a \n## 100 200 300 400\ns1 + s2\n##   a   b   c   d \n## 110 220 330 440\noh no!\nR just ignores the names entirely. If I\nwanted\nthe same behaviour, I’d need to\ndo the aligning myself\ns1[order(names(s1))] + s2[order(names(s2))]\n##   a   b   c   d \n## 410 320 230 140\nClosing out the chapter is a set of exercises using some real data. There is a\nlink to that data on the book website, but that location is not mentioned in the\nbook itself, which isn’t ideal. There is a hyperlink in the PDF version\nThe data is in the file\ntaxi-passenger-count.csv\n, available along with the other data files used in this course.\nbut that points to a repository of the\nexercises\n, not the data. I presume the\nprint version lacks a way for the reader to find this data. These sort of\nmistakes happen - I noted some of them on\nManning’s discussion forum\nbut did not\nhear back from the author about any of them yet.\nIt’s worth mentioning that while the data is from the real world and has genuine\n‘problems’ that one would experience when performing an analysis, the data is a\nsingle zip file comprising a whopping 852MB download, which might be a bit much\nfor some people.\nChapter 2 naturally moves on to\nDataFrame\ns; rectangular structures constructed\nas a combination of multiple\nSeries\n(though the only mention along those lines\nseems to be a throwaway comment to that effect).\nThe humble ‘Data Frame’ (\ndata.frame\n) in R is a core data type. I’m not entirely\nclear on the history, but they were present in R’s predecessor language\nS in 1992\nand\nlikely even earlier. Nowadays, lots of Data Frame implementations exist for the\npurpose of rectangling - and slicing thereof - including\nPolars in Rust\n,\nTidier.jl in Julia\n,\ndataframe in Haskell\n,\ndata-frame in Racket\n, and I’m sure many others. This\nstructure resembles a database table and operations on these tend to mimic SQL\nsyntax - think filter, select, join, etc…\nIn R, I know that\ndata.frame\nis\nexplicitly\na “list of vectors all of the\nsame length” but that seems to be glossed over here in favor of “you know about\ntables - this is similar”. The constructor examples show either a list of lists\nor a list of dicts, and that’s perhaps because a list of\nSeries\nobjects doesn’t\ndo what I expect\na = pd.Series([1, 2, 3])\nb = pd.Series([4, 5, 6])\npd.DataFrame([a, b])\n##    0  1  2\n## 0  1  2  3\n## 1  4  5  6\nThe resulting\nDataFrame\nis created row-wise, which is enough of a headache in R,\nlet alone the differences here depending on how the object is created.\nThere are apparently a handful of ways one\ncan\ndo this, but they’re not\nmentioned in the book\na = pd.Series([1, 2, 3])\nb = pd.Series([4, 5, 6])\n\npd.DataFrame({'a':a, 'b':b})\n##    a  b\n## 0  1  4\n## 1  2  5\n## 2  3  6\npd.DataFrame(dict(a=a, b=b))\n##    a  b\n## 0  1  4\n## 1  2  5\n## 2  3  6\npd.concat([a, b], axis=1, keys=list('ab'))\n##    a  b\n## 0  1  4\n## 1  2  5\n## 2  3  6\nI was also curious about what happens if they\naren’t\nthe same length\na = pd.Series([1, 2, 3])\nb = pd.Series([4, 5, 6, 7])\n\npd.DataFrame({'a':a, 'b':b})\n##      a  b\n## 0  1.0  4\n## 1  2.0  5\n## 2  3.0  6\n## 3  NaN  7\nThe inserted\nNaN\nis perhaps potentially surprising; R bails out of trying to\nconstruct such an object\na <- c(1, 2, 3)\nb <- c(4, 5, 6, 7)\n\ndata.frame(a, b)\n## Error in data.frame(a, b): arguments imply differing number of rows: 3, 4\nexcept when it tries to be clever by recycling some values, with often\nsurprising results…\na <- 1:3\nb <- 4:9\n\ndata.frame(a, b)\n##   a b\n## 1 1 4\n## 2 2 5\n## 3 3 6\n## 4 1 7\n## 5 2 8\n## 6 3 9\nThe various methods for subsetting rows and columns mostly makes sense coming from\nR, although it will still take me some time to get used to seeing things like\ndf[list('bcd')]\nto extract the columns labelled\n'b'\n,\n'c'\n, and\n'd'\n. One thing I noticed here\nwas that there was only one axis specified for extraction here (column) and while\nthe same thing works in R, e.g.\nm <- head(mtcars)\nm[c(\"cyl\", \"mpg\", \"wt\")]\n##                   cyl  mpg    wt\n## Mazda RX4           6 21.0 2.620\n## Mazda RX4 Wag       6 21.0 2.875\n## Datsun 710          4 22.8 2.320\n## Hornet 4 Drive      6 21.4 3.215\n## Hornet Sportabout   8 18.7 3.440\n## Valiant             6 18.1 3.460\nthe absence of a note about it was probably an oversight. In R, if the vector\nspecifying the selection contains any missing values (NA) then an error is\ntriggered\nm[c(\"cyl\", NA, \"wt\")]\n## Error in `[.data.frame`(m, c(\"cyl\", NA, \"wt\")): undefined columns selected\nThis is confusing, for sure. R is fine with us selecting missing rows\nm[c(1, NA, 3), ]\n##             mpg cyl disp  hp drat   wt  qsec vs am gear carb\n## Mazda RX4  21.0   6  160 110 3.90 2.62 16.46  0  1    4    4\n## NA           NA  NA   NA  NA   NA   NA    NA NA NA   NA   NA\n## Datsun 710 22.8   4  108  93 3.85 2.32 18.61  1  1    4    1\nbut not missing columns\nm[1:3, c(1, NA, 3)]\n## Error in `[.data.frame`(m, 1:3, c(1, NA, 3)): undefined columns selected\nSo, what about Pandas? The fact that\nx[cols]\nworks to select columns, but\nselecting rows requires\nx.loc[rows, cols]\nis a bit ugly, in my opinion, and\nthere are parallels here with the mess of R’s\ndrop=TRUE\nargument which results in\na vector rather than a\ndata.frame\nwhen only a single dimension is selected.\nx = pd.DataFrame({'a':a, 'b':b})\nx\n##      a  b\n## 0  1.0  4\n## 1  2.0  5\n## 2  3.0  6\n## 3  NaN  7\nx['a']\n## 0    1.0\n## 1    2.0\n## 2    3.0\n## 3    NaN\n## Name: a, dtype: float64\nx.loc[:, 'a']\n## 0    1.0\n## 1    2.0\n## 2    3.0\n## 3    NaN\n## Name: a, dtype: float64\nx.loc[1:2, ['a', 'b']]\n##      a  b\n## 1  2.0  5\n## 2  3.0  6\nx.loc[1:2, ['a', pd.NA]]\n## KeyError: '[<NA>] not in index'\nOne powerful but dangerous feature of {dplyr} (and some parts of base R) is\nNon-Standard Evaluation (NSE) which enables a ‘shortcut’ in writing out expressions\nfor filtering or selecting data in a\ndata.frame\n. Essentially, the user can\nuse column names as variables and they are translated as such within the function,\nso rather than writing out\nfilter(mydataframe, mydataframe$a > 300 & mydataframe$w %% 2 == 1)\none can use the column names ‘a’ and ‘w’ as if they were defined as variables\nfilter(mydataframe, a > 300 & w %% 2 == 1)\nThis is handy, but of course has some sharp edges. I have mixed feelings about\nfinding the equivalent in Pandas in the form of\ndf.query\n. This takes an SQL-like\nstatement and similarly treats columns as variables, but in this case the entire\nthing is provided as a string\ndf.query('v > 300 & w % 2 == 1')\nI imagine this is incompatible with any language-server features, though the\nmetaprogramming-enjoying part of me does wonder if it makes building up these\nexpressions programatically a little easier.\nAnother gotcha mentioned in this section is the fact that Pandas makes internal\ncopies of data, and produces an interesting warning\ndf = pd.DataFrame(\n    {'a': [10, 50, 90],\n     'b': [20, 60, 100],\n     'c': [30, 70, 110],\n     'd': [40, 80, 120]},\n     index = list('xyz'))\ndf[df['b'] > 30]['b'] = 0\ndf\n## <string>:1: SettingWithCopyWarning: \n## A value is trying to be set on a copy of a slice from a DataFrame.\n## Try using .loc[row_indexer,col_indexer] = value instead\n## \n## See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy\n(with the value not being set to 0).\nThis is reminiscent of SQL ‘views’ into data - and not being able to modify\nthose - and that seems like a useful feature, but it again makes me wonder what\nhappens in R…\ndf <- data.frame(a = c(10, 50, 90),\n                 b = c(20, 60, 100),\n                 c = c(30, 70, 110), \n                 d = c(40, 80, 120), \n                 row.names = c(\"x\", \"y\", \"z\"))\ndfo <- df\ndf\n##    a   b   c   d\n## x 10  20  30  40\n## y 50  60  70  80\n## z 90 100 110 120\nThe following updates all of the\nb\ncolumn because as we saw above, just\nspecifying a single selector restricts the columns, so since\ndf$b > 30\nis\nc(FALSE, TRUE, TRUE)\nthe intermediate subset is just the second and third\ncolumns (“b” and “c”) after which we select the “b” column and assign the value\nof\n0\nto all elements. No actual filtering of rows has occurred here, and the\nentire column in the full data is updated\ndf[df$b > 30][\"b\"] <- 0 \ndf\n##    a b   c   d\n## x 10 0  30  40\n## y 50 0  70  80\n## z 90 0 110 120\nEquivalently,\n[][[\"b\"]]\nor\n[]$b\n.\nIn order to select rows for which\nb > 30\nthis needs to\ndf[df$b > 30, ]\n(with\na comma), and this updates just the relevant slice (again in the full data)\ndf <- dfo\ndf[df$b > 30, ]$b <- 0 \ndf\n##    a  b   c   d\n## x 10 20  30  40\n## y 50  0  70  80\n## z 90  0 110 120\nand this works just fine in R, despite the fact that we have explicitly subset\nthe data prior to selecting a column, and assigned a value to that subset.\nMaybe that warning isn’t a bad thing at all - such subsets are done regularly in\nR, and there’s no memory issues with doing so (it’s well-defined in terms of\n[.<-\n)\nbut I can see why it’s confusing.\nChapter 3 details importing and exporting data, and it’s here that I start to see\nhow much has been rolled into Pandas - things that are spread across several R\npackages.\nI’m familiar with scraping HTML tables from websites in R - there are many base\npackages which can read from a URL, and several ways to convert the resulting\ndata into a rectangle such as a\ndata.frame\n, but Pandas surprises me with\npd.read_html(url)\nwhich returns a list of\nDataFrame\ns, one for each table on a\nwebpage. Trying this out, it works quite nicely\nurl = 'https://en.wikipedia.org/wiki/R_(programming_language)#Version_names'\ntabs = pd.read_html(url)[1]\nx=tabs.loc[:,['Version', 'Name', 'Release date']]\nx\n##     Version                      Name Release date\n## 0     4.4.2            Pile of Leaves   2024-10-31\n## 1     4.4.1        Race for Your Life   2024-06-14\n## 2     4.4.0                 Puppy Cup   2024-04-24\n## 3     4.3.3           Angel Food Cake   2024-02-29\n## 4     4.3.2                 Eye Holes   2023-10-31\n## 5     4.3.1             Beagle Scouts   2023-06-16\n## 6     4.3.0          Already Tomorrow   2023-04-21\n## 7     4.2.3          Shortstop Beagle   2023-03-15\n## 8     4.2.2     Innocent and Trusting   2022-10-31\n## 9     4.2.1         Funny-Looking Kid   2022-06-23\n## 10    4.2.0     Vigorous Calisthenics   2022-04-22\n## 11    4.1.3               One Push-Up   2022-03-10\n## 12    4.1.2               Bird Hippie   2021-11-01\n## 13    4.1.1               Kick Things   2021-08-10\n## 14    4.1.0           Camp Pontanezen   2021-05-18\n## 15    4.0.5           Shake and Throw   2021-03-31\n## 16    4.0.4         Lost Library Book   2021-02-15\n## 17    4.0.3   Bunny-Wunnies Freak Out   2020-10-10\n## 18    4.0.2          Taking Off Again   2020-06-22\n## 19    4.0.1            See Things Now   2020-06-06\n## 20    4.0.0                 Arbor Day   2020-04-24\n## 21    3.6.3      Holding the Windsock   2020-02-29\n## 22    3.6.2     Dark and Stormy Night   2019-12-12\n## 23    3.6.1        Action of the Toes   2019-07-05\n## 24    3.6.0        Planting of a Tree   2019-04-26\n## 25    3.5.3               Great Truth   2019-03-11\n## 26    3.5.2           Eggshell Igloos   2018-12-20\n## 27    3.5.1             Feather Spray   2018-07-02\n## 28    3.5.0            Joy in Playing   2018-04-23\n## 29    3.4.4        Someone to Lean On   2018-03-15\n## 30    3.4.3          Kite-Eating Tree   2017-11-30\n## 31    3.4.2              Short Summer   2017-09-28\n## 32    3.4.1             Single Candle   2017-06-30\n## 33    3.4.0       You Stupid Darkness   2017-04-21\n## 34    3.3.3             Another Canoe   2017-03-06\n## 35    3.3.2     Sincere Pumpkin Patch   2016-10-31\n## 36    3.3.1          Bug in Your Hair   2016-06-21\n## 37    3.3.0    Supposedly Educational   2016-05-03\n## 38    3.2.5  Very, Very Secure Dishes   2016-04-11\n## 39    3.2.4        Very Secure Dishes   2016-03-11\n## 40    3.2.3     Wooden Christmas-Tree   2015-12-10\n## 41    3.2.2               Fire Safety   2015-08-14\n## 42    3.2.1    World-Famous Astronaut   2015-06-18\n## 43    3.2.0       Full of Ingredients   2015-04-16\n## 44    3.1.3           Smooth Sidewalk   2015-03-09\n## 45    3.1.2            Pumpkin Helmet   2014-10-31\n## 46    3.1.1             Sock it to Me   2014-07-10\n## 47    3.1.0              Spring Dance   2014-04-10\n## 48    3.0.3                Warm Puppy   2014-03-06\n## 49    3.0.2           Frisbee Sailing   2013-09-25\n## 50    3.0.1                Good Sport   2013-05-16\n## 51    3.0.0             Masked Marvel   2013-04-03\n## 52   2.15.3          Security Blanket   2013-03-01\n## 53   2.15.2            Trick or Treat   2012-10-26\n## 54   2.15.1      Roasted Marshmallows   2012-06-22\n## 55   2.15.0             Easter Beagle   2012-03-30\n## 56   2.14.2       Gift-Getting Season   2012-02-29\n## 57   2.14.1       December Snowflakes   2011-12-22\n## 58   2.14.0             Great Pumpkin   2011-10-31\n## 59  r-devel   Unsuffered Consequences          NaN\nI’m all too familiar with issues of nested tables and data that doesn’t rectangle\nso easily, but for this simple example it worked well, I think.\nChapter 4 covers indexes and again the idea of repeated values comes into play. The\nlong-standing issue that the {tibble} team have with rownames comes to mind - I\nlike being able to name both axes of the data and hate that {tibble} is opposed\nto them - so it’s extra surprising to have a Data Frame where the ‘row’ labels\ncan repeat. What’s more, the index can be hierarchical as a multi-index. With the\nexample from above, splitting the version into a multi-index is interesting\nv=x.Version.str.split('.', expand=True)\nv.columns=['major', 'minor', 'patch']\nxv=pd.concat([x, v], axis=1)\nxv=xv.set_index(['major','minor','patch'])\nxv.head(25)\n##                   Version                     Name Release date\n## major minor patch                                              \n## 4     4     2       4.4.2           Pile of Leaves   2024-10-31\n##             1       4.4.1       Race for Your Life   2024-06-14\n##             0       4.4.0                Puppy Cup   2024-04-24\n##       3     3       4.3.3          Angel Food Cake   2024-02-29\n##             2       4.3.2                Eye Holes   2023-10-31\n##             1       4.3.1            Beagle Scouts   2023-06-16\n##             0       4.3.0         Already Tomorrow   2023-04-21\n##       2     3       4.2.3         Shortstop Beagle   2023-03-15\n##             2       4.2.2    Innocent and Trusting   2022-10-31\n##             1       4.2.1        Funny-Looking Kid   2022-06-23\n##             0       4.2.0    Vigorous Calisthenics   2022-04-22\n##       1     3       4.1.3              One Push-Up   2022-03-10\n##             2       4.1.2              Bird Hippie   2021-11-01\n##             1       4.1.1              Kick Things   2021-08-10\n##             0       4.1.0          Camp Pontanezen   2021-05-18\n##       0     5       4.0.5          Shake and Throw   2021-03-31\n##             4       4.0.4        Lost Library Book   2021-02-15\n##             3       4.0.3  Bunny-Wunnies Freak Out   2020-10-10\n##             2       4.0.2         Taking Off Again   2020-06-22\n##             1       4.0.1           See Things Now   2020-06-06\n##             0       4.0.0                Arbor Day   2020-04-24\n## 3     6     3       3.6.3     Holding the Windsock   2020-02-29\n##             2       3.6.2    Dark and Stormy Night   2019-12-12\n##             1       3.6.1       Action of the Toes   2019-07-05\n##             0       3.6.0       Planting of a Tree   2019-04-26\nThis does mean that I can extract all of the 4.3.x series releases\nxv.loc[('4', '3')]\n## <string>:1: PerformanceWarning: indexing past lexsort depth may impact performance.\n##       Version              Name Release date\n## patch                                       \n## 3       4.3.3   Angel Food Cake   2024-02-29\n## 2       4.3.2         Eye Holes   2023-10-31\n## 1       4.3.1     Beagle Scouts   2023-06-16\n## 0       4.3.0  Already Tomorrow   2023-04-21\nGetting the x.x.0 releases is a little messier, requiring\nslice(None)\nxv.loc[(slice(None), slice(None), '0')] \n##             Version                    Name Release date\n## major minor                                             \n## 4     4       4.4.0               Puppy Cup   2024-04-24\n##       3       4.3.0        Already Tomorrow   2023-04-21\n##       2       4.2.0   Vigorous Calisthenics   2022-04-22\n##       1       4.1.0         Camp Pontanezen   2021-05-18\n##       0       4.0.0               Arbor Day   2020-04-24\n## 3     6       3.6.0      Planting of a Tree   2019-04-26\n##       5       3.5.0          Joy in Playing   2018-04-23\n##       4       3.4.0     You Stupid Darkness   2017-04-21\n##       3       3.3.0  Supposedly Educational   2016-05-03\n##       2       3.2.0     Full of Ingredients   2015-04-16\n##       1       3.1.0            Spring Dance   2014-04-10\n##       0       3.0.0           Masked Marvel   2013-04-03\n## 2     15     2.15.0           Easter Beagle   2012-03-30\n##       14     2.14.0           Great Pumpkin   2011-10-31\nand while this was interesting to achieve, a filter would probably be better\nxv=pd.concat([x, v], axis=1)\nxv.query('patch == \"0\"')\n##    Version                    Name Release date major minor patch\n## 2    4.4.0               Puppy Cup   2024-04-24     4     4     0\n## 6    4.3.0        Already Tomorrow   2023-04-21     4     3     0\n## 10   4.2.0   Vigorous Calisthenics   2022-04-22     4     2     0\n## 14   4.1.0         Camp Pontanezen   2021-05-18     4     1     0\n## 20   4.0.0               Arbor Day   2020-04-24     4     0     0\n## 24   3.6.0      Planting of a Tree   2019-04-26     3     6     0\n## 28   3.5.0          Joy in Playing   2018-04-23     3     5     0\n## 33   3.4.0     You Stupid Darkness   2017-04-21     3     4     0\n## 37   3.3.0  Supposedly Educational   2016-05-03     3     3     0\n## 43   3.2.0     Full of Ingredients   2015-04-16     3     2     0\n## 47   3.1.0            Spring Dance   2014-04-10     3     1     0\n## 51   3.0.0           Masked Marvel   2013-04-03     3     0     0\n## 55  2.15.0           Easter Beagle   2012-03-30     2    15     0\n## 58  2.14.0           Great Pumpkin   2011-10-31     2    14     0\nI believe\nthat\nis the {tibble} team’s argument - that a filter is more suitable,\nbut I stand by the fact that selecting rows with names which don’t need to be\nin\nthe data itself is a useful approach.\nThis chapter also introduces pivot tables in the form of\ndf.pivot_table(index, columns, values, aggfunc)\nthe equivalent of which in {dplyr} is\ndplyr::summarise()\nor\ndplyr::count()\n.\nWay back when I started learning R I recall finding it odd that the (often useful)\nname “pivot table” rarely came up in R documentation, which is a bit of a shame.\nI used them\nall the time\nin Excel.\nxv.pivot_table(index='major', \n               columns='minor', \n               values='patch', \n               aggfunc='count', \n               fill_value=0)\n## minor  0  1  14  15  2  3  4  5  6\n## major                             \n## 2      0  0   3   4  0  0  0  0  0\n## 3      4  4   0   0  6  4  5  4  4\n## 4      6  4   0   0  4  4  3  0  0\nMy major complaint here is that the function is passed as a string - Y U NO use\nfirst class functions???\nMy notes for Chapter 5 (Cleaning Data) only involve the fact that\npd.isna\nand\npd.isnull\nare apparently the exact same thing, which is vastly different from R.\nFor Chapter 6 (Grouping, joining, and sorting) I have a rekindled annoyance at the\nmixing of methods and attributes driven by the fact that\ndf.transpose()\n(a method)\nhas an alias\ndf.T\n. I have enough of a hard time trying to remember whether\nit’s\nx.len\nor\nx.len()\nor\nlength(x)\nor whatever.\nI will continue to make my way through the rest of the book, but figured this\nwas a good point to take stock of how I feel about it and how much I’ve learned.\nI’m already able to work with the API I was trying to and can rectangle the\nresults into something useful, including being able to save those as a CSV or\neven Excel sheet(s).\nPandas Workout is, in my opinion, a good resource for learning Pandas providing\nyou already know your way around Python and perhaps data analysis in another\nlanguage as well. The minor issues of typos and omissions happen in any book and\nI wouldn’t say any of them are dealbreakers. The book covers a lot of the questions\nI had as I was working through problems - one of the hardest things when trying\nto follow along is having a ‘simple’ question that’s hard to answer yourself. I’ve\nabandoned learning other languages (or at least using specific resources) when I’ve\nhit that point.\nPandas itself seems like it makes some good choices in terms of\nSeries\nand\nDataFrame\nstructures, and when I’m using Python I’ll be sure to load this library and make\nuse of them.\nComments, improvements, or sharing your experiences are most welcome. I can be found\non\nMastodon\nor use the comments below.\ndevtools::session_info()\n## ─ Session info ───────────────────────────────────────────────────────────────\n##  setting  value\n##  version  R version 4.4.1 (2024-06-14)\n##  os       macOS Sonoma 14.6\n##  system   aarch64, darwin20\n##  ui       X11\n##  language (EN)\n##  collate  en_US.UTF-8\n##  ctype    en_US.UTF-8\n##  tz       Australia/Adelaide\n##  date     2025-02-13\n##  pandoc   3.2 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/aarch64/ (via rmarkdown)\n## \n## ─ Packages ───────────────────────────────────────────────────────────────────\n##  package     * version    date (UTC) lib source\n##  blogdown      1.19       2024-02-01 [1] CRAN (R 4.4.0)\n##  bookdown      0.41       2024-10-16 [1] CRAN (R 4.4.1)\n##  bslib         0.8.0      2024-07-29 [1] CRAN (R 4.4.0)\n##  cachem        1.1.0      2024-05-16 [1] CRAN (R 4.4.0)\n##  cli           3.6.3      2024-06-21 [1] CRAN (R 4.4.0)\n##  devtools      2.4.5      2022-10-11 [1] CRAN (R 4.4.0)\n##  digest        0.6.37     2024-08-19 [1] CRAN (R 4.4.1)\n##  ellipsis      0.3.2      2021-04-29 [1] CRAN (R 4.4.0)\n##  evaluate      1.0.1      2024-10-10 [1] CRAN (R 4.4.1)\n##  fansi         1.0.6      2023-12-08 [1] CRAN (R 4.4.0)\n##  fastmap       1.2.0      2024-05-15 [1] CRAN (R 4.4.0)\n##  fs            1.6.5      2024-10-30 [1] CRAN (R 4.4.1)\n##  glue          1.8.0      2024-09-30 [1] CRAN (R 4.4.1)\n##  htmltools     0.5.8.1    2024-04-04 [1] CRAN (R 4.4.0)\n##  htmlwidgets   1.6.4      2023-12-06 [1] CRAN (R 4.4.0)\n##  httpuv        1.6.15     2024-03-26 [1] CRAN (R 4.4.0)\n##  jquerylib     0.1.4      2021-04-26 [1] CRAN (R 4.4.0)\n##  jsonlite      1.8.9      2024-09-20 [1] CRAN (R 4.4.1)\n##  knitr         1.48       2024-07-07 [1] CRAN (R 4.4.0)\n##  later         1.4.1      2024-11-27 [1] CRAN (R 4.4.1)\n##  lattice       0.22-6     2024-03-20 [1] CRAN (R 4.4.1)\n##  lifecycle     1.0.4      2023-11-07 [1] CRAN (R 4.4.0)\n##  magrittr      2.0.3      2022-03-30 [1] CRAN (R 4.4.0)\n##  Matrix        1.7-1      2024-10-18 [1] CRAN (R 4.4.1)\n##  memoise       2.0.1      2021-11-26 [1] CRAN (R 4.4.0)\n##  mime          0.12       2021-09-28 [1] CRAN (R 4.4.0)\n##  miniUI        0.1.1.1    2018-05-18 [1] CRAN (R 4.4.0)\n##  pillar        1.9.0      2023-03-22 [1] CRAN (R 4.4.0)\n##  pkgbuild      1.4.5      2024-10-28 [1] CRAN (R 4.4.1)\n##  pkgload       1.4.0      2024-06-28 [1] CRAN (R 4.4.0)\n##  png           0.1-8      2022-11-29 [1] CRAN (R 4.4.0)\n##  profvis       0.4.0      2024-09-20 [1] CRAN (R 4.4.1)\n##  promises      1.3.2      2024-11-28 [1] CRAN (R 4.4.1)\n##  purrr         1.0.2      2023-08-10 [1] CRAN (R 4.4.0)\n##  R6            2.5.1      2021-08-19 [1] CRAN (R 4.4.0)\n##  Rcpp          1.0.13-1   2024-11-02 [1] CRAN (R 4.4.1)\n##  remotes       2.5.0.9000 2024-11-03 [1] Github (r-lib/remotes@5b7eb08)\n##  reticulate    1.40.0     2024-11-15 [1] CRAN (R 4.4.1)\n##  rlang         1.1.4      2024-06-04 [1] CRAN (R 4.4.0)\n##  rmarkdown     2.28       2024-08-17 [1] CRAN (R 4.4.0)\n##  rstudioapi    0.17.1     2024-10-22 [1] CRAN (R 4.4.1)\n##  sass          0.4.9      2024-03-15 [1] CRAN (R 4.4.0)\n##  sessioninfo   1.2.2      2021-12-06 [1] CRAN (R 4.4.0)\n##  shiny         1.9.1      2024-08-01 [1] CRAN (R 4.4.0)\n##  urlchecker    1.0.1      2021-11-30 [1] CRAN (R 4.4.0)\n##  usethis       3.0.0      2024-07-29 [1] CRAN (R 4.4.0)\n##  utf8          1.2.4      2023-10-22 [1] CRAN (R 4.4.0)\n##  vctrs         0.6.5      2023-12-01 [1] CRAN (R 4.4.0)\n##  xfun          0.50.5     2025-01-23 [1] Github (yihui/xfun@116d689)\n##  xtable        1.8-4      2019-04-21 [1] CRAN (R 4.4.0)\n##  yaml          2.3.10     2024-07-26 [1] CRAN (R 4.4.0)\n## \n##  [1] /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library\n## \n## ─ Python configuration ───────────────────────────────────────────────────────\n##  python:         /Users/jono/.virtualenvs/r-reticulate/bin/python\n##  libpython:      /Library/Developer/CommandLineTools/Library/Frameworks/Python3.framework/Versions/3.9/lib/python3.9/config-3.9-darwin/libpython3.9.dylib\n##  pythonhome:     /Users/jono/.virtualenvs/r-reticulate:/Users/jono/.virtualenvs/r-reticulate\n##  version:        3.9.6 (default, Oct  4 2024, 08:01:31)  [Clang 16.0.0 (clang-1600.0.26.4)]\n##  numpy:          /Users/jono/.virtualenvs/r-reticulate/lib/python3.9/site-packages/numpy\n##  numpy_version:  2.0.2\n##  \n##  NOTE: Python version was forced by use_python() function\n## \n## ──────────────────────────────────────────────────────────────────────────────\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nrstats on Irregularly Scheduled Programming\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "Python seems to be everywhere these days, and I’m really into learning languages, so it should come as no surprise that I’m learning a lot of Python. This post serves as a review of Pandas Workout as well as a ‘first impression’ review of the Pandas a...",
    "meta_keywords": null,
    "og_description": "Python seems to be everywhere these days, and I’m really into learning languages, so it should come as no surprise that I’m learning a lot of Python. This post serves as a review of Pandas Workout as well as a ‘first impression’ review of the Pandas a...",
    "og_image": "https://jcarroll.com.au/2025/02/13/book-review-pandas-workout/images/snakes.jpg",
    "og_title": "Book Review – Pandas Workout | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 30.3,
    "sitemap_lastmod": null,
    "twitter_description": "Python seems to be everywhere these days, and I’m really into learning languages, so it should come as no surprise that I’m learning a lot of Python. This post serves as a review of Pandas Workout as well as a ‘first impression’ review of the Pandas a...",
    "twitter_title": "Book Review – Pandas Workout | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/02/book-review-pandas-workout/",
    "word_count": 6060
  }
}