{
  "uuid": "f966dff6-e065-436c-9b6e-41b98bbc84d9",
  "created_at": "2025-11-22 19:59:20",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/02/creating-r-python-stata-and-julia-tutorial-worksheets-with-and-without-solutions-using-quarto/",
    "crawled_at": "2025-11-22T10:54:33.080064",
    "external_links": [
      {
        "href": "https://remlapmot.github.io/post/2025/quarto-conditional-content/",
        "text": "R | Dr Tom Palmer"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://remlapmot.github.io/knitexercise/",
        "text": "knitexercise"
      },
      {
        "href": "https://bookdown.org/yihui/rmarkdown-cookbook/r-code.html",
        "text": "feature of R Markdown"
      },
      {
        "href": "https://quarto.org/docs/tools/rstudio.html#knitr-engine",
        "text": "! expr ...YAML tag literal"
      },
      {
        "href": "https://nrennie.rbind.io/blog/r-tutorial-worksheets-quarto/",
        "text": "Nicola Rennie"
      },
      {
        "href": "https://quarto.org/docs/authoring/conditional.html",
        "text": "conditional content classes"
      },
      {
        "href": "https://quarto.org/docs/computations/inline-code.html#markdown-output",
        "text": "I()function"
      },
      {
        "href": "https://quarto.org/docs/computations/parameters.html#jupyter",
        "text": "Quarto’s parameters feature"
      },
      {
        "href": "https://hugetim.github.io/nbstata/",
        "text": "nbstata Jupyter kernel"
      },
      {
        "href": "https://www.stata.com/manuals/pdisplay.pdf",
        "text": "displaycommand"
      },
      {
        "href": "https://quarto.org/docs/projects/environment.html",
        "text": "_environmentfile"
      },
      {
        "href": "https://pypi.org/project/python-dotenv/",
        "text": "dotenvpackage"
      },
      {
        "href": "https://juliapackages.com/p/dotenv",
        "text": "DotEnvpackage"
      },
      {
        "href": "https://remlapmot.github.io/post/2025/quarto-conditional-content/",
        "text": "R | Dr Tom Palmer"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Creating R, Python, Stata, and Julia tutorial worksheets (with and without solutions) using Quarto | R-bloggers",
    "images": [
      {
        "alt": "Screenshot of the injected parameters cell in a Quarto document.",
        "base64": "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
        "src": "https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif"
      },
      {
        "alt": "Screenshot of the injected parameters cell in a Quarto document.",
        "base64": null,
        "src": "https://i2.wp.com/remlapmot.github.io/post/2025/quarto-conditional-content/img/injected-parameters-cell.png?w=450&ssl=1"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/r-dr-tom-palmer/",
        "text": "R | Dr Tom Palmer"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-390681 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Creating R, Python, Stata, and Julia tutorial worksheets (with and without solutions) using Quarto</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">February 17, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/r-dr-tom-palmer/\">R | Dr Tom Palmer</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://remlapmot.github.io/post/2025/quarto-conditional-content/\"> R | Dr Tom Palmer</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47--><h2 id=\"introduction\">Introduction</h2>\n<p>I regularly need to produce exercises/tutorials for my students. One fantastic feature of R Markdown is that it allows me to create one R Markdown document which can be rendered to both the question document and the solutions document. This is achieved by toggling knitr chunk options such as eval, echo, and include, and using asis chunks to include the text for the solutions. I wrote a little package, \n<a href=\"https://remlapmot.github.io/knitexercise/\" rel=\"nofollow\" target=\"_blank\"><strong>knitexercise</strong></a> to help with this.</p>\n<p>The toggling of the knitr chunk options can be parameterised making it possible to have an R script which contains the code to conveniently produce both questions and solutions documents. An example R Markdown file, <em>exercise.Rmd</em>, might look like the following.</p>\n<pre>---\ntitle: \"`r params$title`\"\noutput: html_document\nparams:\n  solutions: TRUE\n  title: \"Example exercise: Solutions\"\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(include = params$solutions)\n```\n\n1. This is question 1. Which might have some R code you always want to show.\n\n   ```{r, include=TRUE}\n   # example code for the question\n   ```\n\n   ```{asis}\n   Paragraph text for the solution can be kept in the document in an `asis` chunk.\n   And solution R code in an `r` chunk.\n   Both of these will use the `include` value from the `setup` chunk.\n   ```\n    \n   ```{r}\n   # example code for the solution\n   ```\n\n2. This is question 2 ...\n</pre>\n<p>And the rendering script might look like this.</p>\n<pre>rmarkdown::render(\"exercise.Rmd\",\n  output_file = \"exercise-questions\",\n  params = list(solutions = FALSE, title = \"Example exercise: Questions\")\n)\n\nrmarkdown::render(\"exercise.Rmd\",\n  output_file = \"exercise-solutions\"\n)\n</pre>\n<h3 id=\"inline-code\">Inline code</h3>\n<p>Inline code has been a \n<a href=\"https://bookdown.org/yihui/rmarkdown-cookbook/r-code.html\" rel=\"nofollow\" target=\"_blank\">feature of R Markdown</a> for a while. Yihui Xie and Christophe Dervieux have used it to pull off some fantastic tricks. My favourite trick is using it to programmatically write out R Markdown/Markdown code within an R Markdown document when a certain condition is met.</p>\n<pre>`r if (knitr::is_latex_output()) \"...some_Markdown_to_include_when_rendering_to_pdf...\"`\n</pre>\n<h3 id=\"the-problem\">The problem</h3>\n<p>R Markdown is incredibly flexible because we can include R objects as document and chunk options. When translating this to a pure Quarto version we can do this in a document using in the knitr engine using the \n<a href=\"https://quarto.org/docs/tools/rstudio.html#knitr-engine\" rel=\"nofollow\" target=\"_blank\"><code>! expr ...</code> YAML tag literal</a>. As far as I am aware, this is not yet possible for any other Quarto engine. Despite this my aim was to see whether I could achieve parameterised conditional content inclusion/exclusion in a Quarto document using other engines.</p>\n<h2 id=\"programmatically-including-conditional-content-in-quarto-documents\">Programmatically including conditional content in Quarto documents</h2>\n<h3 id=\"r-knitr-and-quarto\">R: knitr and Quarto</h3>\n<p>I have already shown the R Markdown approach above.</p>\n<p>For Quarto using the knitr engine, in a blog post \n<a href=\"https://nrennie.rbind.io/blog/r-tutorial-worksheets-quarto/\" rel=\"nofollow\" target=\"_blank\">Nicola Rennie</a> used inline code to write out Quarto’s \n<a href=\"https://quarto.org/docs/authoring/conditional.html\" rel=\"nofollow\" target=\"_blank\">conditional content classes</a>.</p>\n<pre>---\nformat: html\nparams:\n  hide_answers: true\n---\n\n```{r}\n#| include: false\n# An R code chunk, so inline code is not first in document.\n```\n\n`r if (params$hide_answers) \"::: {.content-hidden}\"`\n\nText and code for answers.\n\n`r if (params$hide_answers) \":::\"`\n</pre>\n<p>Note that if you use the curly braces around the <code>r</code> to write you inline code then you need to enclose the output string in the \n<a href=\"https://quarto.org/docs/computations/inline-code.html#markdown-output\" rel=\"nofollow\" target=\"_blank\"><code>I()</code> function</a> as follows.</p>\n<pre>`{r} if (params$hide_answers) I(\"::: {.content-hidden}\")`\n</pre>\n<p>Then we can have a shell script to render our questions and solutions documents as follows.</p>\n<pre>quarto render exercise-r.qmd -o exercise-r-questions.html\nquarto render exercise-r.qmd -P hide_answers:false -o exercise-r-solutions.html\n</pre>\n<h3 id=\"python\">Python</h3>\n<p>I realised I could adapt Nicola Rennie’s approach for other engines. For the <code>jupyter: python3</code> engine we can do so as follows, the following code uses \n<a href=\"https://quarto.org/docs/computations/parameters.html#jupyter\" rel=\"nofollow\" target=\"_blank\">Quarto’s parameters feature</a>.</p>\n<pre>---\nformat: html\njupyter: python3\n---\n\n```{python}\n#| include: false\n#| tags: [parameters]\nhide_answers = True\n```\n\n```{python}\n#| include: false\nfrom IPython.display import Markdown\n```\n\n`{python} Markdown(\"::: {.content-hidden}\") if hide_answers else Markdown(\" \")`\n\n```{python}\nprint(\"Hidden in questions\")\n```\n\n`{python} Markdown(\":::\") if hide_answers else Markdown(\" \")`\n</pre>\n<p>The shell script to render our questions and solutions documents is as follows.</p>\n<pre>quarto render exercise-python.qmd -o exercise-python-questions.html\nquarto render exercise-python.qmd -P hide_answers:False -o exercise-python-solutions.html\n</pre>\n<p>The only problem with this is that currently the Papermill output cell about the injected parameters is printed in the document.</p>\n<img alt=\"Screenshot of the injected parameters cell in a Quarto document.\" data-lazy-src=\"https://i2.wp.com/remlapmot.github.io/post/2025/quarto-conditional-content/img/injected-parameters-cell.png?w=450&amp;ssl=1\" data-recalc-dims=\"1\" src=\"https://www.r-bloggers.com/wp-content/plugins/jetpack/modules/lazy-images/images/1x1.trans.gif\" style=\"display: block; margin: auto;\"/><noscript><img alt=\"Screenshot of the injected parameters cell in a Quarto document.\" data-recalc-dims=\"1\" src=\"https://i2.wp.com/remlapmot.github.io/post/2025/quarto-conditional-content/img/injected-parameters-cell.png?w=450&amp;ssl=1\" style=\"display: block; margin: auto;\"/></noscript>\n<p>In Jupyter this can apparently be suppressed by passing the <code>--report-mode</code> flag, but I couldn’t work out how to do that in Quarto. I believe it will be possible to suppress this output in future versions of Quarto (I’m using the current latest release version of Quarto 1.6.40).</p>\n<h3 id=\"stata\">Stata</h3>\n<p>The Stata case involved two additional tricks. First, the \n<a href=\"https://hugetim.github.io/nbstata/\" rel=\"nofollow\" target=\"_blank\">nbstata Jupyter kernel</a> allows inline code, however this must be a \n<a href=\"https://www.stata.com/manuals/pdisplay.pdf\" rel=\"nofollow\" target=\"_blank\"><code>display</code> command</a>, so we cannot write the if statement within the inline code. I found I can overcome this by saving the different strings in scalars (because the inline code can’t use local macros) at the top of the document as follows. Second, I didn’t try but I suspect the nbstata kernel doesn’t support parameters, and so I achieved the toggling of the code using an environmental variable, e.g. <code>HIDE_ANSWERS_STATA</code>.</p>\n<pre>---\nformat: html\njupyter: nbstata\n---\n\n```{stata}\n*| include: false\nlocal hide_answers : env HIDE_ANSWERS_STATA\nif (`hide_answers') {\n    scalar hide_answers_open = \"::: {.content-hidden}\"\n    scalar hide_answers_close = \":::\"     \n}\nelse {\n    scalar hide_answers_open = \" \"\n    scalar hide_answers_close = \" \"\n}\n```\n\n`{stata} scalar(hide_answers_open)`\n\n```{stata}\ndisplay \"Hidden in questions\"\n```\n\n`{stata} scalar(hide_answers_close)`\n</pre>\n<p>The shell script to render the documents is then as follows, here we define the environment variable before the call to <code>quarto</code>.</p>\n<pre>HIDE_ANSWERS_STATA=1 quarto render exercise-stata.qmd -o exercise-stata-questions.html\nHIDE_ANSWERS_STATA=0 quarto render exercise-stata.qmd -o exercise-stata-solutions.html\n</pre>\n<h3 id=\"julia\">Julia</h3>\n<p>For the native Julia engine I found that Quarto’s parameterisation worked and that I could avoid the inclusion of the injected parameters cell output by leaving the chunk with the <code>parameters</code> tag empty.</p>\n<pre>---\nformat: html\nengine: julia\n---\n\n```{julia}\n#| tags: [parameters]\n```\n\n```{julia}\n#| include: false\nusing Markdown\n```\n\n`{julia} hide_answers ? md\"::: {.content-hidden}\" : md\"\"`\n\n```{julia}\nprintln(\"Hidden in questions\")\n```\n\n`{julia} hide_answers ? md\":::\" : md\"\"`\n</pre>\n<p>The shell script to render the documents is then as follows.</p>\n<pre>quarto render exercise-julia.qmd -P hide_answers:true -o exercise-julia-questions.html\nquarto render exercise-julia.qmd -P hide_answers:false -o exercise-julia-solutions.html\n</pre>\n<h2 id=\"problems-with-environment-variables\">Problems with environment variables</h2>\n<p>I found that passing environment variables, to the <code>jupyter: python3</code> and <code>engine: julia</code> is unreliable/broken. Admittedly, I was not using Quarto in project mode with an \n<a href=\"https://quarto.org/docs/projects/environment.html\" rel=\"nofollow\" target=\"_blank\"><em>_environment</em> file</a>, but honestly it doesn’t feel to me I should need to do that for a single document.</p>\n<p>The problem I found was that after a first render the value of the environment variable seems to be cached within the Quarto output document and I couldn’t change it on subsequent renders. I also found that using the \n<a href=\"https://pypi.org/project/python-dotenv/\" rel=\"nofollow\" target=\"_blank\"><strong>dotenv</strong> package</a> to access was broken in the same way.</p>\n<p>For <code>engine: julia</code> I also found that passing environment variables is unreliable and like for the <code>jupyter: python3</code> engine I experienced environment variable values being stuck after the first render. However, using the Julia \n<a href=\"https://juliapackages.com/p/dotenv\" rel=\"nofollow\" target=\"_blank\"><strong>DotEnv</strong> package</a> did seem to be reliable.</p>\n<h2 id=\"summary\">Summary</h2>\n<p>I have shown how to programmatically include conditional content for several Quarto engines (<code>knitr</code>, <code>jupyter: python3</code>, <code>jupyter: nbstata</code>, and <code>engine: julia</code>) using parameters or environment variables to toggle inline code to write Quarto Markdown in the Quarto documents. I use this to write exercise/tutorial documents in which a single Quarto document is used to output both the questions and solutions documents.</p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://remlapmot.github.io/post/2025/quarto-conditional-content/\"> R | Dr Tom Palmer</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Creating R, Python, Stata, and Julia tutorial worksheets (with and without solutions) using Quarto\nPosted on\nFebruary 17, 2025\nby\nR | Dr Tom Palmer\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nR | Dr Tom Palmer\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nIntroduction\nI regularly need to produce exercises/tutorials for my students. One fantastic feature of R Markdown is that it allows me to create one R Markdown document which can be rendered to both the question document and the solutions document. This is achieved by toggling knitr chunk options such as eval, echo, and include, and using asis chunks to include the text for the solutions. I wrote a little package,\nknitexercise\nto help with this.\nThe toggling of the knitr chunk options can be parameterised making it possible to have an R script which contains the code to conveniently produce both questions and solutions documents. An example R Markdown file,\nexercise.Rmd\n, might look like the following.\n---\ntitle: \"`r params$title`\"\noutput: html_document\nparams:\n  solutions: TRUE\n  title: \"Example exercise: Solutions\"\n---\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(include = params$solutions)\n```\n\n1. This is question 1. Which might have some R code you always want to show.\n\n   ```{r, include=TRUE}\n   # example code for the question\n   ```\n\n   ```{asis}\n   Paragraph text for the solution can be kept in the document in an `asis` chunk.\n   And solution R code in an `r` chunk.\n   Both of these will use the `include` value from the `setup` chunk.\n   ```\n    \n   ```{r}\n   # example code for the solution\n   ```\n\n2. This is question 2 ...\nAnd the rendering script might look like this.\nrmarkdown::render(\"exercise.Rmd\",\n  output_file = \"exercise-questions\",\n  params = list(solutions = FALSE, title = \"Example exercise: Questions\")\n)\n\nrmarkdown::render(\"exercise.Rmd\",\n  output_file = \"exercise-solutions\"\n)\nInline code\nInline code has been a\nfeature of R Markdown\nfor a while. Yihui Xie and Christophe Dervieux have used it to pull off some fantastic tricks. My favourite trick is using it to programmatically write out R Markdown/Markdown code within an R Markdown document when a certain condition is met.\n`r if (knitr::is_latex_output()) \"...some_Markdown_to_include_when_rendering_to_pdf...\"`\nThe problem\nR Markdown is incredibly flexible because we can include R objects as document and chunk options. When translating this to a pure Quarto version we can do this in a document using in the knitr engine using the\n! expr ...\nYAML tag literal\n. As far as I am aware, this is not yet possible for any other Quarto engine. Despite this my aim was to see whether I could achieve parameterised conditional content inclusion/exclusion in a Quarto document using other engines.\nProgrammatically including conditional content in Quarto documents\nR: knitr and Quarto\nI have already shown the R Markdown approach above.\nFor Quarto using the knitr engine, in a blog post\nNicola Rennie\nused inline code to write out Quarto’s\nconditional content classes\n.\n---\nformat: html\nparams:\n  hide_answers: true\n---\n\n```{r}\n#| include: false\n# An R code chunk, so inline code is not first in document.\n```\n\n`r if (params$hide_answers) \"::: {.content-hidden}\"`\n\nText and code for answers.\n\n`r if (params$hide_answers) \":::\"`\nNote that if you use the curly braces around the\nr\nto write you inline code then you need to enclose the output string in the\nI()\nfunction\nas follows.\n`{r} if (params$hide_answers) I(\"::: {.content-hidden}\")`\nThen we can have a shell script to render our questions and solutions documents as follows.\nquarto render exercise-r.qmd -o exercise-r-questions.html\nquarto render exercise-r.qmd -P hide_answers:false -o exercise-r-solutions.html\nPython\nI realised I could adapt Nicola Rennie’s approach for other engines. For the\njupyter: python3\nengine we can do so as follows, the following code uses\nQuarto’s parameters feature\n.\n---\nformat: html\njupyter: python3\n---\n\n```{python}\n#| include: false\n#| tags: [parameters]\nhide_answers = True\n```\n\n```{python}\n#| include: false\nfrom IPython.display import Markdown\n```\n\n`{python} Markdown(\"::: {.content-hidden}\") if hide_answers else Markdown(\" \")`\n\n```{python}\nprint(\"Hidden in questions\")\n```\n\n`{python} Markdown(\":::\") if hide_answers else Markdown(\" \")`\nThe shell script to render our questions and solutions documents is as follows.\nquarto render exercise-python.qmd -o exercise-python-questions.html\nquarto render exercise-python.qmd -P hide_answers:False -o exercise-python-solutions.html\nThe only problem with this is that currently the Papermill output cell about the injected parameters is printed in the document.\nIn Jupyter this can apparently be suppressed by passing the\n--report-mode\nflag, but I couldn’t work out how to do that in Quarto. I believe it will be possible to suppress this output in future versions of Quarto (I’m using the current latest release version of Quarto 1.6.40).\nStata\nThe Stata case involved two additional tricks. First, the\nnbstata Jupyter kernel\nallows inline code, however this must be a\ndisplay\ncommand\n, so we cannot write the if statement within the inline code. I found I can overcome this by saving the different strings in scalars (because the inline code can’t use local macros) at the top of the document as follows. Second, I didn’t try but I suspect the nbstata kernel doesn’t support parameters, and so I achieved the toggling of the code using an environmental variable, e.g.\nHIDE_ANSWERS_STATA\n.\n---\nformat: html\njupyter: nbstata\n---\n\n```{stata}\n*| include: false\nlocal hide_answers : env HIDE_ANSWERS_STATA\nif (`hide_answers') {\n    scalar hide_answers_open = \"::: {.content-hidden}\"\n    scalar hide_answers_close = \":::\"     \n}\nelse {\n    scalar hide_answers_open = \" \"\n    scalar hide_answers_close = \" \"\n}\n```\n\n`{stata} scalar(hide_answers_open)`\n\n```{stata}\ndisplay \"Hidden in questions\"\n```\n\n`{stata} scalar(hide_answers_close)`\nThe shell script to render the documents is then as follows, here we define the environment variable before the call to\nquarto\n.\nHIDE_ANSWERS_STATA=1 quarto render exercise-stata.qmd -o exercise-stata-questions.html\nHIDE_ANSWERS_STATA=0 quarto render exercise-stata.qmd -o exercise-stata-solutions.html\nJulia\nFor the native Julia engine I found that Quarto’s parameterisation worked and that I could avoid the inclusion of the injected parameters cell output by leaving the chunk with the\nparameters\ntag empty.\n---\nformat: html\nengine: julia\n---\n\n```{julia}\n#| tags: [parameters]\n```\n\n```{julia}\n#| include: false\nusing Markdown\n```\n\n`{julia} hide_answers ? md\"::: {.content-hidden}\" : md\"\"`\n\n```{julia}\nprintln(\"Hidden in questions\")\n```\n\n`{julia} hide_answers ? md\":::\" : md\"\"`\nThe shell script to render the documents is then as follows.\nquarto render exercise-julia.qmd -P hide_answers:true -o exercise-julia-questions.html\nquarto render exercise-julia.qmd -P hide_answers:false -o exercise-julia-solutions.html\nProblems with environment variables\nI found that passing environment variables, to the\njupyter: python3\nand\nengine: julia\nis unreliable/broken. Admittedly, I was not using Quarto in project mode with an\n_environment\nfile\n, but honestly it doesn’t feel to me I should need to do that for a single document.\nThe problem I found was that after a first render the value of the environment variable seems to be cached within the Quarto output document and I couldn’t change it on subsequent renders. I also found that using the\ndotenv\npackage\nto access was broken in the same way.\nFor\nengine: julia\nI also found that passing environment variables is unreliable and like for the\njupyter: python3\nengine I experienced environment variable values being stuck after the first render. However, using the Julia\nDotEnv\npackage\ndid seem to be reliable.\nSummary\nI have shown how to programmatically include conditional content for several Quarto engines (\nknitr\n,\njupyter: python3\n,\njupyter: nbstata\n, and\nengine: julia\n) using parameters or environment variables to toggle inline code to write Quarto Markdown in the Quarto documents. I use this to write exercise/tutorial documents in which a single Quarto document is used to output both the questions and solutions documents.\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nR | Dr Tom Palmer\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "Introduction I regularly need to produce exercises/tutorials for my students. One fantastic feature of R Markdown is that it allows me to create one R Markdown document which can be rendered to both the question document and the solutions document. Thi...",
    "meta_keywords": null,
    "og_description": "Introduction I regularly need to produce exercises/tutorials for my students. One fantastic feature of R Markdown is that it allows me to create one R Markdown document which can be rendered to both the question document and the solutions document. Thi...",
    "og_image": "https://remlapmot.github.io/post/2025/quarto-conditional-content/img/injected-parameters-cell.png",
    "og_title": "Creating R, Python, Stata, and Julia tutorial worksheets (with and without solutions) using Quarto | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 6.8,
    "sitemap_lastmod": null,
    "twitter_description": "Introduction I regularly need to produce exercises/tutorials for my students. One fantastic feature of R Markdown is that it allows me to create one R Markdown document which can be rendered to both the question document and the solutions document. Thi...",
    "twitter_title": "Creating R, Python, Stata, and Julia tutorial worksheets (with and without solutions) using Quarto | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/02/creating-r-python-stata-and-julia-tutorial-worksheets-with-and-without-solutions-using-quarto/",
    "word_count": 1351
  }
}