{
  "uuid": "d89aaa63-a489-4b35-aede-4c750bd6447c",
  "created_at": "2025-11-17 20:40:27",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2009/08/counterintuitive-results-in-flipping-coins/",
    "crawled_at": "2025-11-17T10:27:17.828678",
    "external_links": [
      {
        "href": "http://yihui.name/en/2009/08/counterintuitive-results-in-flipping-coins/",
        "text": "Keep on Fighting! » R Language"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "http://yihui.name/en/2009/08/counterintuitive-results-in-flipping-coins/",
        "text": "C"
      },
      {
        "href": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/coin-htt-hth1.png",
        "text": null
      },
      {
        "href": "http://yihui.name/en/2008/09/eyeball-test-to-identify-an-unfair-coin/",
        "text": "“Eyeball Test” to Identify An Unfair Coin (or A False Record)"
      },
      {
        "href": "http://yihui.name/en/2009/08/counterintuitive-results-in-flipping-coins/",
        "text": "Keep on Fighting! » R Language"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Counterintuitive Results in Flipping Coins | R-bloggers",
    "images": [
      {
        "alt": "Number of times needed to get HTT and HTH",
        "base64": null,
        "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/coin-htt-hth1.png?w=450"
      },
      {
        "alt": "Number of times needed to get HTT and HTH",
        "base64": null,
        "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/coin-htt-hth1.png?w=450"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/yihui-xie/",
        "text": "Yihui Xie"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/tag/coin/",
        "text": "Coin"
      },
      {
        "href": "https://www.r-bloggers.com/tag/probability/",
        "text": "Probability"
      },
      {
        "href": "https://www.r-bloggers.com/tag/r-computation/",
        "text": "R Computation"
      },
      {
        "href": "https://www.r-bloggers.com/tag/theories/",
        "text": "Theories"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-109 post type-post status-publish format-standard hentry category-r-bloggers tag-coin tag-probability tag-r-computation tag-theories\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Counterintuitive Results in Flipping Coins</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">August 28, 2009</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/yihui-xie/\">Yihui Xie</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"http://yihui.name/en/2009/08/counterintuitive-results-in-flipping-coins/\"> Keep on Fighting! » R Language</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0--><a href=\"http://yihui.name/en/2009/08/counterintuitive-results-in-flipping-coins/\" rel=\"nofollow\" target=\"_blank\"><span class=\"dropcap-orange\">C</span></a>oin-flipping is a rather old topic in probability theory, so most of us think we know very well about it, however, the other day I saw a question about this old topic (in David Smith’s REvolution?) which was beyond me expectation: how many times do we need to flip the coin until we get a sequence of <code>HTH</code> and <code>HTT</code> respectively? (For example, for the sequence HHTH, the number for HTH to appear is 4, and in THTHTT, the number for HTT is 6.)\n<p>It seems that the two results are equivalent, as H and T occurs with equal probability 0.5, so we naturally believe the average numbers of steps to HTH and HTT are the same, but the fact is not as we imagined.</p>\n<pre>## smart guys use math formulae to solve the problem,\n## but *lazy* guys like me use simulations with R\ncoin.seq = function(v) {\n    x = NULL\n    n = 0\n    while (!identical(x, v)) {\n        x = append(x[length(x) - 1:0], rbinom(1, 1, 0.5))\n        n = n + 1\n    }\n    n\n}\nset.seed(919)\nmean(htt &lt;- replicate(1e+05, coin.seq(c(1, 0, 0))))\n# [1] 8.00304\nmean(hth &lt;- replicate(1e+05, coin.seq(c(1, 0, 1))))\n# [1] 10.0062\n\npng(\"coin-htt-hth.png\", height = 150, width = 500)\npar(mar = c(3, 2.5, 0.1, 0), mgp = c(2, 0.8, 0))\nboxplot(list(HTT = htt, HTH = hth), horizontal = T,\n    xlab = \"n\", ylim = range(boxplot(list(HTT = htt, HTH = hth),\n        plot = FALSE)$stats))\npoints(c(mean(htt), mean(hth)), 1:2, pch = 19)\ndev.off()</pre>\n<p>The answer is counterintuitive, isn’t it?</p>\n<p><div class=\"wp-caption aligncenter\" id=\"attachment_282\" style=\"width: 510px\"><a href=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/coin-htt-hth1.png\" rel=\"nofollow\" target=\"_blank\"><img alt=\"Number of times needed to get HTT and HTH\" class=\"size-full wp-image-282 jetpack-lazy-image\" data-lazy-src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/coin-htt-hth1.png?w=450&amp;is-pending-load=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/coin-htt-hth1.png?w=450\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"Number of times needed to get HTT and HTH\"/><noscript><img alt=\"Number of times needed to get HTT and HTH\" class=\"size-full wp-image-282\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/08/coin-htt-hth1.png?w=450\" title=\"Number of times needed to get HTT and HTH\"/></noscript></a><p class=\"wp-caption-text\">Number of times needed to get HTT and HTH (bold segments are for median; dots denote mean)</p></div>\n<p>Well, mathematicians certainly do not like my solution (I guess they even hate such an imprecise approach). I hope some smart guys can give me some hints on working out the probability distribution and hence the expectation.</p>\n<h2 class=\"related_post_title\">Related Posts</h2><ul class=\"related_post\"><li><a href=\"http://yihui.name/en/2008/09/eyeball-test-to-identify-an-unfair-coin/\" rel=\"nofollow\" target=\"_blank\" title=\"“Eyeball Test” to Identify An Unfair Coin (or A False Record)\">“Eyeball Test” to Identify An Unfair Coin (or A False Record)</a></li></ul>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://yihui.name/en/2009/08/counterintuitive-results-in-flipping-coins/\"> Keep on Fighting! » R Language</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </p></div>\n<div class=\"post-tags clearfix\"><ul><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/coin/\" rel=\"tag\">Coin</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/probability/\" rel=\"tag\">Probability</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/r-computation/\" rel=\"tag\">R Computation</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/theories/\" rel=\"tag\">Theories</a></li></ul></div></article>",
    "main_text": "Counterintuitive Results in Flipping Coins\nPosted on\nAugust 28, 2009\nby\nYihui Xie\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nKeep on Fighting! » R Language\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nC\noin-flipping is a rather old topic in probability theory, so most of us think we know very well about it, however, the other day I saw a question about this old topic (in David Smith’s REvolution?) which was beyond me expectation: how many times do we need to flip the coin until we get a sequence of\nHTH\nand\nHTT\nrespectively? (For example, for the sequence HHTH, the number for HTH to appear is 4, and in THTHTT, the number for HTT is 6.)\nIt seems that the two results are equivalent, as H and T occurs with equal probability 0.5, so we naturally believe the average numbers of steps to HTH and HTT are the same, but the fact is not as we imagined.\n## smart guys use math formulae to solve the problem,\n## but *lazy* guys like me use simulations with R\ncoin.seq = function(v) {\n    x = NULL\n    n = 0\n    while (!identical(x, v)) {\n        x = append(x[length(x) - 1:0], rbinom(1, 1, 0.5))\n        n = n + 1\n    }\n    n\n}\nset.seed(919)\nmean(htt <- replicate(1e+05, coin.seq(c(1, 0, 0))))\n# [1] 8.00304\nmean(hth <- replicate(1e+05, coin.seq(c(1, 0, 1))))\n# [1] 10.0062\n\npng(\"coin-htt-hth.png\", height = 150, width = 500)\npar(mar = c(3, 2.5, 0.1, 0), mgp = c(2, 0.8, 0))\nboxplot(list(HTT = htt, HTH = hth), horizontal = T,\n    xlab = \"n\", ylim = range(boxplot(list(HTT = htt, HTH = hth),\n        plot = FALSE)$stats))\npoints(c(mean(htt), mean(hth)), 1:2, pch = 19)\ndev.off()\nThe answer is counterintuitive, isn’t it?\nNumber of times needed to get HTT and HTH (bold segments are for median; dots denote mean)\nWell, mathematicians certainly do not like my solution (I guess they even hate such an imprecise approach). I hope some smart guys can give me some hints on working out the probability distribution and hence the expectation.\nRelated Posts\n“Eyeball Test” to Identify An Unfair Coin (or A False Record)\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nKeep on Fighting! » R Language\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nCoin\nProbability\nR Computation\nTheories",
    "meta_description": "oin-flipping is a rather old topic in probability theory, so most of us think we know very well about it, however, the other day I saw a question about this old topic (in David Smith’s REvolution?) which was beyond me expectation: how many times do we need to flip the coin until we get a [...]",
    "meta_keywords": "coin,probability,r computation,theories",
    "og_description": "oin-flipping is a rather old topic in probability theory, so most of us think we know very well about it, however, the other day I saw a question about this old topic (in David Smith’s REvolution?) which was beyond me expectation: how many times do we need to flip the coin until we get a [...]",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2009/08/coin-htt-hth1.png",
    "og_title": "Counterintuitive Results in Flipping Coins | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 2.4,
    "sitemap_lastmod": "2011-05-11T21:21:22+00:00",
    "twitter_description": "oin-flipping is a rather old topic in probability theory, so most of us think we know very well about it, however, the other day I saw a question about this old topic (in David Smith’s REvolution?) which was beyond me expectation: how many times do we need to flip the coin until we get a [...]",
    "twitter_title": "Counterintuitive Results in Flipping Coins | R-bloggers",
    "url": "https://www.r-bloggers.com/2009/08/counterintuitive-results-in-flipping-coins/",
    "word_count": 487
  }
}