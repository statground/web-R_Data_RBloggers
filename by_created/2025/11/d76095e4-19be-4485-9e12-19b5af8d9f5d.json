{
  "uuid": "d76095e4-19be-4485-9e12-19b5af8d9f5d",
  "created_at": "2025-11-17 20:40:17",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2009/10/r-object-tooltips-in-ess-2/",
    "crawled_at": "2025-11-17T10:23:32.665897",
    "external_links": [
      {
        "href": "http://www.sigmafield.org/2009/10/01/r-object-tooltips-in-ess",
        "text": "sigmafield - R"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "http://ess.r-project.org/",
        "text": "ESS"
      },
      {
        "href": "http://finzi.psych.upenn.edu/R/library/utils/html/str.html",
        "text": "str"
      },
      {
        "href": "http://www.sigmafield.org/tags/r",
        "text": "R"
      },
      {
        "href": "http://www.sigmafield.org/2009/10/01/r-object-tooltips-in-ess",
        "text": "sigmafield - R"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "R Object Tooltips in ESS | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/erik/",
        "text": "erik"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-49378 post type-post status-publish format-standard hentry\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">R Object Tooltips in ESS</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">October 1, 2009</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/erik/\">erik</a></span>  in Uncategorized | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"http://www.sigmafield.org/2009/10/01/r-object-tooltips-in-ess\"> sigmafield - R</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0--><div class=\"field field-name-body field-type-text-with-summary field-label-hidden\">\n<div class=\"field-item even\" property=\"content:encoded\"><p>\n<i>This post originally appeared on my WordPress blog on October 1, 2009. I present it here in its original form.</i>\n</p><p>\nWhether at work or for personal projects, I use <a href=\"http://ess.r-project.org/\" rel=\"nofollow\" target=\"_blank\">ESS</a> a lot to perform interactive data analyses. The ability to write, edit, and submit R commands to an interactive R process is simply something I cannot imagine analyzing data without.  \n</p>\n<div class=\"outline-3\" id=\"outline-container-1.1\">\n<h3 id=\"sec-1.1\">An example </h3>\n<div id=\"text-1.1\">\n<p>\nOne thing that I end up having to do a lot is inspect an object that I have just assigned to a variable in R.  To fix ideas, let us create a data.frame called <b>df</b> for this example. \n</p>\n<pre>\n\n&gt; df &lt;- data.frame(patient = 1:100,\n                   age = rnorm(100, mean = 10, sd = 6),\n                   sex = sample(gl(2, 50, labels =\n                     c(\"Male\", \"Female\"))))\n\n\n</pre>\n<p>\nI just created the data.frame <b>df</b>, and I want to know if I did it correctly.  For instance, does it look like I expect it to? Does it have 100 observations like I want?  Do the variables have the right names?  Is the sex variable a factor with two levels?  In short, I want to call the <a href=\"http://finzi.psych.upenn.edu/R/library/utils/html/str.html\" rel=\"nofollow\" target=\"_blank\"><b>str</b></a> function using the object <b>df</b> as an argument. \n</p>\n<p>\nHere is the output I am interested in seeing: \n</p>\n<pre>\n\n&gt; str(df)\n'data.frame':   100 obs. of  3 variables:\n $ patient: int  1 2 3 4 5 6 7 8 9 10 ...\n $ age    : num  11.06 7.73 17.61 3.11 6.76 ...\n $ sex    : Factor w/ 2 levels \"Male\",\"Female\": 2 1 1 2 2 1 1 2 2 2 ... \n\n</pre>\n</div>\n</div>\n<div class=\"outline-3\" id=\"outline-container-1.2\">\n<h3 id=\"sec-1.2\">Inspecting objects the old way </h3>\n<div id=\"text-1.2\">\n<p>\nSo, how can I quickly see the structure as shown above?  One idea is to switch over to my interactive <b>R</b> buffer in Emacs, type the command at the prompt, and then switch back to my code buffer to edit the data.frame command or continue programming. I dislike having to switch back and forth between the buffers for a one-off command though.\n</p>\n<p>\nAlternatively, I could type <b>str(df)</b> in my code buffer, evaluate it, and decide to keep it or delete the line.  Since this is more of a quick check, without permanent results, I usually will not want to keep lines like this around, since they clutter up my program.  Typically, I am writing the program to be later run in BATCH mode, so I also do not want functions like that in my code since some can be excessively time-consuming depending on the size of the data.frame. \n</p>\n<p>\nAnother option is to use the ESS function <b>ess-execute-in-tb</b>, by default this is bound to C-c C-t, which will prompt me for an expression to evaluate.  This is nice because I do not have to clutter my buffer with extraneous function calls.  However, after using this method for a while, I noticed that I had many patterns with my objects.  For data.frames, I would almost always use summary or str on them after assignment.  For factors, I would want to table the values after I created them, to be sure they looked right.  For numeric vectors, I would want to summarize them.  I also wanted to summarize model fits (e.g., <b>lm</b>).  I wanted to take advantage of my usage patterns so that I did not have to type so much after assigning an object to a variable. \n</p>\n</div>\n</div>\n<div class=\"outline-3\" id=\"outline-container-1.3\">\n<h3 id=\"sec-1.3\">Inspecting objects the new way </h3>\n<div id=\"text-1.3\">\n<p>\nI therefore wrote an Emacs Lisp function that, when called via a key chord in Emacs, inspects the object at point, determines the class of that object, and based on the class, calls an R function on that object, showing the results in a tooltip.  For the <b>df</b> example above, I would just put point on \"df\", <i>anywhere</i> in the source code, and type C-c C-g (my default binding). A tooltip is then shown with the output of <b>str(df)</b>.  \n</p>\n<p>\nAn example similar to this, along with several others are shown in this screencast. I think this is the best way to show how my Lisp function interacts with R to show object information in tooltips. \n</p>\n<object width=\"450\"><param name=\"movie\" value=\"https://www.youtube.com/v/E_N-RXW2_Xo?fs=1&amp;hl=en_US\"/><param name=\"allowFullScreen\" value=\"true\"/><param name=\"allowscriptaccess\" value=\"always\"/><embed allowfullscreen=\"true\" allowscriptaccess=\"always\" src=\"https://www.youtube.com/v/E_N-RXW2_Xo?fs=1&amp;hl=en_US\" type=\"application/x-shockwave-flash\" width=\"450\"/></object>\n<p>\nPretty nice! One thing to note is that the tooltips are displaying in a proportional font, not a monospace one.  I know at some point I had found a customizable variable to specify which font tooltips display in, but I apparently did not save it. If I find that variable, I will update this post to reflect how to do that. \n</p>\n</div>\n</div>\n<div class=\"outline-3\" id=\"outline-container-1.4\">\n<h3 id=\"sec-1.4\">The Emacs Lisp function and keybinding </h3>\n<div id=\"text-1.4\">\n<p>\nHere is the code you will need for this behavior.  It depends on having <b>tooltip-show-at-point</b> defined, which is found only in ESS 5.4 (the current version as of this post) or later.  I contributed <b>tooltip-show-at-point</b> to the ESS project a few months ago.  It is used to show argument tooltips when you type an opening parenthesis.  Perhaps my object tooltip function will find its way into a future version of ESS.  Here is the code. \n</p>\n<pre>\n;; ess-R-object-tooltip.el\n;; \n;; I have defined a function, ess-R-object-tooltip, that when \n;; invoked, will return a tooltip with some information about\n;; the object at point.  The information returned is \n;; determined by which R function is called.  This is controlled\n;; by an alist, called ess-R-object-tooltip-alist.  The default is\n;; given below.  The keys are the classes of R object that will\n;; use the associated function.  For example, when the function\n;; is called while point is on a factor object, a table of that\n;; factor will be shown in the tooltip.  The objects must of course\n;; exist in the associated inferior R process for this to work.\n;; The special key \"other\" in the alist defines which function\n;; to call when the class is not mached in the alist.  By default,\n;; the str function is called, which is actually a fairly useful\n;; default for data.frame and function objects. \n;; \n;; The last line of this file shows my default keybinding. \n;; I simply save this file in a directory in my load-path\n;; and then place (require 'ess-R-object-tooltip) in my .emacs \n\n;; the alist\n(setq ess-R-object-tooltip-alist\n      '((numeric    . \"summary\")\n        (factor     . \"table\")\n        (integer    . \"summary\")\n        (lm         . \"summary\")\n        (other      . \"str\")))\n\n\n(defun ess-R-object-tooltip ()\n  \"Get info for object at point, and display it in a tooltip.\"\n  (interactive)\n  (let ((objname (current-word))\n        (curbuf (current-buffer))\n        (tmpbuf (get-buffer-create \"**ess-R-object-tooltip**\")))\n    (if objname\n        (progn\n          (ess-command (concat \"class(\" objname \")\\n\")  tmpbuf )   \n          (set-buffer tmpbuf)\n          (let ((bs (buffer-string)))\n            (if (not(string-match \"\\(object .* not found\\)\\|unexpected\" bs))\n                (let* ((objcls (buffer-substring \n                                (+ 2 (string-match \"\\\".*\\\"\" bs)) \n                                (- (point-max) 2)))\n                       (myfun (cdr(assoc-string objcls \n                                                ess-R-object-tooltip-alist))))\n                  (progn\n                    (if (eq myfun nil)\n                        (setq myfun \n                              (cdr(assoc-string \"other\" \n                                                ess-R-object-tooltip-alist))))\n                    (ess-command (concat myfun \"(\" objname \")\\n\") tmpbuf)\n                    (let ((bs (buffer-string)))\n                      (progn\n                        (set-buffer curbuf)\n                        (tooltip-show-at-point bs 0 30)))))))))\n    (kill-buffer tmpbuf)))\n\n;; my default key map\n(define-key ess-mode-map \"\\C-c\\C-g\" 'ess-R-object-tooltip)\n\n(provide 'ess-R-object-tooltip)\n</pre>\n<p>\nNotice that you can add your own object classes and functions fairly easily at the top of the program. There is a special \"other\" class which will be called for classes not defined otherwise.  \n</p>\n</div>\n</div>\n<div class=\"outline-3\" id=\"outline-container-1.5\">\n<h3 id=\"sec-1.5\">Further meta-data features in ESS? </h3>\n<div id=\"text-1.5\">\n<p>\nIf you can think if anymore examples for types of objects that this would be useful for, feel free to post them in the comments. I think this is a very useful feature when interactively examining datasets, fitting models, and analyzing data. In general, I think there are many more interesting ways to have meta-data on objects available quickly within the ESS and R system.  I will be sure to share them as I explore ways to more efficiently do statistical analysis within the R environment.  \n</p>\n</div>\n</div>\n</div>\n</div>\n<section class=\"field field-name-field-tags field-type-taxonomy-term-reference field-label-above clearfix\">\n<h2 class=\"field-label\">Tags:Â </h2>\n<ul class=\"field-items\">\n<li class=\"field-item even\" rel=\"dc:subject\"><a href=\"http://www.sigmafield.org/tags/r\" property=\"rdfs:label skos:prefLabel\" rel=\"nofollow\" target=\"_blank\" typeof=\"skos:Concept\">R</a></li>\n</ul>\n</section>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://www.sigmafield.org/2009/10/01/r-object-tooltips-in-ess\"> sigmafield - R</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n</article>",
    "main_text": "R Object Tooltips in ESS\nPosted on\nOctober 1, 2009\nby\nerik\nin Uncategorized | 0 Comments\n[This article was first published on\nsigmafield - R\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nThis post originally appeared on my WordPress blog on October 1, 2009. I present it here in its original form.\nWhether at work or for personal projects, I use\nESS\na lot to perform interactive data analyses. The ability to write, edit, and submit R commands to an interactive R process is simply something I cannot imagine analyzing data without.\nAn example\nOne thing that I end up having to do a lot is inspect an object that I have just assigned to a variable in R.  To fix ideas, let us create a data.frame called\ndf\nfor this example.\n> df <- data.frame(patient = 1:100,\n                   age = rnorm(100, mean = 10, sd = 6),\n                   sex = sample(gl(2, 50, labels =\n                     c(\"Male\", \"Female\"))))\nI just created the data.frame\ndf\n, and I want to know if I did it correctly.  For instance, does it look like I expect it to? Does it have 100 observations like I want?  Do the variables have the right names?  Is the sex variable a factor with two levels?  In short, I want to call the\nstr\nfunction using the object\ndf\nas an argument.\nHere is the output I am interested in seeing:\n> str(df)\n'data.frame':   100 obs. of  3 variables:\n $ patient: int  1 2 3 4 5 6 7 8 9 10 ...\n $ age    : num  11.06 7.73 17.61 3.11 6.76 ...\n $ sex    : Factor w/ 2 levels \"Male\",\"Female\": 2 1 1 2 2 1 1 2 2 2 ...\nInspecting objects the old way\nSo, how can I quickly see the structure as shown above?  One idea is to switch over to my interactive\nR\nbuffer in Emacs, type the command at the prompt, and then switch back to my code buffer to edit the data.frame command or continue programming. I dislike having to switch back and forth between the buffers for a one-off command though.\nAlternatively, I could type\nstr(df)\nin my code buffer, evaluate it, and decide to keep it or delete the line.  Since this is more of a quick check, without permanent results, I usually will not want to keep lines like this around, since they clutter up my program.  Typically, I am writing the program to be later run in BATCH mode, so I also do not want functions like that in my code since some can be excessively time-consuming depending on the size of the data.frame.\nAnother option is to use the ESS function\ness-execute-in-tb\n, by default this is bound to C-c C-t, which will prompt me for an expression to evaluate.  This is nice because I do not have to clutter my buffer with extraneous function calls.  However, after using this method for a while, I noticed that I had many patterns with my objects.  For data.frames, I would almost always use summary or str on them after assignment.  For factors, I would want to table the values after I created them, to be sure they looked right.  For numeric vectors, I would want to summarize them.  I also wanted to summarize model fits (e.g.,\nlm\n).  I wanted to take advantage of my usage patterns so that I did not have to type so much after assigning an object to a variable.\nInspecting objects the new way\nI therefore wrote an Emacs Lisp function that, when called via a key chord in Emacs, inspects the object at point, determines the class of that object, and based on the class, calls an R function on that object, showing the results in a tooltip.  For the\ndf\nexample above, I would just put point on \"df\",\nanywhere\nin the source code, and type C-c C-g (my default binding). A tooltip is then shown with the output of\nstr(df)\n.\nAn example similar to this, along with several others are shown in this screencast. I think this is the best way to show how my Lisp function interacts with R to show object information in tooltips.\nPretty nice! One thing to note is that the tooltips are displaying in a proportional font, not a monospace one.  I know at some point I had found a customizable variable to specify which font tooltips display in, but I apparently did not save it. If I find that variable, I will update this post to reflect how to do that.\nThe Emacs Lisp function and keybinding\nHere is the code you will need for this behavior.  It depends on having\ntooltip-show-at-point\ndefined, which is found only in ESS 5.4 (the current version as of this post) or later.  I contributed\ntooltip-show-at-point\nto the ESS project a few months ago.  It is used to show argument tooltips when you type an opening parenthesis.  Perhaps my object tooltip function will find its way into a future version of ESS.  Here is the code.\n;; ess-R-object-tooltip.el\n;; \n;; I have defined a function, ess-R-object-tooltip, that when \n;; invoked, will return a tooltip with some information about\n;; the object at point.  The information returned is \n;; determined by which R function is called.  This is controlled\n;; by an alist, called ess-R-object-tooltip-alist.  The default is\n;; given below.  The keys are the classes of R object that will\n;; use the associated function.  For example, when the function\n;; is called while point is on a factor object, a table of that\n;; factor will be shown in the tooltip.  The objects must of course\n;; exist in the associated inferior R process for this to work.\n;; The special key \"other\" in the alist defines which function\n;; to call when the class is not mached in the alist.  By default,\n;; the str function is called, which is actually a fairly useful\n;; default for data.frame and function objects. \n;; \n;; The last line of this file shows my default keybinding. \n;; I simply save this file in a directory in my load-path\n;; and then place (require 'ess-R-object-tooltip) in my .emacs \n\n;; the alist\n(setq ess-R-object-tooltip-alist\n      '((numeric    . \"summary\")\n        (factor     . \"table\")\n        (integer    . \"summary\")\n        (lm         . \"summary\")\n        (other      . \"str\")))\n\n(defun ess-R-object-tooltip ()\n  \"Get info for object at point, and display it in a tooltip.\"\n  (interactive)\n  (let ((objname (current-word))\n        (curbuf (current-buffer))\n        (tmpbuf (get-buffer-create \"**ess-R-object-tooltip**\")))\n    (if objname\n        (progn\n          (ess-command (concat \"class(\" objname \")\\n\")  tmpbuf )   \n          (set-buffer tmpbuf)\n          (let ((bs (buffer-string)))\n            (if (not(string-match \"\\(object .* not found\\)\\|unexpected\" bs))\n                (let* ((objcls (buffer-substring \n                                (+ 2 (string-match \"\\\".*\\\"\" bs)) \n                                (- (point-max) 2)))\n                       (myfun (cdr(assoc-string objcls \n                                                ess-R-object-tooltip-alist))))\n                  (progn\n                    (if (eq myfun nil)\n                        (setq myfun \n                              (cdr(assoc-string \"other\" \n                                                ess-R-object-tooltip-alist))))\n                    (ess-command (concat myfun \"(\" objname \")\\n\") tmpbuf)\n                    (let ((bs (buffer-string)))\n                      (progn\n                        (set-buffer curbuf)\n                        (tooltip-show-at-point bs 0 30)))))))))\n    (kill-buffer tmpbuf)))\n\n;; my default key map\n(define-key ess-mode-map \"\\C-c\\C-g\" 'ess-R-object-tooltip)\n\n(provide 'ess-R-object-tooltip)\nNotice that you can add your own object classes and functions fairly easily at the top of the program. There is a special \"other\" class which will be called for classes not defined otherwise.\nFurther meta-data features in ESS?\nIf you can think if anymore examples for types of objects that this would be useful for, feel free to post them in the comments. I think this is a very useful feature when interactively examining datasets, fitting models, and analyzing data. In general, I think there are many more interesting ways to have meta-data on objects available quickly within the ESS and R system.  I will be sure to share them as I explore ways to more efficiently do statistical analysis within the R environment.\nTags:\nR\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nsigmafield - R\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "This post originally appeared on my Wordpress blog on October 1, 2009. I present it here in its original form. Whether at work or for personal projects, I use ESS a lot to perform interactive data analyses. The ability to write, edit, and su...",
    "meta_keywords": null,
    "og_description": "This post originally appeared on my Wordpress blog on October 1, 2009. I present it here in its original form. Whether at work or for personal projects, I use ESS a lot to perform interactive data analyses. The ability to write, edit, and su...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "R Object Tooltips in ESS | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 7.2,
    "sitemap_lastmod": "2009-10-02T04:07:52+00:00",
    "twitter_description": "This post originally appeared on my Wordpress blog on October 1, 2009. I present it here in its original form. Whether at work or for personal projects, I use ESS a lot to perform interactive data analyses. The ability to write, edit, and su...",
    "twitter_title": "R Object Tooltips in ESS | R-bloggers",
    "url": "https://www.r-bloggers.com/2009/10/r-object-tooltips-in-ess-2/",
    "word_count": 1436
  }
}