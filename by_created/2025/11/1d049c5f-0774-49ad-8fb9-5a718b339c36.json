{
  "uuid": "1d049c5f-0774-49ad-8fb9-5a718b339c36",
  "created_at": "2025-11-17 20:40:52",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/",
    "crawled_at": "2025-11-17T10:36:05.161686",
    "external_links": [
      {
        "href": "http://yihui.name/en/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/",
        "text": "Keep on Fighting! » R Language"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "http://yihui.name/en/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/",
        "text": "T"
      },
      {
        "href": "https://stat.ethz.ch/pipermail/r-help/2009-June/200645.html",
        "text": "graphically represent frequency of words in a speech"
      },
      {
        "href": "https://ggorjan.blogspot.com/",
        "text": "Gorjanc Gregor"
      },
      {
        "href": "http://www.bfro.uni-lj.si/MR/ggorjan/software/R/index.html#tagCloud",
        "text": "some work"
      },
      {
        "href": "http://yihui.name/en/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/tagcloud-with-pointlabel/",
        "text": null
      },
      {
        "href": "http://www.roytanck.com/2008/05/19/how-to-repurpose-my-tag-cloud-flash-movie/",
        "text": "tagcloud.swf"
      },
      {
        "href": "http://blog.deconcept.com/swfobject/",
        "text": "swfobject.js"
      },
      {
        "href": "http://yihui.name/en/wp-content/uploads/2009/06/tagcloud.swf",
        "text": "tagcloud.swf"
      },
      {
        "href": "http://yihui.name/en/wp-content/uploads/2009/06/swfobject.js",
        "text": "swfoject.js"
      },
      {
        "href": "http://www.roytanck.com/2008/03/15/wp-cumulus-released/",
        "text": "Roy Tanck’s post"
      },
      {
        "href": "http://r-forge.r-project.org/projects/r4x/",
        "text": "R4X"
      },
      {
        "href": "http://romainfrancois.blog.free.fr",
        "text": "Romain Fran?ois"
      },
      {
        "href": "http://www.rforge.net/snippets/",
        "text": "snippets"
      },
      {
        "href": "http://simon.urbanek.info/",
        "text": "Simon Urbanek"
      },
      {
        "href": "http://yihui.name/en/2009/12/happy-new-year-with-r/",
        "text": "Happy New Year with R"
      },
      {
        "href": "http://yihui.name/en/2009/12/merry-christmas-using-r/",
        "text": "Merry Christmas Using R"
      },
      {
        "href": "http://yihui.name/en/2009/06/simulation-of-burning-fire-in-r/",
        "text": "Simulation of Burning Fire in R"
      },
      {
        "href": "http://yihui.name/en/2009/11/create-animations-in-pdf-documents-using-r/",
        "text": "Create Animations in PDF Documents Using R"
      },
      {
        "href": "http://yihui.name/en/2009/10/some-interesting-packages-in-r-swfdevice-rgoogletrends-flashmxml-svgannotation/",
        "text": "Some Interesting Packages in R: swfDevice, RGoogleTrends, FlashMXML, SVGAnnotation"
      },
      {
        "href": "http://yihui.name/en/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/",
        "text": "Keep on Fighting! » R Language"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Creating Tag Cloud Using R and Flash / JavaScript (SWFObject) | R-bloggers",
    "images": [
      {
        "alt": "Simulated Tag Cloud with R function pointLabel() in maptools",
        "base64": null,
        "src": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/06/tagcloud-with-pointlabel1.png?w=450"
      },
      {
        "alt": "Simulated Tag Cloud with R function pointLabel() in maptools",
        "base64": null,
        "src": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/06/tagcloud-with-pointlabel1.png?w=450"
      },
      {
        "alt": "x=textrm{freq}*sin(theta)",
        "base64": null,
        "src": "http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20x%3D%5Ctextrm%7Bfreq%7D%2A%5Csin%28%5Ctheta%29"
      },
      {
        "alt": "x=textrm{freq}*sin(theta)",
        "base64": null,
        "src": "http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20x%3D%5Ctextrm%7Bfreq%7D%2A%5Csin%28%5Ctheta%29"
      },
      {
        "alt": "y=textrm{freq}*cos(theta)",
        "base64": null,
        "src": "http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20y%3D%5Ctextrm%7Bfreq%7D%2A%5Ccos%28%5Ctheta%29"
      },
      {
        "alt": "y=textrm{freq}*cos(theta)",
        "base64": null,
        "src": "http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20y%3D%5Ctextrm%7Bfreq%7D%2A%5Ccos%28%5Ctheta%29"
      },
      {
        "alt": "thetasim U(0,2pi)",
        "base64": null,
        "src": "http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20%5Ctheta%5Csim%20U%280%2C2%5Cpi%29"
      },
      {
        "alt": "thetasim U(0,2pi)",
        "base64": null,
        "src": "http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20%5Ctheta%5Csim%20U%280%2C2%5Cpi%29"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/yihui-xie/",
        "text": "Yihui Xie"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/wp-content/uploads/2009/06/tagcloudr1.gz",
        "text": "tagCloud.r.gz"
      },
      {
        "href": "https://www.r-bloggers.com/wp-content/uploads/2009/06/tagdata1.gz",
        "text": "tagData.gz"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/tag/computer-science/",
        "text": "Computer Science"
      },
      {
        "href": "https://www.r-bloggers.com/tag/featured/",
        "text": "Featured"
      },
      {
        "href": "https://www.r-bloggers.com/tag/flash/",
        "text": "Flash"
      },
      {
        "href": "https://www.r-bloggers.com/tag/gorjanc-gregor/",
        "text": "Gorjanc Gregor"
      },
      {
        "href": "https://www.r-bloggers.com/tag/javascript/",
        "text": "JavaScript"
      },
      {
        "href": "https://www.r-bloggers.com/tag/maptools/",
        "text": "maptools"
      },
      {
        "href": "https://www.r-bloggers.com/tag/pointlabel/",
        "text": "pointLabel()"
      },
      {
        "href": "https://www.r-bloggers.com/tag/r-language/",
        "text": "R Language"
      },
      {
        "href": "https://www.r-bloggers.com/tag/r-programming/",
        "text": "R Programming"
      },
      {
        "href": "https://www.r-bloggers.com/tag/r4x/",
        "text": "R4X"
      },
      {
        "href": "https://www.r-bloggers.com/tag/romain-francois/",
        "text": "Romain Francois"
      },
      {
        "href": "https://www.r-bloggers.com/tag/simon-urbanek/",
        "text": "Simon Urbanek"
      },
      {
        "href": "https://www.r-bloggers.com/tag/snippets/",
        "text": "snippets"
      },
      {
        "href": "https://www.r-bloggers.com/tag/swfobject/",
        "text": "SWFObject"
      },
      {
        "href": "https://www.r-bloggers.com/tag/tag-cloud/",
        "text": "Tag Cloud"
      },
      {
        "href": "https://www.r-bloggers.com/tag/wordpress/",
        "text": "wordpress"
      },
      {
        "href": "https://www.r-bloggers.com/tag/wp-cumulus/",
        "text": "wp-cumulus"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-111 post type-post status-publish format-standard hentry category-r-bloggers tag-computer-science tag-featured tag-flash tag-gorjanc-gregor tag-javascript tag-maptools tag-pointlabel tag-r-language tag-r-programming tag-r4x tag-romain-francois tag-simon-urbanek tag-snippets tag-swfobject tag-tag-cloud tag-wordpress tag-wp-cumulus\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Creating Tag Cloud Using R and Flash / JavaScript (SWFObject)</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">June 10, 2009</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/yihui-xie/\">Yihui Xie</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"http://yihui.name/en/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/\"> Keep on Fighting! » R Language</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0--><a href=\"http://yihui.name/en/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/\" rel=\"nofollow\" target=\"_blank\"><span class=\"dropcap-green\">T</span></a>ag cloud is a bunch of words drawn in a graph with their sizes proportional to their frequency; it’s widely used in blogs to visualize tags. We can observe important words quickly from a tag cloud, as they often appear in large fontsize. Tony N. Brown asked how to “<a href=\"https://stat.ethz.ch/pipermail/r-help/2009-June/200645.html\" rel=\"nofollow\" target=\"_blank\" title=\"graphically represent frequency of words in a speech\">graphically represent frequency of words in a speech</a>” the other day in R-help list, which is actually a problem about the tag cloud:\n<blockquote><p>I recently saw a graph on television that displayed selected words/phrases in a speech scaled in size according to their frequency. So words/phrases that were often used appeared large and words that were rarely used appeared small. […]</p></blockquote>\n<p>Marc Schwartz mentioned that <a href=\"https://ggorjan.blogspot.com/\" rel=\"nofollow\" target=\"_blank\" title=\"Gorjanc Gregor\">Gorjanc Gregor</a> has done <a href=\"http://www.bfro.uni-lj.si/MR/ggorjan/software/R/index.html#tagCloud\" rel=\"nofollow\" target=\"_blank\" title=\"tagCloud using grid graphics by Gorjanc Gregor\">some work</a> years ago using R (in grid graphics). The obstacle of creating tag cloud in R, as Gorjanc wrote, lies in deciding the placement of words, and it would be much easier for other applications such as browsers to arrange the texts. That’s true — there have already been a lot of mature programs to deal with tag cloud. One of them is the <code>wp-cumulus</code> plugin for WordPress, which makes use of a Flash object to generate the tag cloud, and it has fantastic 3D rotation effect of the cloud.</p>\n<h1>1. Arranging text labels with <code>pointLabel()</code></h1>\n<p>Before introducing how to port the plugin into R, I’d like to introduce an R function <code>pointLabel()</code> in <code>maptools</code> package and it can partially solve the problem of arranging text labels in a plot (using simulated annealing or genetic algorithm). Here is a simulated example:</p>\n<div class=\"wp-caption aligncenter\" id=\"attachment_226\" style=\"width: 560px\"><a href=\"http://yihui.name/en/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/tagcloud-with-pointlabel/\" rel=\"nofollow\" target=\"_blank\"><img alt=\"Simulated Tag Cloud with R function pointLabel() in maptools\" class=\"size-full wp-image-226 jetpack-lazy-image\" data-lazy-src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/06/tagcloud-with-pointlabel1.png?w=450&amp;is-pending-load=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/06/tagcloud-with-pointlabel1.png?w=450\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" style=\"border: 1px solid black;\" title=\"Simulated Tag Cloud with R function pointLabel() in maptools\"/><noscript><img alt=\"Simulated Tag Cloud with R function pointLabel() in maptools\" class=\"size-full wp-image-226\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/06/tagcloud-with-pointlabel1.png?w=450\" style=\"border: 1px solid black;\" title=\"Simulated Tag Cloud with R function pointLabel() in maptools\"/></noscript></a><p class=\"wp-caption-text\">Simulated Tag Cloud with R function pointLabel() in maptools</p></div>\n<p><span id=\"more-224\"></span></p>\n<pre>library(maptools)\nset.seed(123)\nx = runif(19)\ny = runif(19)\nw = c(\"R\", \"is\", \"free\", \"software\", \"and\", \"comes\",\n    \"with\", \"ABSOLUTELY\", \"NO\", \"WARRANTY\", \"You\", \"are\", \"welcome\",\n    \"to\", \"redistribute\", \"it\", \"under\", \"certain\", \"conditions\")\npar(ann = FALSE, xpd = NA, mar = rep(2, 4))\nplot(x, y, type = \"n\", axes = FALSE)\npointLabel(x, y, w, cex = runif(19, 1, 5))</pre>\n<p>I was fortunate to get a very neat graph with no labels overlapping, but I don’t think this is a good solution, as it doesn’t take care of the initial locations of the words. My rough idea about deciding the initial locations is to sample on circles with radii proportional to the frequency, i.e. let <img align=\"absmiddle\" alt=\"x=textrm{freq}*sin(theta)\" class=\"jetpack-lazy-image\" data-lazy-src=\"http://www.forkosh.dreamhost.com/mimetex.cgi?reverse_x=textrmfreq*sin(theta)&amp;is-pending-load=1\" src=\"http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20x%3D%5Ctextrm%7Bfreq%7D%2A%5Csin%28%5Ctheta%29\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"x=textrm{freq}*sin(theta)\"/><noscript><img align=\"absmiddle\" alt=\"x=textrm{freq}*sin(theta)\" src=\"http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20x%3D%5Ctextrm%7Bfreq%7D%2A%5Csin%28%5Ctheta%29\" title=\"x=textrm{freq}*sin(theta)\"/></noscript> and <img align=\"absmiddle\" alt=\"y=textrm{freq}*cos(theta)\" class=\"jetpack-lazy-image\" data-lazy-src=\"http://www.forkosh.dreamhost.com/mimetex.cgi?reverse_y=textrmfreq*cos(theta)&amp;is-pending-load=1\" src=\"http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20y%3D%5Ctextrm%7Bfreq%7D%2A%5Ccos%28%5Ctheta%29\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"y=textrm{freq}*cos(theta)\"/><noscript><img align=\"absmiddle\" alt=\"y=textrm{freq}*cos(theta)\" src=\"http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20y%3D%5Ctextrm%7Bfreq%7D%2A%5Ccos%28%5Ctheta%29\" title=\"y=textrm{freq}*cos(theta)\"/></noscript> where <img align=\"absmiddle\" alt=\"thetasim U(0,2pi)\" class=\"jetpack-lazy-image\" data-lazy-src=\"http://www.forkosh.dreamhost.com/mimetex.cgi?reverse_thetasim_U(0,2pi)&amp;is-pending-load=1\" src=\"http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20%5Ctheta%5Csim%20U%280%2C2%5Cpi%29\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"thetasim U(0,2pi)\"/><noscript><img align=\"absmiddle\" alt=\"thetasim U(0,2pi)\" src=\"http://www.forkosh.dreamhost.com/mimetex.cgi?%5Creverse%20%5Ctheta%5Csim%20U%280%2C2%5Cpi%29\" title=\"thetasim U(0,2pi)\"/></noscript>. In this case, important words will be placed near the center of the plot.</p>\n<h1>2. Creating tag cloud in a Flash movie using R</h1>\n<p>The problem becomes quite easy with a Flash movie <a href=\"http://www.roytanck.com/2008/05/19/how-to-repurpose-my-tag-cloud-flash-movie/\" rel=\"nofollow\" target=\"_blank\"><code>tagcloud.swf</code></a> and a JavaScript program <a href=\"http://blog.deconcept.com/swfobject/\" rel=\"nofollow\" target=\"_blank\"><code>swfobject.js</code></a>. The mechanism, briefly speaking, is that the tag information is passed to the Flash object by JavaScript, and the Flash object will read the variable <code>tagcloud</code> where the sizes, colors and hyperlinks of tags are stored. Finally the tags are visualized like rotating cloud.</p>\n<p>It’s not difficult to pass the tag information to JavaScript in pure text. Below is the function which will create an HTML page by default with a tag cloud Flash movie inside it:</p>\n<span class=\"download\">Download the source code: <a href=\"https://www.r-bloggers.com/wp-content/uploads/2009/06/tagcloudr1.gz\" rel=\"nofollow\" target=\"_blank\">tagCloud.r.gz</a> (1.18Kb)</span>\n<pre>#------------------------------------------------------------------------------#\n# generating tag cloud in R using Flash and SWFObject                          #\n# tagData: a data.frame containing columns 'tag', 'link', 'count' and optional #\n#     columns 'color' and 'hicolor'                                            #\n# other parameters are self-explaining if you are familiar with                #\n#     the WP plugin 'wp-cumulus'                                               #\n#------------------------------------------------------------------------------#\ntagCloud = function(tagData, htmlOutput = \"tagCloud.html\",\n    SWFPath, JSPath, divId = \"tagCloudId\", width = 600, height = 400,\n    transparent = FALSE, tcolor = \"333333\", tcolor2 = \"009900\",\n    hicolor = \"ff0000\", distr = \"true\", tspeed = 100, version = 9,\n    bgcolor = \"ffffff\", useXML = FALSE, htmlTitle = \"Tag Cloud\",\n    noFlashJS, target = NULL, scriptOnly = FALSE) {\n    if (missing(SWFPath))\n        SWFPath = \"http://www.roytanck.com/wp-content/plugins/wp-cumulus/tagcloud.swf\"\n    if (missing(JSPath))\n        JSPath = \"http://www.roytanck.com/wp-content/plugins/wp-cumulus/swfobject.js\"\n    if (missing(noFlashJS))\n        noFlashJS = \"This will be shown to users with no Flash or Javascript.\"\n    tagXML = sprintf(\"&lt;tags&gt;%s&lt;/tags&gt;\", paste(sprintf(\"&lt;a href='%s' style='%s'%s%s%s&gt;%s&lt;/a&gt;\",\n        tagData$link, tagData$count, if (is.null(target))\n            \"\"\n        else sprintf(\" target='%s'\", target), if (is.null(tagData$color))\n            \"\"\n        else ifelse(is.na(tagData$color), sprintf(\" color='0x%s'\",\n            tagData$color, \"\"), \"\"), if (is.null(tagData$hicolor))\n            \"\"\n        else ifelse(is.na(tagData$hicolor), sprintf(\" hicolor='0x%s'\",\n            tagData$hicolor, \"\"), \"\"), tagData$tag), collapse = \"\"))\n    if (useXML)\n        cat(tagXML, file = file.path(dirname(htmlOutput), \"tagCloud.xml\"))\n    cat(ifelse(scriptOnly, \"\",\n    sprintf(\"&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n    ?\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;\n    &lt;html xmlns=\"http://www.w3.org/1999/xhtml\"&gt;\n    &lt;head&gt;\n    &lt;title&gt;%s&lt;/title&gt;\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\",\n        htmlTitle)), sprintf(\"t&lt;script type=\"text/javascript\" src=\"%s\"&gt;&lt;/script&gt;\",\n        JSPath), sprintf(\"t&lt;div id=\"%s\"&gt;%s&lt;/div&gt;\", divId,\n        noFlashJS), sprintf(\"t&lt;script type=\"text/javascript\"&gt;\n        ttvar so = new SWFObject(\"%s\", \"tagcloud\", \"%d\", \"%d\", \"%d\", \"#%s\");\n        %sttso.addVariable(\"mode\", \"tags\");nttso.addVariable(\"tcolor\", \"0x%s\");\n        ttso.addVariable(\"tcolor2\", \"0x%s\");nttso.addVariable(\"hicolor\", \"0x%s\");\n        ttso.addVariable(\"tspeed\", \"%d\");nttso.addVariable(\"distr\", \"%s\");\n        %snttso.write(\"%s\");ntt&lt;/script&gt;n\",\n        SWFPath, width, height, version, bgcolor, ifelse(transparent,\n            \"ttso.addParam(\"wmode\", \"transparent\");n\",\n            \"\"), tcolor, tcolor2, hicolor, tspeed, distr, ifelse(useXML,\n            \"ttso.addVariable(\"xmlpath\", \"tagcloud.xml\");\",\n            sprintf(\"ttso.addVariable(\"tagcloud\", \"%s\");\",\n                tagXML)), divId), ifelse(scriptOnly, \"\", \"&lt;/body&gt;nn&lt;/html&gt;\"),\n        file = ifelse(scriptOnly, stdout(), htmlOutput), sep = \"n\")\n}</pre>\n<p>The main argument is <code>tagData</code> which is a data.frame containing at least three columns (<code>tag</code>, <code>link</code> and <code>count</code>) and looks like:</p>\n<pre>&gt; head(tagData)\n                tag                                        link count\n1 2D Kernel Density http://yihui.name/en/tag/2d-kernel-density/     1\n2         algorithm         http://yihui.name/en/tag/algorithm/     1\n3         Animation         http://yihui.name/en/tag/animation/    11\n4           AniWiki           http://yihui.name/en/tag/aniwiki/     2\n5            Arcing            http://yihui.name/en/tag/arcing/     1\n6          arrows()            http://yihui.name/en/tag/arrows/     1</pre>\n<p>Additional columns <code>color</code> and <code>hicolor</code> will be used if they exist (hexadecimal numbers specifying RGB), e.g.</p>\n<pre>&gt; head(tagData)\n                tag                                        link count  color hicolor\n1 2D Kernel Density http://yihui.name/en/tag/2d-kernel-density/     1 2163bb  f0763d\n2         algorithm         http://yihui.name/en/tag/algorithm/     1 9f0f38  d825b1\n3         Animation         http://yihui.name/en/tag/animation/    11 800130  5b8d6a\n4           AniWiki           http://yihui.name/en/tag/aniwiki/     2 7ce1df  6607b0\n5            Arcing            http://yihui.name/en/tag/arcing/     1 df4e4a  f5cdf2\n6          arrows()            http://yihui.name/en/tag/arrows/     1 31f5fb  19d50d</pre>\n<h1>3. Example</h1>\n<p>Here is an example on visualizing my blog tags. You may need the following <code>swf</code> and <code>js</code> files first if you wish the loading would be faster (by default your browser needs to download these two files from <em>roytanck.com</em> first).</p>\n<span class=\"download\">Download the tag cloud Flash file <a href=\"http://yihui.name/en/wp-content/uploads/2009/06/tagcloud.swf\" rel=\"nofollow\" target=\"_blank\">tagcloud.swf</a> (33.7Kb) and JavaScript <a href=\"http://yihui.name/en/wp-content/uploads/2009/06/swfobject.js\" rel=\"nofollow\" target=\"_blank\">swfoject.js</a> (5.94Kb) as well as the data <a href=\"https://www.r-bloggers.com/wp-content/uploads/2009/06/tagdata1.gz\" rel=\"nofollow\" target=\"_blank\">tagData.gz</a> (1.43Kb).</span>\n<pre>tagCloud(tagData)\n# use tagCloud(tagData, SWFPath = \"tagcloud.swf\", JSPath = \"swfobject.js\")\n#    if you have downloaded these files to your work directory, i.e. getwd(),\n#    this will save you a few seconds loading the flash</pre>\n<p>The above code will generate an HTML page like this:<br/>\n</p>\n<div id=\"tagCloudId\" style=\"text-align: center;\">Your browser does not support Flash or Javascript!</div>\n<p><br/>\nYou can adjust the parameters as you wish.</p>\n<h1>4. Other issues</h1>\n<p>There is still one more step to answer Tony’s original question, namely splitting the speech into single words and computing the frequency. This can be (roughly) done by <code>strsplit(..., split = \" \")</code> and <code>table()</code>.</p>\n<p>Encoding problems may exist in the above code, but <code>URLencode(tagXML)</code> could be of help.</p>\n<p>Only Latin characters are supported, but there’s possibility to modify the Flash source file to support other languages. See <a href=\"http://www.roytanck.com/2008/03/15/wp-cumulus-released/\" rel=\"nofollow\" target=\"_blank\">Roy Tanck’s post</a> for more information.</p>\n<p>Other R resources I know so far:</p>\n<ul>\n<li>The R package <a href=\"http://r-forge.r-project.org/projects/r4x/\" rel=\"nofollow\" target=\"_blank\" title=\"R4X package\"><code>R4X</code></a> by <a href=\"http://romainfrancois.blog.free.fr\" rel=\"nofollow\" target=\"_blank\" title=\"Blog\">Romain Fran?ois</a>: you can generate an HTML page containing the tags with <em>dynamic</em> classes attached to the <code>&lt;span&gt;</code> tags (install the package and read its vignette: <code>install.packages('R4X', repos='http://r-forge.r-project.org'); vignette('r4xslides', package='R4X')</code>)</li>\n<li>The R package <a href=\"http://www.rforge.net/snippets/\" rel=\"nofollow\" target=\"_blank\" title=\"package snippets\"><code>snippets</code></a> by <a href=\"http://simon.urbanek.info/\" rel=\"nofollow\" target=\"_blank\" title=\"Homepage\">Simon Urbanek</a>: there is a function <code>cloud()</code> to create word cloud; words are arranged from top to bottom and left to right</li>\n</ul>\n<h2 class=\"related_post_title\">Related Posts</h2><ul class=\"related_post\"><li><a href=\"http://yihui.name/en/2009/12/happy-new-year-with-r/\" rel=\"nofollow\" target=\"_blank\" title=\"Happy New Year with R\">Happy New Year with R</a></li><li><a href=\"http://yihui.name/en/2009/12/merry-christmas-using-r/\" rel=\"nofollow\" target=\"_blank\" title=\"Merry Christmas Using R\">Merry Christmas Using R</a></li><li><a href=\"http://yihui.name/en/2009/06/simulation-of-burning-fire-in-r/\" rel=\"nofollow\" target=\"_blank\" title=\"Simulation of Burning Fire in R\">Simulation of Burning Fire in R</a></li><li><a href=\"http://yihui.name/en/2009/11/create-animations-in-pdf-documents-using-r/\" rel=\"nofollow\" target=\"_blank\" title=\"Create Animations in PDF Documents Using R\">Create Animations in PDF Documents Using R</a></li><li><a href=\"http://yihui.name/en/2009/10/some-interesting-packages-in-r-swfdevice-rgoogletrends-flashmxml-svgannotation/\" rel=\"nofollow\" target=\"_blank\" title=\"Some Interesting Packages in R: swfDevice, RGoogleTrends, FlashMXML, SVGAnnotation\">Some Interesting Packages in R: swfDevice, RGoogleTrends, FlashMXML, SVGAnnotation</a></li></ul>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://yihui.name/en/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/\"> Keep on Fighting! » R Language</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n<div class=\"post-tags clearfix\"><ul><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/computer-science/\" rel=\"tag\">Computer Science</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/featured/\" rel=\"tag\">Featured</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/flash/\" rel=\"tag\">Flash</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/gorjanc-gregor/\" rel=\"tag\">Gorjanc Gregor</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/javascript/\" rel=\"tag\">JavaScript</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/maptools/\" rel=\"tag\">maptools</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/pointlabel/\" rel=\"tag\">pointLabel()</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/r-language/\" rel=\"tag\">R Language</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/r-programming/\" rel=\"tag\">R Programming</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/r4x/\" rel=\"tag\">R4X</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/romain-francois/\" rel=\"tag\">Romain Francois</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/simon-urbanek/\" rel=\"tag\">Simon Urbanek</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/snippets/\" rel=\"tag\">snippets</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/swfobject/\" rel=\"tag\">SWFObject</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/tag-cloud/\" rel=\"tag\">Tag Cloud</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/wordpress/\" rel=\"tag\">wordpress</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/wp-cumulus/\" rel=\"tag\">wp-cumulus</a></li></ul></div></article>",
    "main_text": "Creating Tag Cloud Using R and Flash / JavaScript (SWFObject)\nPosted on\nJune 10, 2009\nby\nYihui Xie\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nKeep on Fighting! » R Language\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nT\nag cloud is a bunch of words drawn in a graph with their sizes proportional to their frequency; it’s widely used in blogs to visualize tags. We can observe important words quickly from a tag cloud, as they often appear in large fontsize. Tony N. Brown asked how to “\ngraphically represent frequency of words in a speech\n” the other day in R-help list, which is actually a problem about the tag cloud:\nI recently saw a graph on television that displayed selected words/phrases in a speech scaled in size according to their frequency. So words/phrases that were often used appeared large and words that were rarely used appeared small. […]\nMarc Schwartz mentioned that\nGorjanc Gregor\nhas done\nsome work\nyears ago using R (in grid graphics). The obstacle of creating tag cloud in R, as Gorjanc wrote, lies in deciding the placement of words, and it would be much easier for other applications such as browsers to arrange the texts. That’s true — there have already been a lot of mature programs to deal with tag cloud. One of them is the\nwp-cumulus\nplugin for WordPress, which makes use of a Flash object to generate the tag cloud, and it has fantastic 3D rotation effect of the cloud.\n1. Arranging text labels with\npointLabel()\nBefore introducing how to port the plugin into R, I’d like to introduce an R function\npointLabel()\nin\nmaptools\npackage and it can partially solve the problem of arranging text labels in a plot (using simulated annealing or genetic algorithm). Here is a simulated example:\nSimulated Tag Cloud with R function pointLabel() in maptools\nlibrary(maptools)\nset.seed(123)\nx = runif(19)\ny = runif(19)\nw = c(\"R\", \"is\", \"free\", \"software\", \"and\", \"comes\",\n    \"with\", \"ABSOLUTELY\", \"NO\", \"WARRANTY\", \"You\", \"are\", \"welcome\",\n    \"to\", \"redistribute\", \"it\", \"under\", \"certain\", \"conditions\")\npar(ann = FALSE, xpd = NA, mar = rep(2, 4))\nplot(x, y, type = \"n\", axes = FALSE)\npointLabel(x, y, w, cex = runif(19, 1, 5))\nI was fortunate to get a very neat graph with no labels overlapping, but I don’t think this is a good solution, as it doesn’t take care of the initial locations of the words. My rough idea about deciding the initial locations is to sample on circles with radii proportional to the frequency, i.e. let\nand\nwhere\n. In this case, important words will be placed near the center of the plot.\n2. Creating tag cloud in a Flash movie using R\nThe problem becomes quite easy with a Flash movie\ntagcloud.swf\nand a JavaScript program\nswfobject.js\n. The mechanism, briefly speaking, is that the tag information is passed to the Flash object by JavaScript, and the Flash object will read the variable\ntagcloud\nwhere the sizes, colors and hyperlinks of tags are stored. Finally the tags are visualized like rotating cloud.\nIt’s not difficult to pass the tag information to JavaScript in pure text. Below is the function which will create an HTML page by default with a tag cloud Flash movie inside it:\nDownload the source code:\ntagCloud.r.gz\n(1.18Kb)\n#------------------------------------------------------------------------------#\n# generating tag cloud in R using Flash and SWFObject                          #\n# tagData: a data.frame containing columns 'tag', 'link', 'count' and optional #\n#     columns 'color' and 'hicolor'                                            #\n# other parameters are self-explaining if you are familiar with                #\n#     the WP plugin 'wp-cumulus'                                               #\n#------------------------------------------------------------------------------#\ntagCloud = function(tagData, htmlOutput = \"tagCloud.html\",\n    SWFPath, JSPath, divId = \"tagCloudId\", width = 600, height = 400,\n    transparent = FALSE, tcolor = \"333333\", tcolor2 = \"009900\",\n    hicolor = \"ff0000\", distr = \"true\", tspeed = 100, version = 9,\n    bgcolor = \"ffffff\", useXML = FALSE, htmlTitle = \"Tag Cloud\",\n    noFlashJS, target = NULL, scriptOnly = FALSE) {\n    if (missing(SWFPath))\n        SWFPath = \"http://www.roytanck.com/wp-content/plugins/wp-cumulus/tagcloud.swf\"\n    if (missing(JSPath))\n        JSPath = \"http://www.roytanck.com/wp-content/plugins/wp-cumulus/swfobject.js\"\n    if (missing(noFlashJS))\n        noFlashJS = \"This will be shown to users with no Flash or Javascript.\"\n    tagXML = sprintf(\"<tags>%s</tags>\", paste(sprintf(\"<a href='%s' style='%s'%s%s%s>%s</a>\",\n        tagData$link, tagData$count, if (is.null(target))\n            \"\"\n        else sprintf(\" target='%s'\", target), if (is.null(tagData$color))\n            \"\"\n        else ifelse(is.na(tagData$color), sprintf(\" color='0x%s'\",\n            tagData$color, \"\"), \"\"), if (is.null(tagData$hicolor))\n            \"\"\n        else ifelse(is.na(tagData$hicolor), sprintf(\" hicolor='0x%s'\",\n            tagData$hicolor, \"\"), \"\"), tagData$tag), collapse = \"\"))\n    if (useXML)\n        cat(tagXML, file = file.path(dirname(htmlOutput), \"tagCloud.xml\"))\n    cat(ifelse(scriptOnly, \"\",\n    sprintf(\"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\"\n    ?\"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\n    <html xmlns=\"http://www.w3.org/1999/xhtml\">\n    <head>\n    <title>%s</title>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n    </head>\n    <body>\",\n        htmlTitle)), sprintf(\"t<script type=\"text/javascript\" src=\"%s\"></script>\",\n        JSPath), sprintf(\"t<div id=\"%s\">%s</div>\", divId,\n        noFlashJS), sprintf(\"t<script type=\"text/javascript\">\n        ttvar so = new SWFObject(\"%s\", \"tagcloud\", \"%d\", \"%d\", \"%d\", \"#%s\");\n        %sttso.addVariable(\"mode\", \"tags\");nttso.addVariable(\"tcolor\", \"0x%s\");\n        ttso.addVariable(\"tcolor2\", \"0x%s\");nttso.addVariable(\"hicolor\", \"0x%s\");\n        ttso.addVariable(\"tspeed\", \"%d\");nttso.addVariable(\"distr\", \"%s\");\n        %snttso.write(\"%s\");ntt</script>n\",\n        SWFPath, width, height, version, bgcolor, ifelse(transparent,\n            \"ttso.addParam(\"wmode\", \"transparent\");n\",\n            \"\"), tcolor, tcolor2, hicolor, tspeed, distr, ifelse(useXML,\n            \"ttso.addVariable(\"xmlpath\", \"tagcloud.xml\");\",\n            sprintf(\"ttso.addVariable(\"tagcloud\", \"%s\");\",\n                tagXML)), divId), ifelse(scriptOnly, \"\", \"</body>nn</html>\"),\n        file = ifelse(scriptOnly, stdout(), htmlOutput), sep = \"n\")\n}\nThe main argument is\ntagData\nwhich is a data.frame containing at least three columns (\ntag\n,\nlink\nand\ncount\n) and looks like:\n> head(tagData)\n                tag                                        link count\n1 2D Kernel Density http://yihui.name/en/tag/2d-kernel-density/     1\n2         algorithm         http://yihui.name/en/tag/algorithm/     1\n3         Animation         http://yihui.name/en/tag/animation/    11\n4           AniWiki           http://yihui.name/en/tag/aniwiki/     2\n5            Arcing            http://yihui.name/en/tag/arcing/     1\n6          arrows()            http://yihui.name/en/tag/arrows/     1\nAdditional columns\ncolor\nand\nhicolor\nwill be used if they exist (hexadecimal numbers specifying RGB), e.g.\n> head(tagData)\n                tag                                        link count  color hicolor\n1 2D Kernel Density http://yihui.name/en/tag/2d-kernel-density/     1 2163bb  f0763d\n2         algorithm         http://yihui.name/en/tag/algorithm/     1 9f0f38  d825b1\n3         Animation         http://yihui.name/en/tag/animation/    11 800130  5b8d6a\n4           AniWiki           http://yihui.name/en/tag/aniwiki/     2 7ce1df  6607b0\n5            Arcing            http://yihui.name/en/tag/arcing/     1 df4e4a  f5cdf2\n6          arrows()            http://yihui.name/en/tag/arrows/     1 31f5fb  19d50d\n3. Example\nHere is an example on visualizing my blog tags. You may need the following\nswf\nand\njs\nfiles first if you wish the loading would be faster (by default your browser needs to download these two files from\nroytanck.com\nfirst).\nDownload the tag cloud Flash file\ntagcloud.swf\n(33.7Kb) and JavaScript\nswfoject.js\n(5.94Kb) as well as the data\ntagData.gz\n(1.43Kb).\ntagCloud(tagData)\n# use tagCloud(tagData, SWFPath = \"tagcloud.swf\", JSPath = \"swfobject.js\")\n#    if you have downloaded these files to your work directory, i.e. getwd(),\n#    this will save you a few seconds loading the flash\nThe above code will generate an HTML page like this:\nYour browser does not support Flash or Javascript!\nYou can adjust the parameters as you wish.\n4. Other issues\nThere is still one more step to answer Tony’s original question, namely splitting the speech into single words and computing the frequency. This can be (roughly) done by\nstrsplit(..., split = \" \")\nand\ntable()\n.\nEncoding problems may exist in the above code, but\nURLencode(tagXML)\ncould be of help.\nOnly Latin characters are supported, but there’s possibility to modify the Flash source file to support other languages. See\nRoy Tanck’s post\nfor more information.\nOther R resources I know so far:\nThe R package\nR4X\nby\nRomain Fran?ois\n: you can generate an HTML page containing the tags with\ndynamic\nclasses attached to the\n<span>\ntags (install the package and read its vignette:\ninstall.packages('R4X', repos='http://r-forge.r-project.org'); vignette('r4xslides', package='R4X')\n)\nThe R package\nsnippets\nby\nSimon Urbanek\n: there is a function\ncloud()\nto create word cloud; words are arranged from top to bottom and left to right\nRelated Posts\nHappy New Year with R\nMerry Christmas Using R\nSimulation of Burning Fire in R\nCreate Animations in PDF Documents Using R\nSome Interesting Packages in R: swfDevice, RGoogleTrends, FlashMXML, SVGAnnotation\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nKeep on Fighting! » R Language\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nComputer Science\nFeatured\nFlash\nGorjanc Gregor\nJavaScript\nmaptools\npointLabel()\nR Language\nR Programming\nR4X\nRomain Francois\nSimon Urbanek\nsnippets\nSWFObject\nTag Cloud\nwordpress\nwp-cumulus",
    "meta_description": "ag cloud is a bunch of words drawn in a graph with their sizes proportional to their frequency; it’s widely used in blogs to visualize tags. We can observe important words quickly from a tag cloud, as they often appear in large fontsize. Tony N. Brown asked how to “graphically represent frequency of words in [...]",
    "meta_keywords": "computer science,featured,flash,gorjanc gregor,javascript,maptools,pointlabel(),r language,r programming,r4x,romain francois,simon urbanek,snippets,swfobject,tag cloud,wordpress,wp-cumulus",
    "og_description": "ag cloud is a bunch of words drawn in a graph with their sizes proportional to their frequency; it’s widely used in blogs to visualize tags. We can observe important words quickly from a tag cloud, as they often appear in large fontsize. Tony N. Brown asked how to “graphically represent frequency of words in [...]",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2009/06/tagcloud-with-pointlabel1.png",
    "og_title": "Creating Tag Cloud Using R and Flash / JavaScript (SWFObject) | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 7.8,
    "sitemap_lastmod": "2011-05-11T21:15:54+00:00",
    "twitter_description": "ag cloud is a bunch of words drawn in a graph with their sizes proportional to their frequency; it’s widely used in blogs to visualize tags. We can observe important words quickly from a tag cloud, as they often appear in large fontsize. Tony N. Brown asked how to “graphically represent frequency of words in [...]",
    "twitter_title": "Creating Tag Cloud Using R and Flash / JavaScript (SWFObject) | R-bloggers",
    "url": "https://www.r-bloggers.com/2009/06/creating-tag-cloud-using-r-and-flash-javascript-swfobject/",
    "word_count": 1555
  }
}