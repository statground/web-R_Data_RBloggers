{
  "uuid": "abc7f690-af63-4e7e-adc6-580cfeb88980",
  "created_at": "2025-11-17 20:40:40",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2009/07/example-7-6-find-amazon-sales-rank-for-a-book/",
    "crawled_at": "2025-11-17T10:31:52.857267",
    "external_links": [
      {
        "href": "https://feedproxy.google.com/~r/SASandR/~3/4mAXJqdO7tM/example-76-find-amazon-sales-rank-for.html",
        "text": "SAS and R"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "http://www.math.smith.edu/sasr",
        "text": "book"
      },
      {
        "href": "http://www.math.smith.edu/sasr",
        "text": "our book"
      },
      {
        "href": "http://www.fonerbooks.com/surfing.htm",
        "text": "here"
      },
      {
        "href": "http://www.rampant-books.com/mgt_amazon_sales_rank.htm",
        "text": "here"
      },
      {
        "href": "https://feedproxy.google.com/~r/SASandR/~3/4mAXJqdO7tM/example-76-find-amazon-sales-rank-for.html",
        "text": "SAS and R"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Example 7.6: Find Amazon sales rank for a book | R-bloggers",
    "images": [
      {
        "alt": null,
        "base64": null,
        "src": "https://blogger.googleusercontent.com/tracker/1275149608391671670-21544219414822912?l=sas-and-r.blogspot.com"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://blogger.googleusercontent.com/tracker/1275149608391671670-21544219414822912?l=sas-and-r.blogspot.com"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://feeds.feedburner.com/~r/SASandR/~4/4mAXJqdO7tM"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://feeds.feedburner.com/~r/SASandR/~4/4mAXJqdO7tM"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/ken-kleinman/",
        "text": "Ken Kleinman"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/tag/amazon-sales-rank/",
        "text": "Amazon Sales rank"
      },
      {
        "href": "https://www.r-bloggers.com/tag/read-data-in-r/",
        "text": "Read data in R"
      },
      {
        "href": "https://www.r-bloggers.com/tag/read-data-in-sas/",
        "text": "Read data in SAS"
      },
      {
        "href": "https://www.r-bloggers.com/tag/read-from-url/",
        "text": "read from URL"
      },
      {
        "href": "https://www.r-bloggers.com/tag/string-manipulation/",
        "text": "string manipulation"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-454 post type-post status-publish format-standard hentry category-r-bloggers tag-amazon-sales-rank tag-read-data-in-r tag-read-data-in-sas tag-read-from-url tag-string-manipulation\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Example 7.6: Find Amazon sales rank for a book</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">July 20, 2009</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/ken-kleinman/\">Ken Kleinman</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://feedproxy.google.com/~r/SASandR/~3/4mAXJqdO7tM/example-76-find-amazon-sales-rank-for.html\"> SAS and R</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->In honor of Amazon’s official release date for the <a href=\"http://www.math.smith.edu/sasr\" rel=\"nofollow\" target=\"_blank\">book</a>, we offer this blog entry.<br/><br/>Both SAS and R can be used to find the Amazon Sales Rank for a book by downloading the desired web page and ferreting out the appropriate line.  This code is likely to break if Amazon’s page format is changed (but it worked as of July, 2009).  In this example, we find the sales rank for <a href=\"http://www.math.smith.edu/sasr\" rel=\"nofollow\" target=\"_blank\">our book</a>.  Some interesting information about interpreting the rank can be found <a href=\"http://www.fonerbooks.com/surfing.htm\" rel=\"nofollow\" target=\"_blank\">here</a> or <a href=\"http://www.rampant-books.com/mgt_amazon_sales_rank.htm\" rel=\"nofollow\" target=\"_blank\">here</a>.<br/><br/>Both SAS and R code below rely on section 1.1.3, ”Reading more complex text ﬁles.” Note that in the displayed SAS and R code, the long URL has been broken onto several lines, while it would have to be entered on a single line to run correctly.<br/><br/>In SAS, we assign the URL an internal name (section 1.1.6), then input the ﬁle using a <tt>data</tt> step.  We exclude all the lines which don’t contain the sales rank, using the <tt>count</tt> function (section 1.4.6).  We then extract the number using the <tt>substr</tt> function (section 1.4.3), with the <tt>find</tt> function (section 1.4.6) employed to locate the number within the line. The last step is to turn the extracted text (which contains a comma) into a numeric variable. <br/><br/><b>SAS</b><br/><pre>\nfilename amazon url \"https://www.amazon.com/\n         SAS-Management-Statistical-Analysis-Graphics/\n         dp/1420070576/ref=sr_1_1?ie=UTF8&amp;s=books\n         &amp;qid=1242233418&amp;sr=8-1\";\n\ndata test;\ninfile amazon truncover;\ninput @1 line $256.;\n   if count(line, \"Amazon.com Sales Rank\") ne 0;\n   rankchar = substr(line, find(line, \"#\")+1, \n        find(line, \"in Books\") - find(line, \"#\") - 2);\n   rank = input(rankchar, comma9.);\nrun;\n\nproc print data=test noobs; \n   var rank;\nrun;\n</pre><br/><br/><br/><b>R</b><br/><pre>\n# grab contents of web page\nurlcontents &lt;- readLines(\"https://www.amazon.com/\n           SAS-Management-Statistical-Analysis-Graphics/\n           dp/1420070576/ref=sr_1_1?ie=UTF8&amp;s=books\n           &amp;qid=1242233418&amp;sr=8-1\")\n# find line with sales rank\nlinenum &lt;- suppressWarnings(grep(\"Amazon.com Sales Rank:\",\n           urlcontents))\n# split line into multiple elements\nlinevals &lt;- strsplit(urlcontents[linenum], ' ')[[1]]\n# find element with sales rank number\nentry &lt;- grep(\"#\", linevals)   \n# snag that entry\ncharrank &lt;- linevals[entry]\n# kill '#' at start\ncharrank &lt;- substr(charrank, 2, nchar(charrank))  \n# remove commas\ncharrank &lt;- gsub(',','', charrank) \n# turn it into a numeric opject\nsalesrank &lt;- as.numeric(charrank)\ncat(\"salesrank=\",salesrank,\"\\n\")\n</pre><br/><br/>The resulting output (on July 16, 2009) is <br/><br/><b>SAS</b><br/><pre>\n                      rank\n       \n                      23476\n</pre><br/><br/><b>R</b><br/><pre>\nsalesrank= 23467 \n</pre><div class=\"blogger-post-footer\"><img alt=\"\" class=\"jetpack-lazy-image\" data-lazy-src=\"https://blogger.googleusercontent.com/tracker/1275149608391671670-21544219414822912?l=sas-and-r.blogspot.com&amp;is-pending-load=1\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/1275149608391671670-21544219414822912?l=sas-and-r.blogspot.com\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" width=\"1\"/><noscript><img alt=\"\" height=\"1\" src=\"https://blogger.googleusercontent.com/tracker/1275149608391671670-21544219414822912?l=sas-and-r.blogspot.com\" width=\"1\"/></noscript></div><img class=\"jetpack-lazy-image\" data-lazy-src=\"https://feeds.feedburner.com/~r/SASandR/~4/4mAXJqdO7tM?is-pending-load=1\" height=\"1\" loading=\"lazy\" src=\"https://feeds.feedburner.com/~r/SASandR/~4/4mAXJqdO7tM\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" width=\"1\"/><noscript><img height=\"1\" loading=\"lazy\" src=\"https://feeds.feedburner.com/~r/SASandR/~4/4mAXJqdO7tM\" width=\"1\"/></noscript>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://feedproxy.google.com/~r/SASandR/~3/4mAXJqdO7tM/example-76-find-amazon-sales-rank-for.html\"> SAS and R</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n<div class=\"post-tags clearfix\"><ul><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/amazon-sales-rank/\" rel=\"tag\">Amazon Sales rank</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/read-data-in-r/\" rel=\"tag\">Read data in R</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/read-data-in-sas/\" rel=\"tag\">Read data in SAS</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/read-from-url/\" rel=\"tag\">read from URL</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/string-manipulation/\" rel=\"tag\">string manipulation</a></li></ul></div></article>",
    "main_text": "Example 7.6: Find Amazon sales rank for a book\nPosted on\nJuly 20, 2009\nby\nKen Kleinman\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nSAS and R\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nIn honor of Amazon’s official release date for the\nbook\n, we offer this blog entry.\nBoth SAS and R can be used to find the Amazon Sales Rank for a book by downloading the desired web page and ferreting out the appropriate line.  This code is likely to break if Amazon’s page format is changed (but it worked as of July, 2009).  In this example, we find the sales rank for\nour book\n.  Some interesting information about interpreting the rank can be found\nhere\nor\nhere\n.\nBoth SAS and R code below rely on section 1.1.3, ”Reading more complex text ﬁles.” Note that in the displayed SAS and R code, the long URL has been broken onto several lines, while it would have to be entered on a single line to run correctly.\nIn SAS, we assign the URL an internal name (section 1.1.6), then input the ﬁle using a\ndata\nstep.  We exclude all the lines which don’t contain the sales rank, using the\ncount\nfunction (section 1.4.6).  We then extract the number using the\nsubstr\nfunction (section 1.4.3), with the\nfind\nfunction (section 1.4.6) employed to locate the number within the line. The last step is to turn the extracted text (which contains a comma) into a numeric variable.\nSAS\nfilename amazon url \"https://www.amazon.com/\n         SAS-Management-Statistical-Analysis-Graphics/\n         dp/1420070576/ref=sr_1_1?ie=UTF8&s=books\n         &qid=1242233418&sr=8-1\";\n\ndata test;\ninfile amazon truncover;\ninput @1 line $256.;\n   if count(line, \"Amazon.com Sales Rank\") ne 0;\n   rankchar = substr(line, find(line, \"#\")+1, \n        find(line, \"in Books\") - find(line, \"#\") - 2);\n   rank = input(rankchar, comma9.);\nrun;\n\nproc print data=test noobs; \n   var rank;\nrun;\nR\n# grab contents of web page\nurlcontents <- readLines(\"https://www.amazon.com/\n           SAS-Management-Statistical-Analysis-Graphics/\n           dp/1420070576/ref=sr_1_1?ie=UTF8&s=books\n           &qid=1242233418&sr=8-1\")\n# find line with sales rank\nlinenum <- suppressWarnings(grep(\"Amazon.com Sales Rank:\",\n           urlcontents))\n# split line into multiple elements\nlinevals <- strsplit(urlcontents[linenum], ' ')[[1]]\n# find element with sales rank number\nentry <- grep(\"#\", linevals)   \n# snag that entry\ncharrank <- linevals[entry]\n# kill '#' at start\ncharrank <- substr(charrank, 2, nchar(charrank))  \n# remove commas\ncharrank <- gsub(',','', charrank) \n# turn it into a numeric opject\nsalesrank <- as.numeric(charrank)\ncat(\"salesrank=\",salesrank,\"\\n\")\nThe resulting output (on July 16, 2009) is\nSAS\nrank\n       \n                      23476\nR\nsalesrank= 23467\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nSAS and R\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nAmazon Sales rank\nRead data in R\nRead data in SAS\nread from URL\nstring manipulation",
    "meta_description": "In honor of Amazon's official release date for the book, we offer this blog entry.Both SAS and R can be used to find the Amazon Sales Rank for a book by downloading the desired web page and ferreting out the appropriate line. This code is likely to br...",
    "meta_keywords": "amazon sales rank,read data in r,read data in sas,read from url,string manipulation",
    "og_description": "In honor of Amazon's official release date for the book, we offer this blog entry.Both SAS and R can be used to find the Amazon Sales Rank for a book by downloading the desired web page and ferreting out the appropriate line. This code is likely to br...",
    "og_image": "https://blogger.googleusercontent.com/tracker/1275149608391671670-21544219414822912?l=sas-and-r.blogspot.com",
    "og_title": "Example 7.6: Find Amazon sales rank for a book | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 2.8,
    "sitemap_lastmod": "2009-07-31T14:48:19+00:00",
    "twitter_description": "In honor of Amazon's official release date for the book, we offer this blog entry.Both SAS and R can be used to find the Amazon Sales Rank for a book by downloading the desired web page and ferreting out the appropriate line. This code is likely to br...",
    "twitter_title": "Example 7.6: Find Amazon sales rank for a book | R-bloggers",
    "url": "https://www.r-bloggers.com/2009/07/example-7-6-find-amazon-sales-rank-for-a-book/",
    "word_count": 566
  }
}