{
  "id": "cc5f5a9fdfdfe52db4f6ef27e5103d34d22463e4",
  "url": "https://www.r-bloggers.com/2007/02/working-with-ggplot/",
  "created_at_utc": "2025-11-17T20:41:49Z",
  "data": null,
  "raw_original": {
    "uuid": "e68867f7-ec14-4e04-b1e2-236e664ed210",
    "created_at": "2025-11-17 20:41:49",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2007/02/working-with-ggplot/",
      "crawled_at": "2025-11-17T10:57:58.006216",
      "external_links": [
        {
          "href": "http://agrarianresearch.org/blog/?p=73",
          "text": "V. » R"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "http://vikasrawal.files.wordpress.com/2007/02/sample-boxplot.jpg",
          "text": "Here"
        },
        {
          "href": "http://vikasrawal.files.wordpress.com/2007/02/sample-plot-2.jpg",
          "text": "This"
        },
        {
          "href": "http://www.technorati.com/tags/GNU-R",
          "text": "GNU-R"
        },
        {
          "href": "http://agrarianresearch.org/blog/?p=73",
          "text": "V. » R"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "Working with ggplot | R-bloggers",
      "images": [],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/vikasrawal/",
          "text": "vikasrawal"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/2007/02/working-with-ggplot/",
          "text": "ggplot"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-62253 post type-post status-publish format-standard hentry\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Working with ggplot</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">February 24, 2007</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/vikasrawal/\">vikasrawal</a></span>  in Uncategorized | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"http://agrarianresearch.org/blog/?p=73\"> V. » R</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0--><p>Hadley Wickham’s <a href=\"\" rel=\"nofollow\" target=\"_blank\">ggplot</a> is a very interesting package. It makes beautiful graphics, integrates well with some of the other packages to allow you to superimpose the plots of various types of estimates on plots of data. In particular, it uses colours very well. The default colour schemes are aesthetically pleasing. It allows a flexible use of colour schemes, both to separate categorical data and to shade continuous variables, that helps understanding data.</p>\n<p>I was recently working on data on household incomes from a stratified sample survey and wanted to look at boxplots of some variables. The problem, however, was that the plot functions in r-base do not allow the observations to be weighted. As a result, I could have only used the simple median, Q1 and Q3 to draw the plots.  That would be obviously misleading. ggplot package on R draws the weighted boxplots.</p>\n<p>The problem, however, is that the ggplot documentation, as of today, is rather incomplete. There are a lot of interesting features that are either not documented or hidden away in details. Hadley is working on a new version of ggplot, and a ggplot book. That should take care of these gaps!</p>\n<p>What saved me was that Hadley himself has been very active on the mailing list, and has been personally answering most of the queries on ggplot. He answered my queries as well, and we had a very useful exchange of e-mails. This ended in a code that made the weighted box plots as I wanted, and also put the values of the boxplot statistics on the plot. I was keen to see the numbers on the plot to be able to compare boxplots for different categories of observations. Thank you Hadley for being so accessible!! I subsequently improvised on the script Hadley suggested to make it also plot the weighted averages on the boxplots. The script was then converted into a function, which could be called into any R program to make the boxplots.</p>\n<p>library(ggplot)<br/>\nvjitter &lt;- function(dataset,col,xlab,ylab,v1,v2){<br/>\nggopt(axis.colour=”black”)<br/>\np &lt;- ggplot(dataset,aesthetics=list(x=x,y=y, weight=Multiplier,colour=col))<br/>\np$xlabel&lt;-xlab<br/>\np$ylabel&lt;-ylab<br/>\n(p&lt;-ggjitter(ggboxplot(p,colour=”black”,orientation=”vertical”)))<br/>\nsplit(dataset,dataset$x)-&gt;cl<br/>\ndots &lt;- do.call(rbind, lapply(cl, function(df) {<br/>\ndata.frame(<br/>\nx = df[1, ]$x,<br/>\ndots = boxplot_stats_weighted(df$y, weights=df$Multiplier)$stats<br/>\n)<br/>\n}))<br/>\n(p&lt;-ggtext(p, data=dots, aes=list(x=x, y=dots, label=format(dots, digits=2)), justification=”left”,colour=”blue”))<br/>\nmeans&lt;-do.call(rbind, lapply(cl,function(df){<br/>\ndata.frame(<br/>\nx=df[1,]$x,<br/>\nmean=weighted.mean(df$y,df$Multiplier)<br/>\n)<br/>\n}))<br/>\n(p&lt;-ggpoint(p, data=means, aes=list(x=x, y=mean), colour=”magenta”))<br/>\n(p&lt;-ggtext(p, data=means, aes=list(x=x, y=mean, label=format(mean, digits=2)), justification=”right”,colour=”magenta”))<br/>\npscontinuous(p,variable=”y”,range=c(v1,v2))<br/>\n}<br/>\n<a href=\"http://vikasrawal.files.wordpress.com/2007/02/sample-boxplot.jpg\" rel=\"nofollow\" target=\"_blank\"><br/>\nHere</a> is a sample boxplot created by the above function.</p>\n<p>This is, of course, a touched up version. I subsequently decided to display only the median (in blue) and the mean (in magenta) values. But that only required a minor modification in the code.</p>\n<p>The sticky issue, which I have not yet been able to clear, is that the code actually puts the numbers rights on the  vertical axis of the boxplot. The x-axis is a categorical axis, and it recognises only discrete values. I don’t know how to write the numbers to the right of the boxes. What I did was to print the files as postscript, and then edit the postscript file to push the numbers out of the boundaries of the boxes. I know it is not a neat way of doing things at all. But I had a deadline and I just had to get it done!! But I do really hope I will be able to find a better way of doing that. (Hadley, help please!!)</p>\n<p>As I became more comfortable with the ggplot way of doing things, I started playing around more. <a href=\"http://vikasrawal.files.wordpress.com/2007/02/sample-plot-2.jpg\" rel=\"nofollow\" target=\"_blank\">This</a> graph shows a scatterplot in which two continuous and two categorical variables, that is four variables in all, have been plotted simultaneously. I found it such an insightful way of looking at data!!</p>\n<p>There is one more feature with which I am still having trouble. ggquantile plots quantile regressions lines. Why is it that it plots curves rather than straight lines? See, for example, example (gguantile). Rescale the y axis using pscontinuous and you’ll see what we have are curves and not linear regression lines. I don’t know why is that so. Of course, I could estimate the quantile regressions using rq and then insert the lines using ggabline. But ggquantile is supposed to automate that. Isn’t it? Or have I not understood how to operate it?</p>\n<p>In any case, with all the powerful and aesthetically pleasing graphics, I am sure ggplot will become more popular with users of R, and we will see more discussion on it on the mailing list. I for one will surely be using a lot in my work.</p>\n<p>V.</p>\n<p><span class=\"technoratitag\">Technorati Tags: <a href=\"http://www.technorati.com/tags/GNU-R\" rel=\"nofollow\" target=\"_blank\">GNU-R</a></span></p>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://agrarianresearch.org/blog/?p=73\"> V. » R</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n</article>",
      "main_text": "Working with ggplot\nPosted on\nFebruary 24, 2007\nby\nvikasrawal\nin Uncategorized | 0 Comments\n[This article was first published on\nV. » R\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nHadley Wickham’s\nggplot\nis a very interesting package. It makes beautiful graphics, integrates well with some of the other packages to allow you to superimpose the plots of various types of estimates on plots of data. In particular, it uses colours very well. The default colour schemes are aesthetically pleasing. It allows a flexible use of colour schemes, both to separate categorical data and to shade continuous variables, that helps understanding data.\nI was recently working on data on household incomes from a stratified sample survey and wanted to look at boxplots of some variables. The problem, however, was that the plot functions in r-base do not allow the observations to be weighted. As a result, I could have only used the simple median, Q1 and Q3 to draw the plots.  That would be obviously misleading. ggplot package on R draws the weighted boxplots.\nThe problem, however, is that the ggplot documentation, as of today, is rather incomplete. There are a lot of interesting features that are either not documented or hidden away in details. Hadley is working on a new version of ggplot, and a ggplot book. That should take care of these gaps!\nWhat saved me was that Hadley himself has been very active on the mailing list, and has been personally answering most of the queries on ggplot. He answered my queries as well, and we had a very useful exchange of e-mails. This ended in a code that made the weighted box plots as I wanted, and also put the values of the boxplot statistics on the plot. I was keen to see the numbers on the plot to be able to compare boxplots for different categories of observations. Thank you Hadley for being so accessible!! I subsequently improvised on the script Hadley suggested to make it also plot the weighted averages on the boxplots. The script was then converted into a function, which could be called into any R program to make the boxplots.\nlibrary(ggplot)\nvjitter <- function(dataset,col,xlab,ylab,v1,v2){\nggopt(axis.colour=”black”)\np <- ggplot(dataset,aesthetics=list(x=x,y=y, weight=Multiplier,colour=col))\np$xlabel<-xlab\np$ylabel<-ylab\n(p<-ggjitter(ggboxplot(p,colour=”black”,orientation=”vertical”)))\nsplit(dataset,dataset$x)->cl\ndots <- do.call(rbind, lapply(cl, function(df) {\ndata.frame(\nx = df[1, ]$x,\ndots = boxplot_stats_weighted(df$y, weights=df$Multiplier)$stats\n)\n}))\n(p<-ggtext(p, data=dots, aes=list(x=x, y=dots, label=format(dots, digits=2)), justification=”left”,colour=”blue”))\nmeans<-do.call(rbind, lapply(cl,function(df){\ndata.frame(\nx=df[1,]$x,\nmean=weighted.mean(df$y,df$Multiplier)\n)\n}))\n(p<-ggpoint(p, data=means, aes=list(x=x, y=mean), colour=”magenta”))\n(p<-ggtext(p, data=means, aes=list(x=x, y=mean, label=format(mean, digits=2)), justification=”right”,colour=”magenta”))\npscontinuous(p,variable=”y”,range=c(v1,v2))\n}\nHere\nis a sample boxplot created by the above function.\nThis is, of course, a touched up version. I subsequently decided to display only the median (in blue) and the mean (in magenta) values. But that only required a minor modification in the code.\nThe sticky issue, which I have not yet been able to clear, is that the code actually puts the numbers rights on the  vertical axis of the boxplot. The x-axis is a categorical axis, and it recognises only discrete values. I don’t know how to write the numbers to the right of the boxes. What I did was to print the files as postscript, and then edit the postscript file to push the numbers out of the boundaries of the boxes. I know it is not a neat way of doing things at all. But I had a deadline and I just had to get it done!! But I do really hope I will be able to find a better way of doing that. (Hadley, help please!!)\nAs I became more comfortable with the ggplot way of doing things, I started playing around more.\nThis\ngraph shows a scatterplot in which two continuous and two categorical variables, that is four variables in all, have been plotted simultaneously. I found it such an insightful way of looking at data!!\nThere is one more feature with which I am still having trouble. ggquantile plots quantile regressions lines. Why is it that it plots curves rather than straight lines? See, for example, example (gguantile). Rescale the y axis using pscontinuous and you’ll see what we have are curves and not linear regression lines. I don’t know why is that so. Of course, I could estimate the quantile regressions using rq and then insert the lines using ggabline. But ggquantile is supposed to automate that. Isn’t it? Or have I not understood how to operate it?\nIn any case, with all the powerful and aesthetically pleasing graphics, I am sure ggplot will become more popular with users of R, and we will see more discussion on it on the mailing list. I for one will surely be using a lot in my work.\nV.\nTechnorati Tags:\nGNU-R\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nV. » R\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "Hadley Wickham’s ggplot is a very interesting package. It makes beautiful graphics, integrates well with some of the other packages to allow you to superimpose the plots of various types of estimates on plots of data. In particular, it uses colours very well. The default colour schemes are aesthetically pleasing. It allows a flexible use [...]",
      "meta_keywords": null,
      "og_description": "Hadley Wickham’s ggplot is a very interesting package. It makes beautiful graphics, integrates well with some of the other packages to allow you to superimpose the plots of various types of estimates on plots of data. In particular, it uses colours very well. The default colour schemes are aesthetically pleasing. It allows a flexible use [...]",
      "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
      "og_title": "Working with ggplot | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 5,
      "sitemap_lastmod": "2007-02-25T00:27:22+00:00",
      "twitter_description": "Hadley Wickham’s ggplot is a very interesting package. It makes beautiful graphics, integrates well with some of the other packages to allow you to superimpose the plots of various types of estimates on plots of data. In particular, it uses colours very well. The default colour schemes are aesthetically pleasing. It allows a flexible use [...]",
      "twitter_title": "Working with ggplot | R-bloggers",
      "url": "https://www.r-bloggers.com/2007/02/working-with-ggplot/",
      "word_count": 990
    }
  }
}