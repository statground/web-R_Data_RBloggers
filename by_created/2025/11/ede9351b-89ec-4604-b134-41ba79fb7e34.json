{
  "uuid": "ede9351b-89ec-4604-b134-41ba79fb7e34",
  "created_at": "2025-11-17 20:40:26",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2009/09/let%e2%80%99s-all-go-down-to-the-barplot/",
    "crawled_at": "2025-11-17T10:26:45.967064",
    "external_links": [
      {
        "href": "http://www.imachordata.com/?p=199",
        "text": "i'm a chordata! urochordata! » R"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://en.wikipedia.org/wiki/Analysis_of_variance",
        "text": "ANOVA"
      },
      {
        "href": "http://www.marecol.gu.se/Hemsidor/Lars_Gamfeldt/",
        "text": "friend of mine"
      },
      {
        "href": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/boxplot1.png?ssl=1",
        "text": null
      },
      {
        "href": "http://www.edwardtufte.com/tufte/",
        "text": "Edward Tufte"
      },
      {
        "href": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/barplot1.png?ssl=1",
        "text": null
      },
      {
        "href": "http://www.imachordata.com/?p=199",
        "text": "i'm a chordata! urochordata! » R"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Let’s All Go Down to the Barplot! | R-bloggers",
    "images": [
      {
        "alt": null,
        "base64": null,
        "src": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/boxplot1.png?w=450&ssl=1"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/boxplot1.png?w=450&ssl=1"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/barplot1.png?w=450&ssl=1"
      },
      {
        "alt": null,
        "base64": null,
        "src": "https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/barplot1.png?w=450&ssl=1"
      }
    ],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/jebyrnes/",
        "text": "jebyrnes"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/tag/ggplot2/",
        "text": "ggplot2"
      },
      {
        "href": "https://www.r-bloggers.com/tag/r/",
        "text": "R"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-48121 post type-post status-publish format-standard hentry category-r-bloggers tag-ggplot2 tag-r\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Let’s All Go Down to the Barplot!</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">September 3, 2009</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/jebyrnes/\">jebyrnes</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"http://www.imachordata.com/?p=199\"> i'm a chordata! urochordata! » R</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0--><p>I’m back for another pean to <a href=\"https://en.wikipedia.org/wiki/Analysis_of_variance\" rel=\"nofollow\" target=\"_blank\">ANOVA</a>-loving experimental ecology.  Barplots (or point-range plots – but which is better is a discussion for a different time) are the thing!  And a <a href=\"http://www.marecol.gu.se/Hemsidor/Lars_Gamfeldt/\" rel=\"nofollow\" target=\"_blank\">friend of mine</a> was recently asking me how to do a decent barplot with ggplot2 for data of moderate complexity (e.g., a 2-way ANOVA).</p>\n<p>So I tried it.</p>\n<p>And then I hit my head against a wall for a little while.</p>\n<p>And then I think I figured it out, so, I figured I’d post it so that there is less head-smashing in the world.</p>\n<p>To do a boxplot is simple.  And may statisticians would argue that they are more informative, so, really, we should abandon barplots.  Take the following example which looks at the highway milage of cars of various classes in two years.</p>\n<pre>library(ggplot2)\ndata(mpg)\n \n#a simple qplot with a boxplot geometry - n.b., I like the bw theme\nqplot(class, hwy, fill=factor(year), data=mpg, geom=\"boxplot\", position=\"dodge\")+theme_bw()</pre>\n<p>A few notes.  The x-axis her is class.  The fill attribute splits things by year (which is continuous, so we need to make it look like a factor).  And the final position=”dodge” really is the key.  It splits the bars for different years apart, and it shall come into play again in a moment.</p>\n<p>This code produces a perfectly nice boxplot:</p>\n<p><a href=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/boxplot1.png?ssl=1\" rel=\"nofollow\" target=\"_blank\"><img alt=\"\" class=\"aligncenter size-full wp-image-200 jetpack-lazy-image\" data-lazy-src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/boxplot1.png?w=450&amp;is-pending-load=1#038;ssl=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/boxplot1.png?w=450&amp;ssl=1\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"boxplot\"/><noscript><img alt=\"\" class=\"aligncenter size-full wp-image-200\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i1.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/boxplot1.png?w=450&amp;ssl=1\" title=\"boxplot\"/></noscript></a></p>\n<p>Lovely!  Unless you want a barplot.  For this, two things must happen.  First, you need to get the average and standard error values that you desire.  I do this using ddply (natch).  Second, you’ll need to add in some error bars using geom_errorbar.  In your geom_errorbar, you’ll need to invoke the position statement again.</p>\n<pre>#create a data frame with averages and standard deviations\nhwy.avg&lt;-ddply(mpg, c(\"class\", \"year\"), function(df)\nreturn(c(hwy.avg=mean(df$hwy), hwy.sd=sd(df$hwy))))\n \n#create the barplot component\navg.plot&lt;-qplot(class, hwy.avg, fill=factor(year), data=hwy.avg, geom=\"bar\", position=\"dodge\")\n \n#add error bars\navg.plot+geom_errorbar(aes(ymax=hwy.avg+hwy.sd, ymin=hwy.avg-hwy.sd), position=\"dodge\")+theme_bw()</pre>\n<p>This produces a perfectly serviceable and easily intelligible boxplot.  Only.  Only…  well, it’s time for a confession.</p>\n<p>I hate the whiskers on error bars.  Those weird horizontal things, they make my stomach uneasy.  And the default for geom_errorbar makes them huge and looming.  What purpose do they really serve?  OK, don’t answer that.  Still, they offend the little <a href=\"http://www.edwardtufte.com/tufte/\" rel=\"nofollow\" target=\"_blank\">Edward Tufte</a> in me (that must be very little, as I’m using barplots).</p>\n<p>So, I set about playing with width and other things to make whisker-less error bars.  Fortunately for me, there is geom_linerange, that does the same thing, but with a hitch.  It’s “dodge” needs to be told just how far to dodge.  I admit, here, I played about with values until I found ones that worked, so your milage may vary depending on how many treatment levels you have.  Either way, the resulting graph was rather nice.</p>\n<pre>#first, define the width of the dodge\ndodge &lt;- position_dodge(width=0.9) \n \n#now add the error bars to the plot\navg.plot+geom_linerange(aes(ymax=hwy.avg+hwy.sd, ymin=hwy.avg-hwy.sd), position=dodge)+theme_bw()</pre>\n<p>And voila!  So, enjoy yet another nifty capability of ggplot2!<br/>\n<a href=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/barplot1.png?ssl=1\" rel=\"nofollow\" target=\"_blank\"><img alt=\"\" class=\"aligncenter size-full wp-image-201 jetpack-lazy-image\" data-lazy-src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/barplot1.png?w=450&amp;is-pending-load=1#038;ssl=1\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/barplot1.png?w=450&amp;ssl=1\" srcset=\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\" title=\"barplot\"/><noscript><img alt=\"\" class=\"aligncenter size-full wp-image-201\" data-recalc-dims=\"1\" loading=\"lazy\" src=\"https://i0.wp.com/www.r-bloggers.com/wp-content/uploads/2009/09/barplot1.png?w=450&amp;ssl=1\" title=\"barplot\"/></noscript></a></p>\n<p>Great!  I will say this, though.  I have also played around with data with unequal representation of treatments (e.g., replace year with class or something in the previous example) – and, aside from making empty rows for missing treatment combinations, the plots are a little funny.  Bars expand to fill up space left by vacant treatments.  Try <code>qplot(class, hwy, data=mpg, fill= manufacturer, geom=\"boxplot\")</code> to see what I mean.  If anyone knows how to change this, so all bar widths are the same, I’d love to hear it.</p>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"http://www.imachordata.com/?p=199\"> i'm a chordata! urochordata! » R</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n<div class=\"post-tags clearfix\"><ul><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/ggplot2/\" rel=\"tag\">ggplot2</a></li><li class=\"round-corners\"><a href=\"https://www.r-bloggers.com/tag/r/\" rel=\"tag\">R</a></li></ul></div></article>",
    "main_text": "Let’s All Go Down to the Barplot!\nPosted on\nSeptember 3, 2009\nby\njebyrnes\nin\nR bloggers\n| 0 Comments\n[This article was first published on\ni'm a chordata! urochordata! » R\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nI’m back for another pean to\nANOVA\n-loving experimental ecology.  Barplots (or point-range plots – but which is better is a discussion for a different time) are the thing!  And a\nfriend of mine\nwas recently asking me how to do a decent barplot with ggplot2 for data of moderate complexity (e.g., a 2-way ANOVA).\nSo I tried it.\nAnd then I hit my head against a wall for a little while.\nAnd then I think I figured it out, so, I figured I’d post it so that there is less head-smashing in the world.\nTo do a boxplot is simple.  And may statisticians would argue that they are more informative, so, really, we should abandon barplots.  Take the following example which looks at the highway milage of cars of various classes in two years.\nlibrary(ggplot2)\ndata(mpg)\n \n#a simple qplot with a boxplot geometry - n.b., I like the bw theme\nqplot(class, hwy, fill=factor(year), data=mpg, geom=\"boxplot\", position=\"dodge\")+theme_bw()\nA few notes.  The x-axis her is class.  The fill attribute splits things by year (which is continuous, so we need to make it look like a factor).  And the final position=”dodge” really is the key.  It splits the bars for different years apart, and it shall come into play again in a moment.\nThis code produces a perfectly nice boxplot:\nLovely!  Unless you want a barplot.  For this, two things must happen.  First, you need to get the average and standard error values that you desire.  I do this using ddply (natch).  Second, you’ll need to add in some error bars using geom_errorbar.  In your geom_errorbar, you’ll need to invoke the position statement again.\n#create a data frame with averages and standard deviations\nhwy.avg<-ddply(mpg, c(\"class\", \"year\"), function(df)\nreturn(c(hwy.avg=mean(df$hwy), hwy.sd=sd(df$hwy))))\n \n#create the barplot component\navg.plot<-qplot(class, hwy.avg, fill=factor(year), data=hwy.avg, geom=\"bar\", position=\"dodge\")\n \n#add error bars\navg.plot+geom_errorbar(aes(ymax=hwy.avg+hwy.sd, ymin=hwy.avg-hwy.sd), position=\"dodge\")+theme_bw()\nThis produces a perfectly serviceable and easily intelligible boxplot.  Only.  Only…  well, it’s time for a confession.\nI hate the whiskers on error bars.  Those weird horizontal things, they make my stomach uneasy.  And the default for geom_errorbar makes them huge and looming.  What purpose do they really serve?  OK, don’t answer that.  Still, they offend the little\nEdward Tufte\nin me (that must be very little, as I’m using barplots).\nSo, I set about playing with width and other things to make whisker-less error bars.  Fortunately for me, there is geom_linerange, that does the same thing, but with a hitch.  It’s “dodge” needs to be told just how far to dodge.  I admit, here, I played about with values until I found ones that worked, so your milage may vary depending on how many treatment levels you have.  Either way, the resulting graph was rather nice.\n#first, define the width of the dodge\ndodge <- position_dodge(width=0.9) \n \n#now add the error bars to the plot\navg.plot+geom_linerange(aes(ymax=hwy.avg+hwy.sd, ymin=hwy.avg-hwy.sd), position=dodge)+theme_bw()\nAnd voila!  So, enjoy yet another nifty capability of ggplot2!\nGreat!  I will say this, though.  I have also played around with data with unequal representation of treatments (e.g., replace year with class or something in the previous example) – and, aside from making empty rows for missing treatment combinations, the plots are a little funny.  Bars expand to fill up space left by vacant treatments.  Try\nqplot(class, hwy, data=mpg, fill= manufacturer, geom=\"boxplot\")\nto see what I mean.  If anyone knows how to change this, so all bar widths are the same, I’d love to hear it.\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\ni'm a chordata! urochordata! » R\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nggplot2\nR",
    "meta_description": "I’m back for another pean to ANOVA-loving experimental ecology. Barplots (or point-range plots – but which is better is a discussion for a different time) are the thing! And a friend of mine was recently asking me how to do a decent barplot with ggplot2 for data of moderate complexity (e.g., a 2-way ANOVA). So [...]",
    "meta_keywords": "ggplot2,r",
    "og_description": "I’m back for another pean to ANOVA-loving experimental ecology. Barplots (or point-range plots – but which is better is a discussion for a different time) are the thing! And a friend of mine was recently asking me how to do a decent barplot with ggplot2 for data of moderate complexity (e.g., a 2-way ANOVA). So [...]",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2009/09/boxplot1.png",
    "og_title": "Let’s All Go Down to the Barplot! | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 4,
    "sitemap_lastmod": "2011-05-11T21:21:40+00:00",
    "twitter_description": "I’m back for another pean to ANOVA-loving experimental ecology. Barplots (or point-range plots – but which is better is a discussion for a different time) are the thing! And a friend of mine was recently asking me how to do a decent barplot with ggplot2 for data of moderate complexity (e.g., a 2-way ANOVA). So [...]",
    "twitter_title": "Let’s All Go Down to the Barplot! | R-bloggers",
    "url": "https://www.r-bloggers.com/2009/09/let%E2%80%99s-all-go-down-to-the-barplot/",
    "word_count": 801
  }
}