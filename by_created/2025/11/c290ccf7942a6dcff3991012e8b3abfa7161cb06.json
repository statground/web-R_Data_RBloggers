{
  "id": "c290ccf7942a6dcff3991012e8b3abfa7161cb06",
  "url": "https://www.r-bloggers.com/2008/11/call-c-from-r-and-r-from-c/",
  "created_at_utc": "2025-11-17T20:41:26Z",
  "data": null,
  "raw_original": {
    "uuid": "262aa0b7-1e66-4a32-aeaf-28766475cd0b",
    "created_at": "2025-11-17 20:41:26",
    "raw_json": {
      "article_author": null,
      "article_headline": null,
      "article_modified": null,
      "article_published": null,
      "article_section": null,
      "article_tags": null,
      "canonical_url": "https://www.r-bloggers.com/2008/11/call-c-from-r-and-r-from-c/",
      "crawled_at": "2025-11-17T10:48:55.402841",
      "external_links": [
        {
          "href": "https://quantitative-ecology.blogspot.com/2008/11/call-c-from-r-and-r-from-c.html",
          "text": "Quantitative Ecology"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        },
        {
          "href": "http://gsbportal.chicagogsb.edu/portal/server.pt/gateway/PTARGS_0_0_314_215_0_43/http%3B/gsbjob.chicagogsb.edu/Facultycourse08/FacultyDetail2.aspx?min_year=20084&max_year=20093&person_id=163822&fromSam=yes",
          "text": "Peter Rossi"
        },
        {
          "href": "http://gsbportal.chicagogsb.edu/portal/server.pt/gateway/PTARGS_0_0_306_205_0_43/http%3B/gsbjob.chicagogsb.edu/Facultycourse08/CourseProfAllDetail.aspx?course_ns=37904&section_id=all&ac_year=2008",
          "text": "Bayesian Applications in Marketing and MicroEconometrics"
        },
        {
          "href": "http://cran.r-project.org/doc/manuals/R-exts.html#System-and-foreign-language-interfaces",
          "text": "here"
        },
        {
          "href": "http://faculty.chicagogsb.edu/peter.rossi/teaching/37904/Adding%20Functions%20Written%20in%20C%20to%20R.pdf",
          "text": "here"
        },
        {
          "href": "https://quantitative-ecology.blogspot.com/2008/11/call-c-from-r-and-r-from-c.html",
          "text": "Quantitative Ecology"
        },
        {
          "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
          "text": "daily e-mail updates"
        },
        {
          "href": "https://www.r-project.org/",
          "text": "R"
        },
        {
          "href": "https://www.r-users.com/",
          "text": "Click here if you're looking to post or find an R/data-science job"
        },
        {
          "href": "http://r-posts.com/",
          "text": "here"
        }
      ],
      "h1_title": "R-bloggers",
      "html_title": "Call C from R and R from C | R-bloggers",
      "images": [],
      "internal_links": [
        {
          "href": "https://www.r-bloggers.com/author/forester/",
          "text": "Forester"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers"
        },
        {
          "href": "https://www.r-bloggers.com/contact-us/",
          "text": "here"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        },
        {
          "href": "https://www.r-bloggers.com/",
          "text": "R-bloggers.com"
        },
        {
          "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
          "text": "learning R"
        },
        {
          "href": "https://www.r-bloggers.com/add-your-blog/",
          "text": "click here"
        }
      ],
      "lang": "en-US",
      "main_html": "<article class=\"post-5286 post type-post status-publish format-standard hentry\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Call C from R and R from C</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">November 17, 2008</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/forester/\">Forester</a></span>  in Uncategorized | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<p class=\"syndicated-attribution\"><!-- \r\n<div style=\"min-height: 30px;\">\r\n[social4i size=\"small\" align=\"align-left\"]\r\n</div>\r\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\r\n[This article was first published on  <strong><a href=\"https://quantitative-ecology.blogspot.com/2008/11/call-c-from-r-and-r-from-c.html\"> Quantitative Ecology</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</div></p>\n\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->Several years ago, while a research associate at the University of Chicago, I had the privilege of sitting in on a course taught by <a href=\"http://gsbportal.chicagogsb.edu/portal/server.pt/gateway/PTARGS_0_0_314_215_0_43/http%3B/gsbjob.chicagogsb.edu/Facultycourse08/FacultyDetail2.aspx?min_year=20084&amp;max_year=20093&amp;person_id=163822&amp;fromSam=yes\" rel=\"nofollow\" target=\"_blank\">Peter Rossi</a>: <a href=\"http://gsbportal.chicagogsb.edu/portal/server.pt/gateway/PTARGS_0_0_306_205_0_43/http%3B/gsbjob.chicagogsb.edu/Facultycourse08/CourseProfAllDetail.aspx?course_ns=37904&amp;section_id=all&amp;ac_year=2008\" rel=\"nofollow\" target=\"_blank\">Bayesian Applications in Marketing and MicroEconometrics</a>. This course  — one I recommend to anyone at U Chicago who is interested in statistics — was an incredibly clear treatment of Bayesian statistics, but the aspect I appreciated most was Peter’s careful demonstration of Bayesian theory and methods using R.<br/><br/>One feature of R that I had not made use of up until that point was the ability to call compiled C and Fortran functions from within R (this makes loop-heavy Metropolis-Hastings samplers much, much faster). It turns out that you can also include the R libraries in C source code so that R functions (e.g., random number generators) can be easily accessed. The R-Cran website  has an excellent tutorial on how to develop R extensions (<a href=\"http://cran.r-project.org/doc/manuals/R-exts.html#System-and-foreign-language-interfaces\" rel=\"nofollow\" target=\"_blank\">here</a>), but I wanted to share an example Peter used in class because it is extremely brief, and for 95% of what I do, this is all I need.<br/><br/>As Peter writes, this is an incredibly inefficient way of simulating from the chisquare distribution, but it demonstrates the point. His more extensive writeup is located <a href=\"http://faculty.chicagogsb.edu/peter.rossi/teaching/37904/Adding%20Functions%20Written%20in%20C%20to%20R.pdf\" rel=\"nofollow\" target=\"_blank\">here</a>.<br/><br/>Save the following as testfun.c:<br/><div style=\"overflow: auto;\"><pre>#include &lt;R.h&gt;\n#include &lt;Rmath.h&gt;\n#include &lt;math.h&gt;\n/* Function written by Peter Rossi from the University of Chicago GSB                */\n/*http://faculty.chicagogsb.edu/peter.rossi/teaching/37904/Adding%20Functions%20Written%20in%20C%20to%20R.pdf */\n\n/* include standard C math library and R internal function declarations     */\nvoid mychisq(double *vec, double *chisq, int *nu)\n                                       /* void means return nothing */\n{\n  int i,iter;                          /* declare local vars */\n                                       /* all statements end in;     */\n  GetRNGstate();                       /* set random number seed     */\n  for (i=0 ; i &lt; *nu; ++i)\n                                       /* loop over elements of vec */\n                                       /*nu \"dereferences\" the pointer */\n  {                                    /* vectors start at 0 location!*/\n        vec[i] = rnorm(0.0,1.0);       /*use R function to draw normals */\n        Rprintf(\"%ith normal draw= %lf \\n\",(i+1),vec[i]);\n                                       /* print out results for \"debugging\"      */\n  }\n  *chisq=0.0;\n  iter=0;\n  while(iter &lt; *nu)                    /* \"while\" version of a loop */\n  {\n        if( iter == iter)\n               {*chisq=*chisq + vec[iter]*vec[iter];}\n                                       /* redundant if stmnt */\n        iter=iter+1;                   /* note: can't use ** */\n        /* if you want to be \"cool\" use iter += 1 */\n  }\n  PutRNGstate();                       /* write back ran number seed */\n}\n\n</pre><span style=\"font-size:85%;\"><span style=\"font-family:courier new;\"></span></span></div><br/><br/>To call this function in R, you first need to compile it. To do this you need all the standard compilers and libraries for your operating system. For Debian or Ubuntu, this should do it (if I missed a package, let me know in the comments):<br/><div style=\"overflow: auto;\"><pre>\n$ sudo aptitude update\n$ sudo aptitude install build-essential r-base-dev\n</pre><span style=\"font-size:85%;\"><span style=\"font-family:courier new;\"></span></span></div><br/>Now, you should be able to compile the function:<br/><div style=\"overflow: auto;\"><pre>\n$ R CMD SHLIB testfun.c\n</pre><span style=\"font-size:85%;\"><span style=\"font-family:courier new;\"></span></span></div><br/>If all goes well, you should see the files testfun.o and testfun.so in the directory. To test the function we will source the following R script into R:<br/><div style=\"overflow: auto;\"><pre>\ncall_mychisq&lt;-function(nu){\n##This function is just a wrapper for .C\nvector=double(nu); chisq=1\n.C(\"mychisq\",as.double(vector),res=as.double(chisq),as.integer(nu))$res\n}\n\n##Load the compiled code (you may need to include \n## the explicit file path if it is not local\n## NOTE: for Windows machines, you will want to load testfun.dll\" \ndyn.load(\"testfun.so\")\nresult&lt;-call_mychisq(10)\n\n##If you re-compile testfun.c, you must unload it\n## and then re-load it:\n## dyn.unload(\"testfun.so\")\n## dyn.load(\"testfun.so\")\n</pre><span style=\"font-size:85%;\"><span style=\"font-family:courier new;\"></span></span></div><br/>And get the following output:<br/><div style=\"overflow: auto;\"><pre>\n&gt; dyn.load(\"testfun.so\")\n&gt; result&lt;-call_mychisq(10) 1th normal draw= -1.031170  2th normal draw= -1.214103  3th normal draw= 0.002335  4th normal draw= 0.296146  5th normal draw= -0.908862  6th normal draw= -1.567820  7th normal draw= -0.079227  8th normal draw= -1.404414  9th normal draw= 0.616567  10th normal draw= -0.007855   &gt; result\n[1] 8.268028\n</pre><span style=\"font-size:85%;\"><span style=\"font-family:courier new;\"></span></span></div>\n\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 3.8.0-->\n<p class=\"syndicated-attribution\"><div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://quantitative-ecology.blogspot.com/2008/11/call-c-from-r-and-r-from-c.html\"> Quantitative Ecology</a></strong>.</div>\n<hr>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\r\n\r\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\r\n</hr></div></p> </div>\n</article>",
      "main_text": "Call C from R and R from C\nPosted on\nNovember 17, 2008\nby\nForester\nin Uncategorized | 0 Comments\n[This article was first published on\nQuantitative Ecology\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nSeveral years ago, while a research associate at the University of Chicago, I had the privilege of sitting in on a course taught by\nPeter Rossi\n:\nBayesian Applications in Marketing and MicroEconometrics\n. This course  — one I recommend to anyone at U Chicago who is interested in statistics — was an incredibly clear treatment of Bayesian statistics, but the aspect I appreciated most was Peter’s careful demonstration of Bayesian theory and methods using R.\nOne feature of R that I had not made use of up until that point was the ability to call compiled C and Fortran functions from within R (this makes loop-heavy Metropolis-Hastings samplers much, much faster). It turns out that you can also include the R libraries in C source code so that R functions (e.g., random number generators) can be easily accessed. The R-Cran website  has an excellent tutorial on how to develop R extensions (\nhere\n), but I wanted to share an example Peter used in class because it is extremely brief, and for 95% of what I do, this is all I need.\nAs Peter writes, this is an incredibly inefficient way of simulating from the chisquare distribution, but it demonstrates the point. His more extensive writeup is located\nhere\n.\nSave the following as testfun.c:\n#include <R.h>\n#include <Rmath.h>\n#include <math.h>\n/* Function written by Peter Rossi from the University of Chicago GSB                */\n/*http://faculty.chicagogsb.edu/peter.rossi/teaching/37904/Adding%20Functions%20Written%20in%20C%20to%20R.pdf */\n\n/* include standard C math library and R internal function declarations     */\nvoid mychisq(double *vec, double *chisq, int *nu)\n                                       /* void means return nothing */\n{\n  int i,iter;                          /* declare local vars */\n                                       /* all statements end in;     */\n  GetRNGstate();                       /* set random number seed     */\n  for (i=0 ; i < *nu; ++i)\n                                       /* loop over elements of vec */\n                                       /*nu \"dereferences\" the pointer */\n  {                                    /* vectors start at 0 location!*/\n        vec[i] = rnorm(0.0,1.0);       /*use R function to draw normals */\n        Rprintf(\"%ith normal draw= %lf \\n\",(i+1),vec[i]);\n                                       /* print out results for \"debugging\"      */\n  }\n  *chisq=0.0;\n  iter=0;\n  while(iter < *nu)                    /* \"while\" version of a loop */\n  {\n        if( iter == iter)\n               {*chisq=*chisq + vec[iter]*vec[iter];}\n                                       /* redundant if stmnt */\n        iter=iter+1;                   /* note: can't use ** */\n        /* if you want to be \"cool\" use iter += 1 */\n  }\n  PutRNGstate();                       /* write back ran number seed */\n}\nTo call this function in R, you first need to compile it. To do this you need all the standard compilers and libraries for your operating system. For Debian or Ubuntu, this should do it (if I missed a package, let me know in the comments):\n$ sudo aptitude update\n$ sudo aptitude install build-essential r-base-dev\nNow, you should be able to compile the function:\n$ R CMD SHLIB testfun.c\nIf all goes well, you should see the files testfun.o and testfun.so in the directory. To test the function we will source the following R script into R:\ncall_mychisq<-function(nu){\n##This function is just a wrapper for .C\nvector=double(nu); chisq=1\n.C(\"mychisq\",as.double(vector),res=as.double(chisq),as.integer(nu))$res\n}\n\n##Load the compiled code (you may need to include \n## the explicit file path if it is not local\n## NOTE: for Windows machines, you will want to load testfun.dll\" \ndyn.load(\"testfun.so\")\nresult<-call_mychisq(10)\n\n##If you re-compile testfun.c, you must unload it\n## and then re-load it:\n## dyn.unload(\"testfun.so\")\n## dyn.load(\"testfun.so\")\nAnd get the following output:\n> dyn.load(\"testfun.so\")\n> result<-call_mychisq(10) 1th normal draw= -1.031170  2th normal draw= -1.214103  3th normal draw= 0.002335  4th normal draw= 0.296146  5th normal draw= -0.908862  6th normal draw= -1.567820  7th normal draw= -0.079227  8th normal draw= -1.404414  9th normal draw= 0.616567  10th normal draw= -0.007855   > result\n[1] 8.268028\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nQuantitative Ecology\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
      "meta_description": "Several years ago, while a research associate at the University of Chicago, I had the privilege of sitting in on a course taught by Peter Rossi: Bayesian Applications in Marketing and MicroEconometrics. This course -- one I recommend to anyone at U Chicago who is interested in statistics -- was an incredibly clear treatment of Bayesian statistics, but the aspect I appreciated most was Peter's careful demonstration of Bayesian theory and methods using R.One feature of R that I had not made use of up until that point was the ability to call compiled C and Fortran functions from within R (this makes loop-heavy Metropolis-Hastings samplers much, much faster). It turns out that you can also include the R libraries in C source code so that R functions (e.g., random number generators) can be easily accessed. The R-Cran website has an excellent tutorial on how to develop R extensions (here), but I wanted to share an example Peter used in class because it is extremely brief, and for 95% of what I do, this is all I need.As Peter writes, this is an incredibly inefficient way of simulating from the chisquare distribution, but it demonstrates the point. His more extensive writeup is located here.Save the following as testfun.c: #include #include #include /* Function written by Peter Rossi from the University of Chicago GSB *//*http://faculty.chicagogsb.edu/peter.rossi/teaching/37904/Adding%20Functions%20Written%20in%20C%20to%20R.pdf *//* include standard C math library and R internal function declarations */void mychisq(double *vec, double *chisq, int *nu)/* void means return nothing */{int i,iter; /* declare local vars *//* all statements end in; */ GetRNGstate(); /* set random number seed */for (i=0 ; i < *nu; ++i)/* loop over elements of vec *//*nu \"dereferences\" the pointer */ { /* vectors start at 0 location!*/ vec[i] = rnorm(0.0,1.0); /*use R function to draw normals */ Rprintf(\"%ith normal draw= %lf \\n\",(i+1),vec[i]);/* print out results for \"debugging\" */ } *chisq=0.0; iter=0;while(iter < *nu) /* \"while\" version of a loop */ {if( iter == iter) {*chisq=*chisq + vec[iter]*vec[iter];}/* redundant if stmnt */ iter=iter+1; /* note: can't use ** *//* if you want to be \"cool\" use iter += 1 */ } PutRNGstate(); /* write back ran number seed */} To call this function in R, you first need to compile it. To do this you need all the standard compilers and libraries for your operating system. For Debian or Ubuntu, this should do it (if I missed a package, let me know in the comments): $ sudo aptitude update$ sudo aptitude install build-essential r-base-dev Now, you should be able to compile the function: $ R CMD SHLIB testfun.c If all goes well, you should see the files testfun.o and testfun.so in the directory. To test the function we will source the following R script into R: call_mychisq",
      "meta_keywords": null,
      "og_description": "Several years ago, while a research associate at the University of Chicago, I had the privilege of sitting in on a course taught by Peter Rossi: Bayesian Applications in Marketing and MicroEconometrics. This course -- one I recommend to anyone at U Chicago who is interested in statistics -- was an incredibly clear treatment of Bayesian statistics, but the aspect I appreciated most was Peter's careful demonstration of Bayesian theory and methods using R.One feature of R that I had not made use of up until that point was the ability to call compiled C and Fortran functions from within R (this makes loop-heavy Metropolis-Hastings samplers much, much faster). It turns out that you can also include the R libraries in C source code so that R functions (e.g., random number generators) can be easily accessed. The R-Cran website has an excellent tutorial on how to develop R extensions (here), but I wanted to share an example Peter used in class because it is extremely brief, and for 95% of what I do, this is all I need.As Peter writes, this is an incredibly inefficient way of simulating from the chisquare distribution, but it demonstrates the point. His more extensive writeup is located here.Save the following as testfun.c: #include #include #include /* Function written by Peter Rossi from the University of Chicago GSB *//*http://faculty.chicagogsb.edu/peter.rossi/teaching/37904/Adding%20Functions%20Written%20in%20C%20to%20R.pdf *//* include standard C math library and R internal function declarations */void mychisq(double *vec, double *chisq, int *nu)/* void means return nothing */{int i,iter; /* declare local vars *//* all statements end in; */ GetRNGstate(); /* set random number seed */for (i=0 ; i < *nu; ++i)/* loop over elements of vec *//*nu \"dereferences\" the pointer */ { /* vectors start at 0 location!*/ vec[i] = rnorm(0.0,1.0); /*use R function to draw normals */ Rprintf(\"%ith normal draw= %lf \\n\",(i+1),vec[i]);/* print out results for \"debugging\" */ } *chisq=0.0; iter=0;while(iter < *nu) /* \"while\" version of a loop */ {if( iter == iter) {*chisq=*chisq + vec[iter]*vec[iter];}/* redundant if stmnt */ iter=iter+1; /* note: can't use ** *//* if you want to be \"cool\" use iter += 1 */ } PutRNGstate(); /* write back ran number seed */} To call this function in R, you first need to compile it. To do this you need all the standard compilers and libraries for your operating system. For Debian or Ubuntu, this should do it (if I missed a package, let me know in the comments): $ sudo aptitude update$ sudo aptitude install build-essential r-base-dev Now, you should be able to compile the function: $ R CMD SHLIB testfun.c If all goes well, you should see the files testfun.o and testfun.so in the directory. To test the function we will source the following R script into R: call_mychisq",
      "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
      "og_title": "Call C from R and R from C | R-bloggers",
      "raw_jsonld_article": null,
      "reading_time_min": 3.9,
      "sitemap_lastmod": "2008-11-18T18:07:21+00:00",
      "twitter_description": "Several years ago, while a research associate at the University of Chicago, I had the privilege of sitting in on a course taught by Peter Rossi: Bayesian Applications in Marketing and MicroEconometrics. This course -- one I recommend to anyone at U Chicago who is interested in statistics -- was an incredibly clear treatment of Bayesian statistics, but the aspect I appreciated most was Peter's careful demonstration of Bayesian theory and methods using R.One feature of R that I had not made use of up until that point was the ability to call compiled C and Fortran functions from within R (this makes loop-heavy Metropolis-Hastings samplers much, much faster). It turns out that you can also include the R libraries in C source code so that R functions (e.g., random number generators) can be easily accessed. The R-Cran website has an excellent tutorial on how to develop R extensions (here), but I wanted to share an example Peter used in class because it is extremely brief, and for 95% of what I do, this is all I need.As Peter writes, this is an incredibly inefficient way of simulating from the chisquare distribution, but it demonstrates the point. His more extensive writeup is located here.Save the following as testfun.c: #include #include #include /* Function written by Peter Rossi from the University of Chicago GSB *//*http://faculty.chicagogsb.edu/peter.rossi/teaching/37904/Adding%20Functions%20Written%20in%20C%20to%20R.pdf *//* include standard C math library and R internal function declarations */void mychisq(double *vec, double *chisq, int *nu)/* void means return nothing */{int i,iter; /* declare local vars *//* all statements end in; */ GetRNGstate(); /* set random number seed */for (i=0 ; i < *nu; ++i)/* loop over elements of vec *//*nu \"dereferences\" the pointer */ { /* vectors start at 0 location!*/ vec[i] = rnorm(0.0,1.0); /*use R function to draw normals */ Rprintf(\"%ith normal draw= %lf \\n\",(i+1),vec[i]);/* print out results for \"debugging\" */ } *chisq=0.0; iter=0;while(iter < *nu) /* \"while\" version of a loop */ {if( iter == iter) {*chisq=*chisq + vec[iter]*vec[iter];}/* redundant if stmnt */ iter=iter+1; /* note: can't use ** *//* if you want to be \"cool\" use iter += 1 */ } PutRNGstate(); /* write back ran number seed */} To call this function in R, you first need to compile it. To do this you need all the standard compilers and libraries for your operating system. For Debian or Ubuntu, this should do it (if I missed a package, let me know in the comments): $ sudo aptitude update$ sudo aptitude install build-essential r-base-dev Now, you should be able to compile the function: $ R CMD SHLIB testfun.c If all goes well, you should see the files testfun.o and testfun.so in the directory. To test the function we will source the following R script into R: call_mychisq",
      "twitter_title": "Call C from R and R from C | R-bloggers",
      "url": "https://www.r-bloggers.com/2008/11/call-c-from-r-and-r-from-c/",
      "word_count": 778
    }
  }
}