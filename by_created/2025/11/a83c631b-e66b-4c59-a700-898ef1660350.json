{
  "uuid": "a83c631b-e66b-4c59-a700-898ef1660350",
  "created_at": "2025-11-22 19:57:45",
  "raw_json": {
    "article_author": null,
    "article_headline": null,
    "article_modified": null,
    "article_published": null,
    "article_section": null,
    "article_tags": null,
    "canonical_url": "https://www.r-bloggers.com/2025/09/creating-self-contained-executable-python-scripts-for-rendering-quarto-documents-using-the-jupyter-engine/",
    "crawled_at": "2025-11-22T10:43:27.444386",
    "external_links": [
      {
        "href": "https://remlapmot.github.io/post/2025/self-contained-python-script-for-quarto/",
        "text": "R | Dr Tom Palmer"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      },
      {
        "href": "https://remlapmot.github.io/post/2025/multi-engine-quarto/",
        "text": "effectively multi-engine Quarto documents"
      },
      {
        "href": "https://remlapmot.github.io/post/2025/nbstata-uv-venv/",
        "text": "uv virtual environments for the nbstata Jupyter kernel"
      },
      {
        "href": "https://www.rostrum.blog/posts/2025-08-11-uv-standalone/",
        "text": "post by Matt Dray"
      },
      {
        "href": "https://remlapmot.github.io/post/2025/quarto-profiles-for-tutorials/",
        "text": "post about using Quarto profiles for tutorial documents"
      },
      {
        "href": "https://docs.astral.sh/uv/guides/scripts/#creating-a-python-script",
        "text": "here"
      },
      {
        "href": "https://remlapmot.github.io/post/2025/self-contained-python-script-for-quarto/",
        "text": "R | Dr Tom Palmer"
      },
      {
        "href": "https://feedburner.google.com/fb/a/mailverify?uri=RBloggers",
        "text": "daily e-mail updates"
      },
      {
        "href": "https://www.r-project.org/",
        "text": "R"
      },
      {
        "href": "https://www.r-users.com/",
        "text": "Click here if you're looking to post or find an R/data-science job"
      },
      {
        "href": "http://r-posts.com/",
        "text": "here"
      }
    ],
    "h1_title": "R-bloggers",
    "html_title": "Creating self-contained executable Python scripts for rendering Quarto documents using the Jupyter engine | R-bloggers",
    "images": [],
    "internal_links": [
      {
        "href": "https://www.r-bloggers.com/author/r-dr-tom-palmer/",
        "text": "R | Dr Tom Palmer"
      },
      {
        "href": "https://www.r-bloggers.com/category/r-bloggers/",
        "text": "R bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers"
      },
      {
        "href": "https://www.r-bloggers.com/contact-us/",
        "text": "here"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      },
      {
        "href": "https://www.r-bloggers.com/",
        "text": "R-bloggers.com"
      },
      {
        "href": "https://www.r-bloggers.com/how-to-learn-r-2/",
        "text": "learning R"
      },
      {
        "href": "https://www.r-bloggers.com/add-your-blog/",
        "text": "click here"
      }
    ],
    "lang": "en-US",
    "main_html": "<article class=\"post-395151 post type-post status-publish format-standard hentry category-r-bloggers\">\n<header class=\"post-header\">\n<h1 class=\"entry-title\">Creating self-contained executable Python scripts for rendering Quarto documents using the Jupyter engine</h1>\n<p class=\"meta post-meta\">Posted on <span class=\"updated\">September 1, 2025</span>  by <span class=\"vcard author\"><a class=\"fn\" href=\"https://www.r-bloggers.com/author/r-dr-tom-palmer/\">R | Dr Tom Palmer</a></span>  in <a href=\"https://www.r-bloggers.com/category/r-bloggers/\" rel=\"category tag\">R bloggers</a> | 0 Comments</p>\n</header>\n<div class=\"entry clearfix\">\n<!-- \n<div style=\"min-height: 30px;\">\n[social4i size=\"small\" align=\"align-left\"]\n</div>\n-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 12px;\">\n[This article was first published on  <strong><a href=\"https://remlapmot.github.io/post/2025/self-contained-python-script-for-quarto/\"> R | Dr Tom Palmer</a></strong>, and kindly contributed to <a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers</a>].  (You can report issue about the content on this page <a href=\"https://www.r-bloggers.com/contact-us/\">here</a>)\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div>\n\n<!-- Share buttons by mashshare.net - Version: 4.0.47--><h2 id=\"introduction\">Introduction</h2>\n<p>In previous posts I have covered creating \n<a href=\"https://remlapmot.github.io/post/2025/multi-engine-quarto/\" rel=\"nofollow\" target=\"_blank\">effectively multi-engine Quarto documents</a> and also how to use \n<a href=\"https://remlapmot.github.io/post/2025/nbstata-uv-venv/\" rel=\"nofollow\" target=\"_blank\">uv virtual environments for the nbstata Jupyter kernel</a> to run Quarto documents with Stata code. Hence by trivial extension we can use <code>uv</code> to manage the virutal environments for running Quarto documents using the <code>jupyter: python3</code> engine.</p>\n<p>The slight inconvenience about this approach when you are working on a collaborative project with new Python users is that you end up leaving a README or shell script with the required commands to activate the environment, install the nbstata kernel, and run Quarto. I sense this management of the virutal environment is a pain point for new Python users – who are likely wondering what on earth a virtual environment is. So I have been looking for a way to simplify this process for them.</p>\n<p>A recent \n<a href=\"https://www.rostrum.blog/posts/2025-08-11-uv-standalone/\" rel=\"nofollow\" target=\"_blank\">post by Matt Dray</a> about using uv to run self-contained executable Python scripts got me thinking. Could I produce a similar self-contained executable Python script to perform the rendering for Quarto documents using the Jupyter engine. Then my colleagues would only need to call the script as an executable at the command line. This would avoid them the trouble of managing the virtual environment.</p>\n<h2 id=\"the-self-contained-executable-python-script\">The self-contained executable Python script</h2>\n<p>I came up with the following Python script.</p>\n<pre>#!/usr/bin/env -S uv run --script\n# /// script\n# requires-python = \"&gt;=3.9\"\n# dependencies = [\n#     \"jupyterlab&gt;=4.4.3\",\n#     \"jupyterlab-stata-highlight2&gt;=0.1.2\",\n#     \"nbstata&gt;=0.8.3\",\n# ]\n# ///\nimport subprocess\n\ncmd0 = \"python -m nbstata.install --sys-prefix\"\nretval0 = subprocess.call(cmd0, shell=True)\nprint('returned value:', retval0)\n\ncmd1  = \"quarto render --profile stata-questions\"\nretval1 = subprocess.call(cmd1, shell=True)\nprint('returned value:', retval1)\n\ncmd2  = \"quarto render --profile stata-solutions\"\nretval2 = subprocess.call(cmd2, shell=True)\nprint('returned value:', retval2)\n</pre>\n<ul>\n<li>\n<p>The first line, the shebang ensures it is run by <code>uv run</code></p>\n</li>\n<li>\n<p>The metadata defining the Python environment is declared between the</p>\n<pre># /// script\n# ...\n# ///\n</pre>\n<ul>\n<li>If you don’t use Stata, say you are using the <code>jupyter: python3</code> engine then you can delete the <code>jupyterlab-stata-highlight2</code> and <code>nbstata</code> entries and the first group of 3 lines for <code>cmd0</code>.</li>\n<li>If you use additional Python packages in your code then you need to add them to the list.</li>\n</ul>\n</li>\n<li>\n<p>Then comes the actual code. These are simply system calls using the <em>subprocess</em> module. You can amend the number of calls and the calls themselves inside the string quotes as required. I am recreating some of the rendering commands in my recent \n<a href=\"https://remlapmot.github.io/post/2025/quarto-profiles-for-tutorials/\" rel=\"nofollow\" target=\"_blank\">post about using Quarto profiles for tutorial documents</a>. It’s worth pointing out that I haven’t used the Python quarto package here as it’s currently slightly too limited for my use (I’m not sure it can render profiles).</p>\n</li>\n</ul>\n<p>Save the script in a file, say <em>render</em>, then make it executable with</p>\n<pre>chmod +x render\n</pre>\n<p>Then all my colleagues need to do is run it with</p>\n<pre>./render\n</pre>\n<p>Of course uv and Quarto need to be installed and be on their <code>PATH</code>, and Stata needs to be installed locally when using that. For my colleagues using Windows, they need to run this from a Git Bash shell rather than from Powershell or CMD shell (for the shebang line to work).</p>\n<p>If you are only using the Quarto knitr engine then you don’t need this script because you don’t need Jupyter.</p>\n<p>And for more information about uv Python scripts, the full documentation is \n<a href=\"https://docs.astral.sh/uv/guides/scripts/#creating-a-python-script\" rel=\"nofollow\" target=\"_blank\">here</a>.</p>\n<h2 id=\"summary\">Summary</h2>\n<p>I have shown how to make a self-contained executable Python script to render Quarto documents using the Jupyter engine which automatically manage their own virtual environment. This means users don’t have to manage the virtual environment themselves, which can be a pain point for new Python users.</p>\n<div class=\"jp-relatedposts\" id=\"jp-relatedposts\">\n<h3 class=\"jp-relatedposts-headline\"><em>Related</em></h3>\n</div>\n<!-- Share buttons by mashshare.net - Version: 4.0.47-->\n<div style=\"border: 1px solid; background: none repeat scroll 0 0 #EDEDED; margin: 1px; font-size: 13px;\">\n<div style=\"text-align: center;\">To <strong>leave a comment</strong> for the author, please follow the link and comment on their blog: <strong><a href=\"https://remlapmot.github.io/post/2025/self-contained-python-script-for-quarto/\"> R | Dr Tom Palmer</a></strong>.</div>\n<hr/>\n<a href=\"https://www.r-bloggers.com/\" rel=\"nofollow\">R-bloggers.com</a> offers <strong><a href=\"https://feedburner.google.com/fb/a/mailverify?uri=RBloggers\" rel=\"nofollow\">daily e-mail updates</a></strong> about <a href=\"https://www.r-project.org/\" rel=\"nofollow\" title=\"The R Project for Statistical Computing\">R</a> news and tutorials about <a href=\"https://www.r-bloggers.com/how-to-learn-r-2/\" rel=\"nofollow\" title=\"R tutorials\">learning R</a> and many other topics. <a href=\"https://www.r-users.com/\" rel=\"nofollow\" title=\"Data science jobs\">Click here if you're looking to post or find an R/data-science job</a>.\n\n<hr/>Want to share your content on R-bloggers?<a href=\"https://www.r-bloggers.com/add-your-blog/\" rel=\"nofollow\"> click here</a> if you have a blog, or <a href=\"http://r-posts.com/\" rel=\"nofollow\"> here</a> if you don't.\n</div> </div>\n</article>",
    "main_text": "Creating self-contained executable Python scripts for rendering Quarto documents using the Jupyter engine\nPosted on\nSeptember 1, 2025\nby\nR | Dr Tom Palmer\nin\nR bloggers\n| 0 Comments\n[This article was first published on\nR | Dr Tom Palmer\n, and kindly contributed to\nR-bloggers\n].  (You can report issue about the content on this page\nhere\n)\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.\nIntroduction\nIn previous posts I have covered creating\neffectively multi-engine Quarto documents\nand also how to use\nuv virtual environments for the nbstata Jupyter kernel\nto run Quarto documents with Stata code. Hence by trivial extension we can use\nuv\nto manage the virutal environments for running Quarto documents using the\njupyter: python3\nengine.\nThe slight inconvenience about this approach when you are working on a collaborative project with new Python users is that you end up leaving a README or shell script with the required commands to activate the environment, install the nbstata kernel, and run Quarto. I sense this management of the virutal environment is a pain point for new Python users – who are likely wondering what on earth a virtual environment is. So I have been looking for a way to simplify this process for them.\nA recent\npost by Matt Dray\nabout using uv to run self-contained executable Python scripts got me thinking. Could I produce a similar self-contained executable Python script to perform the rendering for Quarto documents using the Jupyter engine. Then my colleagues would only need to call the script as an executable at the command line. This would avoid them the trouble of managing the virtual environment.\nThe self-contained executable Python script\nI came up with the following Python script.\n#!/usr/bin/env -S uv run --script\n# /// script\n# requires-python = \">=3.9\"\n# dependencies = [\n#     \"jupyterlab>=4.4.3\",\n#     \"jupyterlab-stata-highlight2>=0.1.2\",\n#     \"nbstata>=0.8.3\",\n# ]\n# ///\nimport subprocess\n\ncmd0 = \"python -m nbstata.install --sys-prefix\"\nretval0 = subprocess.call(cmd0, shell=True)\nprint('returned value:', retval0)\n\ncmd1  = \"quarto render --profile stata-questions\"\nretval1 = subprocess.call(cmd1, shell=True)\nprint('returned value:', retval1)\n\ncmd2  = \"quarto render --profile stata-solutions\"\nretval2 = subprocess.call(cmd2, shell=True)\nprint('returned value:', retval2)\nThe first line, the shebang ensures it is run by\nuv run\nThe metadata defining the Python environment is declared between the\n# /// script\n# ...\n# ///\nIf you don’t use Stata, say you are using the\njupyter: python3\nengine then you can delete the\njupyterlab-stata-highlight2\nand\nnbstata\nentries and the first group of 3 lines for\ncmd0\n.\nIf you use additional Python packages in your code then you need to add them to the list.\nThen comes the actual code. These are simply system calls using the\nsubprocess\nmodule. You can amend the number of calls and the calls themselves inside the string quotes as required. I am recreating some of the rendering commands in my recent\npost about using Quarto profiles for tutorial documents\n. It’s worth pointing out that I haven’t used the Python quarto package here as it’s currently slightly too limited for my use (I’m not sure it can render profiles).\nSave the script in a file, say\nrender\n, then make it executable with\nchmod +x render\nThen all my colleagues need to do is run it with\n./render\nOf course uv and Quarto need to be installed and be on their\nPATH\n, and Stata needs to be installed locally when using that. For my colleagues using Windows, they need to run this from a Git Bash shell rather than from Powershell or CMD shell (for the shebang line to work).\nIf you are only using the Quarto knitr engine then you don’t need this script because you don’t need Jupyter.\nAnd for more information about uv Python scripts, the full documentation is\nhere\n.\nSummary\nI have shown how to make a self-contained executable Python script to render Quarto documents using the Jupyter engine which automatically manage their own virtual environment. This means users don’t have to manage the virtual environment themselves, which can be a pain point for new Python users.\nRelated\nTo\nleave a comment\nfor the author, please follow the link and comment on their blog:\nR | Dr Tom Palmer\n.\nR-bloggers.com\noffers\ndaily e-mail updates\nabout\nR\nnews and tutorials about\nlearning R\nand many other topics.\nClick here if you're looking to post or find an R/data-science job\n.\nWant to share your content on R-bloggers?\nclick here\nif you have a blog, or\nhere\nif you don't.",
    "meta_description": "Introduction In previous posts I have covered creating effectively multi-engine Quarto documents and also how to use uv virtual environments for the nbstata Jupyter kernel to run Quarto documents with Stata code. Hence by trivial extension we can use...",
    "meta_keywords": null,
    "og_description": "Introduction In previous posts I have covered creating effectively multi-engine Quarto documents and also how to use uv virtual environments for the nbstata Jupyter kernel to run Quarto documents with Stata code. Hence by trivial extension we can use...",
    "og_image": "https://www.r-bloggers.com/wp-content/uploads/2016/04/R_02_2016-05-01.png",
    "og_title": "Creating self-contained executable Python scripts for rendering Quarto documents using the Jupyter engine | R-bloggers",
    "raw_jsonld_article": null,
    "reading_time_min": 3.9,
    "sitemap_lastmod": null,
    "twitter_description": "Introduction In previous posts I have covered creating effectively multi-engine Quarto documents and also how to use uv virtual environments for the nbstata Jupyter kernel to run Quarto documents with Stata code. Hence by trivial extension we can use...",
    "twitter_title": "Creating self-contained executable Python scripts for rendering Quarto documents using the Jupyter engine | R-bloggers",
    "url": "https://www.r-bloggers.com/2025/09/creating-self-contained-executable-python-scripts-for-rendering-quarto-documents-using-the-jupyter-engine/",
    "word_count": 777
  }
}